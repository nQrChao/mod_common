window.__require=function t(e,o,n){function i(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({ABallFactory:[function(t,e,o){"use strict";cc._RF.push(e,"7ab0a7MJH9Buayo4SNlauPq","ABallFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../R"),i=t("./NormalBall"),r=t("./BombBall"),s=t("./SteelBall"),a=t("./VariantBall"),c=t("./SameColorRemoveBall"),l=t("./IceBall"),u=function(){function t(){}return t.createBall=function(t,e){var o;t=parseInt(t);var u=cc.instantiate(n.R.baseBall);return(o=t>=1&&t<=8?u.addComponent(i.default):31==t?u.addComponent(r.default):30==t?u.addComponent(s.default):25==t?u.addComponent(a.default):26==t?u.addComponent(c.default):29==t?u.addComponent(l.default):u.addComponent(i.default)).initColor(t),o.level=e,u.attr({ballComponent:o}),u},t.getBallComponent=function(){return null},t}();o.default=u,cc._RF.pop()},{"../R":"R","./BombBall":"BombBall","./IceBall":"IceBall","./NormalBall":"NormalBall","./SameColorRemoveBall":"SameColorRemoveBall","./SteelBall":"SteelBall","./VariantBall":"VariantBall"}],AdapteTop:[function(t,e,o){"use strict";cc._RF.push(e,"d8126QDHWhL556n8+8vBKco","AdapteTop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){if(!cc.sys.isBrowser||cc.sys.isMobile){var t=cc.view.getFrameSize(),e=t.width;t.height/e>=2.16&&(this.node.height+=70)}},r([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],AimLineAdvance:[function(t,e,o){"use strict";cc._RF.push(e,"c5388WSSkNIFIrj4PpyCCCl","AimLineAdvance");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../framework/plugin_boosts/gamesys/PoolManager"),a=t("./Pop"),c=t("./R"),l=t("./Consts"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._aimLength=0,e._aimBallCount=0,e._aimBallOpacityStep=0,e._aimBallScaleStep=0,e._rotation=0,e._color=cc.Color.WHITE,e}return i(e,t),e.prototype.onLoad=function(){this.spritePool=new s.default(this.node,this.onCreateDot,this),this.spritePool.managed=!0,this.setRotation(0),this.setLength(600)},e.prototype.setLevel=function(t){this.level=t},e.prototype.setColor=function(t){this._color=t},e.prototype.onDestroy=function(){this.spritePool.clear()},e.prototype.onCreateDot=function(){return cc.instantiate(c.R.dotPrefab)},e.prototype.setLength=function(t){this._aimLength=t,this._aimBallCount=t/30,this._aimBallOpacityStep=255/this._aimBallCount,this._aimBallScaleStep=1/this._aimBallCount},e.prototype.checkCollision=function(t){if(t=this.node.convertToWorldSpaceAR(t),(t=this.level.node.convertToNodeSpaceAR(t)).x<-cc.visibleRect.width/2||t.x>cc.visibleRect.width/2)return[!0,1];for(var e=this.level.balls(),o=this.level.maxIndex,n=o;n>=o-18;n--){var i=e[n];if(i){var r=i.node.position;if(a.default.checkCollision(t.x,t.y,r.x,r.y,l.default.Ball_AIM_SQ))return[!0,0]}}return[!1,-1]},e.prototype.update=function(){},e.prototype.setRotation=function(t){this._rotation=t,this.aimRoutine()},e.prototype.aim=function(t,e,o){for(var n,i,r,s=this._aimBallCount,a=0;a<this._aimBallCount;a++){(l=e.mul(30*(a+1))).addSelf(t);var c=this.checkCollision(l);if(n=c[0],i=c[1],n){s=a,r=l;break}}for(s=Math.min(o,s),a=0;a<=s;a++){var l,u=this.spritePool.get(0);u.color=this._color,o-=1,(l=e.mul(30*a)).addSelf(t),u.setPosition(l)}o<=0||1==i&&(e=cc.v2(-e.x,e.y),this.aim(r,e,o))},e.prototype.aimRoutine=function(){if(this.node.active){this.spritePool.clearAlives();var t=cc.misc.degreesToRadians(90-this._rotation),e=cc.v2(Math.cos(t),Math.sin(t)),o=cc.v2(0,0);this.aim(o,e,this._aimBallCount)}},e.prototype.start=function(){},e.prototype.onEnable=function(){this.schedule(this.aimRoutine,1)},e.prototype.onDisable=function(){this.unschedule(this.aimRoutine)},r([p],e)}(cc.Component));o.default=f,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/PoolManager":"PoolManager","./Consts":"Consts","./Pop":"Pop","./R":"R"}],BallFactory:[function(t,e,o){"use strict";cc._RF.push(e,"1e911G/Iu9Pp4IRKac3DOZi","BallFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Pop"),i=t("../Ball"),r=t("./DyeBall"),s=t("./SplitBall"),a=t("./Boss"),c=t("./KeyBall"),l=t("./EmptyBall"),u=t("./GoldBall"),p=t("./RandomBall"),f=t("./DownBall"),h=t("./WoodBall"),d=t("./StoneBall"),y=t("../R"),_=function(){function t(){}return t.createBall=function(t){var e,o=cc.instantiate(y.R.baseBall);if(t=parseInt(t),n.default.isBase(t))e=o.addComponent(i.default);else if(n.default.isDye(t))e=o.addComponent(r.default);else if(n.default.isSplit(t))e=o.addComponent(s.default);else if(n.default.isBoss(t))e=o.addComponent(a.default);else switch(t){case 40:e=o.addComponent(c.default);break;case 33:e=o.addComponent(l.default);break;case 34:e=o.addComponent(u.default);break;case 32:e=o.addComponent(p.default);break;case 41:e=o.addComponent(f.default);break;case 27:e=o.addComponent(h.default);break;case 28:e=o.addComponent(d.default);break;default:e=o.addComponent(i.default)}return e.initColor(t),e},t}();o.default=_,cc._RF.pop()},{"../Ball":"Ball","../Pop":"Pop","../R":"R","./Boss":"Boss","./DownBall":"DownBall","./DyeBall":"DyeBall","./EmptyBall":"EmptyBall","./GoldBall":"GoldBall","./KeyBall":"KeyBall","./RandomBall":"RandomBall","./SplitBall":"SplitBall","./StoneBall":"StoneBall","./WoodBall":"WoodBall"}],Ball:[function(t,e,o){"use strict";cc._RF.push(e,"46c318QbJVCfKuOZoSHkOu+","Ball");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../../framework/plugin_boosts/gamesys/FSM"),c=t("./Consts"),l=t("./Pop"),u=t("./Sound"),p=t("../../framework/plugin_boosts/misc/SpriteFrameCache"),f=t("../../framework/plugin_boosts/gamesys/PsFxPlayer"),h=t("./R");(function(t){t[t.Normal=0]="Normal",t[t.Moving=1]="Moving",t[t.Activited=2]="Activited"})(s||(s={}));var d=cc._decorator,y=d.ccclass,_=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.color=0,e._originColor=0,e.speed=35,e.index=0,e.linkEnabled=!1,e.vel=null,e.level=null,e.fx_changeColor=null,e}return i(e,t),e.prototype.onLoad=function(){this.fsm=this.addComponent(a.default),this.fsm.init(this),this.fsm.addStates(s),this.fsm.enterState(s.Normal)},e.prototype.initColor=function(t){this.sprite=this.getComponent(cc.Sprite),this.color=parseInt(t),this._originColor=this.color,this.index=-1,this.setSpriteFrame(c.default.path.pp+t+".png"),this.linkEnabled=!0},e.prototype.reset=function(t){this.initColor(t),this.node.scale=c.default.ball_scale},e.prototype.changeColor=function(t){var e=this;this.fx_changeColor||(this.fx_changeColor=this.addComponent(f.default),this.fx_changeColor.prefab=h.R.fx_changeColor),p.default.instance.getSpriteFrame(c.default.path.pp+this.color+".png").then(function(t){e.fx_changeColor.spriteFrame=t,e.fx_changeColor.play()}),this.setSpriteFrame(c.default.path.pp+t+".png"),this.color=t},e.prototype.onDestroy=function(){this.fx_changeColor&&this.fx_changeColor.destroy()},e.prototype.setSpriteFrame=function(t){var e=this;p.default.instance.getSpriteFrame(t).then(function(t){e.sprite.spriteFrame=t}).catch(function(){console.log("not found color : "+e.color)})},e.prototype.setLinkEnabled=function(t){this.linkEnabled=t},e.prototype.release=function(){this.node.destroy()},e.prototype.removeSelf=function(){this.node.removeFromParent(),this.scheduleOnce(this.release,1)},e.prototype.changeXDir=function(){this.vel.x=-this.vel.x,u.default.Bound()},e.prototype.changeYDir=function(){this.vel.y=-this.vel.y,u.default.Bound()},e.prototype.onEnter_MovingState=function(){},e.prototype.onExit_MovingState=function(){},e.prototype.getPositionInLevel=function(){var t=this.node.getBoundingBoxToWorld();return this.level.node.convertToNodeSpaceAR(t.center)},e.prototype.onUpdate_MovingState=function(){var t=this.node.position,e=this.node.getBoundingBoxToWorld();((t=this.level.node.convertToNodeSpaceAR(e.center)).x<-cc.visibleRect.width/2+c.default.ball_width/2||t.x>cc.visibleRect.width/2-c.default.ball_width/2)&&this.changeXDir();var o=this.level.getTopY();if(t.y+c.default.ball_height>o){var n=this.level.cellAt(t.x,o-c.default.ball_height);if(!(n=this.level.newCellInfo(n.col,1)).ball)return void this.onCollided(null,n,t)}for(var i=this.level.balls(),r=this.level.maxIndex;r>=0;r--){var s=i[r];if(s){var a=s.node.position;if(l.default.checkCollision(t.x,t.y,a.x,a.y)){s.onCollided(this)||(n=this.level.getFitPosition(s,t))&&this.onCollided(s,n,t);break}}}this.node.x+=this.vel.x,this.node.y+=this.vel.y},e.prototype.drop=function(){},e.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},e.prototype.stopMoving=function(){this.fsm.changeState(s.Activited)},e.prototype.launch=function(t,e){console.log(">>>>>>>>>>>> Luanching Ball",this.color,t);var o=cc.misc.degreesToRadians(-t),n=cc.v2(Math.cos(o),Math.sin(o));this.vel=n.mul(this.speed),this.fsm.changeState(s.Moving),e||u.default.BubShoot()},e.prototype.onCollided=function(){return!1},e.prototype.onNeighbourInserted=function(){},e.prototype.isMoving=function(){return this.fsm.isInState(s.Moving)},r([y],e)}(cc.Component));o.default=_,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/FSM":"FSM","../../framework/plugin_boosts/gamesys/PsFxPlayer":"PsFxPlayer","../../framework/plugin_boosts/misc/SpriteFrameCache":"SpriteFrameCache","./Consts":"Consts","./Pop":"Pop","./R":"R","./Sound":"Sound"}],BombBall:[function(t,e,o){"use strict";cc._RF.push(e,"db335zphX9NA4jj69NYUqzT","BombBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Effect"),a=t("../Consts"),c=t("../Pop"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(t,e,o){this.stopMoving();var n=this.level.queryAroundBalls(e,1);for(var i in n=n.filter(function(t){return t.color!=a.default.ballTypes.stone&&!c.default.isBoss(t.color)}),s.default.bombBalls(n),s.default.bomb(o),this.level.processNonlinkedBalls(),n)n[i].onCollided(this);return this.removeSelf(),!0},e}(r.default);o.default=l,cc._RF.pop()},{"../Ball":"Ball","../Consts":"Consts","../Effect":"Effect","../Pop":"Pop"}],BoostsAction:[function(t,e,o){"use strict";cc._RF.push(e,"47da3PXgqdE55aSvY0ox9B4","BoostsAction");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Shake=o.V2ChangeAction=o.ValueChangeAction=void 0;var r=function(t){function e(e,o,n,i,r){var s=t.call(this)||this;return s.delta=s.sub(n,o),s.setDuration(e),s.callback=i,s.start=o,s.end=n,s.callbackTarget=r,s}return i(e,t),e.prototype.sub=function(t,e){return t-e},e.prototype.add=function(t,e){return t+e},e.prototype.mul=function(t,e){return t*e},e.prototype.update=function(t){t=this._computeEaseTime(t);var e=this.add(this.start,this.mul(this.delta,t));this.callback.call(this.callbackTarget,e)},e}(cc.ActionInterval);o.ValueChangeAction=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.sub=function(t,e){return t.sub(t,e)},e.prototype.add=function(t,e){return t.add(t,e)},e.prototype.mul=function(t,e){return t.mul(t,e)},e}(r);o.V2ChangeAction=s;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._initial_x=0,e._initial_y=0,e._strength_x=0,e._strength_y=0,e}return i(e,t),e.create=function(t,o,n){var i=new e;return i.initWithDuration(t,o,n),i},e.prototype.initWithDuration=function(t,e,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=e,this._strength_y=o,!0},e.prototype.fgRangeRand=function(t,e){return Math.random()*(e-t)+t},e.prototype.update=function(){var t=this.fgRangeRand(-this._strength_x,this._strength_x),e=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,e+this._initial_y)},e.prototype.startWithTarget=function(t){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=t.x,this._initial_y=t.y},e.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},e}(cc.ActionInterval);o.Shake=a,cc._RF.pop()},{}],Boss:[function(t,e,o){"use strict";cc._RF.push(e,"bd4a8VxNEVDo4WqgeJiGK7P","Boss");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../Ball"),c=t("../../../framework/plugin_boosts/utils/EventManager"),l=t("../../../framework/plugin_boosts/gamesys/FSM"),u=t("../Sound"),p=t("../R"),f=t("../Consts"),h=t("../Effect");(function(t){t[t.Normal=0]="Normal",t[t.Visible=1]="Visible"})(s||(s={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=0,e}return r(e,t),e.prototype.onLoad=function(){this.bossFSM=this.addComponent(l.default),this.bossFSM.init(this),this.bossFSM.addStates(s),this.bossFSM.enterState(s.Normal),c.event.on("Pop.onReady",this.onLevelReady,this),c.event.on("Pop.pause",this.pause,this),c.event.on("Pop.resume",this.resume,this)},e.prototype.initColor=function(o){t.prototype.initColor.call(this,o);var n=e.bossConfig[o];this.life=n.hp},e.prototype.onDestroy=function(){c.event.off("Pop.onReady",this.onLevelReady,this),c.event.off("Pop.pause",this.pause,this),c.event.off("Pop.resume",this.resume,this)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.start=function(){this.loadSkil(),this.level.updateBossHp(this.life)},e.prototype.onLevelReady=function(){this.bossFSM.changeState(s.Normal)},e.prototype.onEnter_VisibleState=function(t){u.default.BossCome(),t.setTimeout(1,function(){})},e.prototype.onUpdate_NormalState=function(){this.bossFSM.timeElapsed>10&&cc.Camera.main.canSee(this.node)&&this.bossFSM.changeState(s.Visible)},e.prototype.loadSkil=function(){var t=this,o=e.bossConfig[this.color];this.schedule(this.invoke_skill1,o.skill_1.cd);var n=0;this.schedule(function(){n%=o.skill_2.numbers.length,t.invoke_skill2(n)},o.skill_2.cd)},e.prototype.beHitback=function(){var t=cc.moveBy(.1,cc.v2(0,10)),e=cc.moveBy(.2,cc.v2(0,-10));this.node.runAction(cc.sequence(t,e))},e.prototype.onCollided=function(t){return h.default.play(0,p.R.fx_hitBoss,this.getWorldPosition()),this.onLifeLose(this.life),this.beHitback(),this.life<=0?(g.fadeAndDestroy(this.node,.3),this.level.play(p.R.fx_bossDead,this.getPositionInLevel()),t.removeSelf(),this.level.removeBallIndex(this),this.onDead()):(t.removeSelf(),this.scheduleOnce(this.invoke_skill,.2)),!0},e.prototype.onDead=function(){c.event.emit("Pop.onBossDead",this.getWorldPosition())},e.prototype.onLifeLose=function(){this.life=this.life-1,this.level.updateBossHp(this.life);var t=this.node.position;t.addSelf(cc.v2(0,-f.default.ball_width/2)),this.level.play(p.R.fx_hitBoss,t),u.default.BossAttacked()},e.prototype.invoke_skill=function(){for(var t=e.bossConfig[this.color],o=0;o<t.skill_0.number;o++){var n=this.level.queryValidEmptyIndices();if(0==n.length)return;var i=this.getRandomBallColor(),r=g.getRandomInArray(n);this.sendBall(i,r,this.node.position,this.skillFx)}},e.prototype.sendBall=function(t,e,o,n){var i=this,r=this.level.insertBall(e,t);if(r){var s=r.node.x,a=r.node.y;r.node.position=o,cc.v2(o.x-s,o.y-a).mag();var c=cc.moveTo(.5,cc.v2(s,a)).easing(cc.easeSineInOut()),l=cc.sequence(c,cc.callFunc(function(){n&&n.call(i,s,a)}));return r.node.runAction(l),r}},e.prototype.skillFx=function(t,e){u.default.BossSep(),this.level.play(p.R.fx_boss_passiveSkill,cc.v2(t,e))},e.prototype.skillFx2=function(t,e){u.default.BossLar(),this.level.play(p.R.fx_boss_activeSkill,cc.v2(t,e))},e.prototype.invoke_skill2=function(t){console.log(">>>>>>>>>>>>>>>>Boss:invoke_skill2<<<<<<<<<<<<<<<<<<<<<<<<<");for(var o=e.bossConfig[this.color],n=o.skill_2.numbers[t],i=o.skill_2.balls[t],r=0;r<n;r++){var s=this.level.queryValidEmptyIndices();if(s.length>0){var a=g.getRandomInArray(i),c=g.getRandomInArray(s);this.sendBall(a,c,this.node.position,this.skillFx2)}}},e.prototype.invoke_skill1=function(){console.log(">>>>>>>>>>>>>>>>Boss:invoke_skill1<<<<<<<<<<<<<<<<<<<<<<<<<");var t=e.bossConfig[this.color],o=this.level.queryValidEmptyIndices();if(0!=o.length)for(var n=1;n<t.skill_1.number;n++){var i=this.getRandomBallColor(),r=g.getRandomInArray(o);this.sendBall(i,r,this.node.position,this.skillFx2)}},e.prototype.getRandomBallColor=function(){for(var t=e.bossConfig[this.color],o=g.randomInt(0,100),n=t.skill_1.rate,i=n.length-1;i>=0;i--)if(o>=n[i])return t.skill_1.balls[i]},e.bossConfig=((i={})[101]={gold:1,hp:2,skill_0:{number:4},skill_1:{cd:9,number:1,rate:[0,20,40,60,80],balls:[2,3,4,5,6]},skill_2:{cd:9,numbers:[2,2],balls:[[2,3,4,5,6],[2,3,4,5,6]]}},i[201]={gold:2,hp:2,skill_0:{number:5},skill_1:{cd:10,number:1,rate:[0,19,38,57,76,95],balls:[2,3,4,5,6,27]},skill_2:{cd:10,numbers:[2,3],balls:[[2,3,5,6],[2,3,4,5,27]]}},i[301]={gold:3,hp:3,skill_0:{number:6},skill_1:{cd:9,number:2,rate:[0,19,38,57,76,95],balls:[2,3,4,6,8,27]},skill_2:{cd:12,numbers:[2,3,2],balls:[[2,3,4],[2,3,12,14],[2,11,12,8]]}},i[401]={gold:4,hp:3,skill_0:{number:7},skill_1:{cd:10,number:2,rate:[0,18,36,54,72,90,95],balls:[3,4,5,6,8,27,28]},skill_2:{cd:13,numbers:[3,3,3],balls:[[3,4,6,27,28],[3,4,27,28],[3,4,8,27,28]]}},i[501]={gold:5,hp:4,skill_0:{number:5},skill_1:{cd:9,number:3,rate:[0,17,34,51,68,85,90,95],balls:[2,3,4,5,6,27,28,32]},skill_2:{cd:14,numbers:[4,3,2,3],balls:[[2,3,4,5],[3,4,5,6,27],[3,4,5,6,27,28],[2,3,5,6,27,28]]}},i[601]={gold:6,hp:3,skill_0:{number:6},skill_1:{cd:9,number:2,rate:[0,17,34,51,68,85,90,95],balls:[2,3,4,5,6,27,28,32]},skill_2:{cd:16,numbers:[4,3,4],balls:[[10,11,12,13,27,28],[10,11,13,14,27,28],[10,12,13,14,27,28]]}},i[701]={gold:7,hp:3,skill_0:{number:7},skill_1:{cd:8,number:2,rate:[0,17,34,51,68,85,90,95],balls:[2,3,4,5,6,27,28,32]},skill_2:{cd:14,numbers:[4,5,4],balls:[[41,27,2,3],[41,27,28,5,6],[41,28,2,3]]}},i[801]={gold:8,hp:3,skill_0:{number:6},skill_1:{cd:7,number:2,rate:[0,17,34,51,68,85,89,93,97],balls:[2,3,4,5,6,27,28,32,41]},skill_2:{cd:15,numbers:[5,6,5],balls:[[2,3,4,5,6,27],[2,3,4,5,6,27,28],[2,3,4,5,6,28]]}},i[901]={gold:9,hp:4,skill_0:{number:7},skill_1:{cd:9,number:2,rate:[0,17,34,51,68,85,89,93,97],balls:[6,3,4,5,8,27,28,32,41]},skill_2:{cd:16,numbers:[6,3,3,5],balls:[[1,3,4,5,8,41],[1,3,4,5,8,41],[41],[28,27,41]]}},i[1001]={gold:10,hp:3,skill_0:{number:7},skill_1:{cd:8,number:2,rate:[0,17,34,51,68,85,88,91,94,97],balls:[2,3,4,5,6,27,28,32,41]},skill_2:{cd:15,numbers:[5,3,6],balls:[[5,6,27],[27,28,6],[2,3,4,5,6,28]]}},i[1101]={gold:11,hp:3,skill_0:{number:8},skill_1:{cd:9,number:3,rate:[0,17,34,51,68,85,89,93,97],balls:[2,3,4,5,6,27,28,32,41]},skill_2:{cd:15,numbers:[5,6,5],balls:[[41,27],[10,11,27,28,41],[2,6,41,28]]}},i[1201]={gold:12,hp:4,skill_0:{number:7},skill_1:{cd:7,number:3,rate:[0,17,34,51,68,85,88,91,94,97],balls:[2,3,4,5,6,27,28,32,41]},skill_2:{cd:16,numbers:[6,6,4,6],balls:[[10,5,6,41,27,28],[10,11,5,6,41,28],[41,27,2,3],[10,11,12,14,41,28]]}},i),e.SPEED=3600,e}(a.default);o.default=d,cc._RF.pop()},{"../../../framework/plugin_boosts/gamesys/FSM":"FSM","../../../framework/plugin_boosts/utils/EventManager":"EventManager","../Ball":"Ball","../Consts":"Consts","../Effect":"Effect","../R":"R","../Sound":"Sound"}],ClickAudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"679c3x/ZwhD8KnIy6p5lX5y","ClickAudioManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./ClickAudio"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio=null,e.elastic=!0,e}return i(e,t),e.prototype.onLoad=function(){g.foreachNode(this.node,this.each,this)},e.prototype.each=function(t){if(t.getComponent(cc.Button)){var e=t.getComponent(s.default);null==e&&((e=t.addComponent(s.default)).elastic=this.elastic,e.audio=this.audio)}},e.prototype.start=function(){},r([l({type:cc.AudioClip})],e.prototype,"audio",void 0),r([l],e.prototype,"elastic",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./ClickAudio":"ClickAudio"}],ClickAudio:[function(t,e,o){"use strict";cc._RF.push(e,"5ee8a8X6jFF5qtYOWlGoNww","ClickAudio");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../gamesys/Device"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio=null,e.elastic=!1,e._oldScale=1,e}return i(e,t),e.prototype.anim2=function(){var t=cc.scaleBy(.6,.9,.9).easing(cc.easeElasticOut(.3));this.node.runAction(t)},e.prototype.anim2back=function(){var t=cc.scaleTo(.6,this._oldScale,this._oldScale).easing(cc.easeElasticOut(.3));this.node.runAction(t)},e.prototype.onLoad=function(){var t=this;if(this.elastic){var e=this.getComponent(cc.Button);e.transition=cc.Button.Transition.COLOR,e.normalColor=cc.Color.WHITE,e.pressedColor=new cc.Color(200,200,200),this._oldScale=this.node.scale}this.node.on("touchstart",function(){t.elastic&&t.anim2()},this.node),this.node.on("touchend",function(){s.default.playEffect(t.audio,!1),t.elastic&&t.anim2back()}),this.node.on("touchcancel",function(){t.elastic&&t.anim2back()})},r([l({type:cc.AudioClip})],e.prototype,"audio",void 0),r([l],e.prototype,"elastic",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../gamesys/Device":"Device"}],Common:[function(t,e,o){"use strict";cc._RF.push(e,"d6d4aCOiTtJz6R1xuSQrtdC","Common"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../misc/SpriteFrameCache"),i=function(){function t(){}return t.loadJson=function(t){return new Promise(function(e){cc.loader.loadRes(t,cc.JsonAsset,function(t,o){e(o.json)})})},t.sleep=function(t){return new Promise(function(e){setTimeout(function(){e()},1e3*t)})},t.isGreaterDays=function(t,e){if(void 0===e&&(e=7),(new Date).getTime()-t>864e5*e)return!0},t.setDisplay=function(t,e){n.default.instance.getSpriteFrame(e).then(function(e){t.spriteFrame=e})},t.generate_action=function(t){return cc.scaleTo(t.time,t.scale_x,t.scale_y)},t.jellyJump=function(t){var e=this.generate_action({time:.06,scale_x:.7,scale_y:.7,scale_z:1}),o=this.generate_action({time:.07,scale_x:1,scale_y:1.4,scale_z:1}),n=cc.scaleTo(.8,1.3).easing(cc.easeElasticOut(.3)),i=cc.sequence(e,o,n);t.runAction(i)},t.jellyJump2=function(t,e,o){t.scale=e;var n=cc.scaleTo(.8,o,o).easing(cc.easeElasticOut(.3));t.runAction(n)},t.moveBezier=function(t,e,o,n,i,r){void 0===n&&(n=null),void 0===i&&(i=1),void 0===r&&(r=0);var s=cc.instantiate(t);s.opacity=255,s.setPosition(e);var a=[],c=e.x,l=e.y,u=o.x,p=o.y;return a[0]=cc.v2(c,l),a[1]=cc.v2(c+.5*Math.abs(u-c+100),l+.5*Math.abs(p-l+100)),a[2]=cc.v2(u,p),s.runAction(cc.sequence(cc.delayTime(r),cc.bezierTo(i,a),cc.fadeOut(.3),cc.callFunc(n))),s},t}();o.default=i,cc._RF.pop()},{"../misc/SpriteFrameCache":"SpriteFrameCache"}],Consts:[function(t,e,o){"use strict";var n;cc._RF.push(e,"697bdkgwMtJFbQBZCaKewHN","Consts"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.MOVE_UP_SPEED=25,t.MOVE_DOWN_SPEED=5,t.SPEED_NORMAL=-.35,t.SPEED_SLOW=-.18,t.SPEED_MAX=-8,t.DOWN_VEL_A=-.2,t.DOWN_VEL_D=.3,t.DEAD_LINE=-50,t.WARN_LINE=180,t.MAX_COMBO=4,t.COMBO_SECONDS=2,t.COMBO_BONUS=30,t.COMBO_SCORE=30,t.DISMISS_SCORE=10,t.BOMB_SCORE=50,t.BOSS_SCORE=1e3,t.KEY_SCORE=200,t.REVIVE_DIST=400,t.steelBallHp=5,t.ball_base_width=50,t.ball_width=78,t.ball_height=78,t.rateSpecialBall=5,t.numInLine=12,t.coloumMax=9,t.ball_scale=t.ball_width/t.ball_base_width,t.BALL_DIST_SQ=(t.ball_width-10)*(t.ball_width-10),t.Ball_AIM_SQ=Math.pow(t.ball_width/2+10,2),t.HONGBAO_SHOW_LEVEL=5,t.MaxVideoCount=3,t.colorTypes=[cc.Color.WHITE,cc.Color.BLUE,cc.Color.ORANGE,cc.Color.RED,cc.Color.GREEN,new cc.Color(255,0,255),cc.Color.BLUE,new cc.Color(255,0,156),cc.Color.YELLOW],t.ItemTypes={Bomb:1,Steel:0,Magic:3,Heart:4,Gold:5,AimLine:6},t.path={gameui:"images/gameui/",ui:"images/ui/",ui_text:"images/ui_text/",pp:"images/pp/",gg:"images/gg/",particle:"images/particles/",sound:"sounds/",root:"",level:"levels/",gold:"images/pp/jb.png"},t.specialABalls=[25,29,30,31],t.ballTypes={mul:25,bubV:26,ice:29,steel:30,bomb:31,wood:27,stone:28,ques:32,energy:36,empty:33,down:41,key:40,bubGold:34},t.key_ids=[40,101,201,301,401,501,601,701,801,901,1001,1101,1201],t.unlockStar=((n={})[2]=10,n[3]=12,n[4]=16,n[5]=15,n[6]=20,n[7]=20,n[8]=20,n[9]=20,n[10]=20,n[11]=20,n[12]=23,n),t.theme=[0,5,5,7,6,8,8,9,9,8,7,9,9],t.scoreToStar=[[0,0],[2100,3260],[3100,4260],[4100,5260],[7040,9400],[7200,8e3],[6500,8100],[7600,9700],[8030,9e3],[7280,9400],[7100,8900],[8990,9900],[9300,11700],[7890,9510],[8500,11920],[9480,12100],[11900,13950],[11700,13900],[11320,13900],[11800,13500],[15300,16800],[14800,16850],[17800,20400],[16320,18500],[14900,17300],[14920,17300],[14400,16700],[11910,14550],[15400,18900],[16500,18900],[14900,17850],[20500,25800],[19300,23700],[17300,21400],[14200,17850],[17500,21800],[17300,21400],[11100,15400],[13900,17950],[15500,19500],[15400,20600],[12700,17400],[14600,18900],[16500,21400],[13500,18400],[10600,15400],[13900,16800],[13300,17700],[21100,25400],[14500,19330],[14390,18620],[15800,19900],[15100,19200],[13330,17600],[16900,21250],[10600,15300],[17200,21750],[17960,22990],[13990,17900],[14500,18500],[17500,21300],[18500,21600],[19500,22e3],[24500,29200],[12400,17200],[19500,24e3],[23610,27100],[22300,26600],[10300,16e3],[25300,29400],[25200,29500],[16700,22500],[24800,28900],[1e4,15200],[25e3,29900],[25500,20200],[20220,25450],[22500,26700],[20200,25680],[32500,35900],[14500,19200],[2e4,25e3],[23500,27100],[26500,31500],[32500,36500],[23600,28400],[7910,11090],[22900,27700],[21600,27500],[22300,25500],[24500,28500]],t}();o.default=i,cc._RF.pop()},{}],DCLabel:[function(t,e,o){"use strict";cc._RF.push(e,"a56c0Fh1bpDto6UwDov+u7M","DCLabel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./DCUI"),a=cc._decorator,c=a.ccclass,l=(a.property,a.requireComponent),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.label=this.getComponent(cc.Label)},e.prototype.onValueChanged=function(t){t||(console.log("[DCLabel] warn!","not found field "+this.dataBind),t="0"),this.label.string=t},r([c,l(cc.Label)],e)}(s.default);o.default=u,cc._RF.pop()},{"./DCUI":"DCUI"}],DCPandoraPoint:[function(t,e,o){"use strict";cc._RF.push(e,"7213alSGlhOObvGLLyQvhtZ","DCPandoraPoint");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./DCUI"),a=t("./PandoraPoint"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.point=this.getComponent(a.default)},e.prototype.onValueChanged=function(t){this.point.setNumber(t)},r([l],e)}(s.default));o.default=u,cc._RF.pop()},{"./DCUI":"DCUI","./PandoraPoint":"PandoraPoint"}],DCSprite:[function(t,e,o){"use strict";cc._RF.push(e,"82b09vMdyFCOb0NEdBTtZHy","DCSprite");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./DCUI"),a=t("../misc/SpriteFrameCache"),c=cc._decorator,l=c.ccclass,u=(c.property,c.requireComponent),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite)},e.prototype.refreshSpriteFrame=function(t){var e=this;a.default.instance.getSpriteFrame(t).then(function(t){e.sprite.spriteFrame=t}).catch(function(){console.log("request imageUrl error :"+t)})},e.prototype.onValueChanged=function(t){this.refreshSpriteFrame(t)},r([l,u(cc.Sprite)],e)}(s.default);o.default=p,cc._RF.pop()},{"../misc/SpriteFrameCache":"SpriteFrameCache","./DCUI":"DCUI"}],DCToggle:[function(t,e,o){"use strict";cc._RF.push(e,"f9e52WLze5MBrhxXx/fWqyL","DCToggle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./DCUI"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.revserse=!1,e.autosync=!0,e}return i(e,t),e.prototype.onLoad=function(){if(this.toggle=this.getComponent(cc.Toggle),this.autosync){var t=new cc.Component.EventHandler;t.component="DCToggle",t.target=this.node,t.handler="onChecked",this.toggle.checkEvents.push(t)}},e.prototype.onChecked=function(t){this.isFromSelf||(this.revserse?this.setDCValue(!t.isChecked):this.setDCValue(t.isChecked))},e.prototype.setChecked=function(t){this.isFromSelf=!0,t?this.toggle.check():this.toggle.uncheck(),this.isFromSelf=!1},e.prototype.onValueChanged=function(t){this.revserse?this.setChecked(!t):this.setChecked(t)},r([l({tooltip:"If reverse is enabled ,checked is false !, unchecked is true"})],e.prototype,"revserse",void 0),r([l({tooltip:" Make sure data bind type should be boolean"})],e.prototype,"autosync",void 0),r([c],e)}(s.default);o.default=u,cc._RF.pop()},{"./DCUI":"DCUI"}],DCUI:[function(t,e,o){"use strict";cc._RF.push(e,"e4171eQC3dMO4x8/Td1XV1Y","DCUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../misc/DataCenter"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dataBind="",e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.setDCKey=function(t){this.dataBind=t,this.setListener()},e.prototype.setListener=function(){s.default.off(this.dataBind,this.dataChanged,this),s.default.on(this.dataBind,this.dataChanged,this)},e.prototype.onValueChanged=function(){},e.prototype.setDCValue=function(t){s.default.set(this.dataBind,t)},e.prototype.dataChanged=function(t){this.onValueChanged(t)},e.prototype.onEnable=function(){this.setListener(),this.onValueChanged(s.default.get(this.dataBind))},e.prototype.onDisable=function(){s.default.off(this.dataBind,this.dataChanged,this)},r([l()],e.prototype,"dataBind",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../misc/DataCenter":"DataCenter"}],DataCenter:[function(t,e,o){"use strict";cc._RF.push(e,"2946dm7U5hPgIxciZRaL5Q+","DataCenter"),Object.defineProperty(o,"__esModule",{value:!0}),o.field=o.dc=void 0;var n=t("../utils/EventManager"),i={},r={};o.dc=function(t,e){return void 0===e&&(e=!0),function(o){o.prototype.constructor,r[o]={name:t,serializable:e}}},o.field=function(t){return function(e,o){t&&t.default&&(e[o]=t.default);var n=e.constructor,r=i[n];null==r&&(r=[],i[n]=r),r.push(o)}};var s=function(){function t(){this.__namespace="DataCenter",this.kvs={},this.kts={},this.kvs={},this.kts={}}return t.prototype.registerFields=function(t){console.log(this);var e=this.__proto__.constructor,o=i[e],n=r[e];for(var s in o){var a=o[s];"function"!=typeof a&&(this.register(a,this[a]),delete this[a])}t=t||n.name,this.endRegister(t,n.serializable)},t.prototype.register=function(t,e){var o=this.constructor.prototype,n=this;o.__defineGetter__(t,function(){return n.getData(t)}),o.__defineSetter__(t,function(e){n.setData(t,e)}),this.kvs[t]=e;var i=typeof e;this.kts[t]=i,console.log("[DataCenter] register :"+t+":"+e+"("+i+")")},t.prototype.setData=function(t,e){var o=this.kvs[t];if(o!=e){var i=this.kts[t],r=this._field_(t);i!=typeof e&&(console.warn("[DataCenter] wrong type <"+typeof e+"> for :"+r+"<"+i+"> ,converting..."),"number"==i?e=Number(e):"boolean"==i&&(e="true"==e)),this.kvs[t]=e,console.log("[DataCenter] onValueChanged",r,e),n.event.emit(r,e,o)}},t.prototype._field_=function(t){return this.__namespace+"."+t},t.prototype.getData=function(t){return this.kvs[t]},t.prototype.limit=function(t,e,o){return t>o?o:t<e?0:t},t.prototype.addData=function(t,e){if(null!=(e=Number(e))){var o=this.kvs[t],i=Number(o)+e;this.kvs[t]=i,n.event.emit(this._field_(t),i,o)}},t.prototype.load=function(){for(var t in this.kvs){var e=localStorage.getItem(this._field_(t)),o=e;if(e){var n=this.kts[t];"number"==n?o=Number(e):"boolean"==n&&(o="true"==e)}else o=this.getData(t);this.kvs[t]=o}},t.prototype.save=function(){for(var t in console.log("[DataCenter] save :=================================="),this.kvs){var e=this.kvs[t],o=this._field_(t);localStorage.setItem(o,e.toString()),console.log(cc.js.formatStr("%s:%s",o,e))}console.log("[DataCenter] save succ :==================================")},t.prototype.endRegister=function(e,o){void 0===o&&(o=!0),this.__namespace=e,t.alldata[e]=this,o&&(this.load(),this.save())},t.off=function(t,e,o){n.event.off(t,e,o)},t.on=function(t,e,o){n.event.on(t,e,o),this.set(t,this.get(t))},t.get=function(e){var o=e.split("."),n=o[0],i=o[1],r=t.alldata[n];return r?r[i]:null},t.set=function(e,o){var n=e.split("."),i=n[0],r=n[1],s=t.alldata[i];s&&(s[r]=o)},t.register=function(t){var e=new t;return e.registerFields(),e},t.alldata={},t}();o.default=s,cc._RF.pop()},{"../utils/EventManager":"EventManager"}],Device:[function(t,e,o){"use strict";cc._RF.push(e,"b88b4v3H5tF7ozLVLmzIPqR","Device"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.setSoundsEnable=function(e){t.setSFXEnable(e),t.setBGMEnable(e)},t.setSFXEnable=function(e){cc.audioEngine.setEffectsVolume(1==e?1:0),t.isSfxEnabled=e,e?cc.audioEngine.resumeAllEffects():cc.audioEngine.pauseAllEffects()},t.useCCAudioEngine=function(){this._useCCAudioEngine=!0},t.useDefaultAudioEngine=function(){this._useCCAudioEngine=!1},t.setBGMEnable=function(e){cc.audioEngine.setMusicVolume(1==e?1:0),t.isBgmEnabled=e,e?cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic()},t.playEffect=function(e,o){if(void 0===o&&(o=!1),e&&t.isSfxEnabled){if(cc.sys.platform!=cc.sys.QQ_PLAY)return cc.audioEngine.playEffect(e,o);if(this._useCCAudioEngine)return cc.audioEngine.playEffect(e,o)}},t.stopMusic=function(){cc.audioEngine.stopMusic()},t.playMusic=function(e,o){if(void 0===o&&(o=!0),t.isBgmEnabled)return cc.audioEngine.playMusic(e,o)},t.vibrate=function(){cc.sys.WECHAT_GAME==cc.sys.platform?wx.vibrateShort():console.log("not support vibrate on except-wx platfrom ")},t.isSfxEnabled=!0,t.isBgmEnabled=!0,t._useCCAudioEngine=!1,t}();o.default=n,cc._RF.pop()},{}],Dog:[function(t,e,o){"use strict";cc._RF.push(e,"0a0e7NzP5JN3ZuN4y4+oNvJ","Dog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animation=null,e.eyeAnimaction=null,e}return i(e,t),e.prototype.onLoad=function(){this.animation=this.getComponent(cc.Animation)},e.prototype.start=function(){this.schedule(this.blinkEye,3)},e.prototype.blinkEye=function(){this.eyeAnimaction.play("dog_eye_blink")},e.prototype.throwBall=function(){this.animation.play("dog_throw"),this.blinkEye()},r([c(cc.Animation)],e.prototype,"eyeAnimaction",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],DownBall:[function(t,e,o){"use strict";cc._RF.push(e,"675f5t7THFH2aL9OpNuQlSk","DownBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(){var t=this.level;return t.removeBall(this),t.processNonlinkedBalls(),t.moveAcc(-50),!0},e}(t("../Ball").default);o.default=r,cc._RF.pop()},{"../Ball":"Ball"}],DyeBall:[function(t,e,o){"use strict";cc._RF.push(e,"b1d21LVzh9FLL8GCI63Fdmw","DyeBall");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Ball"),a=t("../Pop"),c=t("../Level"),l=t("../Sound"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isValid=!0,e}return r(e,t),e.prototype.dye=function(t){this._isValid=!1;var o=this.level,n=this.index,i=this.color,r=o.getAroundByFilter(n,c.default.GetBall);for(var s in r){var u=r[s];u.index,a.default.isDye(u.color)?(console.log("DyeBall infected"),u.onCollided(t)):28!=u.color&&40!=u.color&&u.changeColor(e.colorMap[i])}l.default.BubDye(),this.changeColor(e.colorMap[i])},e.prototype.onCollided=function(t){if(0==this._isValid)return!1;var o=this.color;return this.dye(t),t.color=e.colorMap[o],t.setLinkEnabled(!1),!1},e.prototype.onNeighbourInserted=function(t){0!=this._isValid&&(this.dye(t),t.changeColor(e.colorMap[this.color]||this.color))},e.colorMap=((i={})[17]=1,i[18]=2,i[19]=3,i[20]=4,i[21]=5,i[22]=6,i[23]=7,i[24]=8,i),e}(s.default);o.default=u,cc._RF.pop()},{"../Ball":"Ball","../Level":"Level","../Pop":"Pop","../Sound":"Sound"}],Effect:[function(t,e,o){"use strict";cc._RF.push(e,"6e43c9Yi5lB65TpkNFOKW8q","Effect");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Consts"),s=t("../../framework/plugin_boosts/gamesys/PoolManager"),a=t("./Pop"),c=t("./Sound"),l=t("./R"),u=t("../../framework/plugin_boosts/gamesys/PsFx"),p=t("../../framework/plugin_boosts/utils/Common"),f=function(){function t(){}return t.clear=function(){this.icefx=null,this.stackPools.forEach(function(t){t.clear()}),this.stackPools.splice(0,this.stackPools.length)},t.init=function(t,e,o){this.level=t,this.bottomNodePool=new s.default(e,this.onCreateSprite,this),this.topNodePool=new s.default(o,this.onCreateSprite,this),this.stackPools.push(this.bottomNodePool),this.stackPools.push(this.topNodePool),this.comboCount=1,this.keyfx=null},t.onCreateSprite=function(t){return cc.instantiate(t)},t.flyScore=function(t,e,o){e=e||1,e=Math.max(1,Math.min(e,l.R.fx_addScores.length));var n=this.stackPools[0].get(l.R.fx_addScores[e-1]);n.getComponentInChildren(cc.Label).string=t,o=this.level.node.convertToWorldSpaceAR(o),n.position=o;var i=n.getComponent(u.default);i&&i.play()},t.shakeNearestBallsT=function(t){var e=this.level.queryLinkedSameBalls(t.index,t.color);for(var o in e){var n=e[o];n.isValid&&n.node.runAction(cc.jumpBy(.5,cc.v2(0,0),5,1))}},t.flyBall=function(t){var e=t.node.position;this.level.play(l.R.fx_dismiss,e);var o=cc.Vec2.RIGHT;o.rotateSelf(cc.macro.RAD*g.randomInt(60,120)),o.mulSelf(g.randomInt(50,200));var n=cc.moveBy(g.randomFloat(.2,.5),o),i=cc.sequence(n,cc.moveBy(1,cc.v2(0,-1e3)).easing(cc.easeSineIn()),cc.callFunc(t.node.destroy,t.node)),s=cc.fadeTo(2,.5),c=cc.rotateBy(1,g.randomInt(360,720));t.node.runAction(i),t.node.runAction(cc.spawn(s,c)),a.default.addScore(r.default.DISMISS_SCORE),this.flyScore(r.default.DISMISS_SCORE,t.color,t.node.position)},t.dismisBall2=function(t,e){var o=e.node.position;this.flyScore(e.score,e.color,e.node.position),this.level.play(l.R.fx_dismiss,o),c.default.BubDel()},t.dismissBall=function(t,e,o){e=e||r.default.DISMISS_SCORE,t.score=e,a.default.addScore(e);var n=cc.fadeOut(.3);t.node.runAction(cc.sequence(cc.delayTime(o),cc.callFunc(this.dismisBall2,this,t),n,cc.callFunc(t.node.destroy,t.node))),a.default.onDimissBall(t)},t.dismissAll=function(t){void 0===t&&(t=!1);var e=this.level.balls(),o=[];for(var n in e)o.push(e[n]);return this.dismissBalls(o,t)},t._orderIndex=function(t,e){return e.index-t.index},t.dismissBalls=function(t,e){var o;this.level.removeBallIndices(t),t.sort(this._orderIndex);var n=1,i=0;for(var s in t){var a=t[s];o=n*r.default.DISMISS_SCORE,e?this.dismissBall(a,o,0):(this.dismissBall(a,o,.05*n),i=.05*n),n+=1}return this.level.processNonlinkedBalls(),this.checkCombo(),i},t.checkCombo=function(){var t=this;this.comboCount>0&&(clearTimeout(this.comboCheckTimer),a.default.addScore(r.default.COMBO_SCORE*this.comboCount),this.comboCount=this.comboCount+1,this.comboCount=Math.min(r.default.MAX_COMBO,this.comboCount),console.log(this.comboCount),this.comboCount>2&&this.level.moveAcc(r.default.COMBO_BONUS),c.default.Combo(this.comboCount)),this.comboCheckTimer=setTimeout(function(){t.comboCount=1},1e3*r.default.COMBO_SECONDS)},t.animte_dropBall=function(t,e){var o=cc.fadeOut(.3),n=cc.moveBy(1,cc.v2(0,-150)),i=cc.spawn(o,n),r=cc.sequence(cc.delayTime(e),i,cc.callFunc(t.node.destroy,t.node));t.node.runAction(r)},t.dropBalls=function(t){return n(this,void 0,void 0,function(){var e,o,n,s,c,l,u;return i(this,function(i){switch(i.label){case 0:for(n in this.level.removeBallIndices(t),e=1,o=[],t)o.push(n);s=0,i.label=1;case 1:return s<o.length?(c=o[s],(l=t[c]).isValid?(this.animte_dropBall(l,.02*e),u=e*r.default.DISMISS_SCORE,a.default.addScore(u),this.flyScore(u,null,l.node.position),e+=1,[4,p.default.sleep(.016)]):[3,3]):[3,4];case 2:i.sent(),i.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},t.ballHitAnimation=function(t){for(var e=this.level.getBallsCascade2(t),o=0;o<e.length;o++){var n=e[o];for(var i in n){var r=n[i];if(0==r.node.getNumberOfRunningActions()){var s=r.node.position,a=cc.v2(t.node.position),c=s.sub(a).normalize().mul(2/(o+1)*6),l=s.add(c),u=cc.moveTo(.15,l),p=cc.moveTo(.2,s).easing(cc.easeSineInOut());r.node.runAction(cc.sequence(u,p))}}}},t.bombBalls=function(t){for(var e in this.level.removeBallIndices(t),t){var o=t[e];this.dismissBall(o)}},t.bomb=function(t){this.flyScore(r.default.BOMB_SCORE,null,t),this.level.play(l.R.bombPrefab,t).then(function(t){t.angle=-g.randomInt(0,360)}),c.default.Bomb()},t.startIce=function(t){var e=this;this.icefx||(this.icefx=this.stackPools[0].get(l.R.fx_ice_fullscreen),this.icefx.position=cc.visibleRect.center,this.icefx.getComponent(u.default).play(),c.default.IceScreen(),this.level.pauseMove(),setTimeout(function(){e.stopIce(),e.level.resumeMove()},1e3*t))},t.stopIce=function(){this.icefx.removeFromParent(),this.icefx=null},t.play=function(t,e,o){var n=this.stackPools[t].get(e);n.position=o;var i=n.getComponent(u.default);i&&(i.fadeAfterFinish=.2,i.play())},t.moveBezier=function(t,e,o,n,i,r){void 0===i&&(i=1),void 0===r&&(r=0);var s=this.stackPools[t].get(e);s.opacity=255,s.setPosition(o);var a=[],c=o.x,l=o.y,u=n.x,p=n.y;return a[0]=cc.v2(c,l),a[1]=cc.v2(c+.5*Math.abs(u-c+100),l+.5*Math.abs(p-l+100)),a[2]=cc.v2(u,p),new Promise(function(t){s.runAction(cc.sequence(cc.delayTime(r),cc.bezierTo(i,a),cc.fadeOut(.3),cc.callFunc(function(){s.removeFromParent(!0),t()})))})},t.showKey=function(t){this.keyfx||(this.keyfx=this.topNodePool.get(l.R.keyPrefab)),this.keyfx.setPosition(t),this.keyfx.runAction(cc.moveTo(.5,cc.visibleRect.center))},t.showKeyOff=function(){this.keyfx.removeFromParent()},t.level=null,t.keyfx=null,t.comboCount=1,t.icefx=null,t.comboCheckTimer=0,t.stackPools=[],t}();o.default=f,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/PoolManager":"PoolManager","../../framework/plugin_boosts/gamesys/PsFx":"PsFx","../../framework/plugin_boosts/utils/Common":"Common","./Consts":"Consts","./Pop":"Pop","./R":"R","./Sound":"Sound"}],EmptyBall:[function(t,e,o){"use strict";cc._RF.push(e,"6f5f7xppBhBZIBGpFs5Sufl","EmptyBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Sound"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(){var t=this.level;return t.removeBall(this),t.processNonlinkedBalls(),s.default.BubEmpty(),!0},e}(r.default);o.default=a,cc._RF.pop()},{"../Ball":"Ball","../Sound":"Sound"}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"334c9avVx5ILbx/6NU/H45V","EventManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.event=void 0;var n=function(){function t(){this._eventList={}}return t.prototype.on=function(t,e,o){var n;null!=this._eventList[t]?(n=this._eventList[t]).push({listen:e,target:o}):((n=new Array).push({listen:e,target:o}),this._eventList[t]=n)},t.prototype.off=function(t,e,o){if(null==e||e instanceof Function||(o=e,e=null),null!=this._eventList[t])if(null==e&&null==o)delete this._eventList[t];else for(var n=this._eventList[t],i=n.length-1;i>=0;i--)null!=e&&null!=o?n[i].listen==e&&n[i].target==o&&n.splice(i,1):null!=e&&n[i].listen==e?n.splice(i,1):null!=o&&n[i].target==o&&n.splice(i,1)},t.prototype.emit=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=!1;if(null!=this._eventList[t]){var i=this._eventList[t];console.log("emit message: ",t,i.length);for(var r=0;r<i.length;r++){var s=i[r];null!=s.target?s.listen.apply(s.target,e)&&(n=!0):s.listen.apply(this,e)&&(n=!0)}}return n},t}();o.event=new n,cc._RF.pop()},{}],FSM:[function(t,e,o){"use strict";cc._RF.push(e,"83f52qrCghNrKS6jOC/j6I0","FSM");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.State=void 0;var r=cc._decorator,s=(r.ccclass,r.property,function(){function t(t,e){this.__interval_callbacks=[],this.interval_id=0,this.id=t,this.name=e}return t.prototype.onEnter=function(){},t.prototype.onExit=function(){},t.prototype.onUpdate=function(){},t.prototype.on=function(){},t.prototype.off=function(){},t.prototype.clearIntervals=function(){this.__interval_callbacks.splice(0,this.__interval_callbacks.length)},t.prototype.setInterval=function(t,e,o){var n=++this.interval_id;return this.__interval_callbacks.push({id:n,callback:e,target:o,interval:t,timer:0}),n},t.prototype.clearInterval=function(t){this.__interval_callbacks.splice(this.__interval_callbacks.indexOf(t))},t.prototype.setTimeout=function(t,e,o){var n=++this.interval_id;return this.__interval_callbacks.push({id:n,callback:e,target:o,delay:t,timer:0}),n},t.prototype.clearTimeout=function(t){this.clearInterval(t)},t.prototype.invokeIntervals=function(t){for(var e=0;e<this.__interval_callbacks.length;e++){var o=this.__interval_callbacks[e];o.timer=o.timer+t,o.interval?o.timer>=o.interval&&(o.timer=0,o.callback.call(o.target)):o.delay&&o.timer>=o.delay&&(o.callback.call(o.target),this.__interval_callbacks.splice(e),e--)}},t}());o.State=s;var a=function(t){function e(e,o,n,i){var r=t.call(this,o,n)||this,s=cc.js.formatStr(i,"onEnter",r.name),a=cc.js.formatStr(i,"onUpdate",r.name),c=cc.js.formatStr(i,"onExit",r.name);return r.__target=e,r.__enterFunc=r.__target[s],r.__updateFunc=r.__target[a],r.__exitFunc=r.__target[c],r}return i(e,t),e.prototype.onEnter=function(t){this.clearIntervals(),this.__enterFunc&&this.__enterFunc.call(this.__target,this,t)},e.prototype.onExit=function(){this.__exitFunc&&this.__exitFunc.call(this.__target,this)},e.prototype.onUpdate=function(t){this.invokeIntervals(t),this.__updateFunc&&this.__updateFunc.call(this.__target,this,t)},e}(s),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeElapsed=0,e._states={},e._isPaused=!1,e.log=!1,e}return i(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this._target=t,this.timeElapsed=0},e.prototype.getState=function(t){return this._states[t]},e.prototype.getCurrentState=function(){return this.c},e.prototype.getPreviousState=function(){return this.p},e.prototype.addStates=function(t,e){void 0===e&&(e="%s_%sState");var o=Object.keys(t),n=o.length/2;this.namePattern=e;for(var i=0;i<n;i++){var r=o[i],s=t[r];this.addState(r,s)}},e.prototype.addState=function(t,e,o,n,i,r){this.log&&console.log("[FSM]"+this.target.__classname__+"("+this.target.name+") Add State :",t,e);var s=new a(this.target,t,e,this.namePattern);this._states[t]=s,o&&(s.__enterFunc=o),n&&(s.__exitFunc=n),i&&(s.__updateFunc=i),r&&(s.__target=r)},e.prototype.enterState=function(t,e){this.timeElapsed=0;var o=this._states[t];this.c=o,o.onEnter(e),this.log&&console.log("[FSM]"+this.target.__classname__+" First State:",o.name)},e.prototype.revertState=function(){this.changeState(this.p.id)},e.prototype.pause=function(){this._isPaused=!0},e.prototype.resume=function(){this._isPaused=!1},e.prototype.resetCurrentState=function(){this.timeElapsed=0,console.log(cc.js.formatStr("[FSM] %s reset currentState",this.target.__classname__)),this.c.onExit(),this.c.onEnter()},e.prototype.changeState=function(t,e){var o=this._states[t];null!=o?this._isPaused?console.warn("[FSM] fsm is paused ! "+this.target.__classname__+" changeState to <"+o.name+"> failed!"):t!=this.c.id&&(this.timeElapsed=0,this.c.onExit(),this.p=this.c,this.c=o,this.log&&console.log(cc.js.formatStr("[FSM] %s (%s): %s -> %s",this.target.__classname__,this.name,this.p.name,o.name)),this.c.onEnter(e)):console.warn("[FSM] invalid state for stateId "+t+" of : "+this.target.__classname__)},e.prototype.isInState=function(t){return this.c==this._states[t]},e.prototype.update=function(t){this._isPaused||(e.debug&&(t=.016),this.timeElapsed+=t,this.c&&this.c.onUpdate(t))},e.debug=!1,e}(cc.Component);o.default=c,cc._RF.pop()},{}],FrameSwitch:[function(t,e,o){"use strict";cc._RF.push(e,"92ea6+rkJ5BQ7Twyd4FI92I","FrameSwitch");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=(s.requireComponent,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frames=[],e.target=null,e._index=0,e.randomOnLoad=!1,e}return i(e,t),e.prototype.onLoad=function(){null==this.target&&(this.target=this.getComponent(cc.Sprite)),this.randomOnLoad&&this.switchRandom()},e.prototype.switchRandom=function(){this.index=g.randomInt(0,this.frames.length)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this.switch(t)},enumerable:!1,configurable:!0}),e.prototype.switch=function(t){var e=this.frames.length,o=Math.min(Math.max(0,t),e-1);this.target.spriteFrame=this.frames[o],this._index=o},e.prototype.start=function(){},r([c([cc.SpriteFrame])],e.prototype,"frames",void 0),r([c(cc.Sprite)],e.prototype,"target",void 0),r([c],e.prototype,"randomOnLoad",void 0),r([a],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"ba9d1EQxOpF74S9v5bLpMd8","Game");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Sound"),l=t("./Level"),u=t("./Effect"),p=t("./Pop"),f=t("./Consts"),h=t("../../framework/plugin_boosts/misc/InputSystem"),d=t("../../framework/plugin_boosts/utils/EventManager"),y=t("./aballs/ABallFactory"),_=t("./AimLineAdvance"),v=t("../../framework/plugin_boosts/gamesys/Device"),m=t("./Info"),b=t("./R"),w=t("../../framework/plugin_boosts/ui/MessageBoxManager"),C=cc._decorator,S=C.ccclass,O=C.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aimLine=null,e.level=null,e.text_score=null,e.node_curball=null,e.node_nextball=null,e.sp_dirlight=null,e.lightdirNode=null,e.bottomNode=null,e.screenNode1=null,e.screenNode2=null,e.nextBall=null,e.curBall=null,e.positions={curball:null,nextball:null},e.debugCell=!1,e.ui_coin=null,e.ui_levelLabel=null,e._launchEnabled=!0,e.bombItemNode=null,e.steelItemNode=null,e.colorItemNode=null,e.gamePaused=!1,e.starProgressBar=null,e.star2Node=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){var t=this;o.instance=this,u.default.init(this.level,this.screenNode1,this.screenNode2),p.default.init(this.level),this.addComponent(h.InputSystem),this.positions.curball=this.node_curball.position,this.positions.nextball=this.node_nextball.position,this.aimLine.setLevel(this.level),this.initBallPool(),d.event.on("Pop.onReady",this.onLevelReady,this),d.event.on("Pop.pause",this.pause,this),d.event.on("Pop.resume",this.resume,this),c.default.init(),v.default.playMusic(b.R.audio_bgm),this.level.loadLevel(m.UserInfo.currentLevel).then(function(){t.level.prepare(),t.scheduleOnce(function(){c.default.LevStart(),t.showNextBall(),t.changeToNextBall()},1.5)}),this.ui_levelLabel.string=m.UserInfo.currentLevel+"",this.loadItems(),this.setScore(0);var e=f.default.scoreToStar[m.UserInfo.currentLevel],n=e[0]/e[1];this.star2Node.x=-this.star2Node.parent.width/2+(this.star2Node.parent.width-30)*n},e.prototype.setScore=function(t){this.text_score.string=t;var e=f.default.scoreToStar[m.UserInfo.currentLevel][1];this.starProgressBar.progress=t/e},e.prototype.loadItems=function(){this.bombItemNode.active=-1!=m.UserInfo.selectedItems.indexOf(f.default.ItemTypes.Bomb),this.steelItemNode.active=-1!=m.UserInfo.selectedItems.indexOf(f.default.ItemTypes.Steel),this.colorItemNode.active=-1!=m.UserInfo.selectedItems.indexOf(f.default.ItemTypes.Magic),m.UserInfo.selectedItems.indexOf(f.default.ItemTypes.AimLine)<0?this.aimLine.node.active=!1:(m.UserInfo.addItem(f.default.ItemTypes.AimLine,-1),m.UserInfo.save())},e.prototype.useItem=function(t,e){t.currentTarget.active=!1;var o=parseInt(e),n=b.R.itemConfig.json[o],i=parseInt(n.item_id);m.UserInfo.addItem(o,-1),this.changeBallDirectly(i),m.UserInfo.save()},e.prototype.refreshUI=function(){this.level.getThemeID(),this.level.getSubLevel()},e.prototype.onLevelReady=function(){this.schedule(this.doshakeBallRandomly,3),this.schedule(this.playEmptyBallAnimation,3)},e.prototype.playEmptyBallAnimation=function(){var t=this.level.queryVisibleBallsByColor(f.default.ballTypes.empty),e=g.getRandomInArray(t);if(e){var o=cc.sequence(cc.skewTo(.3,0,-10),cc.skewTo(.3,0,10),cc.skewTo(.4,0,0));e.node.runAction(o)}},e.prototype.doshakeBallRandomly=function(){console.log("shakeBalls ---------------------------");var t=Math.max(0,this.level.maxIndex-100),e=this.level.getBallByIndex(g.randomInt(t,this.level.getMaxIndex()+1));e&&u.default.shakeNearestBallsT(e)},e.prototype.initBallPool=function(){},e.prototype.onCreateObject=function(t){return y.default.createBall(t,this.level)},e.prototype.onDestroy=function(){this.clear(),d.event.off("Pop.onReady",this.onLevelReady,this),d.event.off("Pop.pause",this.pause,this),d.event.off("Pop.resume",this.resume,this)},e.prototype.clear=function(){u.default.clear(),p.default.clear(),this.level.clear()},e.prototype.getBall=function(t){var e=y.default.createBall(t,this.level);return e.parent=this.bottomNode,e.ballComponent},e.prototype.showNextBall=function(){var t=this.level.getToBeShootBallColor();console.log("showNextBall",t);var e=this.getBall(t);e.reset(t),e.node.scale=1,e.node.position=this.positions.nextball,this.nextBall=e.node,e.node.opacity=0,e.node.runAction(cc.fadeIn(.8))},e.prototype.getAngle=function(t,e){var o=this.positions.curball,n=Math.atan2(-(e-o.y),t-o.x);return cc.misc.radiansToDegrees(n)},e.prototype.changeToNextBall=function(){var t=cc.jumpTo(.3,this.positions.curball,30,1);this.nextBall.runAction(t);var e=f.default.ball_scale;this.nextBall.ballComponent.color==f.default.ballTypes.bomb&&(e*=2),this.nextBall.runAction(cc.scaleTo(.3,e));var o=this.nextBall;this.showNextBall(),this.curBall=o;var n=f.default.colorTypes[o.ballComponent.color];n&&(this.aimLine.setColor(cc.Color.WHITE),this.lightdirNode.color=n)},e.prototype.changeBallDirectly=function(t){this.curBall.destroy();var e=this.getBall(t);e.reset(t);var o=f.default.ball_scale;e.color==f.default.ballTypes.bomb&&(o*=2),this.curBall=e.node,e.node.position=this.positions.curball,this.curBall.runAction(cc.scaleTo(.3,o))},e.prototype.onTouchBegan=function(t){if(d.event.emit("Pop.touchScreen"),!this.gamePaused){var e=t.currentTouch.getLocation();e=this.node.convertToNodeSpaceAR(e),this.updateRotation(e)}},e.prototype.updateRotation=function(t){var e=this.getAngle(t.x,t.y);if(!(e>0))return e=Math.max(-170,Math.min(e,-10)),this.aimLine.setRotation(e+90),this.sp_dirlight.angle=-(e+90),e},e.prototype.onTouchMoved=function(t){if(!this.gamePaused){var e=t.currentTouch.getLocation();e=this.node.convertToNodeSpaceAR(e),this.updateRotation(e)}},e.prototype.onTouchEnded=function(t){var e=t.currentTouch.getLocation();e=this.node.convertToNodeSpaceAR(e);var o=this.updateRotation(e);if(o&&this.curBall)if(this.debugCell){var n=this.level.cellAt(e.x,e.y);console.log(n)}else{if(this.level.isStopped()||this.gamePaused||!this.level.isReady()||!this._launchEnabled)return;this.curBall.ballComponent.launch(o),this.changeToNextBall(),this.disableLaunch(),this.scheduleOnce(this.recoveryLaunch,.5)}},e.prototype.disableLaunch=function(){this._launchEnabled=!1},e.prototype.recoveryLaunch=function(){this._launchEnabled=!0},e.prototype.revive=function(){d.event.emit("Pop.resume");var t=this.bottomNode.convertToWorldSpaceAR(this.positions.curball);u.default.play(0,b.R.fx_tui,t),this.level.revive(),c.default.Revive(),this.level.moveAcc(f.default.REVIVE_DIST)},e.prototype.start=function(){},e.prototype.pause=function(){this.level.pauseMove(),this.gamePaused=!0},e.prototype.resume=function(){this.level.resumeMove(),this.gamePaused=!1},e.prototype.on_btn_back_clicked=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.pause(),[4,w.MessageBox.show("\u4e2d\u9014\u9000\u51fa\uff0c\u6d88\u8017\u7684\u7231\u5fc3\u4e0d\u9000\u8fd8\u54e6\uff01","\u63d0\u9192",w.MessageBox.OK_CANCEL)];case 1:return t=e.sent(),this.resume(),t==w.MessageBox.OK&&cc.director.loadScene("Main"),[2]}})})},e.prototype.onKeyDown=function(t){console.log(t),"s"==t.key?this.level.node.y-=10:"w"==t.key?this.level.node.y+=15:"a"==t.key&&this.changeBallDirectly(f.default.ballTypes.bomb)},e.instance=null,r([O(_.default)],e.prototype,"aimLine",void 0),r([O(l.default)],e.prototype,"level",void 0),r([O(cc.Label)],e.prototype,"text_score",void 0),r([O(cc.Node)],e.prototype,"node_curball",void 0),r([O(cc.Node)],e.prototype,"node_nextball",void 0),r([O(cc.Node)],e.prototype,"sp_dirlight",void 0),r([O(cc.Node)],e.prototype,"lightdirNode",void 0),r([O(cc.Node)],e.prototype,"bottomNode",void 0),r([O(cc.Node)],e.prototype,"screenNode1",void 0),r([O(cc.Node)],e.prototype,"screenNode2",void 0),r([O(cc.Node)],e.prototype,"ui_coin",void 0),r([O(cc.Label)],e.prototype,"ui_levelLabel",void 0),r([O(cc.Node)],e.prototype,"bombItemNode",void 0),r([O(cc.Node)],e.prototype,"steelItemNode",void 0),r([O(cc.Node)],e.prototype,"colorItemNode",void 0),r([O(cc.ProgressBar)],e.prototype,"starProgressBar",void 0),r([O(cc.Node)],e.prototype,"star2Node",void 0),o=r([S],e)}(cc.Component);o.default=P,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/Device":"Device","../../framework/plugin_boosts/misc/InputSystem":"InputSystem","../../framework/plugin_boosts/ui/MessageBoxManager":"MessageBoxManager","../../framework/plugin_boosts/utils/EventManager":"EventManager","./AimLineAdvance":"AimLineAdvance","./Consts":"Consts","./Effect":"Effect","./Info":"Info","./Level":"Level","./Pop":"Pop","./R":"R","./Sound":"Sound","./aballs/ABallFactory":"ABallFactory"}],GetDialog:[function(t,e,o){"use strict";cc._RF.push(e,"714f07aCe9N55KDdTLTUVv8","GetDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/ui/View"),a=t("../Info"),c=t("../Consts"),l=t("../R0"),u=t("../../../framework/plugin_boosts/utils/Common"),p=t("../../../framework/plugin_boosts/misc/Signal"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diamondLabel=null,e.node_close=null,e.icon=null,e.item_id=0,e._num=0,e._closeSignal=new p.default,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.share_suc=function(){5==this.item_id?a.UserInfo.addDiamond(2*this._num):a.UserInfo.addItem(this.item_id,2*this._num),a.UserInfo.save(),this.getComponent(s.default).hide()},e.prototype.click_double=function(){a.UserInfo.handleChoice(a.ChoiceType.Get,this.share_suc,this)},e.prototype.onShown=function(t,e,o,n){this._closeSignal.on(o,n),this.item_id=t,this._num=e;var i=l.R.itemConfig.json[t];u.default.setDisplay(this.icon,c.default.path.pp+i.img),this.diamondLabel.string=i.name+"x"+e},e.prototype.delayShow=function(){this.node_close.active=!0},e.prototype.click_no=function(){this.getComponent(s.default).hide(),5==this.item_id?a.UserInfo.addDiamond(this._num):a.UserInfo.addItem(this.item_id,this._num),a.UserInfo.save()},e.prototype.onHidden=function(){this.unschedule(this.delayShow),this._closeSignal.fire()},r([d(cc.Label)],e.prototype,"diamondLabel",void 0),r([d(cc.Node)],e.prototype,"node_close",void 0),r([d(cc.Sprite)],e.prototype,"icon",void 0),r([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../framework/plugin_boosts/misc/Signal":"Signal","../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../R0":"R0"}],GoldBall:[function(t,e,o){"use strict";cc._RF.push(e,"dfb947V2WlAyK1MP2p4j51O","GoldBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Ball"),c=t("../Effect"),l=t("../R"),u=t("../../../framework/plugin_boosts/utils/Common"),p=t("../Game"),f=t("../Info"),h=t("../Sound"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.moveGolds=function(t){return r(this,void 0,void 0,function(){var e,o,n,i;return s(this,function(r){switch(r.label){case 0:e=p.default.instance.ui_coin.getBoundingBoxToWorld().center,o=g.randomInt(2,5),n=0,r.label=1;case 1:return n<o?(i=cc.v2(g.randomInt(-20,20),g.randomInt(-20,20)),c.default.moveBezier(1,l.R.goldPrefab,t.add(i),e).then(function(){f.UserInfo.addDiamond(10,!1)}),h.default.BubSpeGold(),[4,u.default.sleep(.1)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onCollided=function(){var t=this.getWorldPosition();return this.level.removeBall(this),c.default.dismissBall(this),this.moveGolds(t),!0},e}(a.default);o.default=d,cc._RF.pop()},{"../../../framework/plugin_boosts/utils/Common":"Common","../Ball":"Ball","../Effect":"Effect","../Game":"Game","../Info":"Info","../R":"R","../Sound":"Sound"}],HbDialog:[function(t,e,o){"use strict";cc._RF.push(e,"bc137UsV/1G06pJVS7VrjuK","HbDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Info"),a=t("../../../framework/plugin_boosts/ui/View"),c=t("../../../framework/plugin_boosts/ui/ViewManager"),l=t("../../../framework/plugin_boosts/utils/Common"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.share_succ=function(){this.getComponent(a.default).hide(),c.default.instance.show("Game/NewPackDialog")},e.prototype.onShown=function(){l.default.jellyJump2(this.node,.8,1)},e.prototype.click_open=function(){s.UserInfo.handleChoice(s.ChoiceType.Hongbao,this.share_succ,this)},r([p],e)}(cc.Component));o.default=f,cc._RF.pop()},{"../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Info":"Info"}],IceBall:[function(t,e,o){"use strict";cc._RF.push(e,"286b6WgCe9N/ZDwfJvhFS6X","IceBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Effect"),a=t("../R"),c=t("../Sound"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(){return this.removeSelf(),!0},e.prototype.launch=function(){var t=cc.moveBy(.5,cc.v2(0,cc.visibleRect.height/2)).easing(cc.easeSineOut()),e=cc.scaleTo(.3,2),o=cc.scaleTo(.2,1),n=cc.sequence(e,o,cc.callFunc(this.doIceFx,this)),i=cc.spawn(t,n);this.node.runAction(i),c.default.IceShoot()},e.prototype.doIceFx=function(){var t=this.getPositionInLevel();this.level.play(a.R.fx_ice,t),s.default.startIce(3),g.fadeAndDestroy(this.node,.5)},e}(r.default);o.default=l,cc._RF.pop()},{"../Ball":"Ball","../Effect":"Effect","../R":"R","../Sound":"Sound"}],InfiniteBackground:[function(t,e,o){"use strict";cc._RF.push(e,"ea63dhsLFFNTK51F3JClP8v","InfiniteBackground");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgNode=null,e.camera=null,e.currentNode=null,e.repeatCount=0,e}return i(e,t),e.prototype.onLoad=function(){this.currentNode=this.bgNode,this.size=this.currentNode.getContentSize(),this.nodepool=new cc.NodePool},e.prototype.start=function(){null==this.prev&&(this.prev=cc.instantiate(this.bgNode),this.node.addChild(this.prev),this.prev.y=-this.size.height)},e.prototype.reset=function(){this.repeatCount=0},e.prototype.update=function(){if(null!=this.currentNode){var t=cc.Vec2.ZERO;if(this.camera.getWorldToCameraPoint(this.currentNode.position,t),this.prev,t.y<10&&null==this.next){this.pre_prev=this.prev,this.prev=this.currentNode;var e=this.nodepool.get();null==e&&(e=cc.instantiate(this.currentNode)),e.setPosition(0,this.size.height*++this.repeatCount),this.node.addChild(e),this.currentNode=e,this.camera.getWorldToCameraPoint(e.position,t),this.next=null}t.y>this.size.height-10&&this.pre_prev&&this.nodepool.put(this.pre_prev)}},r([c(cc.Node)],e.prototype,"bgNode",void 0),r([c(cc.Camera)],e.prototype,"camera",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Info:[function(t,e,o){"use strict";cc._RF.push(e,"359b2tEf1lCgIl6AQ7FRw5w","Info");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.UserInfo=o.ChoiceType=void 0;var s=t("../../framework/plugin_boosts/misc/DataCenter"),a=t("../../framework/plugin_boosts/ui/ToastManager"),c=t("../../framework/plugin_boosts/gamesys/Device"),l=t("../../framework/plugin_boosts/utils/Common"),u=t("./R0"),p=t("../../framework/plugin_boosts/gamesys/LocalLifeSystem"),f=t("./Pop"),h=t("./Consts");(function(t){t[t.Sign=0]="Sign",t[t.Get=1]="Get",t[t.Shop=2]="Shop",t[t.ShopFreeNum=3]="ShopFreeNum",t[t.NotEnoughFree=4]="NotEnoughFree",t[t.NotEnoughFreeNum=5]="NotEnoughFreeNum",t[t.Revive=6]="Revive",t[t.Hongbao=7]="Hongbao",t[t.NewPack=8]="NewPack",t[t.Lucky=9]="Lucky",t[t.BannerAdRefresh=10]="BannerAdRefresh",t[t.ReloadAd=11]="ReloadAd"})(o.ChoiceType||(o.ChoiceType={}));var d=function(t){function e(){var e=t.call(this)||this;return e.choices=[],e.version="5",e.configs={},e.lv_cleartime=0,e.lv_star=0,e.levels={},e.gameplay_sec=0,e.dailyGetTime=new Date(2018,1,1).getTime(),e.firstSignTime=e.dailyGetTime,e.signedTime=-1,e.lastSignTime=e.dailyGetTime,e.freedrawTime=e.dailyGetTime,e.luckyVideoWatchTime=e.dailyGetTime,e.shopFreeDiamondTime=e.dailyGetTime,e.shopFreeDiamondTime2=e.dailyGetTime,e.showAddFavTime=e.dailyGetTime,e.diamond=0,e.sfx_enabled=!0,e.luckyVideoWatchCount=0,e.new_pack_redeemed=!1,e.item_0=0,e.item_1=0,e.item_2=0,e.item_3=0,e.item_4=5,e.item_6=0,e.selectedItems=[],e.ui_levelDialog_heart=null,e.currentLevel=1,e.level=1,e.loadProgress(),setTimeout(function(){e.save()},6e4),e}return i(e,t),e.prototype.getChoice=function(t){return this.choices[t]||0},e.prototype.handleChoice=function(t,e,n){var i=o.UserInfo.getChoice(t);1==i||0==i&&e&&e.call(n)},e.prototype.useLife=function(t){void 0===t&&(t=1),this.item_4-=t},e.prototype.onLifeRecovery=function(t){this.item_4+=t,this.save()},e.prototype.getLife=function(){return this.item_4},e.prototype.onGetGames=function(){},e.prototype.init=function(){p.LifeSystem.init(),p.LifeSystem.recoverySignal.on(this.onLifeRecovery,this),p.LifeSystem.startCheck(this.getLife,this),o.UserInfo.configs.sign=u.R.signConfig.json,o.UserInfo.configs.new_pack=[{item:"0",num:"1"},{item:"1",num:"3"},{item:"3",num:"1"},{item:"6",num:"2"}],-1==o.UserInfo.signedTime&&(o.UserInfo.firstSignTime=(new Date).getTime(),o.UserInfo.signedTime=0),l.default.isGreaterDays(o.UserInfo.firstSignTime,8)&&(o.UserInfo.firstSignTime=(new Date).getTime(),o.UserInfo.signedTime=0,o.UserInfo.save())},e.prototype.setParam=function(t,e){h.default[t]=e[t]||h.default[t]},e.prototype.onGetConfig=function(t){if(t){var e=t[0];if(e){this.choices=JSON.parse(e[this.version]),this.setParam("MAX_COMBO",e),this.setParam("COMBO_SECONDS",e),this.setParam("COMBO_BONUS",e),this.setParam("COMBO_SCORE",e),this.setParam("DISMISS_SCORE",e),this.setParam("BOMB_SCORE",e),this.setParam("BOSS_SCORE",e),this.setParam("KEY_SCORE",e),this.setParam("SPEED_NORMAL",e),this.setParam("SPEED_SLOW",e),this.setParam("DEAD_LINE",e),this.setParam("WARN_LINE",e),this.setParam("REVIVE_DIST",e),this.setParam("HONGBAO_SHOW_LEVEL",e),this.setParam("MaxVideoCount",e);var n=e.sign;n&&(o.UserInfo.configs.sign=JSON.parse(n));var i=e.new_pack;i&&(o.UserInfo.configs.new_pack=JSON.parse(i))}}},e.prototype.addDiamond=function(t,e){void 0===e&&(e=!0),this.diamond+="number"==typeof t?t:parseInt(t),e&&t>0&&(a.Toast.make("\u83b7\u5f97\u91d1\u5e01 x"+t),c.default.playEffect(u.R.audio_get_diamond))},e.prototype.addItem=function(t,e,o){void 0===o&&(o=!0);var n=(this["item_"+t]||0)+parseInt(e);n<0&&(n=0),this["item_"+t]=n;var i=u.R.itemConfig.json[t];e>0&&o&&a.Toast.make("\u83b7\u5f97 "+i.name+" x "+e)},e.prototype.getItem=function(t){return this["item_"+t]||0},e.prototype.loadProgress=function(){var t=localStorage.getItem("ppl_levels");t&&(this.levels=JSON.parse(t))},e.prototype.prepareLevel=function(t){this.levels[t]||(this.levels[t]={sec:0,lose:0,score:0})},e.prototype.setLevelInfo=function(t,e,o){this.levels[t.toString()][e]=o},e.prototype.getTotalScore=function(){var t=0;for(var e in this.levels){var o=this.levels[e];t+=parseInt(o.score)}return t},e.prototype.getTotalStar=function(){var t=0;for(var e in this.levels){var o=this.levels[e],n=parseInt(e);t+=f.default.getStar(n,o.score)}return t},e.prototype.getLevelInfo=function(t,e){var o=this.levels[t.toString()];return o&&o[e]||0},e.prototype.saveProgress=function(){var t=JSON.stringify(this.levels);localStorage.setItem("ppl_levels",t)},r([s.field()],e.prototype,"gameplay_sec",void 0),r([s.field()],e.prototype,"dailyGetTime",void 0),r([s.field()],e.prototype,"firstSignTime",void 0),r([s.field()],e.prototype,"signedTime",void 0),r([s.field()],e.prototype,"lastSignTime",void 0),r([s.field()],e.prototype,"freedrawTime",void 0),r([s.field()],e.prototype,"luckyVideoWatchTime",void 0),r([s.field()],e.prototype,"shopFreeDiamondTime",void 0),r([s.field()],e.prototype,"shopFreeDiamondTime2",void 0),r([s.field()],e.prototype,"showAddFavTime",void 0),r([s.field()],e.prototype,"diamond",void 0),r([s.field()],e.prototype,"sfx_enabled",void 0),r([s.field()],e.prototype,"luckyVideoWatchCount",void 0),r([s.field()],e.prototype,"new_pack_redeemed",void 0),r([s.field()],e.prototype,"item_0",void 0),r([s.field()],e.prototype,"item_1",void 0),r([s.field()],e.prototype,"item_2",void 0),r([s.field()],e.prototype,"item_3",void 0),r([s.field()],e.prototype,"item_4",void 0),r([s.field()],e.prototype,"item_6",void 0),r([s.field()],e.prototype,"level",void 0),r([s.dc("Info")],e)}(s.default);o.default=d,o.UserInfo=s.default.register(d),cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/Device":"Device","../../framework/plugin_boosts/gamesys/LocalLifeSystem":"LocalLifeSystem","../../framework/plugin_boosts/misc/DataCenter":"DataCenter","../../framework/plugin_boosts/ui/ToastManager":"ToastManager","../../framework/plugin_boosts/utils/Common":"Common","./Consts":"Consts","./Pop":"Pop","./R0":"R0"}],InputSystem:[function(t,e,o){"use strict";cc._RF.push(e,"4643c14ws5Msox+teVpsIzz","InputSystem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.InputSystem=o.Input=void 0;var s=t("./JoyStick"),a=cc._decorator,c=a.ccclass,l=a.property;o.Input=null;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._target=null,e.keys={},e.__touchVec=cc.Vec2.ZERO,e.radius_axis=256,e.joyStick=null,e.__lastTouch=cc.Vec2.ZERO,e.moveOffset=cc.Vec2.ZERO,e.__curTouchId=-1,e}return i(e,t),e.prototype.setDelegate=function(t){this._target=t},e.prototype.onLoad=function(){o.Input=this;for(var t=this.getComponents(cc.Component),e=0;e<t.length;e++){var n=t[e];if(n!=this&&(n.onTouchBegan||n.onTouchEnded||n.onTouchMoved)){this._target=n;break}}console.log("InputSystem Component -> target:",this._target)},e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.triggerKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.triggerKeyUp,this),this.node.on(cc.Node.EventType.TOUCH_START,this.triggerTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.triggerTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.triggerTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.triggerTouchCanceled,this)},Object.defineProperty(e.prototype,"touch",{get:function(){return this.__touch},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axis",{get:function(){return this.joyStick?this.joyStick.axis:this.__touchVec},enumerable:!1,configurable:!0}),e.prototype.getKey=function(t){return this.keys[t]},e.prototype.triggerKeyUp=function(){this._target.onKeyUp&&this._target.onKeyUp(event),this.keys[event.key]=!1},e.prototype.triggerKeyDown=function(){this._target.onKeyDown&&this._target.onKeyDown(event),this.keys[event.key]=!0},e.prototype.triggerTouchEnded=function(t){-1!=this.__curTouchId&&t.getID()!=this.__curTouchId||(this.__curTouchId=-1,this._target.onTouchEnded&&this._target.onTouchEnded(t),this.__touch=null,this.__touchVec=cc.Vec2.ZERO,t.currentTouch&&this.joyStick&&this.joyStick.touchEnd(t.currentTouch.getLocation()),this.moveOffset=cc.Vec2.ZERO)},e.prototype.triggerTouchMoved=function(t){-1!=this.__curTouchId&&t.getID()!=this.__curTouchId||(this._target.onTouchMoved&&this._target.onTouchMoved(t),this.__touch=t.currentTouch.getLocation(),this.moveOffset=this.__touch.sub(this.__lastTouch),this.__touch&&this.__startLocation&&(this.__touchVec=this.__touch.sub(this.__startLocation),this.joyStick&&this.joyStick.touchMove(this.__touch)),this.__lastTouch=this.__touch)},e.prototype.triggerTouchBegan=function(t){-1!=this.__curTouchId&&t.getID()!=this.__curTouchId||(this._target.onTouchBegan&&this._target.onTouchBegan(t),this.__curTouchId=t.getID(),this.__startLocation=t.currentTouch.getLocation(),this.__touch=t.currentTouch.getLocation(),this.__lastTouch=this.__touch,this.joyStick&&this.joyStick.touchStart(this.__startLocation))},e.prototype.triggerTouchCanceled=function(t){this.triggerTouchEnded(t)},e.prototype.onEnable=function(){this.schedule(this.checkTouch,.02)},e.prototype.onDisable=function(){this.unschedule(this.checkTouch)},e.prototype.checkTouch=function(){this.__touch&&(this.moveOffset=this.__touch.sub(this.__lastTouch))},r([l(s.default)],e.prototype,"joyStick",void 0),r([c],e)}(cc.Component);o.InputSystem=u,cc._RF.pop()},{"./JoyStick":"JoyStick"}],Intersection:[function(t,e,o){"use strict";cc._RF.push(e,"2f4dfDdP95AjIAwGFL34sfm","Intersection"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.circleIntersectRect=function(t,e,o){var n,i;n=t.x<o.x?o.x:t.x>o.x+o.width?o.x+o.width:t.x,i=t.y<o.y?o.y:t.y>o.y+o.height?o.y+o.height:t.y;var r=cc.v2(n,i);return r.subSelf(t),r.magSqr()<e*e},t}();o.default=n,cc._RF.pop()},{}],JoyStick:[function(t,e,o){"use strict";cc._RF.push(e,"297d6dgG6ZIJJ+ZjeNWq2ub","JoyStick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outterCircle=null,e.innerCircle=null,e.radius=250,e.innerCircleRadius=20,e.releaseAfterOver=!1,e.dynamicJoystick=!1,e.autoRadius=!1,e.isReleased=!1,e._startPos=cc.Vec2.ZERO,e}return i(e,t),e.prototype.onLoad=function(){this.autoRadius&&(this.radius=this.outterCircle.getBoundingBox().height/2),this.innerCircle.setPosition(0,0),this.node.active=!1},e.prototype.start=function(){this.releaseStick()},e.prototype.releaseStick=function(){var t=cc.moveTo(.5,cc.Vec2.ZERO).easing(cc.easeExponentialOut());this.innerCircle.runAction(t),this.isReleased=!0,this.dynamicJoystick&&this.scheduleOnce(this.delayClose,1)},e.prototype.delayClose=function(){this.node.active=!1},Object.defineProperty(e.prototype,"axis",{get:function(){if(this.isReleased)return cc.Vec2.ZERO;var t=this.innerCircle.getPosition();return t.normalizeSelf(),t},enumerable:!1,configurable:!0}),e.prototype.move=function(t){t.mag()>this.radius&&(this.releaseAfterOver&&this.releaseStick(),t.normalizeSelf(),t.mulSelf(this.radius)),this.innerCircle.setPosition(t)},e.prototype.touchStart=function(t){if(this.enabled){if(this.isReleased=!1,this._startPos=t,this.unschedule(this.delayClose),this.node.active=!0,this.dynamicJoystick){var e=this.node.getParent().convertToNodeSpaceAR(t);this.node.setPosition(e)}this.move(cc.Vec2.ZERO)}},e.prototype.touchMove=function(t){if(this.enabled){var e=t.sub(this._startPos);this.move(e)}},e.prototype.touchEnd=function(){this.enabled&&this.releaseStick()},r([c(cc.Node)],e.prototype,"outterCircle",void 0),r([c(cc.Node)],e.prototype,"innerCircle",void 0),r([c],e.prototype,"radius",void 0),r([c],e.prototype,"innerCircleRadius",void 0),r([c],e.prototype,"releaseAfterOver",void 0),r([c],e.prototype,"dynamicJoystick",void 0),r([c],e.prototype,"autoRadius",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],KeyBall:[function(t,e,o){"use strict";cc._RF.push(e,"8fb28Uv1o5AB6Iu8+VYJ7GU","KeyBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../../../framework/plugin_boosts/utils/EventManager"),a=t("../Effect"),c=t("../R"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(t){return this.level.removeBallIndex(this.index),a.default.dismissBall(this),t.stopMoving(),this.level.play(c.R.fx_finishlevel,this.getPositionInLevel()),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!Got Key!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),s.event.emit("Pop.onGotKey",this.getWorldPosition()),!1},e}(r.default);o.default=l,cc._RF.pop()},{"../../../framework/plugin_boosts/utils/EventManager":"EventManager","../Ball":"Ball","../Effect":"Effect","../R":"R"}],LevelDialog:[function(t,e,o){"use strict";cc._RF.push(e,"4c94fc8PDtI1o3JM9m3WRKN","LevelDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Info"),a=t("../../../framework/plugin_boosts/ui/game/LevelSelector"),c=t("../../../framework/plugin_boosts/ui/ViewManager"),l=t("../Pop"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heartNode=null,e.levelLabel=null,e.starLabel=null,e.newUnlockImg=[],e.star=0,e}return i(e,t),e.prototype.onLoad=function(){this.selector.max=9*Math.floor(s.UserInfo.level/9+1),this.levelLabel.string=cc.js.formatStr("(%s/%s)",s.UserInfo.level,100),s.UserInfo.ui_levelDialog_heart=this.heartNode},e.prototype.onShown=function(){this.star=0,this.selector.currentLevel=s.UserInfo.level,this.selector.refresh(),this.scheduleOnce(this.refreshLevels,.1),this.starLabel.string=this.star+"/270"},e.prototype.start=function(){},e.prototype.refreshLevels=function(){this.selector.scrollToCurrentLevel()},e.prototype.refreshLevelItem=function(t,e){var o=t.getChildByName("flag_stars"),n=t.getChildByName("flag_lock"),i=t.getChildByName("flag_boss"),r=t.getChildByName("star"),a=r.getChildByName("starNum").getComponent(cc.Label),c=t.getComponent(cc.Sprite);o.active=e<s.UserInfo.level,n.active=e>s.UserInfo.level,i.active=l.default.isBossLevel(e),e<s.UserInfo.level?c.spriteFrame=this.newUnlockImg[0]:e==s.UserInfo.level?c.spriteFrame=this.newUnlockImg[2]:c.spriteFrame=this.newUnlockImg[1];for(var u=s.UserInfo.getLevelInfo(e,"score"),p=l.default.getStar(e,u),f=0;f<o.childrenCount;f++){o.children[f].active=!(f>=p)}if(this.star+=p,r.active=!1,l.default.isBossLevel(e-1)){var h=l.default.getStarNeed(e);h>this.star&&(r.active=!0,n.active=!0,a.string=h+"")}t.opacity=255},e.prototype.click_shop=function(){c.default.instance.show("Game/ShopDialog")},e.prototype.startGame=function(t){l.default.getStarNeed(t)>this.star?c.default.instance.show("Game/LockedDialog",t,"main"):c.default.instance.show("Game/StartDialog",t,"main")},e.prototype.click_continue=function(){this.startGame(s.UserInfo.level)},e.prototype.select_level=function(t){var e=parseInt(t.name);this.startGame(e)},r([f(a.default)],e.prototype,"selector",void 0),r([f(cc.Node)],e.prototype,"heartNode",void 0),r([f(cc.Label)],e.prototype,"levelLabel",void 0),r([f(cc.Label)],e.prototype,"starLabel",void 0),r([f(cc.SpriteFrame)],e.prototype,"newUnlockImg",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/ui/game/LevelSelector":"LevelSelector","../Info":"Info","../Pop":"Pop"}],LevelSelector:[function(t,e,o){"use strict";cc._RF.push(e,"b7942O9SJ1JFpcT0/D7YiFO","LevelSelector");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=(s.help,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pageview=null,e.template=null,e.onSelectLevel=new cc.Component.EventHandler,e.onRefreshItem=new cc.Component.EventHandler,e.index=0,e.max=9,e.itemCountPerPage=0,e.pages=[],e.currentLevel=1,e.autoScrollToCurrentLevel=!0,e}return i(e,t),e.prototype.selectLevel=function(t){this.onSelectLevel?this.onSelectLevel.emit([t.target,Number(t.target.name)]):console.warn("LevelSelector: onSelectLevel callback is nil")},e.prototype.onLoad=function(){this.pages.splice(0,this.pages.length),this.itemCountPerPage=this.template.childrenCount;var t=Math.floor(this.max/this.itemCountPerPage);this.max%this.itemCountPerPage>0&&(t+=1);for(var e=0;e<t-1;e++){var o=cc.instantiate(this.template);this.pageview.addPage(o),this.pages.push(o)}this.pages.push(this.template);for(var n=0;n<t;n++){o=this.pages[n];for(var i=0;i<o.childrenCount;i++){var r=o.children[i],s=r.getChildByName("label"),a=n*this.itemCountPerPage+Number(i)+1;a>this.max&&(r.active=!1),r.name=a+"",s.getComponent(cc.Label).string=r.name}}},e.prototype.refreshItem=function(t,e){e>this.currentLevel?(t.opacity=100,t.getComponent(cc.Button).enabled=!1):(t.opacity=255,t.getComponent(cc.Button).enabled=!0)},e.prototype.refresh=function(){console.log("LevelSelctor: refresh");for(var t=0;t<this.pages.length;t++)for(var e=this.pages[t],o=0;o<e.childrenCount;o++){var n=e.children[o],i=t*this.itemCountPerPage+Number(o)+1;this.refreshItem(n,i),this.onRefreshItem.emit([n,i])}this.autoScrollToCurrentLevel&&this.scrollToCurrentLevel()},e.prototype.start=function(){},e.prototype.scrollToCurrentLevel=function(){var t=this.currentLevel,e=Math.floor(t/this.itemCountPerPage);0==t%this.itemCountPerPage&&(e-=1),this.pageview.scrollToPage(e,.3)},e.prototype.nextPage=function(){this.pageview.scrollToPage(this.pageview.getCurrentPageIndex()+1,.3)},e.prototype.prevPage=function(){this.pageview.scrollToPage(this.pageview.getCurrentPageIndex()-1,.3)},r([c(cc.PageView)],e.prototype,"pageview",void 0),r([c(cc.Node)],e.prototype,"template",void 0),r([c(cc.Component.EventHandler)],e.prototype,"onSelectLevel",void 0),r([c(cc.Component.EventHandler)],e.prototype,"onRefreshItem",void 0),r([c],e.prototype,"index",void 0),r([c],e.prototype,"max",void 0),r([a],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],Level:[function(t,e,o){"use strict";cc._RF.push(e,"1946dqDA1JONpQLrHy9m1sI","Level");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c,l=t("../../framework/plugin_boosts/gamesys/FSM"),u=t("../../framework/plugin_boosts/utils/EventManager"),p=t("./Pop"),f=t("./pballs/BallFactory"),h=t("./Effect"),d=t("./Sound"),y=t("./Consts"),_=t("../../framework/plugin_boosts/utils/Common"),v=t("../../framework/plugin_boosts/gamesys/PsSpawner"),m=t("../../framework/plugin_boosts/misc/SpriteFrameCache"),b=t("./R"),w=cc._decorator,C=w.ccclass,S=w.property;(function(t){t[t.Default=0]="Default",t[t.Prepare=1]="Prepare",t[t.Game=2]="Game",t[t.End=3]="End",t[t.AccToBaseLine=4]="AccToBaseLine"})(c||(c={}));var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LEVELFILE_KEY="dmgame",e._originVel=0,e.psPlayer=null,e.assistBallIndex=0,e._offsetX=0,e.bossHpNode=null,e._subLevel=0,e._theme=0,e._level=0,e._isbossLevel=!1,e._bottomGap=1e4,e.level=1,e.w=0,e.querystamp=1,e.visibleBalls={},e._vel=0,e.isMovePaused=!1,e.maxIndex=0,e.topY=0,e._balls={},e.lastBallID=0,e.rowNum=0,e.colNum=0,e.usedBalls={},e.assistBalls=[],e.usedABalls=[],e.isWarnning=!1,e.isReviving=!1,e.paoTongDist=0,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.BASE_LINE=1*cc.visibleRect.height/2+200,this.fsm=this.addComponent(l.default),this.fsm.init(this),this.fsm.addStates(c),this.fsm.enterState(c.Default),null==this.w&&(this.w=cc.visibleRect.width),this.querystamp=1,this.visibleBalls={},this._vel=y.default.SPEED_NORMAL,this._originVel=this._vel,this.assistBallIndex=0,this._offsetX=(this.w-y.default.coloumMax*y.default.ball_width)/2-16,this.paoTongDist=cc.visibleRect.height/2-Math.abs(this.node.position.y)},e.prototype.clear=function(){this.psPlayer&&this.psPlayer.clear()},e.prototype.loadLevel=function(t){return this.loadSpriteByLevel(t)},e.prototype.init=function(t,e){this.level=t,this.w=e},e.prototype.onDestroy=function(){},e.prototype.pauseMove=function(){this.isMovePaused=!0},e.prototype.resumeMove=function(){this.isMovePaused=!1},e.prototype.setPositionY=function(t){this.node.y=t},e.prototype.stop=function(){this.stopWarn(),this.fsm.changeState(c.End)},e.prototype.revive=function(){this.fsm.changeState(c.Game)},e.prototype.play=function(t,e){return this.psPlayer.play3(t,e)},e.prototype.getBottomDistance=function(){for(var t=this.maxIndex;t>=0;t--){var e=this._balls[t];if(e){var o=this.coord(e.index),n=this.xy(o[0],o[1]);return this.node.convertToWorldSpaceAR(n).y}}return this.node.y+this.topY},e.prototype.checkDead=function(){this._bottomGap<this.paoTongDist+y.default.DEAD_LINE&&!this.isReviving&&(this.stop(),u.event.emit("Pop.onDead"))},e.prototype.onEnter_GameState=function(){console.log("Level Ready !!!!!!"),u.event.emit("Pop.onReady"),this.schedule(this.checkDead,1)},e.prototype.onExit_GameState=function(){this.unschedule(this.checkDead)},e.prototype.onUpdate_GameState=function(){if(!this.isMovePaused){this.node.x;var t=this.node.y;this._bottomGap=this.getBottomDistance();var e=this._bottomGap;e<=this.paoTongDist+y.default.WARN_LINE&&e>this.paoTongDist?(this.startWarn(),this._vel=y.default.SPEED_SLOW):e<=o.BASE_LINE&&e>this.paoTongDist+y.default.WARN_LINE?(this.stopWarn(),this._vel=Math.min(y.default.SPEED_NORMAL,this._vel+y.default.DOWN_VEL_D)):e>o.BASE_LINE&&(this.stopWarn(),this._vel=Math.max(y.default.SPEED_MAX,this._vel+y.default.DOWN_VEL_A)),this.setPositionY(t+this._vel)}},e.prototype.moveAcc=function(t){var e=this,o=this._vel;this._vel=0,this.isReviving=!0;var n=cc.moveBy(.5,cc.v2(0,t)).easing(cc.easeSineInOut());this.node.runAction(cc.sequence(n,cc.callFunc(function(){e._vel=o,e.isReviving=!1})))},e.prototype.isStopped=function(){return this.fsm.isInState(c.End)},e.prototype.isReady=function(){return this.fsm.isInState(c.Game)},e.prototype.stopWarn=function(){this.isWarnning=!1,this.unschedule(this.warrning)},e.prototype.warrning=function(){d.default.NearFailLine()},e.prototype.startWarn=function(){this.isWarnning||(console.log("\u8de8\u8d8a\u8b66\u6212\u7ebf1\uff01\uff01\uff01\uff01\uff01"),this.schedule(this.warrning,1),this.isWarnning=!0)},e.prototype.finallBallIndex=function(){return this.lastBallID},e.prototype.setVel=function(){},e.prototype.getRandomVisibleBall=function(){var t=g.getRandomInArray(this._balls);if(0!=t)return t},e.prototype.prepare=function(){this.fsm.changeState(c.Prepare)},e.prototype.onUpdate_PrepareState=function(){var t=this.node.y;this.setPositionY(t+y.default.MOVE_UP_SPEED),t>=cc.visibleRect.height/2&&this.fsm.changeState(c.Game)},e.prototype.processNonlinkedBalls=function(){var t=this.queryNonLinkedBalls();h.default.dropBalls(t)},e.prototype.insertBallWithAnimation=function(t,e,o,n){void 0===n&&(n=.1);var i=this.insertBall(e,t);if(i){var r=i.node.x,s=i.node.y;i.node.position=o,h.default.ballHitAnimation(i);var a=cc.moveTo(n,cc.v2(r,s)).easing(cc.easeBackOut());return i.node.runAction(a),i}},e.prototype._parseLevelInfo=function(t){return s(this,void 0,void 0,function(){var e,o,n,i;return a(this,function(r){switch(r.label){case 0:for(e=0,o=1;o<y.default.theme.length;o++)if(n=y.default.theme[o],(e+=n)>=t){this._subLevel=t-(e-n),this._theme=o,this._level=t,this._isbossLevel=e==t;break}return console.log("////////////////////////////////////-"),console.log("Level - ",t),console.log("ThemeID - ",this._theme),console.log("SubLevel - ",this._subLevel),console.log("BossLevel - ",this._isbossLevel),console.log("////////////////////////////////////-"),i=y.default.path.level+"leva_"+t+".json",[4,_.default.loadJson(i)];case 1:return[2,r.sent()]}})})},e.prototype.needUpdate=function(){for(var t=this.maxIndex;t>=0;t--){var e=this._balls[t];if(e){this.maxIndex=t;var o=this.coord(e.index);this.rowNum=o[1];break}}},e.prototype.removeBallIndex=function(t){"number"!=typeof t&&(t=t.index);var e=this._balls[t];return delete this._balls[t],this.needUpdate(),e},e.prototype.removeBall=function(t){var e=this.removeBallIndex(t);e&&e.removeSelf()},e.prototype.removeBallIndices=function(t){for(var e in t){var o=t[e];delete this._balls[o.index]}this.needUpdate()},e.prototype.removeBalls=function(t){for(var e in t){var o=t[e];delete this._balls[o.index],o.removeSelf()}this.needUpdate()},e.prototype.replaceBall=function(t,e){this.removeBall(t),this.insertBall(t,e)},e.prototype.newCellInfo=function(t,e,o){return t=Math.floor(t),e=Math.floor(e),{index:o=o||this.index(t,e),col:t,row:e,ball:this._balls[o]}},e.prototype.insertBall=function(t,e){if("number"!=typeof t&&(t=t.index),!this._balls[t]){e=e||g.randomInt(1,9);var o=f.default.createBall(e);o.level=this,o.index=t,o.node.scale=y.default.ball_scale,this.node.addChild(o.node),this._balls[t]=o,t>this.maxIndex&&(this.maxIndex=t);var n=this.coord(t),i=n[0],r=n[1];return r>this.rowNum&&(console.log("update rowNum ->"+r),this.rowNum=r),o.node.setPosition(this.xy(i,r)),o}console.log("[Level.insertBall] - already exist at index : ",t,this.coord(t))},e.prototype.isBossLevel=function(){return this._isbossLevel},e.prototype.isKey=function(t){return t.color==y.default.ballTypes.key},e.prototype.getLevel=function(){return this._level},e.prototype.getSubLevel=function(){return this._subLevel},e.prototype.getThemeID=function(){return this._theme},e.prototype.index=function(t,e){return(e-1)*this.colNum+t},e.prototype.coord=function(t){var e=Math.ceil(t/this.colNum),o=t%this.colNum;return 0==o&&(o=this.colNum),[o,e]},e.prototype.isEdgeCoord=function(t){var e=t[0];return e<=1||e>=this.colNum},e.prototype.setRowNum=function(t){this.rowNum=t},e.prototype.isValidCoord=function(t,e){return!(e<=0||e>this.rowNum||t<=0||t>this.colNum)},e.prototype.getTopY=function(){return this.topY},e.prototype.xy=function(t,e){var o=t*y.default.ball_width,n=this.topY-e*y.default.ball_height;return e%2==0&&(o=t*y.default.ball_width+y.default.ball_width/2),o=o-y.default.ball_width/2+this._offsetX,cc.v2(o,n)},e.prototype.cellAt=function(t,e){t=t+y.default.ball_width/2-this._offsetX,e=this.topY-e+y.default.ball_height/2;var o=Math.floor(e/y.default.ball_height),n=t/y.default.ball_width;return o%2!=0&&(n+=.5),n=Math.floor(n),this.newCellInfo(n,o)},e.prototype.getBallsByType=function(t){var e=[];for(var o in this._balls){var n=this._balls[o];n.color==t&&e.push(n)}return e},e.prototype.getMinIndexBall=function(t){if(0!=t.length){var e=t[1].index;for(var o in t){var n=t[o];e>n.index&&(e=n.index)}return this._balls[e]}},e.prototype.getMaxIndex=function(){return this.maxIndex},e.FilterLowerEmpty=function(t,e,o){return!t.getBall(e,o)&&e>0&&e<=t.colNum?t.newCellInfo(e,o):null},e.prototype.getFitPosition=function(t,e){for(var o=999999,n=this.coord(t.index),i=this.getAroundByFilter(t.index,function(t,e,o){return o<n[1]?null:!t.getBall(e,o)&&e>0&&e<=t.colNum?t.newCellInfo(e,o):null}),r=i[0],s=0;s<i.length;s++){var a=i[s];if(a){var c=this.xy(a.col,a.row),l=e.sub(c).magSqr();l<o&&(r=a,o=l)}}return r},e.prototype.getBallByIndex=function(t){return this._balls[t]},e.GetBall=function(t,e,o){if(t.isValidCoord(e,o)){var n=t.index(e,o);return t._balls[n]}return null},e.prototype.getBall=function(t,e){return o.GetBall(this,t,e)},e.FilterEmpty=function(t,e,o){return!t.getBall(e,o)&&e>0&&e<=t.colNum?t.newCellInfo(e,o):null},e.FilterAll=function(t,e,o){return t.newCellInfo(e,o)},e.prototype.getAroundByFilter=function(t,e){var o=[],n=this.coord(t),i=n[0],r=n[1],s=r%2;0==s&&(s=-1);var a=r-1,c=i,l=r,u=i-1,p=r,f=i+1,h=r+1,d=i-s,y=r+1,_=i,v=e(this,i-s,r-1),m=e(this,c,a),g=e(this,u,l),b=e(this,f,p),w=e(this,d,h),C=e(this,_,y);return v&&o.push(v),m&&o.push(m),g&&o.push(g),b&&o.push(b),w&&o.push(w),C&&o.push(C),o},e.prototype._recursionSame=function(t,e,n){var i=this.getAroundByFilter(e,o.GetBall);for(var r in i){var s=i[r];s.color==n&&this.querystamp!=s.querystamp&&(s.querystamp=this.querystamp,this._recursionSame(t,s.index,n),t.push(s))}},e.prototype.queryLinkedSameBalls=function(t,e){var o=[];return this._recursionSame(o,t,e),this.querystamp=this.querystamp+1,o},e.prototype.getAroundByCoord=function(t,e,o,n,i){var r=[],s=e%2;if(0==s&&(s=-1),o){var a=e-1,c=t-s,l=e-1,u=t,p=this.getBall(c,a),f=this.getBall(u,l);p&&r.push(p),f&&r.push(f)}if(n){var h=e,d=t-1,y=e,_=t+1,v=this.getBall(d,h),m=this.getBall(_,y);v&&r.push(v),m&&r.push(m)}if(i){var g=e+1,b=t-s,w=e+1,C=t,S=this.getBall(b,g),O=this.getBall(C,w);S&&r.push(S),O&&r.push(O)}return r},e.prototype.queryNonLinkedBalls=function(t){var e=this;t=t||this.rowNum,t=Math.max(1,t-y.default.numInLine);for(var o={},n=function(i,r){var s=e.getAroundByCoord(i,r,!0,!0,!0);for(var a in s){var c=s[a];if(e.querystamp!=c.querystamp){c.querystamp=e.querystamp;var l=e.coord(c.index),u=l[0],p=l[1];p>=t&&(n(u,p),o[c.index]=c)}}},i=1;i<=this.colNum;i++)(a=this.getBall(i,t))&&n(i,t);this.querystamp=this.querystamp+1;for(var r=[],s=this.index(1,t+1);s<=this.maxIndex;s++){var a;o[s]||(a=this._balls[s])&&r.push(a)}return r},e.prototype.queryAroundBalls=function(t,e){var o=this;if("number"==typeof t){var n=this.coord(t);t=this.newCellInfo(n[0],n[1])}e=e||1;var i=[],r=function(t,e,n){if(!(n<=0)){var s=o.getAroundByCoord(t,e,!0,!0,!0);for(var a in s){var c=s[a];if(o.querystamp!=c.querystamp){c.querystamp=o.querystamp;var l=o.coord(c.index),u=l[0],p=l[1];r(u,p,n-1),i.push(c)}}}};return r(t.col,t.row,e),this.querystamp=this.querystamp+1,i},e.prototype.getVisibleMinCellInfo=function(){var t=this.node.y,e=this.topY-(cc.visibleRect.height/2-t),o=Math.ceil(e/y.default.ball_height);return o=Math.max(1,o),this.newCellInfo(1,o)},e.prototype.queryVisibleBallsByColor=function(t){for(var e=[],o=this.getVisibleMinCellInfo().index;o<=this.maxIndex;o++){var n=this._balls[o];n&&n.color==t&&e.push(n)}return e},e.prototype.queryVisibleColors=function(){for(var t=[],e={},o=this.getVisibleMinCellInfo().index;o<this.maxIndex;o++){var n=this._balls[o];n&&(e[n.color]=!0)}for(var i in e)p.default.isBase(i)&&t.push(i);return t},e.prototype.queryValidEmptyIndices=function(){for(var t=[],e=this.getVisibleMinCellInfo().index;e<=this.maxIndex;e++)this._balls[e]||this.getAroundByFilter(e,o.GetBall).length>0&&t.push(e);return t},e.prototype.getBallsCascade2=function(t){for(var e=[],n=0;n<2;n++)e[n]={};var i=[t.index],r=this.getAroundByFilter(t.index,o.GetBall);for(var s in r){var a=r[s];e[0][a.index]=a,i.push(a.index);var c=this.getAroundByFilter(a.index,o.GetBall);for(var l in c){var u=c[l];e[1][u.index]=u}}for(var s in i){var p=i[s];delete e[1][p]}return e},e.prototype.updateBossHp=function(t){if(this.bossHpNode)for(var e=0,o=1;o<this.bossHpNode.childrenCount;o++){var n=this.bossHpNode.children[o];e<t?(n.active=!0,e++):n.active=!1}},e.prototype.loadSpriteByLevel=function(t){return s(this,void 0,void 0,function(){var e,o,n,i,r,s,c,l,u,h,d,_,v,g,w;return a(this,function(a){switch(a.label){case 0:return[4,this._parseLevelInfo(t)];case 1:for(e=a.sent(),console.log(e),o=e.levballs,n=o.lines,i=o.oneline,r=o.balls,s=n*y.default.ball_height+y.default.ball_height/2,this.setPositionY(-s),this.topY=s,l=y.default.path.pp+"topLine.png",c=s-y.default.ball_height/2+10,(u=new cc.Node).position=cc.v2(0,c),m.default.instance.getSpriteFrame(l).then(function(t){u.addComponent(cc.Sprite).spriteFrame=t,u.width=cc.visibleRect.width}),u.parent=this.node,this.isBossLevel()&&(this.bossHpNode=cc.instantiate(b.R.bossHpPrefab),this.bossHpNode.position=cc.v2(0,c+10),this.bossHpNode.parent=this.node),h=1,this.usedBalls={},d=1;d<=n;d++)for(_=1;_<=i;_++)h>=r.length||(v=r[h-1],this.usedBalls[v]=!0,0!=v?((g=f.default.createBall(v)).level=this,g.index=h,g.node.position=this.xy(_,d),g.node.scale=y.default.ball_scale,g.node.parent=this.node,this._balls[h]=g,this.lastBallID=h):delete this._balls[h],h++);for(w in this.rowNum=n,this.colNum=i,this.assistBalls=e.serveballs.balls,this.maxIndex=h,this.usedABalls=[],this.usedBalls)p.default.isBase(w)&&this.usedABalls.push(w);return[2]}})})},e.prototype.balls=function(){return this._balls},e.prototype.getAssistBalls=function(){return this.assistBalls},e.prototype.getToBeShootBallColor=function(){var t=this.assistBallIndex,e=null;if(t>this.assistBalls.length)if(g.randomInt(0,100)>y.default.rateSpecialBall){var o=this.queryVisibleColors();e=g.getRandomInArray(o)}else e=g.getRandomInArray(y.default.specialABalls);else e=this.assistBalls[t],this.assistBallIndex=this.assistBallIndex+1,e<=0&&(o=this.queryVisibleColors(),e=g.getRandomInArray(o));return null==e&&(e=g.randomInt(1,8)),e},e.prototype.getWidth=function(){return this.w||400},e.BASE_LINE=750,r([S(v.default)],e.prototype,"psPlayer",void 0),o=r([C],e)}(cc.Component);o.default=O,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/FSM":"FSM","../../framework/plugin_boosts/gamesys/PsSpawner":"PsSpawner","../../framework/plugin_boosts/misc/SpriteFrameCache":"SpriteFrameCache","../../framework/plugin_boosts/utils/Common":"Common","../../framework/plugin_boosts/utils/EventManager":"EventManager","./Consts":"Consts","./Effect":"Effect","./Pop":"Pop","./R":"R","./Sound":"Sound","./pballs/BallFactory":"BallFactory"}],LoadingManager:[function(t,e,o){"use strict";cc._RF.push(e,"48049jD6zJMmoi+cPkRhX7D","LoadingManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Loading=void 0;var s=cc._decorator,a=s.ccclass,c=s.property;o.Loading=null;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.loadingNode=null,e.loadingSprite=null,e.loadingText=null,e.blockEventComp=null,e._callback=null,e._target=null,e}return i(e,t),e.prototype.onLoad=function(){this.loadingNode=cc.instantiate(this.prefab),this.blockEventComp=this.loadingNode.getComponent(cc.BlockInputEvents),this.loadingNode.parent=this.node,this.loadingNode.zIndex=9999,this.loadingSprite=this.loadingNode.getComponentInChildren(cc.Sprite),this.loadingText=this.loadingNode.getComponentInChildren(cc.Label),this.hide(),o.Loading=this},e.prototype.start=function(){this.loadingSprite.node.runAction(cc.rotateBy(4,360).repeatForever())},e.prototype.dealyClose=function(){this.hide(),this._callback&&this._callback.call(this._target)},e.prototype.show=function(t,e,o,n,i){void 0===e&&(e=null),void 0===o&&(o=!0),void 0===n&&(n=null),void 0===i&&(i=null),this.loadingNode&&(this.loadingNode.active=!0,this.loadingNode.resumeAllActions(),this.blockEventComp.enabled=o,this._callback=n,this._target=i,e&&(this.loadingText.string=e),t>0&&(this.unschedule(this.dealyClose),this.scheduleOnce(this.dealyClose,t)))},e.prototype.hide=function(){this.loadingNode.active=!1,this.loadingNode.pauseAllActions()},r([c(cc.Prefab)],e.prototype,"prefab",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LocalLifeSystem:[function(t,e,o){"use strict";cc._RF.push(e,"550c0O4ualLIYQoOOiFtGsz","LocalLifeSystem"),Object.defineProperty(o,"__esModule",{value:!0}),o.LifeSystem=o.LocalLifeSystem=void 0;var n=t("../utils/EventManager"),i=t("../misc/Signal"),r=function(){function t(){this.sec_per_live=300,this.live_free_get=5,this.max_freeLives_seconds=this.live_free_get*this.sec_per_live,this.livesSeconds=0,this.isEnabledAutoRecovery=!0,this.recoverySignal=new i.default}return t.prototype.init=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.sec_per_live=t||this.sec_per_live,this.live_free_get=e||this.live_free_get,this.max_freeLives_seconds=this.sec_per_live*this.live_free_get,this.livesSeconds=0,this.lastLifeSaveTime=Number(localStorage.getItem("sys_life_lastLifeSaveTime")||(new Date).getTime()),g.setGlobalInstance(o.LifeSystem,"LocalLifeSystem"),n.event.on("onEnterForeground",this.onEnterForeground,this),this.onTimeRequested((new Date).getTime()),console.log("\u4f53\u529b\u7cfb\u7edf\u521d\u59cb\u5316",this)},t.prototype.onEnterForeground=function(){this.onTimeRequested((new Date).getTime())},Object.defineProperty(t.prototype,"nextLifeTime",{get:function(){return(this.lives+1)*this.sec_per_live-this.livesSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lives",{get:function(){return Math.floor(this.livesSeconds/this.sec_per_live)},enumerable:!1,configurable:!0}),t.prototype.save=function(){this.lastLifeSaveTime=(new Date).getTime(),localStorage.setItem("sys_life_lastLifeSaveTime",this.lastLifeSaveTime+"")},t.prototype.onTimeRequested=function(t){if(this.lastLifeSaveTime){var e=Math.floor((t-this.lastLifeSaveTime)/1e3);this.livesSeconds=Math.min(this.max_freeLives_seconds,e)}},t.prototype.startCheck=function(t,e){var o=this;if(!this.task_checkLives){var n=t.call(e);this.task_checkLives=setInterval(function(){var i=t.call(e);n!=i&&i==o.live_free_get-1&&(o.livesSeconds=0,o.save()),i<o.live_free_get&&(o.livesSeconds=o.livesSeconds+1,i+o.lives>i&&(console.log("\u83b7\u5f97\u5728\u7ebf\u5956\u52b1\u4e00\u9897\u661f",o.lives),o.recoverySignal.fire(o.lives),o.livesSeconds=0,o.save())),n=i},1e3)}},t}();o.LocalLifeSystem=r,o.LifeSystem=new r,cc._RF.pop()},{"../misc/Signal":"Signal","../utils/EventManager":"EventManager"}],LocalTimeSystem:[function(t,e,o){"use strict";cc._RF.push(e,"2f847KAJNJCwrvg4K3CKFUv","LocalTimeSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.init=function(e){null!=e&&null!=e&&(t.utc_sec=e,cc.sys.WECHAT_GAME==cc.sys.platform&&(wx.onHide(this.onHidden),wx.onShow(this.onShown)),g.setGlobalInstance(t))},t.startTimer=function(){this.timer=setInterval(function(){t.utc_sec+=1e3},1e3)},t.stopTimer=function(){clearInterval(this.timer)},t.getSec=function(){return t.utc_sec||(new Date).getTime()/1e3},t.getDate=function(){if(t.utc_sec){var e=new Date;return e.setTime(1e3*t.utc_sec),e}return new Date},t.onHidden=function(){console.log("game enter background")},t.onShown=function(){console.log("game enter foreground")},t}();o.default=n,cc._RF.pop()},{}],LockedDialog:[function(t,e,o){"use strict";cc._RF.push(e,"decbewePyZFe7jO5W4hvncV","LockedDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/ui/View"),a=t("../Pop"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelLabel=null,e.startLabel=null,e.lv=0,e.from="",e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onShown=function(t,e){this.lv=t,this.from=e,this.levelLabel.string="\u5173\u5361"+t;var o=a.default.getStarNeed(t);this.startLabel.string=o+""},e.prototype.onHidden=function(){},e.prototype.click_back=function(){"main"==this.from?this.getComponent(s.default).hide():cc.director.loadScene("Main")},r([u(cc.Label)],e.prototype,"levelLabel",void 0),r([u(cc.Label)],e.prototype,"startLabel",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../framework/plugin_boosts/ui/View":"View","../Pop":"Pop"}],LoseDialog:[function(t,e,o){"use strict";cc._RF.push(e,"593d2koeKRDCpSsgNdBE8Cg","LoseDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/utils/Common"),a=t("../../../framework/plugin_boosts/ui/ViewManager"),c=t("../Info"),l=t("../../../framework/plugin_boosts/ui/View"),u=t("../Pop"),p=t("../Sound"),f=t("../Game"),h=t("../../../framework/plugin_boosts/ui/UIFunctions"),d=cc._decorator,y=d.ccclass,_=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.levelLabel=null,e.revive_count=0,e.max_revive_count=1,e.revive_btn=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.click_retry=function(){this.getComponent(l.default).hide(),a.default.instance.show("Game/StartDialog",c.UserInfo.currentLevel,"game")},e.prototype.revive=function(){this.revive_count++,this.getComponent(l.default).hide(),f.default.instance.revive()},e.prototype.click_revive=function(){this.revive_count>=this.max_revive_count||c.UserInfo.handleChoice(c.ChoiceType.Revive,this.revive,this)},e.prototype.onShown=function(){p.default.Failure(),s.default.jellyJump2(this.node,.8,1),this.scoreLabel.string=u.default.score+"",this.levelLabel.string="\u7b2c"+c.UserInfo.currentLevel+"\u5173",this.revive_count>=this.max_revive_count?h.default.setButtonEnabled(this.revive_btn,!1):h.default.setButtonEnabled(this.revive_btn,!0)},e.prototype.onHidden=function(){},e.prototype.click_home=function(){cc.director.loadScene("Main")},r([_(cc.Label)],e.prototype,"scoreLabel",void 0),r([_(cc.Label)],e.prototype,"levelLabel",void 0),r([_(cc.Button)],e.prototype,"revive_btn",void 0),r([y],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../framework/plugin_boosts/ui/UIFunctions":"UIFunctions","../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Game":"Game","../Info":"Info","../Pop":"Pop","../Sound":"Sound"}],LuckyDialog:[function(t,e,o){"use strict";cc._RF.push(e,"a94275+JmtMx6iZb18iwKTe","LuckyDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/ui/ToastManager"),a=t("../../../framework/plugin_boosts/ui/ViewManager"),c=t("../../../framework/plugin_boosts/ui/View"),l=t("../Info"),u=t("../R0"),p=t("../../../framework/plugin_boosts/ui/UIFunctions"),f=t("../../../framework/plugin_boosts/misc/SpriteFrameCache"),h=t("../Consts"),d=t("../../../framework/plugin_boosts/utils/Common"),y=t("../../../framework/plugin_boosts/gamesys/Device"),_=cc._decorator,v=_.ccclass,m=_.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canRotate=!0,e.sprites=[],e.labels=[],e.btn_freedraw=null,e.btn_videodraw=null,e.freedrawTip=null,e.costLabel=null,e.drawLabel=null,e.btn_draw=null,e.pool=[],e}return i(e,t),e.prototype.start=function(){},e.prototype.share_succ=function(){this.startDraw(),this.refreshView()},e.prototype.click_freeedraw=function(){this._canRotate?g.isNextDay(l.UserInfo.freedrawTime)&&(l.UserInfo.freedrawTime=(new Date).getTime(),l.UserInfo.save(),this.share_succ()):s.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},e.prototype.costDraw=function(){l.UserInfo.diamond-200>=0?(l.UserInfo.addDiamond(-200,!1),this.share_succ()):(s.Toast.make("\u91d1\u5e01\u4e0d\u8db3"),this.getComponent(c.default).hide(),a.default.instance.show("Game/ShopDialog"))},e.prototype.onLoad=function(){for(var t=0;t<u.R.luckyConfig.json.length;t++)for(var e=u.R.luckyConfig.json[t],o=parseFloat(e.chance),n=0;n<2*o;n++)this.pool.push(t);g.shuffle(this.pool),console.log(this.pool)},e.prototype.startDraw=function(){var t=g.getRandomInArray(this.pool);this.startWheel(t),y.default.playEffect(u.R.audio_draw)},e.prototype.click_draw=function(){this._canRotate?this.costDraw():s.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},e.prototype.click_videodraw=function(){if(this._canRotate)if(l.UserInfo.luckyVideoWatchCount>=h.default.MaxVideoCount){if(!g.isNextDay(l.UserInfo.luckyVideoWatchTime))return void this.costDraw();l.UserInfo.luckyVideoWatchCount=0,l.UserInfo.luckyVideoWatchTime=(new Date).getTime(),l.UserInfo.save()}else l.UserInfo.luckyVideoWatchCount++,this.startDraw(),l.UserInfo.save();else s.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},e.prototype.calculateAngle=function(t){return 45*-t-23-1440-this.wheelSp.node.rotation%360},e.prototype.refreshView=function(){this.costLabel.string="200",p.default.setButtonEnabled(this.btn_draw,l.UserInfo.diamond>=200),l.UserInfo.luckyVideoWatchCount>=h.default.MaxVideoCount?(this.drawLabel.string="\u5df2\u4f7f\u7528\u5b8c",p.default.setButtonEnabled(this.btn_videodraw,!1)):this.drawLabel.string="\u770b\u89c6\u9891\u62bd\u5956",g.isGreaterDate(new Date,new Date(l.UserInfo.freedrawTime))?(this.btn_freedraw.interactable=!0,this.btn_freedraw.node.opacity=255,this.freedrawTip.active=!1):(this.btn_freedraw.interactable=!1,this.btn_freedraw.node.opacity=100,this.freedrawTip.active=!0);for(var t=function(){var t=u.R.luckyConfig.json[o],n="";n=0==t.type?"\u91d1\u5e01 x "+t.num:u.R.itemConfig.json[t.item].name+" x "+(t.num||1),e.labels[o].string=n;var i=e.sprites[o];f.default.instance.getSpriteFrame(h.default.path.pp+t.img+".png").then(function(t){i.spriteFrame=t}),i.node.scale=t.imgscale||1},e=this,o=0;o<u.R.luckyConfig.json.length;o++)t()},e.prototype.onShown=function(){d.default.jellyJump2(this.node,.8,1),this.refreshView()},e.prototype.startWheel=function(t){console.log("target wheel:",t);var e=this.calculateAngle(t);if(this._canRotate){this._canRotate=!1;var o=cc.rotateBy(Math.abs(e/400),e),n=cc.callFunc(function(){this._canRotate=!0,this.showRes(t)}.bind(this)),i=cc.sequence(o,n);this.wheelSp.node.runAction(i.easing(cc.easeQuadraticActionInOut()))}else s.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},e.prototype.showRes=function(t){var e=u.R.luckyConfig.json[t];this.getComponent(c.default).hide(),a.default.instance.show("Game/GetDialog",e.item,e.num,this.onGetReward,this)},e.prototype.onGetReward=function(){a.default.instance.show("Game/LuckyDialog")},e.prototype.update=function(){},e.prototype.click_close=function(){this._canRotate?this.getComponent(c.default).hide():s.Toast.make("\u6b63\u5728\u7ed9\u60a8\u6311\u9009\u5956\u54c1...")},r([m(cc.Sprite)],e.prototype,"wheelSp",void 0),r([m([cc.Sprite])],e.prototype,"sprites",void 0),r([m([cc.Label])],e.prototype,"labels",void 0),r([m(cc.Button)],e.prototype,"btn_freedraw",void 0),r([m(cc.Button)],e.prototype,"btn_videodraw",void 0),r([m(cc.Node)],e.prototype,"freedrawTip",void 0),r([m(cc.Label)],e.prototype,"costLabel",void 0),r([m(cc.Label)],e.prototype,"drawLabel",void 0),r([m(cc.Button)],e.prototype,"btn_draw",void 0),r([v],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../framework/plugin_boosts/gamesys/Device":"Device","../../../framework/plugin_boosts/misc/SpriteFrameCache":"SpriteFrameCache","../../../framework/plugin_boosts/ui/ToastManager":"ToastManager","../../../framework/plugin_boosts/ui/UIFunctions":"UIFunctions","../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../R0":"R0"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"22b5e5IV6NBXbY67HWIrZqr","Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../framework/plugin_boosts/ui/ViewManager"),a=t("./Info"),c=t("../../framework/plugin_boosts/gamesys/Device"),l=t("../../framework/plugin_boosts/utils/Common"),u=t("../../framework/plugin_boosts/gamesys/LocalLifeSystem"),p=t("./R0"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.logoNode=null,e.freeHeartNode=null,e.freeHeartSecLabel=null,e.heartNode=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.loaded||a.UserInfo.init(),a.UserInfo.ui_levelDialog_heart=this.heartNode,o.loaded=!0},e.prototype.start=function(){g.isNextDay(a.UserInfo.lastSignTime)&&s.default.instance.show("Game/SignDialog"),g.isNextDay(a.UserInfo.luckyVideoWatchTime)&&(a.UserInfo.luckyVideoWatchTime=(new Date).getTime(),a.UserInfo.luckyVideoWatchCount=0),this.scheduleOnce(this.logAnim,.2),this.freeHeartNode.active=!1,this.schedule(this.tickHeart,1),c.default.playMusic(p.R.audio_bgm)},e.prototype.tickHeart=function(){var t=u.LifeSystem.nextLifeTime;a.UserInfo.getLife()>=u.LifeSystem.live_free_get?this.freeHeartNode.active=!1:(this.freeHeartNode.active=!0,this.freeHeartSecLabel.string=new Date(1e3*t).format("mm:ss"))},e.prototype.logAnim=function(){l.default.jellyJump(this.logoNode)},e.prototype.toggle_sfx=function(t){c.default.setSoundsEnable(!t.isChecked)},e.prototype.click_play=function(){s.default.instance.show("Game/StartDialog",a.UserInfo.level,"main")},e.prototype.click_privacy=function(){var t;console.log("\u70b9\u51fb\u4e86\u9690\u79c1\u653f\u7b56");var e=null===(t=window.parent?window.parent:window)||void 0===t?void 0:t.AndroidBridge;null==e||e.startWebView("\u9690\u79c1\u653f\u7b56")},e.prototype.click_selectLevel=function(){s.default.instance.show("Game/LevelDialog")},e.prototype.click_lucky=function(){s.default.instance.show("Game/LuckyDialog")},e.prototype.click_rank=function(){s.default.instance.show("wechat/WxRankDialog")},e.prototype.click_qd=function(){s.default.instance.show("Game/SignDialog")},e.prototype.click_shop=function(){s.default.instance.show("Game/ShopDialog")},e.prototype.click_share=function(){},e.loaded=!1,r([d(cc.Node)],e.prototype,"logoNode",void 0),r([d(cc.Node)],e.prototype,"freeHeartNode",void 0),r([d(cc.Label)],e.prototype,"freeHeartSecLabel",void 0),r([d(cc.Node)],e.prototype,"heartNode",void 0),o=r([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/Device":"Device","../../framework/plugin_boosts/gamesys/LocalLifeSystem":"LocalLifeSystem","../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../framework/plugin_boosts/utils/Common":"Common","./Info":"Info","./R0":"R0"}],MessageBoxComponent:[function(t,e,o){"use strict";cc._RF.push(e,"5d14c63Zc1PupexE+EkksQp","MessageBoxComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./View"),a=t("./MessageBoxManager"),c=t("../utils/Common"),l=cc._decorator,u=l.ccclass,p=l.property,f=(l.executeInEditMode,l.playOnFocus,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_title=null,e.node_content=null,e.btn_ok=null,e.btn_cancel=null,e.messageBoxCallback=null,e.label_ok=null,e.label_cancel=null,e.group_ok_cancel=null,e.group_ok=null,e}return i(e,t),e.prototype.onLoad=function(){this.label_ok=this.btn_ok.getChildByName("Label").getComponent(cc.Label),this.label_cancel=this.btn_cancel.getChildByName("Label").getComponent(cc.Label),this.getComponent(s.default).setDelegate(this),this.bgAnimation=this.node.getChildByName("bg").getComponent(cc.Animation)},e.prototype.onHidden=function(){},e.prototype.onShown=function(t){c.default.jellyJump2(this.node,.8,1),this.node_title.string=t.title,this.node_content.string=t.content,this.messageBoxCallback=t.callback,t.extra&&(this.label_ok.string=t.extra.okText,this.label_cancel.string=t.extra.cancelText),t.buttons==a.MessageBox.OK_CANCEL?(this.group_ok_cancel.active=!0,this.group_ok.active=!1):(this.group_ok.active=!0,this.group_ok_cancel.active=!1)},e.prototype.start=function(){},e.prototype.on_btn_ok_clicked=function(){this.messageBoxCallback&&this.messageBoxCallback.call(null,a.MessageBox.OK),this.getComponent(s.default).hide()},e.prototype.on_btn_cancel_clicked=function(){this.messageBoxCallback&&this.messageBoxCallback.call(null,a.MessageBox.CANCEL),this.getComponent(s.default).hide()},r([p(cc.Label)],e.prototype,"node_title",void 0),r([p(cc.Label)],e.prototype,"node_content",void 0),r([p(cc.Node)],e.prototype,"btn_ok",void 0),r([p(cc.Node)],e.prototype,"btn_cancel",void 0),r([p(cc.Node)],e.prototype,"group_ok_cancel",void 0),r([p(cc.Node)],e.prototype,"group_ok",void 0),r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"../utils/Common":"Common","./MessageBoxManager":"MessageBoxManager","./View":"View"}],MessageBoxManager:[function(t,e,o){"use strict";cc._RF.push(e,"bc48cBqkERHuJx+iKzOzwOV","MessageBoxManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.MessageBox=void 0;var s=t("./ViewManager"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.instance=null,r([l(cc.Prefab)],e.prototype,"prefab",void 0),o=r([c],e)}(cc.Component);o.default=u;var p=function(){function t(){}return t.prototype.start=function(){},t.show=function(t,e,o,n){return e=null==e||null==e?"\u63d0\u793a":e,new Promise(function(i){s.default.instance.showFromPrefab(u.instance.prefab,"MessageBox",{title:e,content:t,buttons:o,extra:n,callback:function(t){i(t)}})})},t.OK=1,t.CANCEL=0,t.OK_CANCEL=2,t}();o.MessageBox=p,cc._RF.pop()},{"./ViewManager":"ViewManager"}],MyItemTemplate:[function(t,e,o){"use strict";cc._RF.push(e,"a291eUFzHpL96658D4FrqYp","MyItemTemplate");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flag_selected=null,e.icon=null,e.numLabel=null,e.num=0,e.data=0,e}return i(e,t),e.prototype.onLoad=function(){this.flag_selected.active=!1},e.prototype.start=function(){},e.prototype.setNumber=function(t){this.num=t,this.numLabel.string=t},Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.flag_selected.active},enumerable:!1,configurable:!0}),e.prototype.click_item=function(){this.flag_selected.active=!this.flag_selected.active,this.flag_selected.active?this.numLabel.string=this.num-1+"":this.numLabel.string=this.num+""},r([c(cc.Node)],e.prototype,"flag_selected",void 0),r([c(cc.Sprite)],e.prototype,"icon",void 0),r([c(cc.Label)],e.prototype,"numLabel",void 0),r([c],e.prototype,"num",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Net:[function(t,e,o){"use strict";cc._RF.push(e,"9e139lB+RRCNpxXRSqgoURG","Net"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.httpGet=function(t,e){var o=cc.loader.getXMLHttpRequest();o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300){var t=o.responseText;e(t)}},o.open("GET",t,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate"),o.timeout=5e3,o.send()},t.httpPost=function(t,e,o){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4===n.readyState&&n.status>=200&&n.status<300){var t=n.responseText;o(t)}else o(-1)},n.open("POST",t,!0),cc.sys.isNative&&n.setRequestHeader("Accept-Encoding","gzip,deflate"),n.timeout=5e3,n.send(e)},t}();o.default=n,cc._RF.pop()},{}],NewPackDialog:[function(t,e,o){"use strict";cc._RF.push(e,"4f890w686FEbZhNGoe+1vUn","NewPackDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Info"),a=t("../R0"),c=t("../../../framework/plugin_boosts/utils/Common"),l=t("../Consts"),u=t("../../../framework/plugin_boosts/ui/View"),p=t("../../../framework/plugin_boosts/ui/ToastManager"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemListLayout=null,e.template=null,e}return i(e,t),e.prototype.onLoad=function(){this.itemListLayout.showlist(function(t,e){var o=t.getChildByName("icon").getComponent(cc.Sprite),n=t.getChildByName("name").getComponent(cc.Label),i=t.getChildByName("num").getComponent(cc.Label),r=a.R.itemConfig.json[e.item];c.default.setDisplay(o,l.default.path.pp+r.img),o.node.scale=r.scale,n.string=r.name+"",i.string="x "+e.num},s.UserInfo.configs.new_pack,this.template)},e.prototype.start=function(){},e.prototype.share_succ=function(){for(var t=s.UserInfo.configs.new_pack,e=0;e<t.length;e++){var o=t[e];s.UserInfo.addItem(o.item,o.num,!1)}p.Toast.make("\u65b0\u624b\u793c\u5305\u9886\u53d6\u6210\u529f!"),s.UserInfo.new_pack_redeemed=!0,s.UserInfo.save(),this.getComponent(u.default).hide()},e.prototype.onShown=function(){c.default.jellyJump2(this.node,.8,1)},e.prototype.click_get=function(){s.UserInfo.handleChoice(s.ChoiceType.NewPack,this.share_succ,this)},r([d(cc.Layout)],e.prototype,"itemListLayout",void 0),r([d(cc.Node)],e.prototype,"template",void 0),r([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../framework/plugin_boosts/ui/ToastManager":"ToastManager","../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../R0":"R0"}],NormalBall:[function(t,e,o){"use strict";cc._RF.push(e,"adcf385ZdFKnoeiOr6Jt86L","NormalBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Sound"),a=t("../Effect"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(t,e,o){var n=this;s.default.BallImpact(),this.stopMoving();var i=this.level.insertBallWithAnimation(this.color,e,o);if(this.removeSelf(),0==this.linkEnabled)return!1;var r=this.level.queryLinkedSameBalls(e.index,this.color);return r.length>=3?(this.scheduleOnce(function(){a.default.dismissBalls(r)},.1),!0):!!i&&void this.scheduleOnce(function(){var t=n.level.queryAroundBalls(i.index);for(var e in t){var o=t[e];o.onNeighbourInserted&&o.onNeighbourInserted(i)}})},e}(r.default);o.default=c,cc._RF.pop()},{"../Ball":"Ball","../Effect":"Effect","../Sound":"Sound"}],NotEnoughDialog:[function(t,e,o){"use strict";cc._RF.push(e,"f79c32KI3NGdbLD2EBKygK/","NotEnoughDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Info"),a=t("../../../framework/plugin_boosts/utils/Common"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.freeNode=null,e.normalNode=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onShown=function(){a.default.jellyJump2(this.node,.8,1),this.refreshBtn()},e.prototype.refreshBtn=function(){this.freeNode.active=g.isNextDay(s.UserInfo.shopFreeDiamondTime2),this.normalNode.active=!this.freeNode.active},e.prototype.share_succ=function(){s.UserInfo.shopFreeDiamondTime2=(new Date).getTime(),s.UserInfo.addDiamond(s.UserInfo.getChoice(s.ChoiceType.NotEnoughFreeNum)||100),this.refreshBtn()},e.prototype.click_free=function(){g.isNextDay(s.UserInfo.shopFreeDiamondTime2)&&s.UserInfo.handleChoice(s.ChoiceType.NotEnoughFree,this.share_succ,this)},r([u(cc.Node)],e.prototype,"freeNode",void 0),r([u(cc.Node)],e.prototype,"normalNode",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../framework/plugin_boosts/utils/Common":"Common","../Info":"Info"}],PandoraPoint:[function(t,e,o){"use strict";cc._RF.push(e,"3f36aidibxFPY2TBTu8gRyi","PandoraPoint");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberVisible=!0,e}return i(e,t),e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite),this.label=this.getComponentInChildren(cc.Label),this.label.node.active=this.numberVisible},e.prototype.start=function(){},e.prototype.setNumber=function(t){this.numberVisible&&(this.label.string=t+""),this.numberVisible&&(this.label.node.active=0!=t),this.sprite.enabled=0!=t},r([c],e.prototype,"numberVisible",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"69495bpMX5Av5pbrNxnGI8/","PoolManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o){this.nodePool={},this.nodes={},this.managed=!1,this.aliveObjects=[],this.onCreateObject=e,this.target=o,this.root=t,t&&t.on(cc.Node.EventType.CHILD_REMOVED,this.onNodeRemove,this)}return t.prototype.onNodeRemove=function(t){this.put(t)},t.prototype.objects=function(){return this.aliveObjects},t.prototype.clearAlives=function(){for(;0<this.aliveObjects.length;)this.aliveObjects[0].removeFromParent()},t.prototype.getPool=function(t){"string"==typeof t&&"number"==typeof t||(t=t._uuid||t.name);var e=this.nodePool[t];return null==e&&(e=new cc.NodePool,this.nodePool[t]=e),e},t.prototype.get=function(t){var e=this.getPool(t).get();return this.onCreateObject&&null==e?(e=this.onCreateObject.call(this.target,t),this.root&&e.setParent(this.root),e||console.warn(e,"onCreateObject must return an object"),this.managed&&this.aliveObjects.push(e),this.nodes[e.uuid]=t,e):(this.root&&e.setParent(this.root),this.managed&&this.aliveObjects.push(e),e)},t.prototype.tag=function(t,e){this.nodes[t.uuid]=e},t.prototype.put=function(t,e){void 0===e&&(e=null),null==e&&(e=this.nodes[t.uuid]),this.getPool(e).put(t),this.managed&&this.aliveObjects.splice(this.aliveObjects.indexOf(t),1)},t.prototype.clear=function(t){if(this.managed&&this.aliveObjects.splice(0,this.aliveObjects.length),t)this.getPool(t).clear();else for(var e in this.nodePool)this.nodePool[e].clear()},t.prototype.size=function(t){return this.getPool(t).size()},t}();o.default=n,cc._RF.pop()},{}],Pop:[function(t,e,o){"use strict";cc._RF.push(e,"b4ac1vW8gxFxZlrpK7S5vYp","Pop"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../framework/plugin_boosts/utils/EventManager"),i=t("./Sound"),r=t("./Effect"),s=t("./Consts"),a=t("./Info"),c=t("../../framework/plugin_boosts/ui/ViewManager"),l=t("./Game"),u=function(){function t(){}return t.init=function(t){this.level=t,this.score=0,this.gold=0,this.startTime=0,this.doubleGold=!1,n.event.on("Pop.onGotKey",this.onGotKey,this),n.event.on("Pop.onBossDead",this.onBossDead,this),n.event.on("Pop.onDead",this.onDead,this),n.event.on("Pop.onReady",this.onGameStart,this),n.event.on("Pop.onUseItem",this.onUseItem,this)},t.clear=function(){n.event.off("Pop.onGotKey",this.onGotKey,this),n.event.off("Pop.onBossDead",this.onBossDead,this),n.event.off("Pop.onDead",this.onDead,this),n.event.off("Pop.onReady",this.onGameStart,this),n.event.off("Pop.onUseItem",this.onUseItem,this)},t.onDimissBall=function(){},t.onUseItem=function(){},t.onCombo=function(){},t.onShare=function(){},t.onRated=function(){},t.onCharged=function(){},t.onBossDead=function(t){this.onGotKey(t),this.addScore(s.default.BOSS_SCORE)},t.onGameStart=function(){this.startTime=(new Date).getTime()},t.onDead=function(){this.record(!1),n.event.emit("Pop.pause"),c.default.instance.show("Game/LoseDialog")},t.addScore=function(t){this.score=this.score+t,l.default.instance.setScore(this.score)},t.enableDoubleGold=function(){this.doubleGold=!0},t.addGold=function(t){var e=this.doubleGold?2:1;this.gold=this.gold+t*e},t.gotoLevel=function(){},t.record=function(e){var o=a.UserInfo.currentLevel;if(this.playsec=((new Date).getTime()-this.startTime)/1e3,a.UserInfo.prepareLevel(o),a.UserInfo.gameplay_sec=a.UserInfo.gameplay_sec+this.playsec,this.breakRecord=!1,e){var n=t.getStar(o,this.score),i=a.UserInfo.getLevelInfo(o,"score");this.score>i&&(a.UserInfo.setLevelInfo(o,"score",this.score),this.breakRecord=!0),a.UserInfo.level==a.UserInfo.currentLevel&&(a.UserInfo.level=a.UserInfo.level+1),a.UserInfo.setLevelInfo(o,"sec",this.playsec),a.UserInfo.lv_cleartime=this.playsec,a.UserInfo.lv_star=n}else{var r=a.UserInfo.getLevelInfo(o,"lose")||0;r+=1,a.UserInfo.setLevelInfo(o,"lose",r),console.log("==============================="),console.log("level:"+o),console.log("lose time: "+r),console.log("playsec:"+this.playsec),console.log("score:"+this.score)}a.UserInfo.saveProgress(),a.UserInfo.save()},t.onGotKey=function(){var t=this;this.level.stop(),i.default.Key(),this.addScore(s.default.KEY_SCORE);var e=r.default.dismissAll();setTimeout(function(){t.record(!0),c.default.instance.show("Game/WinDialog")},e+800)},t.isKey=function(t){for(var e=1;s.default.key_ids.length;e++)if(t==s.default.key_ids[e])return!0;return!1},t.isBoss=function(t){for(var e=1;e<s.default.key_ids.length;e++)if(t==s.default.key_ids[e])return!0;return!1},t.isDye=function(t){return t>=17&&t<=24},t.isSplit=function(t){return t>=9&&t<=16},t.isBase=function(t){return(t=parseInt(t))>=1&&t<=8},t.checkCollision=function(t,e,o,n,i){var r=t-o,a=e-n;return!(r*r+a*a>=(i=i||s.default.BALL_DIST_SQ))},t.getStar=function(t,e){if(e<1e3)return 0;var o=s.default.scoreToStar[t];return e<o[0]?1:e>o[1]?3:2},t.isBossLevel=function(t){if(0==t)return!1;for(var e=0,o=1;o<s.default.theme.length;o++)if((e+=s.default.theme[o])==t)return!0;return!1},t.getStarNeed=function(t){for(var e=0,o=0,n=1;n<s.default.theme.length;n++){if(e+=s.default.theme[n],o+=s.default.unlockStar[n]||0,e==t-1)return o+(s.default.unlockStar[n+1]||0);if(e>=t)break}return o},t.score=0,t.breakRecord=!1,t.gold=0,t.startTime=0,t.doubleGold=!1,t.playsec=0,t}();o.default=u,cc._RF.pop()},{"../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../framework/plugin_boosts/utils/EventManager":"EventManager","./Consts":"Consts","./Effect":"Effect","./Game":"Game","./Info":"Info","./Sound":"Sound"}],PsFxPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"dc35b3gh69DGIz45mLQJxDM","PsFxPlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./PsFx"),l=t("./Device"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e._fx=null,e.spriteFrame=null,e.duration=-1,e.randomRotaion=!1,e}return i(e,t),e.prototype.start=function(){},Object.defineProperty(e.prototype,"fx",{get:function(){if(null==this._fx&&this.prefab){var t=cc.instantiate(this.prefab);if(null==t)return null;var e=t.getComponent(c.default);null==e&&(e=this.addComponent(c.default)),t.setPosition(0,0),t.setParent(this.node),this._fx=e}return this._fx},enumerable:!1,configurable:!0}),e.prototype.isPlaying=function(){return this.fx.isPlaying},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){var t=this._fx;t&&(t.node.active=!1)},e.prototype.sleep=function(t){return new Promise(function(e){setTimeout(function(){e()},t)})},e.prototype.play=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return l.default.playEffect(this.audioClip,!1),(t=this.fx)?(t.node.active=!0,this.randomRotaion&&(t.node.rotation=g.randomInt(0,360)),t.reset(),[2,t.play(this.audioClip,this.spriteFrame)]):[3,1];case 1:return this.duration>0?[4,this.sleep(1e3*this.duration)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},r([f(cc.Prefab)],e.prototype,"prefab",void 0),r([f(cc.SpriteFrame)],e.prototype,"spriteFrame",void 0),r([f({type:cc.AudioClip})],e.prototype,"audioClip",void 0),r([f],e.prototype,"duration",void 0),r([f],e.prototype,"randomRotaion",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Device":"Device","./PsFx":"PsFx"}],PsFx:[function(t,e,o){"use strict";cc._RF.push(e,"5e90fpm8LtO1JagTdF3cTrm","PsFx");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Device"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.particles=[],e.animations=[],e.armature=null,e.isPlaying=!1,e.sfx=null,e.sprite=null,e.playedTime=0,e.duration=-1,e.fadeAfterFinish=-1,e.repeatTime=1,e.removeAfterFinish=!1,e}return i(e,t),e.prototype.onLoad=function(){null==this.sprite&&(this.sprite=this.getComponent(cc.Sprite));var t=this.getComponent(cc.Animation);t&&this.animations.push(t);var e=this.getComponent(cc.ParticleSystem);e&&this.particles.push(e);for(var o=0;o<this.node.childrenCount;o++){var n=this.node.children[o],i=n.getComponent(cc.ParticleSystem);if(i)this.particles.push(i);else{var r=n.getComponent(cc.Animation);r&&this.animations.push(r)}}"undefined"!=typeof dragonBones&&(this.armature=this.getComponent(dragonBones.ArmatureDisplay),this.armature||(this.armature=this.getComponentInChildren(dragonBones.ArmatureDisplay)))},e.prototype.play=function(t,e){var o=this;void 0===t&&(t=null),void 0===e&&(e=null),this.isPlaying=!0;var n=0;t&&(this.sfx=t),e&&(this.sprite.spriteFrame=e),this.node.active=!0;for(var i=0;i<this.particles.length;i++)(r=this.particles[i]).resetSystem(),n<r.duration&&(n=r.duration+r.life+r.lifeVar);for(i=0;i<this.animations.length;i++){var r,a=(r=this.animations[i]).getClips();if(a&&a.length>0){var c=a[0],l=c.duration/c.speed;l>n&&(n=l),r.play(c.name)}}if(this.sfx&&s.default.playEffect(this.sfx,!1),this.armature){if(this.armature.playAnimation("",this.repeatTime),(n=this.duration)<=0)return new Promise(function(t){o.armature.addEventListener(dragonBones.EventObject.COMPLETE,function(){console.log("armature play complete"),o.removeAfterFinish?o.node.removeFromParent():o.fadeOnFinish(t)})})}else n+=.1;return new Promise(function(t){setTimeout(function(){o.isValid&&(o.removeAfterFinish?o.node.removeFromParent():o.fadeOnFinish(t))},1e3*n)})},e.prototype.fadeOnFinish=function(t){this.isPlaying=!1;for(var e=0;e<this.particles.length;e++)this.particles[e].stopSystem();if(this.fadeAfterFinish>0){var o=cc.sequence(cc.fadeOut(this.fadeAfterFinish),cc.callFunc(t));this.node.runAction(o)}else t()},e.prototype.reset=function(){this.playedTime=0},e.prototype.start=function(){},r([l({type:cc.AudioClip})],e.prototype,"sfx",void 0),r([l(cc.Sprite)],e.prototype,"sprite",void 0),r([l],e.prototype,"duration",void 0),r([l],e.prototype,"fadeAfterFinish",void 0),r([l],e.prototype,"repeatTime",void 0),r([l],e.prototype,"removeAfterFinish",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Device":"Device"}],PsSpawner:[function(t,e,o){"use strict";cc._RF.push(e,"12e8aPL0IBPxYKO3t/sxN/O","PsSpawner");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./PsFx"),l=t("./PoolManager"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.poolmgr=new l.default},e.prototype.start=function(){},e.prototype.clear=function(){this.poolmgr&&this.poolmgr.clear()},e.prototype.getFx=function(t){var e=this;return new Promise(function(o){var n=e.poolmgr.get(t);if(null==n){if(!(t instanceof cc.Prefab))return void cc.loader.loadRes(t,cc.Prefab,function(i,r){(n=cc.instantiate(r)).setParent(e.node);var s=n.getComponent(c.default);s.name=t,o(s)});n=cc.instantiate(t),e.poolmgr.tag(n,t)}n.setParent(e.node),n.active=!1;var i=n.getComponent(c.default);i.reset(),o(i)})},e.prototype.onFxFinshPlay=function(t){this.poolmgr.put(t.node)},e.prototype.play=function(t,e,o,n,i){return void 0===e&&(e=cc.Vec2.ZERO),void 0===o&&(o=0),s(this,void 0,void 0,function(){var r;return a(this,function(s){switch(s.label){case 0:return[4,this.getFx(t)];case 1:return(r=s.sent()).node.position=e,r.node.rotation=o,[4,r.play(n,i)];case 2:return s.sent(),this.onFxFinshPlay(r),[2]}})})},e.prototype.play2=function(t,e,o,n){return void 0===e&&(e=cc.Vec2.ZERO),void 0===o&&(o=0),void 0===n&&(n=0),s(this,void 0,void 0,function(){var i;return a(this,function(r){switch(r.label){case 0:return[4,this.getFx(t)];case 1:return(i=r.sent()).node.position=e,i.node.scale=n,i.node.rotation=o,[4,i.play()];case 2:return r.sent(),this.onFxFinshPlay(i),[2]}})})},e.prototype.play3=function(t,e){return s(this,void 0,void 0,function(){var o,n=this;return a(this,function(i){switch(i.label){case 0:return[4,this.getFx(t)];case 1:return(o=i.sent()).node.position=e,o.play().then(function(){return n.onFxFinshPlay(o)}),[2,o.node]}})})},r([p],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./PoolManager":"PoolManager","./PsFx":"PsFx"}],R0:[function(t,e,o){"use strict";cc._RF.push(e,"fced0LdcyZPC6gbzwy5Odop","R0");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.R=void 0;var s=cc._decorator,a=s.ccclass,c=s.property;o.R=null;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.luckyConfig=null,e.itemConfig=null,e.strengthConfig=null,e.signConfig=null,e.shopConfig=null,e.fx_heart=null,e.levelbtn_normal=null,e.levelbtn_current=null,e.levelbtn_locked=null,e.audio_buy=null,e.audio_draw=null,e.audio_invalid=null,e.audio_heart_start=null,e.audio_heart_end=null,e.audio_bgm=null,e.audio_get_diamond=null,e}return i(e,t),e.prototype.onLoad=function(){o.R=this},e.prototype.start=function(){},r([c(cc.JsonAsset)],e.prototype,"luckyConfig",void 0),r([c(cc.JsonAsset)],e.prototype,"itemConfig",void 0),r([c(cc.JsonAsset)],e.prototype,"strengthConfig",void 0),r([c(cc.JsonAsset)],e.prototype,"signConfig",void 0),r([c(cc.JsonAsset)],e.prototype,"shopConfig",void 0),r([c(cc.Prefab)],e.prototype,"fx_heart",void 0),r([c(cc.SpriteFrame)],e.prototype,"levelbtn_normal",void 0),r([c(cc.SpriteFrame)],e.prototype,"levelbtn_current",void 0),r([c(cc.SpriteFrame)],e.prototype,"levelbtn_locked",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_buy",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_draw",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_invalid",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_heart_start",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_heart_end",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_bgm",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_get_diamond",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],RandomBall:[function(t,e,o){"use strict";cc._RF.push(e,"05d3d7lm7BLfZG5FBViy6ML","RandomBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isValid=!0,e}return i(e,t),e.prototype.onCollided=function(){return this._isValid&&(this.changeColor(g.randomInt(1,9)),this._isValid=!1),!1},e}(t("../Ball").default);o.default=r,cc._RF.pop()},{"../Ball":"Ball"}],R:[function(t,e,o){"use strict";cc._RF.push(e,"6ba84INq09MqrQqz77Umbsm","R");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.R=void 0;var s=cc._decorator,a=s.ccclass,c=s.property;o.R=null;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baseBall=null,e.dotPrefab=null,e.fx_dismiss=null,e.goldPrefab=null,e.keyPrefab=null,e.fx_boss_passiveSkill=null,e.fx_boss_activeSkill=null,e.fx_ice=null,e.fx_ice_fullscreen=null,e.fx_same_color_beam=null,e.fx_changeColor=null,e.fx_start_beam=null,e.fx_hitBoss=null,e.fx_bossDead=null,e.fx_finishlevel=null,e.bossHpPrefab=null,e.bombPrefab=null,e.fx_addScores=[],e.fx_tui=null,e.itemConfig=null,e.audio_bgm=null,e.audio_bossbgm=null,e}return i(e,t),e.prototype.onLoad=function(){o.R=this},e.prototype.start=function(){},r([c(cc.Prefab)],e.prototype,"baseBall",void 0),r([c(cc.Prefab)],e.prototype,"dotPrefab",void 0),r([c(cc.Prefab)],e.prototype,"fx_dismiss",void 0),r([c(cc.Prefab)],e.prototype,"goldPrefab",void 0),r([c(cc.Prefab)],e.prototype,"keyPrefab",void 0),r([c(cc.Prefab)],e.prototype,"fx_boss_passiveSkill",void 0),r([c(cc.Prefab)],e.prototype,"fx_boss_activeSkill",void 0),r([c(cc.Prefab)],e.prototype,"fx_ice",void 0),r([c(cc.Prefab)],e.prototype,"fx_ice_fullscreen",void 0),r([c(cc.Prefab)],e.prototype,"fx_same_color_beam",void 0),r([c(cc.Prefab)],e.prototype,"fx_changeColor",void 0),r([c(cc.Prefab)],e.prototype,"fx_start_beam",void 0),r([c(cc.Prefab)],e.prototype,"fx_hitBoss",void 0),r([c(cc.Prefab)],e.prototype,"fx_bossDead",void 0),r([c(cc.Prefab)],e.prototype,"fx_finishlevel",void 0),r([c(cc.Prefab)],e.prototype,"bossHpPrefab",void 0),r([c(cc.Prefab)],e.prototype,"bombPrefab",void 0),r([c([cc.Prefab])],e.prototype,"fx_addScores",void 0),r([c(cc.Prefab)],e.prototype,"fx_tui",void 0),r([c(cc.JsonAsset)],e.prototype,"itemConfig",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_bgm",void 0),r([c({type:cc.AudioClip})],e.prototype,"audio_bossbgm",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],SameColorRemoveBall:[function(t,e,o){"use strict";cc._RF.push(e,"4aa2bQxyQpCJJ4r2Ywf4hNi","SameColorRemoveBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Ball"),c=t("../Effect"),l=t("../R"),u=t("../Consts"),p=t("../../../framework/plugin_boosts/gamesys/PsFxPlayer"),f=t("../Sound"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fx=null,e.max=10,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.fx=this.addComponent(p.default),this.fx.prefab=l.R.fx_start_beam},e.prototype.start=function(){this.fx.play()},e.prototype.shootTargets=function(t,e){return r(this,void 0,void 0,function(){var t,o,n;return s(this,function(){for(o in(t=this.getWorldPosition()).addSelf(cc.v2(0,u.default.ball_width/2)),e)n=e[o],c.default.moveBezier(0,l.R.fx_same_color_beam,t,n.getWorldPosition(),.2);return[2]})})},e.prototype.onCollided=function(t,e,o){var n=this;this.stopMoving();var i=this.level;if(t){var r=i.queryVisibleBallsByColor(t.color);(r=r.filter(function(t,e){return r.length-e<n.max})).length>0&&f.default.ColorBall(),c.default.dismissBalls(r,!0),this.shootTargets(o,r)}var s=cc.spawn(cc.fadeOut(.3),cc.rotateBy(.3,360));return this.node.runAction(cc.sequence(s,cc.callFunc(this.node.destroy,this.node))),!0},e}(a.default);o.default=h,cc._RF.pop()},{"../../../framework/plugin_boosts/gamesys/PsFxPlayer":"PsFxPlayer","../Ball":"Ball","../Consts":"Consts","../Effect":"Effect","../R":"R","../Sound":"Sound"}],ShopDialog:[function(t,e,o){"use strict";cc._RF.push(e,"f751dgI5RJJz5L5U3edkiPF","ShopDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/utils/Common"),a=t("../R0"),c=t("./ShopItemTemplate"),l=t("../Info"),u=t("../../../framework/plugin_boosts/ui/ToastManager"),p=t("../Consts"),f=t("../../../framework/plugin_boosts/ui/ViewManager"),h=t("../../../framework/plugin_boosts/ui/UIFunctions"),d=t("../../../framework/plugin_boosts/gamesys/Device"),y=cc._decorator,_=y.ccclass,v=y.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.template=null,e.btn_free=null,e.freeLabel=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onShown=function(){s.default.jellyJump2(this.node,.8,1),this.refreshView()},e.prototype.refreshView=function(){var t=this;console.log(a.R.shopConfig.json),this.layout.showlist(function(e,o){var n=e.getComponent(c.default);n.flag_hot.active=o.hot;var i=a.R.itemConfig.json[o.item];o.img?s.default.setDisplay(n.icon,p.default.path.pp+o.img):s.default.setDisplay(n.icon,p.default.path.pp+i.img),n.numLabel.string=l.UserInfo.getItem(o.item),n.numberLabel.string="x"+o.num,n.data=o,n.titleLabel.string=i.name,n.costLabel.string=o.cost,n.clickBuySignal.on(t.onClickBuy,t)},a.R.shopConfig.json,this.template),this.scheduleOnce(this.fixpos,.05),this.refreshBtn()},e.prototype.refreshBtn=function(){g.isNextDay(l.UserInfo.shopFreeDiamondTime)?(h.default.setButtonEnabled(this.btn_free,!0),this.freeLabel.string="\u514d\u8d39\u91d1\u5e01"):(h.default.setButtonEnabled(this.btn_free,!1),this.freeLabel.string="\u4eca\u65e5\u5df2\u9886\u53d6")},e.prototype.updateItems=function(t){this.layout.content.children.forEach(function(e){var o=e.getComponent(c.default);o&&o.data.item==t&&(o.numLabel.string=l.UserInfo.getItem(o.data.item))})},e.prototype.fixpos=function(){this.layout.scrollToTop(.1)},e.prototype.onClickBuy=function(t){var e=parseInt(t.cost);l.UserInfo.diamond>=e?(l.UserInfo.addDiamond(-e),d.default.playEffect(a.R.audio_buy),l.UserInfo.addItem(t.item,t.num),u.Toast.make(t.ps+" x "+t.num+" \u8d2d\u4e70\u6210\u529f"),this.updateItems(t.item),l.UserInfo.save()):(f.default.instance.show("Game/NotEnoughDialog"),d.default.playEffect(a.R.audio_invalid))},e.prototype.click_buy=function(){},e.prototype.share_succ=function(){l.UserInfo.shopFreeDiamondTime=(new Date).getTime();var t=l.UserInfo.getChoice(l.ChoiceType.ShopFreeNum)||100;l.UserInfo.addDiamond(t),this.refreshBtn(),f.default.instance.show("Game/ShowDialog",p.default.ItemTypes.Gold,t)},e.prototype.click_free=function(){g.isNextDay(l.UserInfo.shopFreeDiamondTime)&&l.UserInfo.handleChoice(l.ChoiceType.Shop,this.share_succ,this)},r([v(cc.ScrollView)],e.prototype,"layout",void 0),r([v(cc.Node)],e.prototype,"template",void 0),r([v(cc.Button)],e.prototype,"btn_free",void 0),r([v(cc.Label)],e.prototype,"freeLabel",void 0),r([_],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../framework/plugin_boosts/gamesys/Device":"Device","../../../framework/plugin_boosts/ui/ToastManager":"ToastManager","../../../framework/plugin_boosts/ui/UIFunctions":"UIFunctions","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../R0":"R0","./ShopItemTemplate":"ShopItemTemplate"}],ShopItemTemplate:[function(t,e,o){"use strict";cc._RF.push(e,"fb41bEyrhlIu6h95QKq6keZ","ShopItemTemplate");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/misc/Signal"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flag_hot=null,e.numberLabel=null,e.costLabel=null,e.titleLabel=null,e.icon=null,e.numLabel=null,e.clickBuySignal=new s.default,e.data=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.click_buy=function(){this.clickBuySignal.fire(this.data)},r([l(cc.Node)],e.prototype,"flag_hot",void 0),r([l(cc.Label)],e.prototype,"numberLabel",void 0),r([l(cc.Label)],e.prototype,"costLabel",void 0),r([l(cc.Label)],e.prototype,"titleLabel",void 0),r([l(cc.Sprite)],e.prototype,"icon",void 0),r([l(cc.Label)],e.prototype,"numLabel",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../framework/plugin_boosts/misc/Signal":"Signal"}],ShowDialog:[function(t,e,o){"use strict";cc._RF.push(e,"e7c3bgmvsFNPqT7a+O0OxJC","ShowDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Consts"),a=t("../R0"),c=t("../../../framework/plugin_boosts/utils/Common"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diamondLabel=null,e.icon=null,e.item_id=0,e._num=0,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onShown=function(t,e){this.item_id=t,this._num=e;var o=a.R.itemConfig.json[t];c.default.setDisplay(this.icon,s.default.path.pp+o.img),this.diamondLabel.string=o.name+" x "+e},r([p(cc.Label)],e.prototype,"diamondLabel",void 0),r([p(cc.Sprite)],e.prototype,"icon",void 0),r([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../R0":"R0"}],SignDialog:[function(t,e,o){"use strict";cc._RF.push(e,"5e67eClydxCzrW6aCIkUEV/","SignDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./SignItem"),a=t("../Info"),c=t("../../../framework/plugin_boosts/ui/UIFunctions"),l=t("../../../framework/plugin_boosts/utils/Common"),u=t("../Consts"),p=t("../R0"),f=t("../../../framework/plugin_boosts/ui/ViewManager"),h=cc._decorator,d=h.ccclass,y=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemsParent=null,e.items=[],e.btn_sign=null,e.btnLabel=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.itemsParent.children.forEach(function(e){t.items.push(e.getComponent(s.default))})},e.prototype.onShown=function(){l.default.jellyJump2(this.node,.8,1),this.refreshView()},e.prototype.refreshView=function(){g.isNextDay(a.UserInfo.lastSignTime)&&a.UserInfo.signedTime<7?(this.btnLabel.string="\u7b7e\u5230",c.default.setButtonEnabled(this.btn_sign,!0)):(this.btnLabel.string="\u5df2\u7b7e\u5230",c.default.setButtonEnabled(this.btn_sign,!1));for(var t=a.UserInfo.configs.sign,e=0;e<this.items.length;e++){var o=this.items[e],n=t[e],i=p.R.itemConfig.json[parseInt(n.item)];l.default.setDisplay(o.icon,u.default.path.pp+i.img),o.flag_signed.active=e<a.UserInfo.signedTime,o.numLabel.string="+"+n.num}},e.prototype.start=function(){},e.prototype.share_succ=function(){var t=a.UserInfo.signedTime,e=(this.items[t],a.UserInfo.configs.sign[t]);console.log(t,e),a.UserInfo.lastSignTime=(new Date).getTime(),a.UserInfo.signedTime++,a.UserInfo.save(),this.refreshView(),5==e.item?a.UserInfo.addDiamond(e.num):a.UserInfo.addItem(e.item,e.num),f.default.instance.show("Game/ShowDialog",e.item,e.num)},e.prototype.click_sign=function(){g.isNextDay(a.UserInfo.lastSignTime)&&a.UserInfo.handleChoice(a.ChoiceType.Sign,this.share_succ,this)},r([y(cc.Node)],e.prototype,"itemsParent",void 0),r([y(cc.Button)],e.prototype,"btn_sign",void 0),r([y(cc.Label)],e.prototype,"btnLabel",void 0),r([d],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../framework/plugin_boosts/ui/UIFunctions":"UIFunctions","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../R0":"R0","./SignItem":"SignItem"}],SignItem:[function(t,e,o){"use strict";cc._RF.push(e,"c0378Z5kA1F2JgIb2cAUsrT","SignItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=(new cc.Color(181,255,100),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.numLabel=null,e.flag_signed=null,e}return i(e,t),e.prototype.onLoad=function(){},Object.defineProperty(e.prototype,"signed",{set:function(t){this.flag_signed.active=t},enumerable:!1,configurable:!0}),e.prototype.start=function(){},r([c(cc.Sprite)],e.prototype,"icon",void 0),r([c(cc.Label)],e.prototype,"numLabel",void 0),r([c(cc.Node)],e.prototype,"flag_signed",void 0),r([a],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],Signal:[function(t,e,o){"use strict";cc._RF.push(e,"bf602DYuhZP7Z8VfN9eJFzO","Signal");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)n[i]=r[s];return n};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){this.add(t,e)}return t.prototype.add=function(t,e){this.callback=t,this.target=e},t.prototype.fire=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.callback&&(t=this.callback).call.apply(t,n([this.target],e))},t.prototype.on=function(t,e){this.callback=t,this.target=e},t.prototype.clear=function(){this.callback=null},t}();o.default=i,cc._RF.pop()},{}],Sound:[function(t,e,o){"use strict";cc._RF.push(e,"18f9agIK11E04NA2HorbykW","Sound"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Consts"),i=t("../../framework/plugin_boosts/gamesys/Device"),r=t("./R");cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u5207\u6362\u540e\u53f0"),i.default.stopMusic()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u5207\u6362\u524d\u53f0"),i.default.playMusic(r.R.audio_bgm)});var s=function(){function t(){}return t.GameBGM=function(){i.default.stopMusic()},t.LevelBGM=function(){i.default.stopMusic()},t.init=function(){var t=this;cc.loader.loadResDir("sounds",cc.AudioClip,function(e,o,n){for(var i=0;i<o.length;i++)t.clips[n[i]]=o[i]})},t.playSfx=function(e,o){i.default.playEffect(t.clips[e],o)},t.Bomb=function(){this.playSfx(n.default.path.sound+"sound_bomb",!1)},t.BossSep=function(){this.playSfx(n.default.path.sound+"sound_bossSmallSkill",!1)},t.BossLar=function(){this.playSfx(n.default.path.sound+"sound_bossLarSkill",!1)},t.BossCome=function(){this.playSfx(n.default.path.sound+"sound_bossCome",!1)},t.BossAttacked=function(){this.playSfx(n.default.path.sound+"sound_bossAttacked",!1)},t.BallImpact=function(){this.playSfx(n.default.path.sound+"sound_hit",!1)},t.BubDel=function(){this.playSfx(n.default.path.sound+"sound_bubDel",!1)},t.BubShoot=function(){this.playSfx(n.default.path.sound+"sound_hdAchStre",!1)},t.BubSplit=function(){this.playSfx(n.default.path.sound+"sound_bubSpeSplit",!1)},t.BubDye=function(){this.playSfx(n.default.path.sound+"sound_bubSpeDye",!1)},t.BubEmpty=function(){this.playSfx(n.default.path.sound+"sound_bubSpeEmpty",!1)},t.BubEnergy=function(){this.playSfx(n.default.path.sound+"sound_bubSpeEnergy",!1)},t.BubSteelShoot=function(){this.playSfx(n.default.path.sound+"sound_bubSpeSteelShoot",!1)},t.BubSteelImpact=function(){this.playSfx(n.default.path.sound+"sound_bubSpeSteelBombClack",!1)},t.BubWood=function(){this.playSfx(n.default.path.sound+"sound_bubSpeWood",!1)},t.BubStone=function(){this.playSfx(n.default.path.sound+"sound_bubSpeStone",!1)},t.ColorBall=function(){this.playSfx(n.default.path.sound+"sound_samecolorball",!1)},t.Select=function(){this.playSfx(n.default.path.sound+"sound_select",!1)},t.Success=function(){this.playSfx(n.default.path.sound+"sound_win",!1)},t.Failure=function(){this.playSfx(n.default.path.sound+"sound_fail",!1)},t.AchieveOneAch=function(){this.playSfx(n.default.path.sound+"sound_achieveOneAch",!1)},t.AddScore=function(){this.playSfx(n.default.path.sound+"sound_addScore",!1)},t.BubSpeBlack=function(){this.playSfx(n.default.path.sound+"sound_bubSpeBlack",!1)},t.BubSpeDown=function(){this.playSfx(n.default.path.sound+"sound_bubSpeDown",!1)},t.BubSpeGold=function(){this.playSfx(n.default.path.sound+"sound_bubSpeGold",!1)},t.BubSpeWave=function(){this.playSfx(n.default.path.sound+"sound_bubSpeWave",!1)},t.BubVCome=function(){this.playSfx(n.default.path.sound+"sound_bubVCome",!1)},t.BuyGoldGems=function(){this.playSfx(n.default.path.sound+"sound_buyGoldGems",!1)},t.Combo=function(t){this.playSfx(n.default.path.sound+"sound_con"+t,!1)},t.Revive=function(){this.playSfx(n.default.path.sound+"sound_revive",!1)},t.DoorActive=function(){this.playSfx(n.default.path.sound+"sound_doorActive",!1)},t.GetMaxScoreOneClick=function(){this.playSfx(n.default.path.sound+"sound_getMaxScoreOneClick",!1)},t.Star=function(t){this.playSfx(n.default.path.sound+"sound_d_star_"+t,!1)},t.GetStars=function(){this.playSfx(n.default.path.sound+"sound_getStars",!1)},t.HDAchStre=function(){this.playSfx(n.default.path.sound+"sound_hdAchStre",!1)},t.IceCome=function(){this.playSfx(n.default.path.sound+"sound_iceCome",!1)},t.IceScreen=function(){this.playSfx(n.default.path.sound+"sound_iceScreen",!1)},t.IceShoot=function(){this.playSfx(n.default.path.sound+"sound_iceShoot",!1)},t.Key=function(){this.playSfx(n.default.path.sound+"sound_key",!1)},t.LevStart=function(){this.playSfx(n.default.path.sound+"sound_levStart",!1)},t.MaxBestScore=function(){this.playSfx(n.default.path.sound+"sound_maxBestScore",!1)},t.NearFailLine=function(){this.playSfx(n.default.path.sound+"sound_nearFailLine",!1)},t.ANextBubJump=function(){this.playSfx(n.default.path.sound+"sound_nextBubJump",!1)},t.Bound=function(){this.playSfx(n.default.path.sound+"sound_rebound",!1)},t.SteelCome=function(){this.playSfx(n.default.path.sound+"sound_steelCome",!1)},t.BombCome=function(){this.playSfx(n.default.path.sound+"sound_bombCome",!1)},t.clips={},t}();o.default=s,cc._RF.pop()},{"../../framework/plugin_boosts/gamesys/Device":"Device","./Consts":"Consts","./R":"R"}],SplitBall:[function(t,e,o){"use strict";cc._RF.push(e,"9f201OANHlB6aRFhoeO5kUa","SplitBall");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Ball"),a=t("../Sound"),c=t("../Level"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){this.color=e.baseColor[this.color]},e.prototype.onCollided=function(t){if(t.color!=this.color){var o=this.level.getAroundByFilter(this.index,c.default.FilterEmpty),n=this.level,i=this.index,r=this.color;for(var s in a.default.BubSplit(),o){var l=o[s];this.level.insertBallWithAnimation(e.baseColor[r]||5,l,this.node.position,.4)}return n.removeBall(this),n.insertBall(i,e.baseColor[r]||5),!0}},e.baseColor=((i={})[9]=1,i[10]=2,i[11]=3,i[12]=4,i[13]=5,i[14]=6,i[15]=7,i[16]=8,i),e}(s.default);o.default=l,cc._RF.pop()},{"../Ball":"Ball","../Level":"Level","../Sound":"Sound"}],SpriteFrameCache:[function(t,e,o){"use strict";cc._RF.push(e,"8756by7qCVIPpJ06/9qmobv","SpriteFrameCache");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(){this.frames={}}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.getSpriteFrame=function(t){return n(this,void 0,Promise,function(){var e,o=this;return i(this,function(){return null==(e=this.frames[t])?[2,new Promise(function(n,i){t&&""!=t?-1==t.indexOf("http")?cc.loader.loadRes(t,cc.SpriteFrame,function(t,e){t?i():e?n(e):i()}):cc.loader.load({url:t,type:"png"},function(r,s){r?i():s?(e=new cc.SpriteFrame(s),o.addSpriteFrame(t,e),n(e)):i()}):i("empty-url")})]:[2,new Promise(function(t){return t(e)})]})})},t.prototype.addSpriteFrame=function(t,e){return this.frames[t]=e,e},t.prototype.clear=function(){for(var t in this.frames){var e=this.frames[t];cc.loader.release(e),delete this.frames[t]}},t.prototype.remove=function(t){var e=this.frames[t];cc.loader.release(e),delete this.frames[t]},t}();o.default=r,cc._RF.pop()},{}],StartDialog:[function(t,e,o){"use strict";cc._RF.push(e,"4035cUpgnRKVammYEj9fdbq","StartDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../framework/plugin_boosts/utils/Common"),a=t("./MyItemTemplate"),c=t("../R0"),l=t("../Consts"),u=t("../Info"),p=t("../../../framework/plugin_boosts/ui/UIFunctions"),f=t("../../../framework/plugin_boosts/ui/LoadingManager"),h=t("../../../framework/plugin_boosts/ui/ToastManager"),d=t("../../../framework/plugin_boosts/ui/ViewManager"),y=t("../Pop"),_=t("../../../framework/plugin_boosts/ui/View"),v=t("../../../framework/plugin_boosts/gamesys/Device"),m=cc._decorator,g=m.ccclass,b=m.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelLabel=null,e.itemLayout=null,e.template=null,e.itemList=[0,1,3,6],e.lv=1,e.heartNode=null,e.btn_start=null,e.btn_close=null,e.newLevelNode=null,e.oldLevelNode=null,e.maxScoreLabel=null,e.btnLabel=null,e.from="",e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onShown=function(t,e){void 0===e&&(e="main"),this.lv=t,this.from=e,s.default.jellyJump2(this.node,.8,1),this.levelLabel.string="\u5173\u5361 "+t,this.refreshView(),this.node.setSiblingIndex(99)},e.prototype.onHidden=function(){},e.prototype.click_close=function(){"game"==this.from?cc.director.loadScene("Main"):this.getComponent(_.default).hide()},e.prototype.refreshView=function(){this.newLevelNode.active=this.lv>=u.UserInfo.level,this.oldLevelNode.active=!this.newLevelNode.active,this.itemLayout.showlist(function(t,e){var o=t.getComponent(a.default),n=c.R.itemConfig.json[e],i=u.UserInfo.getItem(e);p.default.setButtonEnabled(t.getComponent(cc.Button),i>0),o.data=e,o.setNumber(i),s.default.setDisplay(o.icon,l.default.path.pp+n.img),o.icon.node.scale=n.scale||1},this.itemList,this.template);var t=u.UserInfo.getLevelInfo(this.lv,"score"),e=y.default.getStar(this.lv,t);if(this.oldLevelNode.active){for(var o=0;o<3;o++)this.oldLevelNode.children[o].getChildByName("gray").active=o>=e;this.maxScoreLabel.string=t+"",this.btnLabel.string="\u91cd\u65b0\u6311\u6218"}else this.btnLabel.string="\u5f00\u59cb\u6e38\u620f"},e.prototype.gotoLevel=function(t){if(u.UserInfo.item_4<=0)return h.Toast.make("\u7231\u5fc3\u4e0d\u8db3"),void d.default.instance.show("Game/ShopDialog");if(u.UserInfo.useLife(1),u.UserInfo.save(),p.default.setButtonEnabled(this.btn_start,!1),p.default.setButtonEnabled(this.btn_close,!1),"main"==this.from){console.log(this.heartNode,u.UserInfo.ui_levelDialog_heart);var e=this.heartNode.getBoundingBoxToWorld().center,o=u.UserInfo.ui_levelDialog_heart.getBoundingBoxToWorld().center,n=this.node.convertToNodeSpaceAR(o),i=this.node.convertToNodeSpaceAR(e);v.default.playEffect(c.R.audio_heart_start);var r=s.default.moveBezier(c.R.fx_heart,n,i,function(){r.removeFromParent(),console.log("enter level",t),f.Loading.show("\u52a0\u8f7d\u4e2d"),v.default.playEffect(c.R.audio_heart_end),u.UserInfo.currentLevel=t,cc.director.loadScene("Game")});r.parent=this.node}else{e=this.heartNode.getBoundingBoxToWorld().center,i=this.node.convertToNodeSpaceAR(e);var a=cc.instantiate(c.R.fx_heart),l=cc.scaleTo(.2,2).easing(cc.easeExponentialOut()),y=cc.spawn(l,cc.fadeOut(.2));v.default.playEffect(c.R.audio_heart_end),a.runAction(cc.sequence(y,cc.callFunc(function(){a.removeFromParent(),f.Loading.show("\u52a0\u8f7d\u4e2d"),u.UserInfo.currentLevel=t,cc.director.loadScene("Game")}))),a.parent=this.node,a.position=i}},e.prototype.click_start=function(){u.UserInfo.selectedItems.splice(0,u.UserInfo.selectedItems.length);for(var t=0;t<this.itemLayout.node.childrenCount;t++){var e=this.itemLayout.node.children[t].getComponent(a.default);e.isSelected&&u.UserInfo.selectedItems.push(e.data)}console.log("\u9009\u62e9\u7684\u9053\u5177 "+u.UserInfo.selectedItems),this.gotoLevel(this.lv)},r([b(cc.Label)],e.prototype,"levelLabel",void 0),r([b(cc.Layout)],e.prototype,"itemLayout",void 0),r([b(cc.Node)],e.prototype,"template",void 0),r([b(cc.Node)],e.prototype,"heartNode",void 0),r([b(cc.Button)],e.prototype,"btn_start",void 0),r([b(cc.Button)],e.prototype,"btn_close",void 0),r([b(cc.Node)],e.prototype,"newLevelNode",void 0),r([b(cc.Node)],e.prototype,"oldLevelNode",void 0),r([b(cc.Label)],e.prototype,"maxScoreLabel",void 0),r([b(cc.Label)],e.prototype,"btnLabel",void 0),r([g],e)}(cc.Component);o.default=w,cc._RF.pop()},{"../../../framework/plugin_boosts/gamesys/Device":"Device","../../../framework/plugin_boosts/ui/LoadingManager":"LoadingManager","../../../framework/plugin_boosts/ui/ToastManager":"ToastManager","../../../framework/plugin_boosts/ui/UIFunctions":"UIFunctions","../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../Pop":"Pop","../R0":"R0","./MyItemTemplate":"MyItemTemplate"}],SteelBall:[function(t,e,o){"use strict";cc._RF.push(e,"46a59mlpn9KxIBSTkdBrAr4","SteelBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Consts"),a=t("../Effect"),c=t("../Sound"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e}return i(e,t),e.prototype.reset=function(){this.count=s.default.steelBallHp},e.prototype.onCollided=function(t){if(0!=this.count){if(t)return this.count=this.count-1,this.level.removeBallIndex(t),a.default.flyBall(t),c.default.BubSteelImpact(),this.level.processNonlinkedBalls(),!1;this.removeSelf()}else this.removeSelf()},e.prototype.launch=function(e){t.prototype.launch.call(this,e,!0),c.default.BubSteelShoot()},e.prototype.update=function(){this.isMoving()&&this.node.y>cc.visibleRect.height&&(this.stopMoving(),this.removeSelf())},e}(r.default);o.default=l,cc._RF.pop()},{"../Ball":"Ball","../Consts":"Consts","../Effect":"Effect","../Sound":"Sound"}],StoneBall:[function(t,e,o){"use strict";cc._RF.push(e,"94992VaV8lClLbOa+A9wbs7","StoneBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Sound"),a=t("../Consts"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.checkDir=function(){var t=cc.v2(0,0),e=this.node.getBoundingBoxToWorld(),o=this.node.getBoundingBoxToWorld(),n=new cc.Rect;return e.union(n,o),n.width>n.height?t.y=1:t.x=1,t},e.prototype.onCollided=function(t){if(s.default.BubStone(),t.color==a.default.ballTypes.bomb||t.color==a.default.ballTypes.bubV)return!1;if(this.checkDir(t).x>0){var e=t.vel.x>0?-1:1,o=this.level.coord(this.index);return!this.level.getBall(o[0]+e,o[1])&&!this.level.isEdgeCoord(o)&&(t.changeXDir(),!0)}return!1},e}(r.default);o.default=c,cc._RF.pop()},{"../Ball":"Ball","../Consts":"Consts","../Sound":"Sound"}],ToastComponent:[function(t,e,o){"use strict";cc._RF.push(e,"c4ad6Rf0DpFeay8D3aly6IU","ToastComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./UIFunctions"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return i(e,t),e.prototype.onLoad=function(){this.animations=s.default.getChildrenAnimations(this.node)},e.prototype.start=function(){},e.prototype.hide=function(t){this.node.active=!0,s.default.doHideAnimations(this.animations,t)||(this.node.active=!1,t&&t(this))},e.prototype.show=function(t){this.label.string=t,s.default.doShowAnimations(this.animations)},r([l(cc.Label)],e.prototype,"label",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./UIFunctions":"UIFunctions"}],ToastManager:[function(t,e,o){"use strict";cc._RF.push(e,"129ed5o6uNHDKhz6KoueBpN","ToastManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Toast=void 0;var s=t("./ToastComponent"),a=cc._decorator,c=a.ccclass,l=a.property;o.Toast=null;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.toastPool=new cc.NodePool,o.Toast=this},e.prototype.onDestroy=function(){this.toastPool.clear()},e.prototype.make=function(t,e){void 0===e&&(e=1.3);var o=this.toastPool.get(),n=null;return null==o?null==(n=(o=cc.instantiate(this.prefab)).getComponent(s.default))&&console.warn("Toast.make : Toast Prefab must contains ToastComponent"):n=o.getComponent(s.default),null==o.parent&&this.node.addChild(o,99999),this.show(n,t,e),n},e.prototype.show=function(t,e,o){var n=this;t.show(e),this.scheduleOnce(function(){t.hide(function(){n.toastPool.put(t.node),console.log("Toast.hide toastpool size:",n.toastPool.size())})},o)},r([l(cc.Prefab)],e.prototype,"prefab",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./ToastComponent":"ToastComponent"}],UIComponent:[function(t,e,o){"use strict";cc._RF.push(e,"0dc9dQt58ZCx4tQ3mcNvEZr","UIComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.hide=function(){this.node.active=!1},e.prototype.show=function(){this.node.active=!0},r([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],UIFunctions:[function(t,e,o){"use strict";cc._RF.push(e,"10205trRZVOELcrvc3TW2mW","UIFunctions"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getChildrenAnimations=function(t){var e=[];(n=t.getComponent(cc.Animation))&&e.push(n);for(var o=0;o<t.childrenCount;o++){var n;(n=t.children[o].getComponent(cc.Animation))&&e.push(n)}return e},t.stopAnimations=function(t){t.forEach(function(t){t.stop()})},t.doShowAnimations=function(t,e,o){var n,i=0;if(t.forEach(function(t){var e=t.getClips();if(e.length>0){var o=e[0];t.play(o.name).wrapMode=cc.WrapMode.Normal,o.duration>i&&(i=o.duration,n=t)}}),e){var r=function(){n&&n.off("finished",r),e.call(o)};n?n.on("finished",r):e.call(o)}},t.isAnimationRunning=function(){return!1},t.doHideAnimations=function(t,e,o){var n,i=!1,r=0;if(t.forEach(function(t){var e=t.getClips();if(2==e.length){var o=e[e.length-1];i=!0,t.play(o.name),o.duration>r&&(r=o.duration,n=t)}else 1==e.length&&(o=e[0],i=!0,t.play(o.name).wrapMode=cc.WrapMode.Reverse,o.duration>r&&(r=o.duration,n=t))}),n&&e){var s=function(){n.off("finished",s),e.call(o)};n.on("finished",s)}return i},t.getToggleIndex=function(t){for(var e=t.node.getParent(),o=0;o<e.childrenCount;o++){var n=e.children[o];if(t.node==n)return o}return-1},t.selectToggleIndex=function(t,e){if(null!=t){var o=t.children[e];if(o){var n=o.getComponent(cc.Toggle);n&&(console.log("[UIFunction.selectToggleIndex] :"+e),n.check())}else console.warn("[UIFunction.selectToggleIndex] :cannot find toggle with index:"+e)}else console.warn("[UIFunction.selectToggleIndex] : invalid toggleContainer :")},t.setTouchEnabled=function(t,e){g.foreachNode(t,function(t){var o=t.getComponent(cc.Button);o&&(console.log("[UIFunction] "+t.name+" touch : "+e),o.interactable=e)})},t.setButtonEnabled=function(t,e){t.node.opacity=e?255:155,t.interactable=e},t}();o.default=n,cc._RF.pop()},{}],VariantBall:[function(t,e,o){"use strict";cc._RF.push(e,"c7718itv1hCz6frW4Sb6Cxr","VariantBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Pop"),a=t("../Effect"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(t,e,o){this.stopMoving(),this.removeSelf();var n,i=this.level.insertBallWithAnimation(this.color,e,o),r=this.level.queryAroundBalls(e);for(var c in r){var l=r[c];if(s.default.isBase(l.color)){var u=this.level.queryLinkedSameBalls(e.index,l.color);if(u.length>=1){n=l,a.default.dismissBalls(u);break}}}return n?(this.level.removeBallIndex(i),a.default.dismissBall(i),this.level.processNonlinkedBalls()):i.changeColor(g.randomInt(1,9)),!0},e}(r.default);o.default=c,cc._RF.pop()},{"../Ball":"Ball","../Effect":"Effect","../Pop":"Pop"}],ViewManager:[function(t,e,o){"use strict";cc._RF.push(e,"c0f79TopoBICobmtQjrjutG","ViewManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)n[i]=r[s];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./View"),c=cc._decorator,l=c.ccclass,u=c.property,p="[ViewManager]",f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._views={},e.modal=null,e.modalOpacity=160,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.modal.active=!1,this.modal.zIndex=999,g.setGlobalInstance(this)},e.prototype.onEnable=function(){},e.prototype.onDestroy=function(){for(var t in this._views)delete this._views[t]},e.prototype.start=function(){},e.prototype.getVisibleDialog=function(){for(var t in this._views){var e=this._views[t];if(e.isDialog&&this.isVisible(t))return e}return null},e.prototype.hasVisibleDialog=function(){for(var t in this._views)if(this._views[t].isDialog&&this.isVisible(t))return!0;return!1},e.prototype.isVisible=function(t){var e;return!!(e="string"==typeof t?this._views[t]:t)&&e.node.active},e.prototype.attachViewComp=function(t){var e=null;return null!=e&&null!=e||(null==(e=t.getComponent(a.default))&&(e=t.addComponent(a.default)).init(t.name),this._views[t.name]=e),e},e.prototype.showView=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return this.modal.active=t.isDialog,(this.hasVisibleDialog()||t.isDialog)&&(this.modal.active=!0),t.isDialog&&(this.modal.opacity=t.opacity),t.show.apply(t,e)},e.prototype.showFromPrefab=function(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var i=this._views[e];if(null==i){var r=cc.instantiate(t);null==(i=r.getComponent(a.default))&&((i=r.addComponent(a.default)).isDialog=!0);var c=i.getComponent(cc.Widget);c&&(c.target=cc.find("Canvas")),i.init(e),this._views[e]=i,i.isDialog,this.node.addChild(r,1e3)}return this.node.color.setA(255),console.log(p,"show view:"+e),this.showView.apply(this,s([i],o))},e.prototype.showFromPrefabPath=function(t){for(var e=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var i=this._views[t];if(null!=i&&null!=i)return this.modal.active=i.isDialog,(this.hasVisibleDialog()||i.isDialog)&&(this.modal.active=!0,this.modal.opacity=i.opacity),console.log(p,"show view:"+t,o),i.show.apply(i,o);console.log("start load prefab:"+t);var r=(new Date).getTime();cc.loader.loadRes(t,cc.Prefab,function(n,i){console.log(p,"prefab loaded : "+t+" "+((new Date).getTime()-r)+"ms"),e.showFromPrefab.apply(e,s([i,t],o))})},e.prototype.preload=function(t){var e=this,o=this._views[t];null!=o&&null!=o||cc.loader.loadRes(t,cc.Prefab,function(n,i){console.log(p,"preload view"+t);var r=cc.instantiate(i),s=(o=r.getComponent(a.default)).getComponent(cc.Widget);s&&(s.target=cc.find("Canvas")),o.init(t),e._views[t]=o,o.isDialog,e.node.addChild(r,1e3),o.hide()})},e.prototype.disableTouch=function(t){var e=t.getComponent(a.default);e&&(e.touchEnabled=!1)},e.prototype.enableTouch=function(t){var e=t.getComponent(a.default);e&&(e.touchEnabled=!0)},e.prototype.show=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if("string"==typeof t)return this.showFromPrefabPath.apply(this,s([t],e));if(null!=t&&null!=t){t.node&&(t=t.node);var n=this.attachViewComp(t);return this.showView.apply(this,s([n],e))}},e.prototype.hide=function(t,e){if(void 0===e&&(e=!0),"string"!=typeof t){if(null==t||null==t)return;this.attachViewComp(t),t=t.name}var o=this._views[t];null!=o&&null!=o&&(o.node.active=!1,o.isDialog&&(this.modal.active=!1),this.hasVisibleDialog()&&(this.modal.active=!0),e&&o.doHideAnimation(),o.onHidden())},e.prototype.checkViewStacks=function(){var t=this.getVisibleDialog();t&&(this.modal.active=!0,this.modal.opacity=t.opacity)},e.prototype.hideAll=function(){for(var t in this._views)this.hide(t)},r([u(cc.Node)],e.prototype,"modal",void 0),r([u],e.prototype,"modalOpacity",void 0),o=r([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./View":"View"}],View:[function(t,e,o){"use strict";cc._RF.push(e,"e1217OaHDFCEbPP4vjLJXLh","View");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./UIComponent"),a=t("./ViewManager"),c=t("./UIFunctions"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDialog=!1,e.hasWidget=!1,e.opacity=160,e.childrenAnimation=!1,e.touchBlocker=null,e.touchBlockerComp=null,e.animations=[],e._isHiding=!1,e}return i(e,t),e.prototype.emit=function(t,e){t.emit(e)},e.prototype.call=function(t,e){g.execScript(e)},e.prototype.setDelegate=function(t){this.target=t},e.prototype.onLoad=function(){if(this.touchBlocker=new cc.Node,this.touchBlocker.name="TouchBlocker",this.touchBlocker.width=2e3,this.touchBlocker.height=2e3,this.touchBlockerComp=this.touchBlocker.addComponent(cc.BlockInputEvents),this.node.addChild(this.touchBlocker,1e3),this.childrenAnimation)this.animations=c.default.getChildrenAnimations(this.node);else{var t=this.node.getComponent(cc.Animation);t&&this.animations.push(t)}for(var e=this.getComponents(cc.Component),o=0;o<e.length;o++){var n=e[o];if(n!=this&&(n.onShown||n.onHidden)){this.target=n;break}}},e.prototype.start=function(){this.touchEnabled=!0},e.prototype.init=function(t){this.name=t},e.prototype.hideAnimationCallback=function(){this.node.active=this.visible,a.default.instance.checkViewStacks()},e.prototype.doHideAnimation=function(){this.node.active=!0,this._isHiding=!0,c.default.doHideAnimations(this.animations,this.hideAnimationCallback,this)||(this.node.active=!1,this._isHiding=!1),console.log("[View] hide:",this.name),this._visibleDirty=!1},e.prototype.isInHideAnimation=function(){return this._isHiding},e.prototype.onHidden=function(){this._visibleDirty=!1,this.target&&this.target.onHidden&&this.target.onHidden()},e.prototype.hide=function(){this.touchEnabled=!1,a.default.instance.hide(this.node)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visibleDirty},enumerable:!1,configurable:!0}),e.prototype.showAnimationNextFrame=function(t){var e=this;this.scheduleOnce(function(){c.default.doShowAnimations(e.animations,t)},0)},Object.defineProperty(e.prototype,"touchEnabled",{get:function(){return!this.touchBlocker.active},set:function(t){this.touchBlocker.active=!t},enumerable:!1,configurable:!0}),e.prototype.show=function(){for(var e=this,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return t.prototype.show.call(this),console.log("[View] show:",this.name,o),c.default.stopAnimations(this.animations),new Promise(function(t){var n,i=e,r=function(){i.touchEnabled||(i.touchEnabled=!0),t()};e.hasWidget?e.showAnimationNextFrame(r):c.default.doShowAnimations(e.animations,r),e._visibleDirty=!0,e.target&&e.target.onShown&&(n=e.target).onShown.apply(n,o)})},r([p],e.prototype,"isDialog",void 0),r([p],e.prototype,"hasWidget",void 0),r([p],e.prototype,"opacity",void 0),r([p],e.prototype,"childrenAnimation",void 0),r([u],e)}(s.default);o.default=f,cc._RF.pop()},{"./UIComponent":"UIComponent","./UIFunctions":"UIFunctions","./ViewManager":"ViewManager"}],WinDialog:[function(t,e,o){"use strict";cc._RF.push(e,"7f59arNgpBDhIXti8qHTKua","WinDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function s(t){try{c(n.next(t))}catch(e){r(e)}}function a(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../framework/plugin_boosts/utils/Common"),l=t("../Info"),u=t("../../../framework/plugin_boosts/ui/ViewManager"),p=t("../Pop"),f=t("../Consts"),h=t("../../../framework/plugin_boosts/gamesys/PsFxPlayer"),d=t("../../../framework/plugin_boosts/ui/View"),y=t("../Sound"),_=cc._decorator,v=_.ccclass,m=_.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ps_firework=null,e.scoreLabel=null,e.maxScoreLabel=null,e.flag_breakRec=null,e.levelLabel=null,e.starNode=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onShown=function(){y.default.Success(),l.UserInfo.addItem(f.default.ItemTypes.Heart,1,!1),this.ps_firework.resetSystem(),c.default.jellyJump2(this.node,.8,1);var t=l.UserInfo.getLevelInfo(l.UserInfo.currentLevel,"score");this.maxScoreLabel.string=t.toString(),this.scoreLabel.string=p.default.score.toString(),this.flag_breakRec.active=p.default.breakRecord,this.levelLabel.string="\u7b2c"+l.UserInfo.currentLevel+"\u5173";var e=p.default.getStar(l.UserInfo.currentLevel,p.default.score);this.showStar(e)},e.prototype.onHidden=function(){},e.prototype.showStar=function(t){return s(this,void 0,void 0,function(){var e,o,n;return a(this,function(i){switch(i.label){case 0:return[4,c.default.sleep(.8)];case 1:i.sent(),e=0,i.label=2;case 2:return e<3?(o=this.starNode.children[e],(n=o.getChildByName("gray")).active=e>=t,n.active||(o.getComponent(h.default).play(),y.default.Star(e+1)),[4,c.default.sleep(.3)]):[3,5];case 3:i.sent(),i.label=4;case 4:return e++,[3,2];case 5:return[4,c.default.sleep(.5)];case 6:return i.sent(),[2]}})})},e.prototype.click_next=function(){this.getComponent(d.default).hide(),this.startGame(l.UserInfo.currentLevel+1)},e.prototype.click_main=function(){cc.director.loadScene("Main")},e.prototype.click_rank=function(){},e.prototype.click_retry=function(){this.getComponent(d.default).hide(),this.startGame(l.UserInfo.currentLevel)},e.prototype.click_share=function(){},e.prototype.startGame=function(t){p.default.getStarNeed(t)>l.UserInfo.getTotalStar()?u.default.instance.show("Game/LockedDialog",t,"game"):u.default.instance.show("Game/StartDialog",t,"game")},r([m(cc.ParticleSystem)],e.prototype,"ps_firework",void 0),r([m(cc.Label)],e.prototype,"scoreLabel",void 0),r([m(cc.Label)],e.prototype,"maxScoreLabel",void 0),r([m(cc.Node)],e.prototype,"flag_breakRec",void 0),r([m(cc.Label)],e.prototype,"levelLabel",void 0),r([m(cc.Node)],e.prototype,"starNode",void 0),r([v],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../framework/plugin_boosts/gamesys/PsFxPlayer":"PsFxPlayer","../../../framework/plugin_boosts/ui/View":"View","../../../framework/plugin_boosts/ui/ViewManager":"ViewManager","../../../framework/plugin_boosts/utils/Common":"Common","../Consts":"Consts","../Info":"Info","../Pop":"Pop","../Sound":"Sound"}],WoodBall:[function(t,e,o){"use strict";cc._RF.push(e,"93c97i6pKxIO5MPSieTjFp/","WoodBall");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Ball"),s=t("../Sound"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onCollided=function(){return s.default.BubWood(),!1},e}(r.default);o.default=a,cc._RF.pop()},{"../Ball":"Ball","../Sound":"Sound"}],easing:[function(t,e,o){"use strict";function n(t,e,o,n){return o-i(n-t,0,o,n)+e}function i(t,e,o,n){return(t/=n)<1/2.75?7.5625*o*t*t+e:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+e:o*(7.5625*(t-=2.625/2.75)*t+.984375)+e}cc._RF.push(e,"e6742QWT6FGKZZTNPiWFV4s","easing"),Object.defineProperty(o,"__esModule",{value:!0}),o.easeInOutBounce=o.easeOutBounce=o.easeInBounce=o.easeInOutBack=o.easeOutBack=o.easeInBack=o.easeInOutElastic=o.easeOutElastic=o.easeInElastic=o.easeInOutCirc=o.easeOutCirc=o.easeInCirc=o.easeInOutExpo=o.easeOutExpo=o.easeInExpo=o.easeInOutSine=o.easeOutSine=o.easeInSine=o.easeInOutQuint=o.easeOutQuint=o.easeInQuint=o.easeInOutQuart=o.easeOutQuart=o.easeInQuart=o.easeInOutCubic=o.easeOutCubic=o.easeInCubic=o.easeInOutQuad=o.easeOutQuad=o.easeInQuad=o.linear=void 0,o.linear=function(t,e,o,n){return o*t/n+e},o.easeInQuad=function(t,e,o,n){return o*(t/=n)*t+e},o.easeOutQuad=function(t,e,o,n){return-o*(t/=n)*(t-2)+e},o.easeInOutQuad=function(t,e,o,n){return(t/=n/2)<1?o/2*t*t+e:-o/2*(--t*(t-2)-1)+e},o.easeInCubic=function(t,e,o,n){return o*(t/=n)*t*t+e},o.easeOutCubic=function(t,e,o,n){return o*((t=t/n-1)*t*t+1)+e},o.easeInOutCubic=function(t,e,o,n){return(t/=n/2)<1?o/2*t*t*t+e:o/2*((t-=2)*t*t+2)+e},o.easeInQuart=function(t,e,o,n){return o*(t/=n)*t*t*t+e},o.easeOutQuart=function(t,e,o,n){return-o*((t=t/n-1)*t*t*t-1)+e},o.easeInOutQuart=function(t,e,o,n){return(t/=n/2)<1?o/2*t*t*t*t+e:-o/2*((t-=2)*t*t*t-2)+e},o.easeInQuint=function(t,e,o,n){return o*(t/=n)*t*t*t*t+e},o.easeOutQuint=function(t,e,o,n){return o*((t=t/n-1)*t*t*t*t+1)+e},o.easeInOutQuint=function(t,e,o,n){return(t/=n/2)<1?o/2*t*t*t*t*t+e:o/2*((t-=2)*t*t*t*t+2)+e},o.easeInSine=function(t,e,o,n){return-o*Math.cos(t/n*(Math.PI/2))+o+e},o.easeOutSine=function(t,e,o,n){return o*Math.sin(t/n*(Math.PI/2))+e},o.easeInOutSine=function(t,e,o,n){return-o/2*(Math.cos(Math.PI*t/n)-1)+e},o.easeInExpo=function(t,e,o,n){return 0===t?e:o*Math.pow(2,10*(t/n-1))+e},o.easeOutExpo=function(t,e,o,n){return t===n?e+o:o*(1-Math.pow(2,-10*t/n))+e},o.easeInOutExpo=function(t,e,o,n){return 0===t?e:t===n?e+o:(t/=n/2)<1?o/2*Math.pow(2,10*(t-1))+e:o/2*(2-Math.pow(2,-10*--t))+e},o.easeInCirc=function(t,e,o,n){return-o*(Math.sqrt(1-(t/=n)*t)-1)+e},o.easeOutCirc=function(t,e,o,n){return o*Math.sqrt(1-(t=t/n-1)*t)+e},o.easeInOutCirc=function(t,e,o,n){return(t/=n/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+e:o/2*(Math.sqrt(1-(t-=2)*t)+1)+e},o.easeInElastic=function(t,e,o,n){var i=1.70158,r=0,s=o;return 0===t?e:1==(t/=n)?e+o:(r||(r=.3*n),s<Math.abs(o)?(s=o,i=r/4):i=r/(2*Math.PI)*Math.asin(o/s),-s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-i)*Math.PI/r)+e)},o.easeOutElastic=function(t,e,o,n){var i=1.70158,r=0,s=o;return 0===t?e:1==(t/=n)?e+o:(r||(r=.3*n),s<Math.abs(o)?(s=o,i=r/4):i=r/(2*Math.PI)*Math.asin(o/s),s*Math.pow(2,-10*t)*Math.sin(2*(t*n-i)*Math.PI/r)+o+e)},o.easeInOutElastic=function(t,e,o,n){var i=1.70158,r=0,s=o;return 0===t?e:2==(t/=n/2)?e+o:(r||(r=.3*1.5*n),s<Math.abs(o)?(s=o,i=r/4):i=r/(2*Math.PI)*Math.asin(o/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-i)*Math.PI/r)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-i)*Math.PI/r)*.5+o+e)},o.easeInBack=function(t,e,o,n,i){return void 0===i&&(i=1.70158),o*(t/=n)*t*((i+1)*t-i)+e},o.easeOutBack=function(t,e,o,n,i){return void 0===i&&(i=1.70158),o*((t=t/n-1)*t*((i+1)*t+i)+1)+e},o.easeInOutBack=function(t,e,o,n,i){return void 0===i&&(i=1.70158),(t/=n/2)<1?o/2*t*t*((1+(i*=1.525))*t-i)+e:o/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},o.easeInBounce=n,o.easeOutBounce=i,o.easeInOutBounce=function(t,e,o,r){return t<r/2?.5*n(2*t,0,o,r)+e:.5*i(2*t-r,0,o,r)+.5*o+e},cc._RF.pop()},{}],loading:[function(t,e,o){"use strict";cc._RF.push(e,"59038tne6JNHpTpf68+K88R","loading");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.count=0,e}return i(e,t),e.prototype.start=function(){},e.prototype.update=function(){this.count>=100||(this.count++,this.progressBar.progress=this.count/100,this.count>=99&&cc.director.loadScene("Main"))},r([c(cc.ProgressBar)],e.prototype,"progressBar",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}]},{},["AimLineAdvance","Ball","Consts","Dog","Effect","Game","Info","Level","Main","Pop","R","R0","Sound","ABallFactory","BombBall","IceBall","NormalBall","SameColorRemoveBall","SteelBall","VariantBall","loading","BallFactory","Boss","DownBall","DyeBall","EmptyBall","GoldBall","KeyBall","RandomBall","SplitBall","StoneBall","WoodBall","AdapteTop","GetDialog","HbDialog","LevelDialog","LockedDialog","LoseDialog","LuckyDialog","MyItemTemplate","NewPackDialog","NotEnoughDialog","ShopDialog","ShopItemTemplate","ShowDialog","SignDialog","SignItem","StartDialog","WinDialog","Device","FSM","InfiniteBackground","LocalLifeSystem","LocalTimeSystem","PoolManager","PsFx","PsFxPlayer","PsSpawner","easing","BoostsAction","ClickAudio","ClickAudioManager","DataCenter","FrameSwitch","InputSystem","JoyStick","Net","Signal","SpriteFrameCache","DCLabel","DCPandoraPoint","DCSprite","DCToggle","DCUI","LoadingManager","MessageBoxComponent","MessageBoxManager","PandoraPoint","ToastComponent","ToastManager","UIComponent","UIFunctions","View","ViewManager","LevelSelector","Common","EventManager","Intersection"]);