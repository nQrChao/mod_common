window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AdMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1e5df/DgoRAAJ3KjQ8JunDt","AdMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdMgr=void 0;var n=t("../enum/Enums"),r=t("../Global"),i=t("./AndroidAD"),c=t("./DyPlatform"),a=t("./QQPlatform"),s=t("./WxPlatform"),l=function(){function t(){}return t.closeAd=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return a.QQPlatform.ins.hideBanner(),a.QQPlatform.ins.hideCustomAd(),a.QQPlatform.ins.hideCustomAd1(),this.bannerOn=!1,void(this.customOn=!1);s.WxPlatform.ins.hideBanner(),s.WxPlatform.ins.hideCustomAd(),s.WxPlatform.ins.hideCustomAd1(),this.bannerOn=!1,this.customOn=!1;break;case cc.sys.BYTEDANCE_GAME:c.DyPlatform.ins.hideBanner(),c.DyPlatform.ins.hideCustomAd(),c.DyPlatform.ins.hideCustomAd1(),this.bannerOn=!1,this.customOn=!1;break;case cc.sys.ANDROID:}},t.showBanner=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:this.bannerOn||(window.qq?a.QQPlatform:s.WxPlatform).ins.showBanner();break;case cc.sys.BYTEDANCE_GAME:this.bannerOn||c.DyPlatform.ins.showBanner();break;case cc.sys.ANDROID:i.AndroidAD.ins.showBanner()}},t.showInterstial=function(t){switch(void 0===t&&(t=0),cc.sys.platform){case cc.sys.BYTEDANCE_GAME:c.DyPlatform.ins.showInterstitialAd(t);break;case cc.sys.WECHAT_GAME:if(window.qq)return void a.QQPlatform.ins.showInterstitialAd(t);s.WxPlatform.ins.showInterstitialAd(t);break;case cc.sys.MOBILE_BROWSER:case cc.sys.DESKTOP_BROWSER:break;case cc.sys.ANDROID:i.AndroidAD.ins.showInterstitial()}},t.showCustomAd=function(t){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return void(this.customOn||a.QQPlatform.ins.showCustomAd(t));this.customOn||s.WxPlatform.ins.showCustomAd(t);break;case cc.sys.BYTEDANCE_GAME:this.customOn||c.DyPlatform.ins.showCustomAd(t);break;case cc.sys.ANDROID:}},t.showCustomAd1=function(t){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return void(this.customOn1||a.QQPlatform.ins.showCustomAd1(t));this.customOn1||s.WxPlatform.ins.showCustomAd1(t);break;case cc.sys.BYTEDANCE_GAME:this.customOn1||c.DyPlatform.ins.showCustomAd1(t);break;case cc.sys.ANDROID:}},t.hideCustomAd1=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:if(window.qq)return a.QQPlatform.ins.hideCustomAd1(),void(this.customOn1=!1);s.WxPlatform.ins.hideCustomAd1(),this.customOn1=!1;break;case cc.sys.BYTEDANCE_GAME:c.DyPlatform.ins.hideCustomAd1(),this.customOn1=!1;break;case cc.sys.ANDROID:}},t.showVideo=function(t){var e=this;void 0===t&&(t=null);var o=[],l=Symbol("showVideo");switch(cc.sys.platform){case cc.sys.MOBILE_BROWSER:case cc.sys.DESKTOP_BROWSER:t&&t();break;case cc.sys.WECHAT_GAME:if(r.Global.Pause(),window.qq)return void a.QQPlatform.ins.showRewardVideo(function(o){1==o?(t&&t(),r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")):2==o?(r.Global.Pause(!1),r.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))});s.WxPlatform.ins.showRewardVideo(function(o){1==o?(t&&t(),r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")):2==o?(r.Global.Pause(!1),r.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"))});break;case cc.sys.BYTEDANCE_GAME:r.Global.Pause(),c.DyPlatform.ins.showRewardVideo(function(i){if(1==i){if(o.includes(l))return;t&&t(),r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u6210\u529f")}else 2==i?(r.Global.Pause(!1),r.Global.enableShareAd?(cc.director.emit(n.events.Toast,"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u53ef\u4ee5\u83b7\u5f97\u5956\u52b1\u5594"),e.shareFn(t)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25")),o.push(l)):(r.Global.Pause(!1),cc.director.emit(n.events.Toast,"\u83b7\u53d6\u5956\u52b1\u5931\u8d25"),o.push(l))});break;case cc.sys.ANDROID:i.AndroidAD.ins.showRewardVideo()}},t.shareFn=function(t){window.wx||window.tt?window.tt?c.DyPlatform.ins.showShare("",function(e){e&&t&&t()}):window.wx&&setTimeout(function(){(window.qq?a.QQPlatform:s.WxPlatform).ins.showShare(),setTimeout(function(){t&&t()},1500)},500):t()},t.shareVideoFn=function(t,e){window.wx||window.tt?window.tt&&c.DyPlatform.ins.videoShare(t,"",function(t){t&&e&&e()}):e()},t.prototype.showCustomAd=function(t){t(0)},t.bannerOn=!1,t.customOn=!1,t.customOn1=!1,t}();o.AdMgr=l,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./AndroidAD":"AndroidAD","./DyPlatform":"DyPlatform","./QQPlatform":"QQPlatform","./WxPlatform":"WxPlatform"}],AddModalView:[function(t,e,o){"use strict";cc._RF.push(e,"e6e95cH1WVDmKfNLDE4W2rT","AddModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../ad/DyPlatform"),a=t("../enum/Enums"),s=t("../manager/EnergyMgr"),l=t("../utils/Tools"),u=t("./BaseView"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=[],e.addBtn=null,e}return r(e,t),e.prototype.onLoad=function(){l.load(a.Key.SideReward)&&this.hiddenBtn(),this.addBtn.getComponent(cc.Sprite).spriteFrame=c.DyPlatform.ins.haveSideReward?this.imgs[1]:this.imgs[0]},e.prototype.hiddenBtn=function(){this.addBtn.active=!1},e.prototype.rewardClick=function(){c.DyPlatform.ins.haveSideReward?(s.default.ins.changeEnergy(!0,10),l.save(a.Key.SideReward,1),this.hiddenBtn()):c.DyPlatform.ins.openToScence()},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.start=function(){},i([h([cc.SpriteFrame])],e.prototype,"imgs",void 0),i([h(cc.Node)],e.prototype,"addBtn",void 0),i([f],e)}(u.default);o.default=d,cc._RF.pop()},{"../ad/DyPlatform":"DyPlatform","../enum/Enums":"Enums","../manager/EnergyMgr":"EnergyMgr","../utils/Tools":"Tools","./BaseView":"BaseView"}],AndroidAD:[function(t,e,o){"use strict";cc._RF.push(e,"0dab2sI4NNNhYvkib9Bn4d0","AndroidAD"),Object.defineProperty(o,"__esModule",{value:!0}),o.AndroidAD=void 0;var n=t("../manager/Main"),r=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.showRewardVideo=function(){var t=n.default.ins.Platforms[2].videoId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiJiLiShiPin","(Ljava/lang/String;)V",t)},t.prototype.showInterstitial=function(){var t=n.default.ins.Platforms[2].intersitialId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiChaPing","(Ljava/lang/String;)V",t,300,450)},t.prototype.showBanner=function(){var t=n.default.ins.Platforms[3].bannerId[0];jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","jiaZaiBanner","(Ljava/lang/String;)V",t,600,50)},t}();o.AndroidAD=r,cc._RF.pop()},{"../manager/Main":"Main"}],AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5fe54fD0bxIR4LoOiL9aH8g","AudioMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=void 0;var i=t("../Global"),c=t("./ResMgr"),a=t("../enum/Enums"),s=function(){function t(){this._audioComp=null,this._audioLoopComp=null,this._curLoopAudioName=""}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t,this._ins.initAudio()),this._ins},enumerable:!1,configurable:!0}),t.prototype.initAudio=function(){this._audioComp=new cc.AudioSource,this._audioComp.loop=!0,this._audioLoopComp=new cc.AudioSource,this._audioLoopComp.loop=!0,this._audioLoopComp.volume=.3},t.prototype.playMusic=function(t){return n(this,void 0,void 0,function(){var e;return r(this,function(o){switch(o.label){case 0:return i.Global.bgm==a.SoundStatus.off?[2]:this._audioComp.clip?(this._audioComp.play(),[2]):[4,c.default.ins.getClip(t)];case 1:return e=o.sent(),this._audioComp.volume=.8,this._audioComp.clip=e,this._audioComp.play(),[2]}})})},t.prototype.stopMusic=function(){this._audioComp.stop()},t.prototype.playSound=function(t,e){return void 0===e&&(e=1),n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return i.Global.sound==a.SoundStatus.off?[2]:(this._audioComp&&this.stopMusic(),[4,c.default.ins.getClip(t)]);case 1:return o=n.sent(),cc.audioEngine.play(o,!1,e),[2]}})})},t.prototype.playLoopSound=function(t){return n(this,void 0,Promise,function(){var e;return r(this,function(o){switch(o.label){case 0:return i.Global.sound==a.SoundStatus.off?[2]:[4,c.default.ins.getClip(t)];case 1:return e=o.sent(),this._audioLoopComp.stop(),this._audioLoopComp.clip=e,this._audioLoopComp.play(),this._curLoopAudioName=t,[2]}})})},t.prototype.stopLoopSound=function(){return n(this,void 0,Promise,function(){return r(this,function(){return this._audioLoopComp.stop(),[2]})})},Object.defineProperty(t.prototype,"curLoopAudioName",{get:function(){return this._curLoopAudioName},enumerable:!1,configurable:!0}),t.prototype.isLoopAudioPlaying=function(){return this._audioLoopComp.isPlaying},t.prototype.playSoundAtTime=function(t,e){return n(this,void 0,void 0,function(){var o,n,s=this;return r(this,function(r){switch(r.label){case 0:return i.Global.sound==a.SoundStatus.off?[2]:[4,c.default.ins.getClip(t)];case 1:return o=r.sent(),n=cc.audioEngine.play(o,!1,1),this._audioComp.clip=o,this._audioComp.play(),this._audioComp.scheduleOnce(function(){cc.audioEngine.stop(n),s._audioComp.stop()},2*e),[2]}})})},t._ins=null,t}();o.AudioMgr=s,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./ResMgr":"ResMgr"}],BadgeBtnMgr:[function(t,e,o){"use strict";cc._RF.push(e,"c01beW70i1ESIJ+2YTL8Tmi","BadgeBtnMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.badgeLabel=null,e.badgeNode=null,e.haveBadge=!1,e.radiusPointBool=!1,e.radiusPoint=null,e}return r(e,t),e.prototype.start=function(){this.radiusPointState(this.radiusPointBool),this.haveBadge&&(this.badgeLabel.node.active=!0)},e.prototype.setNumToLabel=function(t){t<=0?this.badgeNode.active=!1:(this.badgeNode.active=!0,this.badgeLabel.string=t+"")},e.prototype.radiusPointState=function(t){this.radiusPoint&&(t?(this.radiusPoint.active=!0,this.badgeNode.active=!1):(this.radiusPoint.active=!1,this.badgeNode.active=!0))},e.prototype.update=function(){},i([s(cc.Label)],e.prototype,"badgeLabel",void 0),i([s(cc.Node)],e.prototype,"badgeNode",void 0),i([s(cc.Boolean)],e.prototype,"haveBadge",void 0),i([s({visible:function(){return!this.haveBadge}})],e.prototype,"radiusPointBool",void 0),i([s(cc.Node)],e.prototype,"radiusPoint",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],BaseInter:[function(t,e,o){"use strict";cc._RF.push(e,"7b2afyNNndAwYbuRYRpen2o","BaseInter"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConditionType=o.AccessType=o.SignInType=void 0,function(t){t.DAY1="1",t.DAY2="2",t.DAY3="3",t.DAY4="4",t.DAY5="5",t.DAY6="6",t.DAY7="7",t.FULL_WEEK="8"}(o.SignInType||(o.SignInType={})),function(t){t.Share="0",t.Video="1",t.Fragment="2",t.None="3"}(o.AccessType||(o.AccessType={})),function(t){t.None="0",t.Fragment="1",t.Level="2"}(o.ConditionType||(o.ConditionType={})),cc._RF.pop()},{}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"fb67fEaisdFoqMmY6i2kNSB","BaseView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../enum/Enums"),a=t("../manager/AudioMgr"),s=t("../manager/PoolMgr"),l=t("../utils/Tools"),u=cc._decorator,p=u.ccclass,f=u.property,h=cc.Button.prototype._onTouchEnded;cc.Button.prototype._onTouchEnded=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h.apply(this,t),a.AudioMgr.ins.playSound(c.Clips.Button_Click,.5)};var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tweenView=!0,e.root=null,e.tweenTime=.25,e.playBtnClip=!0,e}return r(e,t),e.prototype.onDisable=function(){},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){var t=this;this.playBtnClip&&a.AudioMgr.ins.playSound(c.Clips.Button_Click,.5),this.tweenView&&(this.root?l.Tools.fadeIn(this.root):(this.root=this.node,this.scheduleOnce(function(){l.Tools.fadeIn(t.root)})))},e.prototype.close=function(){this.playBtnClip&&a.AudioMgr.ins.playSound(c.Clips.Button_Click,.5),this.tweenView?this.root||(this.root=this.node):s.PoolMgr.ins.putNode(this.node)},i([f({})],e.prototype,"tweenView",void 0),i([f({type:cc.Node,visible:function(){return this.tweenView}})],e.prototype,"root",void 0),i([f({visible:function(){return this.tweenView}})],e.prototype,"tweenTime",void 0),i([f({})],e.prototype,"playBtnClip",void 0),i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/PoolMgr":"PoolMgr","../utils/Tools":"Tools"}],ChallengeCancelView:[function(t,e,o){"use strict";cc._RF.push(e,"a0bdbhmiddLo7kDmKniqdVl","ChallengeCancelView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseView"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.goHome=function(){this.close(),this.toHomeFn&&this.toHomeFn()},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"./BaseView":"BaseView"}],ChallengeVictoryModalView:[function(t,e,o){"use strict";cc._RF.push(e,"7b012eDdUNLVbJEzi+fw2tl","ChallengeVictoryModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/EnergyMgr"),p=t("./BaseView"),f=cc._decorator,h=f.ccclass,d=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.loadLevel=function(){t.prototype.close.call(this),u.default.ins.changeEnergy(!1)?(this.node.destroy(),cc.director.emit(l.events.Next)):cc.director.emit(l.events.Toast,"\u4f53\u529b\u4e0d\u8db3")},e.prototype.returnHome=function(){return c(this,void 0,void 0,function(){return a(this,function(){return cc.director.loadScene("main"),[2]})})},e.prototype.setTitleSprite=function(){},e.prototype.init=function(){this.getLevelTitle(s.Global.challenge_lv-s.defaultChallengeLv),this.setTitleSprite()},e.prototype.getLevelTitle=function(){},e.prototype.shareFn=function(){},e.prototype.getVideoSharePath=function(t){this.videoPath=t},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),cc.director.on(l.events.closeGame,this.getVideoSharePath,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.off(l.events.closeGame,this.getVideoSharePath,this)},e.prototype.goFire=function(){},i([h],e)}(p.default));o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/EnergyMgr":"EnergyMgr","./BaseView":"BaseView"}],CupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"89a06/Izi1Nqq2YBjp55jPJ","CupMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.cupsNowStatus=void 0;var s,l=t("../Global"),u=t("../enum/Enums"),p=t("../game/Cup"),f=t("../game/WaterFlow"),h=cc._decorator,d=h.ccclass,y=h.property,g=h.executeInEditMode;(function(t){t[t.hasPush=0]="hasPush",t[t.hasFull=1]="hasFull",t[t.hasBack=2]="hasBack",t[t.init=3]="init"})(s=o.cupsNowStatus||(o.cupsNowStatus={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupPrefab=null,e.levelCfg=null,e._debugLevel=0,e._isPlaying=!1,e._waterFlow=null,e.nowStatus=s.init,e.fullIdxs=[],e.selectedCup=null,e.isPushing=!1,e.isCheckBag=!1,e.layout_v=null,e._cups=[],e.curCfg=[],e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"debugLevel",{get:function(){return this._debugLevel},set:function(t){this._debugLevel=t,l.Global.setLv(t),this.nextLevel()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=new cc.Node;t.parent=this.node,this._waterFlow=t.addComponent(f.WaterFlow),this.nextLevel()},e.prototype.setBagStatus=function(t){this.isCheckBag=t},e.prototype.setPushingStatus=function(t){this.isPushing=t},e.prototype.getClickStatus=function(){return!this.isPushing&&!this.isCheckBag},e.prototype.onClickCup=function(t){if(this.selectedCup)this.selectedCup==t?(this.doSelect(t,!1),this.selectedCup=null):this.checkPour(this.selectedCup,t)?this.getClickStatus()?this.startPour(this.selectedCup,t):(cc.director.emit(u.events.Toast,"\u8bf7\u52ff\u70b9\u51fb\u8fc7\u5feb"),this.doSelect(this.selectedCup,!1),this.selectedCup=null):(this.doSelect(this.selectedCup,!1),this.selectedCup=null);else{if(t.getIsFull())return;this.selectedCup=t,this.doSelect(t,!0)}},e.prototype.doSelect=function(t,e){var o=t.node;t.setCupFrame(e);var n=t.orignPt.y+(e?o.height*u.AnimationTime.moveTime:0);e||(this.selectedCup=null),cc.tween(o).stop(),cc.tween(o).to(u.AnimationTime.moveTime,{y:n}).start(),cc.tween(o.children[0]).by(u.AnimationTime.moveTime,{y:e?-n:t.node.height*u.AnimationTime.moveTime,scaleY:e?.05:-.05,skewX:e?10:-10}).start()},e.prototype.startPour=function(t,e){var o=this;this.setPushingStatus(!0),t.setCupFrame(!1);var n=cc.v2(e.node.position),r=e.node.parent.convertToWorldSpaceAR(n),i=cc.view.getVisibleSize(),c=r.x>.5*i.width,a=JSON.parse(JSON.stringify(t.getTop())),s=Math.min(a.topColorNum,e.getTop().emptyNum),l=this.pourLiquid(t,e,{dstPt:n,dstGlobal:r,viewSize:i,isRight:c});n=l.dstPt,c=l.isRight,this.selectedCup=null,this._isPlaying=!0,t.moveToPour(n,c,s),t.setPourOutCallback(function(){return o.onPourStart(t,e,a,c)},function(){return o.onPourFinish(t,e,o._waterFlow)})},e.prototype.onPourFinish=function(t,e,o){var n=t.node.convertToWorldSpaceAR(cc.v2());n=o.node.parent.convertToNodeSpaceAR(n);var r=cc.v2(n.x,e.getWaterSurfacePosY(!0));(r=o.node.parent.convertToNodeSpaceAR(r)).x=n.x,o.playFlowAni(n,r,u.AnimationTime.moveTime,!0,function(){o.clear()}),t.setNormalAnchor();var i=t.orignPt;cc.tween(t.node).to(u.AnimationTime.moveTime,{x:i.x,y:i.y,angle:0},{easing:"sineOut"}).call(function(){t.node.zIndex=0,t.node.parent.zIndex=0}).start(),this.scheduleOnce(function(){t.node.getChildByName("img_cupMask").getComponent(cc.Sprite).enabled=!1,t.node.children[0].active=!0,t.node.children[0].setPosition(cc.v2(-t.node.width/2,-t.node.height/2+10)),t.node.children[0].scaleY=.2,t.node.children[0].skewX=20,t.node.children[0].angle=0},u.AnimationTime.moveTime)},e.prototype.checkPour=function(t,e){var o=t.getTop(),n=o.topColorId,r=(o.topColorNum,e.getTop()),i=r.topColorId,c=r.emptyNum;return!(!n||i&&i!==n||!c)},e.prototype.createCupNode=function(t){var e=l.Global.cupSetting.current,o=cc.instantiate(this.cupPrefab),n=o.getComponent(p.default);return n.changeImg(+e-1),this.node.addChild(o),n.setCupInfo(t),n.setOnClick(this.onClickCup.bind(this,n)),n},e.prototype.initCfg=function(){this.curCfg=[];for(var t=this.levelCfg.json[l.Global.lv-1],e=0;e<t.length;){var o={colorIds:[t[e],t[e+1]||0,t[e+2]||0,t[e+3]||0]};this.curCfg.push(o),e+=4}},e.prototype._createLayout=function(t,e,o){var n=new cc.Node(o);n.parent=e;var r=n.addComponent(cc.Layout);return r.type=t,r.resizeMode=cc.Layout.ResizeMode.CONTAINER,r},e.prototype.pourLiquid=function(t,e,o){var n=o.dstPt,r=o.dstGlobal,i=o.viewSize,c=o.isRight;return e.node.zIndex=0,e.node.parent.zIndex=0,t.node.zIndex=10,t.node.parent.zIndex=10,Math.abs(r.x-.5*i.width)<2&&(c=t.node.parent.convertToWorldSpaceAR(cc.v2(t.node.position)).x<.5*i.width),n.y+=30+.5*e.node.height,n.x=n.x+(c?-0:0),n=e.node.parent.convertToWorldSpaceAR(n),t.setPourAnchor(c),{dstPt:n=t.node.parent.convertToNodeSpaceAR(n),isRight:c}},e.prototype.onPourStart=function(t,e,o,n){var r=this,i=this._waterFlow;i.setLineScale(this.layout_v.node.scale);var c=t.node.convertToWorldSpaceAR(cc.v2());c=i.node.parent.convertToNodeSpaceAR(c);var a=cc.v2(c.x,e.getWaterSurfacePosY());a=i.node.parent.convertToNodeSpaceAR(a),n?c.x-=10:c.x+=10,c.y+=20,a.x=c.x,i.strokeColor=(new cc.Color).fromHEX(o.colorHex);var l=Math.min(o.topColorNum,e.getTop().emptyNum),p=function(n,i){r._isPlaying=!1,r.onPourOneFinished(t,e,o.topColorId,l);var c=t.getTop().topColorId;t.pourWaterResetImg(c,l),i?r.changeBackStatus(s.hasFull):r.changeBackStatus(s.hasPush)};e.setStartAddWater(o.topColorId,l),i.playFlowAni(c,a,u.AnimationTime.moveTime,!1,function(){e.setPourInCallback(p),e.startAddWater(o.topColorId,l)}),e.getWaterResetImg(o.topColorId,l,u.AnimationTime.pourTime)},e.prototype.onPourOneFinished=function(t,e,o,n){var r=this._cups.indexOf(t),i=this._cups.indexOf(e);l.Global.action_list.length==l.Global.action_step&&l.Global.action_list.shift(),l.Global.action_list.push({from:r,to:i,colorId:o,num:n}),this.checkIsAllFinished()||cc.director.emit(u.events.Do_pour)},e.prototype.checkIsAllFinished=function(){for(var t=0,e=this._cups;t<e.length;t++)if(!e[t].checkIsFinshed())return!1;return!0},e.prototype.createCups=function(t){return c(this,void 0,void 0,function(){var e,o,n,r,i,c,s,l,p,f,h,d,y,g,v;return a(this,function(){if(this.layout_v&&this.layout_v.node.destroyAllChildren(),this._cups=[],0==(e=this.curCfg.length))return[2];for(h=0;h<e;h++)o=this.curCfg[h],v=this.createCupNode(o),this._cups.push(v);for(this.layout_v||(this.layout_v=this._createLayout(cc.Layout.Type.VERTICAL,this.node,"layout_v"),this.layout_v.node.zIndex=1),n=[],r=this.createCupIndexGroups(e),i=1,h=0;h<r.length;h++)c=r[h],p=this.createCupLayout(r,this._cups[0].node.getContentSize(),i,u.spacesArr,h),i=Math.max(i,c.length),n.push(p);for(this.layout_v.enabled=!0,this.layout_v.node.scale=u.spacesArr[i][1],this.layout_v.spacingY=u.spacesArr[i][2]||40,s=0,l=n;s<l.length;s++)(p=l[s]).updateLayout(),p.enabled=!1;for(this.layout_v.updateLayout(),this.layout_v.enabled=!1,f=[],h=0;h<this._cups.length;h++)t&&-1!=this.fullIdxs.indexOf(h)&&(this._cups[h].setFull(),d={cup:this._cups[h].node,colorId:this._cups[h].getTop().topColorId},f.push(d));for(cc.director.emit(u.events.refreshFullNode,f),y=0,g=this._cups;y<g.length;y++)(v=g[y]).setOrignPt(v.node.position);return[2]})})},e.prototype.createCupIndexGroups=function(t){var e=[];if(t<=4){for(var o=[],n=0;n<this._cups.length;n++)o.push(n);e.push(o)}else if(t<=15){o=[],n=0;for(var r=t/2;n<r;n++)o.push(n);for(e.push(o),o=[];n<t;n++)o.push(n);e.push(o),o=[]}return e},e.prototype.createCupLayout=function(t,e,o,n,r){void 0===r&&(r=0);var i=this._createLayout(cc.Layout.Type.HORIZONTAL,this.layout_v.node,"layout_h_"+r);i.node.height=e.height,i.spacingX=n[o][0],i.node.scale=1,i.spacingY=n[o][2]||40;for(var c=t[r],a=0;a<c.length;a++){var s=c[a];this._cups[s].node.parent=i.node}return i},e.prototype.start=function(){o.ins=this,cc.director.on(u.events.Reset,this.resetLv,this),cc.director.on(u.events.Back,this.undoAction,this),cc.director.on(u.events.Next,this.nextLevel,this),cc.director.on(u.events.AddTube,this.addcur,this),cc.director.on(u.events.deleteCupData,this.deleteCupData,this)},e.prototype.onDisable=function(){cc.director.off(u.events.Reset,this.resetLv,this),cc.director.off(u.events.Back,this.undoAction,this),cc.director.off(u.events.Next,this.nextLevel,this),cc.director.off(u.events.AddTube,this.addcur,this),cc.director.off(u.events.deleteCupData,this.deleteCupData,this)},e.prototype.resetLv=function(){l.Global.action_list=[],this.nextLevel()},e.prototype.deleteCupData=function(t){for(var e=0;e<this._cups.length;e++)if(this._cups[e].node==t){this._cups.splice(e,1),this.curCfg.splice(e,1);break}},e.prototype.nextLevel=function(){console.log("\u5f00\u59cb"),this.selectedCup=null,this.isPushing=!1,this.isCheckBag=!1,this.setStatus(s.init),l.Global.action_list=[],this._isPlaying||(this.initCfg(),this.createCups(),1===l.Global.lv&&(console.log("\u5f00\u59cb\u5f15\u5bfc"),setTimeout(function(){cc.systemEvent.emit(u.events.ExcuteGuideTask,{taskFlie:"GuideTask",stepIndex:0})},300)))},e.prototype.undoAction=function(t){return c(this,void 0,void 0,function(){var e,o,n,r,i,c,s;return a(this,function(){return this.checkCanUndo()?t&&!t()?[2,!1]:null==(e=l.Global.action_list.pop())?[2,!1]:(o=e.from,n=e.to,r=e.num,i=e.colorId,c=this._cups[n],s=this._cups[o],c.isPouring()||s.isPouring()?[2,!1]:(c.removeTopWaterImmediately(r),s.addWaterImmediately(i,r),[2,!0])):[2]})})},e.prototype.changeBackStatus=function(t){this.nowStatus=t;var e=this.checkCanUndo();cc.director.emit(u.events.isCanBack,e)},e.prototype.addcur=function(){if(this.checkCanAddTube()){this.selectedCup&&(this.doSelect(this.selectedCup,!1),this.selectedCup=null),this._waterFlow.clear(),this.curCfg.push({colorIds:[0,0,0,0]}),this.fullIdxs=[];for(var t=0;t<this._cups.length;t++)this._cups[t].getIsFull()&&this.fullIdxs.push(t);this.createCups(!0)}},e.prototype.setFullCupSelect=function(t){this.selectedCup&&t===this.selectedCup&&this.doSelect(this.selectedCup,!1)},e.prototype.checkCanUndo=function(){return!this._isPlaying&&l.Global.action_list.length>0&&this.nowStatus==s.hasPush},e.prototype.setStatus=function(t){this.changeBackStatus(t)},e.prototype.checkCanAddTube=function(){return!this._isPlaying&&this.curCfg.length<l.Global.maxTube},e.ins=null,i([y(cc.Prefab)],e.prototype,"cupPrefab",void 0),i([y(cc.JsonAsset)],e.prototype,"levelCfg",void 0),i([y],e.prototype,"_debugLevel",void 0),i([y({tooltip:!1})],e.prototype,"debugLevel",null),o=i([d,g],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../game/Cup":"Cup","../game/WaterFlow":"WaterFlow"}],Cup:[function(t,e,o){"use strict";cc._RF.push(e,"72491RYDJhHaIEzhn1QrUBe","Cup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.CupImgs=void 0;var c=t("../com/index"),a=t("../enum/Enums"),s=t("../manager/AudioMgr"),l=t("../manager/CupMgr"),u=t("./Water"),p=cc._decorator,f=p.ccclass,h=p.property,d=p.executeInEditMode,y=function(){function t(){this.tub=null,this.mask=null}return i([h(cc.SpriteFrame)],t.prototype,"tub",void 0),i([h(cc.SpriteFrame)],t.prototype,"mask",void 0),i([f("CupImgs")],t)}();o.CupImgs=y;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.water=null,e.info=null,e.tubeNode=null,e.maskNode=null,e.shadow=null,e.fullShow=null,e.cupImgs=[],e.chooseImgs=[],e.surfaceWater=null,e.waterFourImg=null,e.isFull=!1,e.totalColorNum=4,e._colors=[],e._default_color="",e.tween=null,e._orignPt=null,e._upInfo=null,e.onClick=null,e}return r(e,t),e.prototype.changeImg=function(t){this.tubeNode.spriteFrame=this.cupImgs[t].tub,this.tubeNode.node.children[0].getComponent(cc.Sprite).spriteFrame=this.chooseImgs[t],this.node.getComponent(cc.Sprite).spriteFrame=this.cupImgs[t].tub,this.maskNode.spriteFrame=this.cupImgs[t].mask,this.shadow.spriteFrame=this.cupImgs[t].mask,this.shadow.node.setPosition(cc.v2(-this.node.width/2,-this.node.height/2+10))},e.prototype.setWaterColor=function(t,e){void 0===t&&(t=a.WaterColors),void 0===e&&(e=a.defaultColor),this._colors=t,this._default_color=e},e.prototype.onLoad=function(){this.setWaterColor()},e.prototype.getIsFull=function(){return this.isFull},e.prototype.setFull=function(){this.isFull=!0,this.fullShow.children[1].active=!0},e.prototype.setCupFrame=function(t){this.tubeNode.node.children[0].active=t},e.prototype.initWater=function(){for(var t=this,e=this.info,o=[],n=a.SPLIT_COUNT-1;n>=0;n--){var r=e.colorIds[n];if(0!=r){var i=o[o.length-1];i&&i==r?i.height+=1/a.SPLIT_COUNT:o.push({height:1/a.SPLIT_COUNT,colorId:r})}}o.forEach(function(e){var o=t._colors[e.colorId]||t._default_color;e.color=(new cc.Color).fromHEX(o),e.height*=a.HEIGHT_FACTOR}),this.water.initInfos(o),this.resetImgTitleInfo(o)},e.prototype.resetImgTitleInfo=function(t){if(0==t.length)return this.waterFourImg.active=!1,this.surfaceWater.active=!1,this.totalColorNum=0,this.surfaceWater.y=-112,void this.waterFourImg.children.forEach(function(t){t.active=!1,t.height=25});this.waterFourImg.active=!0,this.waterFourImg.children.forEach(function(t){t.active=!1,t.height=25}),this.totalColorNum=0;for(var e=0;e<t.length&&0!=t[e].height;e++)this.totalColorNum++,this.waterFourImg.children[e].active=!0,this.waterFourImg.children[e].color=new cc.Color(t[e].color),this.waterFourImg.children[e].height=67;this.surfaceWater.active=!0,this.surfaceWater.y=42*this.totalColorNum-112;var o=new cc.Color(t[t.length-1].color);o.r*=.7,o.g*=.7,o.b*=.7,this.surfaceWater.color=o},e.prototype.pourWaterResetImg=function(t,e){var o=this;if(this.surfaceWater.y-=42*e,this.totalColorNum-e==0)return this.waterFourImg.active=!1,this.waterFourImg.children.forEach(function(t){t.active=!1,t.height=25}),this.surfaceWater.active=!1,void(this.totalColorNum=0);this.surfaceWater.active=!0,this.totalColorNum-=e,this.waterFourImg.active=!0,this.waterFourImg.children.forEach(function(t,e){e<o.totalColorNum?t.active=!0:(t.active=!1,t.height=25)});var n=(new cc.Color).fromHEX(a.WaterColors[t]);n.r*=.7,n.g*=.7,n.b*=.7,this.surfaceWater.color=n},e.prototype.getWaterResetImg=function(t,e,o){var n=this;this.surfaceWater.active=!0;var r=(new cc.Color).fromHEX(a.WaterColors[t]),i=new cc.Color(.7*r.r,.7*r.g,.7*r.b);this.surfaceWater.color=i,this.waterFourImg.active=!0,cc.tween(this.surfaceWater).by(o,{y:42*e}).start();for(var c=o/e,s=function(t){l.scheduleOnce(function(){n.waterFourImg.children[n.totalColorNum+t].height=25,n.waterFourImg.children[n.totalColorNum+t].color=r,n.waterFourImg.children[n.totalColorNum+t].active=!0,cc.tween(n.waterFourImg.children[n.totalColorNum+t]).to(c,{height:67}).call(function(){t==e-1&&(n.totalColorNum+=e)}).start()},c*t)},l=this,u=0;u<e;u++)s(u)},e.prototype.setCupInfo=function(t){this.info=t,this.initWater()},e.prototype.update=function(){this.water.tiltAngle!=this.node.angle&&(this.water.tiltAngle=this.node.angle)},e.prototype.checkIsFinshed=function(){for(var t=!0,e=this.info.colorIds,o=null,n=0,r=0;r<a.SPLIT_COUNT;r++){if(null==o&&(o=e[r]),o!=e[r]){t=!1;break}0==e[r]&&n++}return n==a.SPLIT_COUNT&&(t=!0),t},e.prototype.setStartAddWater=function(t,e){for(var o=0,n=a.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);},e.prototype.startAddWater=function(t,e){var o=this._colors[t]||this._default_color;this.water.addInfo({colorId:t,height:e/a.SPLIT_COUNT*a.HEIGHT_FACTOR,color:(new cc.Color).fromHEX(o)}),s.AudioMgr.ins.playSoundAtTime(a.Clips.pourWater,e/a.SPLIT_COUNT)},Object.defineProperty(e.prototype,"orignPt",{get:function(){return this._orignPt},enumerable:!1,configurable:!0}),e.prototype.setOrignPt=function(t){this._orignPt=t},e.prototype.setPourAnchor=function(t){var e=cc.v2(3,2);e.x=t?this.node.width-e.x:e.x,e.y=this.node.height-e.y,e.x=e.x/this.node.width,e.y=e.y/this.node.height,this.setAnchor(e)},e.prototype.setAnchor=function(t){var e=this.node.getAnchorPoint(),o=this.node.getPosition(),n=this.water.node.getPosition();this.node.setAnchorPoint(t);var r=cc.v2(t.x-e.x,t.y-e.y),i=cc.v2(r.x*this.node.width,r.y*this.node.height);i=c.rotatePt(i,this.node.angle),o.x+=i.x,o.y+=i.y,this.node.setPosition(o),n.x-=r.x*this.node.width,n.y-=r.y*this.node.height,this.water.node.setPosition(n),this.tubeNode.node.setPosition(n)},e.prototype.moveToPour=function(t,e,o){var n=this,r=this.water.getPourStartAngle(),i=this.water.getPourEndAngle();this.water.onStartPour(o);var c=-12.5;e&&(c=12.5,r*=-1,i*=-1);var s=a.AnimationTime.moveTime,l=a.AnimationTime.pourTime;this.surfaceWater.active=!1,this.waterFourImg.active=!1,this.tween=cc.tween(this.node).set({angle:0}).to(s,{x:t.x+c,y:t.y,angle:r}).to(l,{angle:i}).call(function(){n.tween=null}).start(),this.shadow.node.active=!1,this.pourSameColor(o)},e.prototype.backToInitPos=function(){var t=this;this.tween&&(this.tween.stop(),this.tween=null),this.tween=cc.tween(this.node).to(a.AnimationTime.moveTime,{position:this._orignPt,angle:0}).call(function(){t.tween=null}).start()},Object.defineProperty(e.prototype,"upCupInfo",{get:function(){return this._upInfo},enumerable:!1,configurable:!0}),e.prototype.pourSameColor=function(t){var e=0,o=this.getTop(),n=this.info.colorIds;this._upInfo=JSON.parse(JSON.stringify(o));for(var r=0;r<a.SPLIT_COUNT;r++){var i=n[r];if(0!=i){if(o.topColorId!=i)break;if(e++==t)break;n[r]=0}}},e.prototype.getTop=function(){for(var t=this.info.colorIds,e=0,o=0,n=0,r=0;r<a.SPLIT_COUNT;r++)if(0!=t[r]){if(0!=o&&o!=t[r])break;o=t[r],n++}else e++;return{emptyNum:e,topColorId:o,topColorNum:n,colorHex:this._colors[o]||this._default_color}},e.prototype.getBottleMouthCenter=function(){return{x:this.node.x,y:this.node.y+this.node.width/2}},e.prototype.setOnClick=function(t){this.onClick=t},e.prototype.changeCheckedState=function(){this.isPouring()||this.onClick&&this.onClick(this)},e.prototype.isPouring=function(){return Math.abs(this.node.angle)>1},e.prototype.getWaterSurfacePosY=function(t){void 0===t&&(t=!1);var e=this.getTop(),o=(a.SPLIT_COUNT-e.emptyNum)/a.SPLIT_COUNT;o<.02?o=.02:t&&(o-=1/a.SPLIT_COUNT*a.HEIGHT_FACTOR),o*=a.HEIGHT_FACTOR,o-=.5;var n=cc.v2(0,this.water.node.height*o);return(n=this.water.node.convertToWorldSpaceAR(n)).y},e.prototype.setPourInCallback=function(t){var e=this;this.water.setPourInCallback(function(){e._upInfo=null;var o=e.checkIsFinshed();t&&t(e,o),o?(e.isFull=!0,s.AudioMgr.ins.playSound(a.Clips.ContainerFinish,.3),l.default.ins.setFullCupSelect(e,!1),e.fullShow.children[0].getComponent(cc.Animation).play(),e.fullShow.children[1].active=!0,e.scheduleOnce(function(){cc.director.emit(a.events.checkEnterBag,e.node,e.getTop().topColorId),l.default.ins.setPushingStatus(!1)},.7)):l.default.ins.setPushingStatus(!1)}.bind(this))},e.prototype.setPourOutCallback=function(t,e){this.water.setPourOutCallback(function(){t&&t(this)}.bind(this),function(){this.tween&&(this.tween.stop(),this.tween=null),e&&e(this)}.bind(this))},e.prototype.setNormalAnchor=function(){this.setAnchor(cc.v2(.5,.5))},e.prototype.addWaterImmediately=function(t,e){for(var o=0,n=a.SPLIT_COUNT-1;n>=0&&(0!=this.info.colorIds[n]||(this.info.colorIds[n]=t,++o!=e));n--);this.initWater()},e.prototype.removeTopWaterImmediately=function(t){for(var e=0,o=this.getTop(),n=this.info.colorIds,r=0;r<a.SPLIT_COUNT;r++){var i=n[r];if(0!=i){if(o.topColorId!=i)break;if(n[r]=0,++e>=t)break}}return this.initWater(),o},i([h(u.default)],e.prototype,"water",void 0),i([h(cc.Sprite)],e.prototype,"tubeNode",void 0),i([h(cc.Sprite)],e.prototype,"maskNode",void 0),i([h(cc.Sprite)],e.prototype,"shadow",void 0),i([h(cc.Node)],e.prototype,"fullShow",void 0),i([h([y])],e.prototype,"cupImgs",void 0),i([h(cc.SpriteFrame)],e.prototype,"chooseImgs",void 0),i([h(cc.Node)],e.prototype,"surfaceWater",void 0),i([h(cc.Node)],e.prototype,"waterFourImg",void 0),i([f,d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../com/index":"index","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/CupMgr":"CupMgr","./Water":"Water"}],1:[function(t,e){var o,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function s(t){if(n===clearTimeout)return clearTimeout(t);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(t){o=i}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(t){n=c}})();var l,u=[],p=!1,f=-1;function h(){p&&l&&(p=!1,l.length?u=l.concat(u):f=-1,u.length&&d())}function d(){if(!p){var t=a(h);p=!0;for(var e=u.length;e;){for(l=u,u=[];++f<e;)l&&l[f].run();f=-1,e=u.length}l=null,p=!1,s(t)}}function y(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];u.push(new y(t,e)),1!==u.length||p||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],DragonAVModal:[function(t,e,o){"use strict";cc._RF.push(e,"0e337zoC5FPaoz1ylBZzM++","DragonAVModal");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/AudioMgr"),p=t("../manager/ResMgr"),f=t("../view/BaseView"),h=cc._decorator,d=h.ccclass,y=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.getReward=function(){s.Global.setPeopleHaveList("C10");var t=s.Global.peopleSetting,e=t.current;t.haveList.includes("C10")&&"C10"!==e&&(s.Global.setPeopleCurrent("C10"),cc.director.emit(l.events.closeGame),u.AudioMgr.ins.playSound(l.Clips.modal,.5),cc.sys.BYTEDANCE_GAME||this.openHeaderImgModal(),this.openDragonAniModal(),this.close())},e.prototype.openDragonAniModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,p.default.ins.getUI(l.ui.DragonGetModal)];case 1:return t.sent().parent=cc.find("Canvas"),[2]}})})},e.prototype.openHeaderImgModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,p.default.ins.getUI(l.ui.DragonHeaderImgModal)];case 1:return t.sent().parent=cc.find("Canvas"),[2]}})})},e.prototype.close=function(){this.node.destroy()},e.prototype.imgClick=function(){},e.prototype.saveImg=function(){},e.prototype.handleClick=function(){},i([d],e)}(f.default));o.default=y,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/ResMgr":"ResMgr","../view/BaseView":"BaseView"}],DrawView:[function(t,e,o){"use strict";cc._RF.push(e,"c158eUZ7VFH/KOjl6IlagxT","DrawView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,l=t("../Global"),u=t("../com/index"),p=t("../enum/Enums"),f=t("../manager/AudioMgr"),h=t("../manager/EnergyMgr"),d=t("../manager/PropBlockMgr"),y=t("../manager/ResMgr"),g=t("./BaseView"),v=t("./PropModalView"),m=cc._decorator,b=m.ccclass,_=m.property;(function(t){t[t.Idle=0]="Idle",t[t.Play=1]="Play"})(s||(s={}));var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawLayoutNode=null,e.drawBox=null,e.opcNum=63,e._sourceArr=[],e._index=0,e._count=0,e._targetIndex=[],e._state=s.Idle,e}return r(e,t),e.prototype.start=function(){return c(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return t=y.default.ins.getJson("draw"),[4,this.init(t.json.data)];case 1:return e.sent(),[2]}})})},e.prototype.init=function(t){return c(this,void 0,void 0,function(){var e,o,n,r,i,c;return a(this,function(a){switch(a.label){case 0:this._sourceArr=t,e=0,o=t,a.label=1;case 1:return e<o.length?(n=o[e],[4,y.default.ins.getUI(p.prop[n.key])]):[3,4];case 2:r=a.sent(),(i=r.getComponent(d.default)).setLabel(n.label+"x"+n.num),i.setLabelColor(new cc.Color(101,101,223)),i.setBold(),c=cc.instantiate(this.drawBox),r.parent=c,c.parent=this.drawLayoutNode,a.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},e.prototype.startAni=function(){var t=this;if(this._state!=s.Play){var e=u.getRandomIntInclusive(20,50);this._targetIndex=[e],this._count=0,this._index=0,this._state=s.Play;var o=this.drawLayoutNode.children,n=function(){var r=cc.sequence(cc.callFunc(function(){for(var r=0,i=o;r<i.length;r++)i[r].opacity=t.opcNum;if(o[t._index].opacity=255,t._count++,t._count>e){for(var c=0,a=o;c<a.length;c++)a[c].stopAllActions();return t._state=s.Idle,f.AudioMgr.ins.playSound(p.Clips.modal,.5),void t.openModalView()}if(t._index==t._targetIndex[t._count]){o[t._index].stopAllActions();var l=cc.sequence(cc.fadeOut(.08),cc.fadeIn(.08)).repeat(1);o[t._index].runAction(cc.sequence(l,cc.callFunc(function(){t._count<t._targetIndex.length?n():t._state=s.Idle})))}f.AudioMgr.ins.playSound(p.Clips.draw,.1),t._index=(t._index+1)%o.length}),cc.delayTime(.08));o[t._index].runAction(r.repeatForever())};n()}},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.openModalView=function(){return c(this,void 0,void 0,function(){var t,e,o;return a(this,function(n){switch(n.label){case 0:return console.log("\u9886\u5956\u52b1"),"power"===(t=this._sourceArr[this._index]).key?h.default.ins.changeEnergy(!0,+t.num):l.Global.addPropsSetting(t.key,+t.num),[4,y.default.ins.getUI(p.ui.DrawPropsModalView)];case 1:return e=n.sent(),(o=e.getComponent(v.default)).renderProps([t]),o.watchVideoCallback=function(){"power"===t.key?h.default.ins.changeEnergy(!0,+t.num):l.Global.addPropsSetting(t.key,+t.num),console.log("\u9886\u53d6\u5956\u52b1X2")},e.parent=this.node,[2]}})})},i([_(cc.Node)],e.prototype,"drawLayoutNode",void 0),i([_(cc.Prefab)],e.prototype,"drawBox",void 0),i([b],e)}(g.default);o.default=w,cc._RF.pop()},{"../Global":"Global","../com/index":"index","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/EnergyMgr":"EnergyMgr","../manager/PropBlockMgr":"PropBlockMgr","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./PropModalView":"PropModalView"}],DyPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"d896fdeDmxB8JA6ayUwKTxf","DyPlatform"),Object.defineProperty(o,"__esModule",{value:!0}),o.DyPlatform=void 0;var n=t("../manager/Main"),r=function(){function t(){this.tt=window.tt,this.haveSideReward=!1,this.rewardVideoList=new Map}return t.prototype.openToScence=function(){this.tt&&this.tt.navigateToScene({scene:"sidebar",fail:console.log,success:console.log})},Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this,e=n.default.ins.Shares[0].sharePics;e.length>0&&this.tt&&(this.tt.onShareAppMessage(function(){var t=Math.floor(Math.random()*e.length);return{title:e[t].shareText,templateId:e[t].shareId,imageUrl:e[t].shareLink}}),this.tt.showShareMenu({withShareTicket:!0})),this.tt?(this.tt.onShow(function(e){var o={launch_from:"homepage",location:"sidebar_card",scene:"021036"},n=!1;for(var r in o)e[r]!==o[r]&&(n=!0);n||(t.haveSideReward=!0),console.log(e,"op")}),this.initInterstitialAd()):this.haveSideReward=!0},t.prototype.getLaunchOption=function(){return this.tt.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.tt.getLaunchOptionsSync().scene},t.prototype.showShare=function(t,e){if(void 0===t&&(t=""),n.default.ins.Shares[0]){var o=n.default.ins.Shares[0].sharePics;if(!(o.length<=0)){var r=Math.floor(Math.random()*o.length);this.tt&&this.tt.shareAppMessage({channel:"article",title:o[r].shareText,templateId:o[r].shareId,imageUrl:o[r].shareLink,query:t,success:function(){console.log("\u5206\u4eab\u6210\u529f"),e(1)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),e(0)}})}}},t.prototype.videoShare=function(t,e,o){if(void 0===e&&(e=""),n.default.ins.ShareVideoes[0]){var r=n.default.ins.ShareVideoes[0].sharePics;if(!(r.length<=0)){var i=Math.floor(Math.random()*r.length);console.log(i,e,r),this.tt&&this.tt.shareAppMessage({channel:"video",query:e,templateId:r[i].shareId,title:r[i].title,desc:r[i].desc,extra:{videoPath:t,videoTopics:r[i].videoTopics,hashtag_list:r[i].videoTopics},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),o(1)},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),o(0)}})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;void 0===t&&(t=2);var o=n.default.ins.Platforms[0].bannerId[0];if(this.tt&&o){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var r=this.tt.getSystemInfoSync();console.log(o,"id");var i=this.tt.createBannerAd({adUnitId:o,adIntervals:30,style:{top:r.windowHeight,width:300}});console.log(i,"bannerAd"),i.style.left=(r.windowWidth-300)/2,i.onResize(function(t){i.style.top=r.windowHeight-t.height/2+20,i.style.left=(r.windowWidth-t.width)/2}),1==t?(r.windowWidth,i.style.width):2==t&&(r.windowWidth,i.style.width),i.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=i,i.show()}),i.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)})}},t.prototype.showRewardVideo=function(t){var e=this,o=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),i.offClose(o)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),i.offClose(o),t(0))},r=n.default.ins.Platforms[0].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(o);var i=this.tt.createRewardedVideoAd({adUnitId:r});this.rewardVideo2=i,i.load().then(function(){e.tt.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),i.show().then(function(){i.onClose(o)})});var c=!1;i.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),c||(c=!0,e.tt.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,success:function(){},fail:function(){},complete:function(){}}),t(2))})},t.prototype.initInterstitialAd=function(){var t=this;if(cc.sys.BYTEDANCE_GAME){var e=n.default.ins.Platforms[0].intersitialId[0];this.interstitialAd=this.tt.createInterstitialAd({adUnitId:e});var o=function(){setTimeout(function(){t.interstitialAd.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.interstitialAd.onClose(function(t){o(),console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),t.interstitialAd.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),t.interstitialAd.show().catch(function(t){o(),console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})})},35e3)};o()}},t.prototype.showInterstitialAd=function(t){void 0===t&&(t=5)},t.prototype.showCustomAd=function(t){t(0)},t.prototype.hideCustomAd1=function(){this.custom1&&(this.custom1.hide(),this.custom1=null)},t.prototype.showCustomAd1=function(t){var e=this;if(this.tt){var o,r=n.default.ins.Platforms[2].customId[1];if(r)if(this.tt.getSystemInfoSync(),o={width:128,left:64,top:300,fixed:0},this.custom1)this.custom1.show();else{var i=this.tt.createBlockAd({adUnitId:r,orientation:"vertical",size:1,style:o});i.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),i.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),e.custom1=i}),i.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}}},t.prototype.hideCustomAd=function(){this.custom&&(this.custom=null)},t}();o.DyPlatform=r,cc._RF.pop()},{"../manager/Main":"Main"}],DyRecorderManager:[function(t,e,o){"use strict";cc._RF.push(e,"18173XOTpVPbZqjYd9QnBKj","DyRecorderManager");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.DyRecorderManager=void 0;var i=function(){function t(){this.tt=window.tt}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.tt&&(this.systemInfo=this.tt.getSystemInfoSync(),this.getGameRecorderManager=this.tt.getGameRecorderManager(),this.maskInfo=this.getGameRecorderManager.getMark(),this.onError())},t.prototype.start=function(t){var e,o;if(void 0===t&&(t={duration:30,isMarkOpen:!0}),this.tt){var n=(this.systemInfo.screenWidth-this.maskInfo.markWidth)/2,r=(this.systemInfo.screenHeight-this.maskInfo.markHeight)/2;null!==(e=t.locLeft)&&void 0!==e||(t.locLeft=n),null!==(o=t.locTop)&&void 0!==o||(t.locTop=r),this.onStart(),this.getGameRecorderManager.start(t)}},t.prototype.stop=function(){return n(this,void 0,void 0,function(){var t;return r(this,function(){return this.tt?(t=this.onStop(),this.getGameRecorderManager.stop(),[2,t]):[2]})})},t.prototype.onStart=function(){this.getGameRecorderManager.onStart(function(t){console.log(t,"\u5f55\u5c4f\u5f00\u59cb")})},t.prototype.onStop=function(){var t=this;return new Promise(function(e){t.getGameRecorderManager.onStop(function(t){console.log(t,t.videoPath,"\u5f55\u5c4f\u7ed3\u675f"),e(t.videoPath)})})},t.prototype.onError=function(){this.getGameRecorderManager.onError(function(t){console.log(t,"\u5f55\u5c4f\u5931\u8d25")})},t}();o.DyRecorderManager=i,cc._RF.pop()},{}],2:[function(t,e,o){(function(t){var n;n=function(e){"use strict";function o(t,...e){return(...o)=>t(...e,...o)}function n(t){return function(...e){var o=e.pop();return t.call(this,e,o)}}var r="function"==typeof queueMicrotask&&queueMicrotask,i="function"==typeof setImmediate&&setImmediate,c="object"==typeof t&&"function"==typeof t.nextTick;function a(t){setTimeout(t,0)}function s(t){return(e,...o)=>t(()=>e(...o))}var l=s(r?queueMicrotask:i?setImmediate:c?t.nextTick:a);function u(t){return h(t)?function(...e){const o=e.pop();return p(t.apply(this,e),o)}:n(function(e,o){var n;try{n=t.apply(this,e)}catch(r){return o(r)}if(n&&"function"==typeof n.then)return p(n,o);o(null,n)})}function p(t,e){return t.then(t=>{f(e,null,t)},t=>{f(e,t&&t.message?t:new Error(t))})}function f(t,e,o){try{t(e,o)}catch(n){l(t=>{throw t},n)}}function h(t){return"AsyncFunction"===t[Symbol.toStringTag]}function d(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function y(t){return"function"==typeof t[Symbol.asyncIterator]}function g(t){if("function"!=typeof t)throw new Error("expected a function");return h(t)?u(t):t}function v(t,e=t.length){if(!e)throw new Error("arity is undefined");return function(...o){return"function"==typeof o[e-1]?t.apply(this,o):new Promise((n,r)=>{o[e-1]=(t,...e)=>{if(t)return r(t);n(e.length>1?e:e[0])},t.apply(this,o)})}}function m(t){return function(e,...o){return v(function(n){var r=this;return t(e,(t,e)=>{g(t).apply(r,o.concat(e))},n)})}}function b(t,e,o,n){e=e||[];var r=[],i=0,c=g(o);return t(e,(t,e,o)=>{var n=i++;c(t,(t,e)=>{r[n]=e,o(t)})},t=>{n(t,r)})}function _(t){return t&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}const w={};function C(t){function e(...e){if(null!==t){var o=t;t=null,o.apply(this,e)}}return Object.assign(e,t),e}function P(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}function S(t){var e=-1,o=t.length;return function(){return++e<o?{value:t[e],key:e}:null}}function A(t){var e=-1;return function(){var o=t.next();return o.done?null:(e++,{value:o.value,key:e})}}function O(t){if(_(t))return S(t);var e,o,n,r,i=P(t);return i?A(i):(o=(e=t)?Object.keys(e):[],n=-1,r=o.length,function t(){var i=o[++n];return"__proto__"===i?t():n<r?{value:e[i],key:i}:null})}function M(t){return function(...e){if(null===t)throw new Error("Callback was already called.");var o=t;t=null,o.apply(this,e)}}function k(t,e,o,n){let r=!1,i=!1,c=!1,a=0,s=0;function l(){a>=e||c||r||(c=!0,t.next().then(({value:t,done:e})=>{if(!i&&!r){if(c=!1,e)return r=!0,void(a<=0&&n(null));a++,o(t,s,u),s++,l()}}).catch(p))}function u(t,e){if(a-=1,!i)return t?p(t):!1===t?(r=!0,void(i=!0)):e===w||r&&a<=0?(r=!0,n(null)):void l()}function p(t){i||(c=!1,r=!0,n(t))}l()}var R=t=>(e,o,n)=>{if(n=C(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if(d(e))return k(e,t,o,n);if(y(e))return k(e[Symbol.asyncIterator](),t,o,n);var r=O(e),i=!1,c=!1,a=0,s=!1;function l(t,e){if(!c)if(a-=1,t)i=!0,n(t);else if(!1===t)i=!0,c=!0;else{if(e===w||i&&a<=0)return i=!0,n(null);s||u()}}function u(){for(s=!0;a<t&&!i;){var e=r();if(null===e)return i=!0,void(a<=0&&n(null));a+=1,o(e.value,e.key,M(l))}s=!1}u()},T=v(function(t,e,o,n){return R(e)(t,g(o),n)},4);function I(t,e,o){o=C(o);var n=0,r=0,{length:i}=t,c=!1;function a(t,e){!1===t&&(c=!0),!0!==c&&(t?o(t):++r!==i&&e!==w||o(null))}for(0===i&&o(null);n<i;n++)e(t[n],n,M(a))}function F(t,e,o){return T(t,1/0,e,o)}var E=v(function(t,e,o){return(_(t)?I:F)(t,g(e),o)},3),x=v(function(t,e,o){return b(E,t,e,o)},3),L=m(x),B=v(function(t,e,o){return T(t,1,e,o)},3),G=v(function(t,e,o){return b(B,t,e,o)},3),j=m(G);const V=Symbol("promiseCallback");function N(){let t,e;function o(o,...n){if(o)return e(o);t(n.length>1?n:n[0])}return o[V]=new Promise((o,n)=>{t=o,e=n}),o}function D(t,e,o){"number"!=typeof e&&(o=e,e=null),o=C(o||N());var n=Object.keys(t).length;if(!n)return o(null);e||(e=n);var r={},i=0,c=!1,a=!1,s=Object.create(null),l=[],u=[],p={};function f(t,e){l.push(()=>v(t,e))}function h(){if(!c){if(0===l.length&&0===i)return o(null,r);for(;l.length&&i<e;)l.shift()()}}function d(t,e){var o=s[t];o||(o=s[t]=[]),o.push(e)}function y(t){(s[t]||[]).forEach(t=>t()),h()}function v(t,e){if(!a){var n=M((e,...n)=>{if(i--,!1!==e)if(n.length<2&&([n]=n),e){var l={};if(Object.keys(r).forEach(t=>{l[t]=r[t]}),l[t]=n,a=!0,s=Object.create(null),c)return;o(e,l)}else r[t]=n,y(t);else c=!0});i++;var l=g(e[e.length-1]);e.length>1?l(r,n):l(n)}}function m(e){var o=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)&&r.indexOf(e)>=0&&o.push(n)}),o}return Object.keys(t).forEach(e=>{var o=t[e];if(!Array.isArray(o))return f(e,[o]),void u.push(e);var n=o.slice(0,o.length-1),r=n.length;if(0===r)return f(e,o),void u.push(e);p[e]=r,n.forEach(i=>{if(!t[i])throw new Error("async.auto task `"+e+"` has a non-existent dependency `"+i+"` in "+n.join(", "));d(i,()=>{0==--r&&f(e,o)})})}),function(){for(var t=0;u.length;)t++,m(u.pop()).forEach(t=>{0==--p[t]&&u.push(t)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),h(),o[V]}var W=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,H=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,U=/,/,q=/(=.+)?(\s*)$/;function K(t){let e="",o=0,n=t.indexOf("*/");for(;o<t.length;)if("/"===t[o]&&"/"===t[o+1]){let e=t.indexOf("\n",o);o=-1===e?t.length:e}else if(-1!==n&&"/"===t[o]&&"*"===t[o+1]){let r=t.indexOf("*/",o);-1!==r?(o=r+2,n=t.indexOf("*/",o)):(e+=t[o],o++)}else e+=t[o],o++;return e}function Q(t){const e=K(t.toString());let o=e.match(W);if(o||(o=e.match(H)),!o)throw new Error("could not parse args in autoInject\nSource:\n"+e);let[,n]=o;return n.replace(/\s/g,"").split(U).map(t=>t.replace(q,"").trim())}function J(t,e){var o={};return Object.keys(t).forEach(e=>{var n,r=t[e],i=h(r),c=!i&&1===r.length||i&&0===r.length;if(Array.isArray(r))n=[...r],r=n.pop(),o[e]=n.concat(n.length>0?a:r);else if(c)o[e]=r;else{if(n=Q(r),0===r.length&&!i&&0===n.length)throw new Error("autoInject task functions require explicit parameters.");i||n.pop(),o[e]=n.concat(a)}function a(t,e){var o=n.map(e=>t[e]);o.push(e),g(r)(...o)}}),D(o,e)}class Y{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1}insertBefore(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):z(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):z(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var e=this.head;e;){var{next:o}=e;t(e)&&this.removeLink(e),e=o}return this}}function z(t,e){t.length=1,t.head=t.tail=e}function Z(t,e,o){if(null==e)e=1;else if(0===e)throw new RangeError("Concurrency must not be zero");var n=g(t),r=0,i=[];const c={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function a(t,e){c[t].push(e)}function s(t,e){const o=(...n)=>{u(t,o),e(...n)};c[t].push(o)}function u(t,e){return t?e?void(c[t]=c[t].filter(t=>t!==e)):c[t]=[]:Object.keys(c).forEach(t=>c[t]=[])}function p(t,...e){c[t].forEach(t=>t(...e))}var f=!1;function h(t,e,o,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");var r,i;function c(t,...e){return t?o?i(t):r():e.length<=1?r(e[0]):void r(e)}b.started=!0;var a=b._createTaskItem(t,o?c:n||c);if(e?b._tasks.unshift(a):b._tasks.push(a),f||(f=!0,l(()=>{f=!1,b.process()})),o||!n)return new Promise((t,e)=>{r=t,i=e})}function d(t){return function(e,...o){r-=1;for(var n=0,c=t.length;n<c;n++){var a=t[n],s=i.indexOf(a);0===s?i.shift():s>0&&i.splice(s,1),a.callback(e,...o),null!=e&&p("error",e,a.data)}r<=b.concurrency-b.buffer&&p("unsaturated"),b.idle()&&p("drain"),b.process()}}function y(t){return!(0!==t.length||!b.idle()||(l(()=>p("drain")),0))}const v=t=>e=>{if(!e)return new Promise((e,o)=>{s(t,(t,n)=>{if(t)return o(t);e(n)})});u(t),a(t,e)};var m=!1,b={_tasks:new Y,_createTaskItem:(t,e)=>({data:t,callback:e}),*[Symbol.iterator](){yield*b._tasks[Symbol.iterator]()},concurrency:e,payload:o,buffer:e/4,started:!1,paused:!1,push(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>h(t,!1,!1,e))}return h(t,!1,!1,e)},pushAsync(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>h(t,!1,!0,e))}return h(t,!1,!0,e)},kill(){u(),b._tasks.empty()},unshift(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>h(t,!0,!1,e))}return h(t,!0,!1,e)},unshiftAsync(t,e){if(Array.isArray(t)){if(y(t))return;return t.map(t=>h(t,!0,!0,e))}return h(t,!0,!0,e)},remove(t){b._tasks.remove(t)},process(){if(!m){for(m=!0;!b.paused&&r<b.concurrency&&b._tasks.length;){var t=[],e=[],o=b._tasks.length;b.payload&&(o=Math.min(o,b.payload));for(var c=0;c<o;c++){var a=b._tasks.shift();t.push(a),i.push(a),e.push(a.data)}r+=1,0===b._tasks.length&&p("empty"),r===b.concurrency&&p("saturated");var s=M(d(t));n(e,s)}m=!1}},length:()=>b._tasks.length,running:()=>r,workersList:()=>i,idle:()=>b._tasks.length+r===0,pause(){b.paused=!0},resume(){!1!==b.paused&&(b.paused=!1,l(b.process))}};return Object.defineProperties(b,{saturated:{writable:!1,value:v("saturated")},unsaturated:{writable:!1,value:v("unsaturated")},empty:{writable:!1,value:v("empty")},drain:{writable:!1,value:v("drain")},error:{writable:!1,value:v("error")}}),b}function X(t,e){return Z(t,1,e)}function $(t,e,o){return Z(t,e,o)}var tt=v(function(t,e,o,n){n=C(n);var r=g(o);return B(t,(t,o,n)=>{r(e,t,(t,o)=>{e=o,n(t)})},t=>n(t,e))},4);function et(...t){var e=t.map(g);return function(...t){var o=this,n=t[t.length-1];return"function"==typeof n?t.pop():n=N(),tt(e,t,(t,e,n)=>{e.apply(o,t.concat((t,...e)=>{n(t,e)}))},(t,e)=>n(t,...e)),n[V]}}function ot(...t){return et(...t.reverse())}var nt=v(function(t,e,o,n){return b(R(e),t,o,n)},4),rt=v(function(t,e,o,n){var r=g(o);return nt(t,e,(t,e)=>{r(t,(t,...o)=>t?e(t):e(t,o))},(t,e)=>{for(var o=[],r=0;r<e.length;r++)e[r]&&(o=o.concat(...e[r]));return n(t,o)})},4),it=v(function(t,e,o){return rt(t,1/0,e,o)},3),ct=v(function(t,e,o){return rt(t,1,e,o)},3);function at(...t){return function(...e){return e.pop()(null,...t)}}function st(t,e){return(o,n,r,i)=>{var c,a=!1;const s=g(r);o(n,(o,n,r)=>{s(o,(n,i)=>n||!1===n?r(n):t(i)&&!c?(a=!0,c=e(!0,o),r(null,w)):void r())},t=>{if(t)return i(t);i(null,a?c:e(!1))})}}var lt=v(function(t,e,o){return st(t=>t,(t,e)=>e)(E,t,e,o)},3),ut=v(function(t,e,o,n){return st(t=>t,(t,e)=>e)(R(e),t,o,n)},4),pt=v(function(t,e,o){return st(t=>t,(t,e)=>e)(R(1),t,e,o)},3);function ft(t){return(e,...o)=>g(e)(...o,(e,...o)=>{"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&o.forEach(e=>console[t](e)))})}var ht=ft("dir"),dt=v(function(t,e,o){o=M(o);var n,r=g(t),i=g(e);function c(t,...e){if(t)return o(t);!1!==t&&(n=e,i(...e,a))}function a(t,e){return t?o(t):!1!==t?e?void r(c):o(null,...n):void 0}return a(null,!0)},3);function yt(t,e,o){const n=g(e);return dt(t,(...t)=>{const e=t.pop();n(...t,(t,o)=>e(t,!o))},o)}function gt(t){return(e,o,n)=>t(e,n)}var vt=v(function(t,e,o){return E(t,gt(g(e)),o)},3),mt=v(function(t,e,o,n){return R(e)(t,gt(g(o)),n)},4),bt=v(function(t,e,o){return mt(t,1,e,o)},3);function _t(t){return h(t)?t:function(...e){var o=e.pop(),n=!0;e.push((...t)=>{n?l(()=>o(...t)):o(...t)}),t.apply(this,e),n=!1}}var wt=v(function(t,e,o){return st(t=>!t,t=>!t)(E,t,e,o)},3),Ct=v(function(t,e,o,n){return st(t=>!t,t=>!t)(R(e),t,o,n)},4),Pt=v(function(t,e,o){return st(t=>!t,t=>!t)(B,t,e,o)},3);function St(t,e,o,n){var r=new Array(e.length);t(e,(t,e,n)=>{o(t,(t,o)=>{r[e]=!!o,n(t)})},t=>{if(t)return n(t);for(var o=[],i=0;i<e.length;i++)r[i]&&o.push(e[i]);n(null,o)})}function At(t,e,o,n){var r=[];t(e,(t,e,n)=>{o(t,(o,i)=>{if(o)return n(o);i&&r.push({index:e,value:t}),n(o)})},t=>{if(t)return n(t);n(null,r.sort((t,e)=>t.index-e.index).map(t=>t.value))})}function Ot(t,e,o,n){return(_(e)?St:At)(t,e,g(o),n)}var Mt=v(function(t,e,o){return Ot(E,t,e,o)},3),kt=v(function(t,e,o,n){return Ot(R(e),t,o,n)},4),Rt=v(function(t,e,o){return Ot(B,t,e,o)},3),Tt=v(function(t,e){var o=M(e),n=g(_t(t));return function t(e){if(e)return o(e);!1!==e&&n(t)}()},2),It=v(function(t,e,o,n){var r=g(o);return nt(t,e,(t,e)=>{r(t,(o,n)=>o?e(o):e(o,{key:n,val:t}))},(t,e)=>{for(var o={},{hasOwnProperty:r}=Object.prototype,i=0;i<e.length;i++)if(e[i]){var{key:c}=e[i],{val:a}=e[i];r.call(o,c)?o[c].push(a):o[c]=[a]}return n(t,o)})},4);function Ft(t,e,o){return It(t,1/0,e,o)}function Et(t,e,o){return It(t,1,e,o)}var xt=ft("log"),Lt=v(function(t,e,o,n){n=C(n);var r={},i=g(o);return R(e)(t,(t,e,o)=>{i(t,e,(t,n)=>{if(t)return o(t);r[e]=n,o(t)})},t=>n(t,r))},4);function Bt(t,e,o){return Lt(t,1/0,e,o)}function Gt(t,e,o){return Lt(t,1,e,o)}function jt(t,e=(t=>t)){var o=Object.create(null),r=Object.create(null),i=g(t),c=n((t,n)=>{var c=e(...t);c in o?l(()=>n(null,...o[c])):c in r?r[c].push(n):(r[c]=[n],i(...t,(t,...e)=>{t||(o[c]=e);var n=r[c];delete r[c];for(var i=0,a=n.length;i<a;i++)n[i](t,...e)}))});return c.memo=o,c.unmemoized=t,c}var Vt=s(c?t.nextTick:i?setImmediate:a),Nt=v((t,e,o)=>{var n=_(e)?[]:{};t(e,(t,e,o)=>{g(t)((t,...r)=>{r.length<2&&([r]=r),n[e]=r,o(t)})},t=>o(t,n))},3);function Dt(t,e){return Nt(E,t,e)}function Wt(t,e,o){return Nt(R(e),t,o)}function Ht(t,e){var o=g(t);return Z((t,e)=>{o(t[0],e)},e,1)}class Ut{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(t){let e;for(;t>0&&Kt(this.heap[t],this.heap[e=qt(t)]);){let o=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=o,t=e}}percDown(t){let e;for(;(e=1+(t<<1))<this.heap.length&&(e+1<this.heap.length&&Kt(this.heap[e+1],this.heap[e])&&(e+=1),!Kt(this.heap[t],this.heap[e]));){let o=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=o,t=e}}push(t){t.pushCount=++this.pushCount,this.heap.push(t),this.percUp(this.heap.length-1)}unshift(t){return this.heap.push(t)}shift(){let[t]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),t}toArray(){return[...this]}*[Symbol.iterator](){for(let t=0;t<this.heap.length;t++)yield this.heap[t].data}remove(t){let e=0;for(let o=0;o<this.heap.length;o++)t(this.heap[o])||(this.heap[e]=this.heap[o],e++);this.heap.splice(e);for(let o=qt(this.heap.length-1);o>=0;o--)this.percDown(o);return this}}function qt(t){return(t+1>>1)-1}function Kt(t,e){return t.priority!==e.priority?t.priority<e.priority:t.pushCount<e.pushCount}function Qt(t,e){var o=Ht(t,e),{push:n,pushAsync:r}=o;function i(t,e){return Array.isArray(t)?t.map(t=>({data:t,priority:e})):{data:t,priority:e}}return o._tasks=new Ut,o._createTaskItem=({data:t,priority:e},o)=>({data:t,priority:e,callback:o}),o.push=function(t,e=0,o){return n(i(t,e),o)},o.pushAsync=function(t,e=0,o){return r(i(t,e),o)},delete o.unshift,delete o.unshiftAsync,o}var Jt=v(function(t,e){if(e=C(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var o=0,n=t.length;o<n;o++)g(t[o])(e)},2);function Yt(t,e,o,n){var r=[...t].reverse();return tt(r,e,o,n)}function zt(t){var e=g(t);return n(function(t,o){return t.push((t,...e)=>{let n={};if(t&&(n.error=t),e.length>0){var r=e;e.length<=1&&([r]=e),n.value=r}o(null,n)}),e.apply(this,t)})}function Zt(t){var e;return Array.isArray(t)?e=t.map(zt):(e={},Object.keys(t).forEach(o=>{e[o]=zt.call(this,t[o])})),e}function Xt(t,e,o,n){const r=g(o);return Ot(t,e,(t,e)=>{r(t,(t,o)=>{e(t,!o)})},n)}var $t=v(function(t,e,o){return Xt(E,t,e,o)},3),te=v(function(t,e,o,n){return Xt(R(e),t,o,n)},4),ee=v(function(t,e,o){return Xt(B,t,e,o)},3);function oe(t){return function(){return t}}const ne=5,re=0;function ie(t,e,o){var n={times:ne,intervalFunc:oe(re)};if(arguments.length<3&&"function"==typeof t?(o=e||N(),e=t):(ce(n,t),o=o||N()),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var r=g(e),i=1;return function t(){r((e,...r)=>{!1!==e&&(e&&i++<n.times&&("function"!=typeof n.errorFilter||n.errorFilter(e))?setTimeout(t,n.intervalFunc(i-1)):o(e,...r))})}(),o[V]}function ce(t,e){if("object"==typeof e)t.times=+e.times||ne,t.intervalFunc="function"==typeof e.interval?e.interval:oe(+e.interval||re),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||ne}}function ae(t,e){e||(e=t,t=null);let o=t&&t.arity||e.length;h(e)&&(o+=1);var r=g(e);return n((e,n)=>{function i(t){r(...e,t)}return(e.length<o-1||null==n)&&(e.push(n),n=N()),t?ie(t,i,n):ie(i,n),n[V]})}function se(t,e){return Nt(B,t,e)}var le=v(function(t,e,o){return st(Boolean,t=>t)(E,t,e,o)},3),ue=v(function(t,e,o,n){return st(Boolean,t=>t)(R(e),t,o,n)},4),pe=v(function(t,e,o){return st(Boolean,t=>t)(B,t,e,o)},3),fe=v(function(t,e,o){var n=g(e);return x(t,(t,e)=>{n(t,(o,n)=>{if(o)return e(o);e(o,{value:t,criteria:n})})},(t,e)=>{if(t)return o(t);o(null,e.sort(r).map(t=>t.value))});function r(t,e){var o=t.criteria,n=e.criteria;return o<n?-1:o>n?1:0}},3);function he(t,e,o){var r=g(t);return n((n,i)=>{var c,a=!1;n.push((...t)=>{a||(i(...t),clearTimeout(c))}),c=setTimeout(function(){var e=t.name||"anonymous",n=new Error('Callback function "'+e+'" timed out.');n.code="ETIMEDOUT",o&&(n.info=o),a=!0,i(n)},e),r(...n)})}function de(t){for(var e=Array(t);t--;)e[t]=t;return e}function ye(t,e,o,n){var r=g(o);return nt(de(t),e,r,n)}function ge(t,e,o){return ye(t,1/0,e,o)}function ve(t,e,o){return ye(t,1,e,o)}function me(t,e,o,n){arguments.length<=3&&"function"==typeof e&&(n=o,o=e,e=Array.isArray(t)?[]:{}),n=C(n||N());var r=g(o);return E(t,(t,o,n)=>{r(e,t,o,n)},t=>n(t,e)),n[V]}var be=v(function(t,e){var o,n=null;return bt(t,(t,e)=>{g(t)((t,...r)=>{if(!1===t)return e(t);r.length<2?[o]=r:o=r,n=t,e(t?null:{})})},()=>e(n,o))});function _e(t){return(...e)=>(t.unmemoized||t)(...e)}var we=v(function(t,e,o){o=M(o);var n=g(e),r=g(t),i=[];function c(t,...e){if(t)return o(t);i=e,!1!==t&&r(a)}function a(t,e){return t?o(t):!1!==t?e?void n(c):o(null,...i):void 0}return r(a)},3);function Ce(t,e,o){const n=g(t);return we(t=>n((e,o)=>t(e,!o)),e,o)}var Pe=v(function(t,e){if(e=C(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var o=0;function n(e){g(t[o++])(...e,M(r))}function r(r,...i){if(!1!==r)return r||o===t.length?e(r,...i):void n(i)}n([])}),Se={apply:o,applyEach:L,applyEachSeries:j,asyncify:u,auto:D,autoInject:J,cargo:X,cargoQueue:$,compose:ot,concat:it,concatLimit:rt,concatSeries:ct,constant:at,detect:lt,detectLimit:ut,detectSeries:pt,dir:ht,doUntil:yt,doWhilst:dt,each:vt,eachLimit:mt,eachOf:E,eachOfLimit:T,eachOfSeries:B,eachSeries:bt,ensureAsync:_t,every:wt,everyLimit:Ct,everySeries:Pt,filter:Mt,filterLimit:kt,filterSeries:Rt,forever:Tt,groupBy:Ft,groupByLimit:It,groupBySeries:Et,log:xt,map:x,mapLimit:nt,mapSeries:G,mapValues:Bt,mapValuesLimit:Lt,mapValuesSeries:Gt,memoize:jt,nextTick:Vt,parallel:Dt,parallelLimit:Wt,priorityQueue:Qt,queue:Ht,race:Jt,reduce:tt,reduceRight:Yt,reflect:zt,reflectAll:Zt,reject:$t,rejectLimit:te,rejectSeries:ee,retry:ie,retryable:ae,seq:et,series:se,setImmediate:l,some:le,someLimit:ue,someSeries:pe,sortBy:fe,timeout:he,times:ge,timesLimit:ye,timesSeries:ve,transform:me,tryEach:be,unmemoize:_e,until:Ce,waterfall:Pe,whilst:we,all:wt,allLimit:Ct,allSeries:Pt,any:le,anyLimit:ue,anySeries:pe,find:lt,findLimit:ut,findSeries:pt,flatMap:it,flatMapLimit:rt,flatMapSeries:ct,forEach:vt,forEachSeries:bt,forEachLimit:mt,forEachOf:E,forEachOfSeries:B,forEachOfLimit:T,inject:tt,foldl:tt,foldr:Yt,select:Mt,selectLimit:kt,selectSeries:Rt,wrapSync:u,during:we,doDuring:dt};e.default=Se,e.apply=o,e.applyEach=L,e.applyEachSeries=j,e.asyncify=u,e.auto=D,e.autoInject=J,e.cargo=X,e.cargoQueue=$,e.compose=ot,e.concat=it,e.concatLimit=rt,e.concatSeries=ct,e.constant=at,e.detect=lt,e.detectLimit=ut,e.detectSeries=pt,e.dir=ht,e.doUntil=yt,e.doWhilst=dt,e.each=vt,e.eachLimit=mt,e.eachOf=E,e.eachOfLimit=T,e.eachOfSeries=B,e.eachSeries=bt,e.ensureAsync=_t,e.every=wt,e.everyLimit=Ct,e.everySeries=Pt,e.filter=Mt,e.filterLimit=kt,e.filterSeries=Rt,e.forever=Tt,e.groupBy=Ft,e.groupByLimit=It,e.groupBySeries=Et,e.log=xt,e.map=x,e.mapLimit=nt,e.mapSeries=G,e.mapValues=Bt,e.mapValuesLimit=Lt,e.mapValuesSeries=Gt,e.memoize=jt,e.nextTick=Vt,e.parallel=Dt,e.parallelLimit=Wt,e.priorityQueue=Qt,e.queue=Ht,e.race=Jt,e.reduce=tt,e.reduceRight=Yt,e.reflect=zt,e.reflectAll=Zt,e.reject=$t,e.rejectLimit=te,e.rejectSeries=ee,e.retry=ie,e.retryable=ae,e.seq=et,e.series=se,e.setImmediate=l,e.some=le,e.someLimit=ue,e.someSeries=pe,e.sortBy=fe,e.timeout=he,e.times=ge,e.timesLimit=ye,e.timesSeries=ve,e.transform=me,e.tryEach=be,e.unmemoize=_e,e.until=Ce,e.waterfall=Pe,e.whilst=we,e.all=wt,e.allLimit=Ct,e.allSeries=Pt,e.any=le,e.anyLimit=ue,e.anySeries=pe,e.find=lt,e.findLimit=ut,e.findSeries=pt,e.flatMap=it,e.flatMapLimit=rt,e.flatMapSeries=ct,e.forEach=vt,e.forEachSeries=bt,e.forEachLimit=mt,e.forEachOf=E,e.forEachOfSeries=B,e.forEachOfLimit=T,e.inject=tt,e.foldl=tt,e.foldr=Yt,e.select=Mt,e.selectLimit=kt,e.selectSeries=Rt,e.wrapSync=u,e.during=we,e.doDuring=dt,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof o&&void 0!==e?n(o):"function"==typeof define&&define.amd?define(["exports"],n):n(this.async={})}).call(this,t("_process"))},{_process:1}],EnergyMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8c1c4nxGk5Dqq0bGgy9gVSg","EnergyMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../utils/Tools"),p=t("../view/HomeTopView"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.energyLabel=null,e.timerLabel=null,e._e=0,e._time=0,e._maxLabel="\u221e",e._passTime=0,e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"energyNum",{get:function(){return this._e},set:function(t){this._e=t,this.energyLabel.string=Math.floor(this._e)+""},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.timerLabel.node.active=!1,o.ins=this;var t=Number(u.load(l.Key.LastTime)),e=Date.now();if(this.timerLabel.string="",t){var n=Number(u.load(l.Key.Energy));if(n<s.Global.startEnergy&&this.startTimer(),e>t){if(n<s.Global.startEnergy){var r=e-t,i=Math.floor(r/1e3),c=Math.floor(i/s.Global.recoveryEnergyTime);this._passTime=i%s.Global.recoveryEnergyTime+(u.load(l.Key.PassTime)||0),n+=c,this._passTime>s.Global.recoveryEnergyTime&&(n++,this._passTime-=s.Global.recoveryEnergyTime),n>s.Global.startEnergy&&(n=s.Global.startEnergy)}u.save(l.Key.Energy,n),u.save(l.Key.LastTime,e)}this.energyNum=n}else u.save(l.Key.LastTime,e),u.save(l.Key.Energy,s.Global.startEnergy),this.energyNum=s.Global.startEnergy;cc.director.on(l.events.addPower,this.changeEnergy,this)},e.prototype.changeEnergy=function(t,e){void 0===t&&(t=!1);var n=Date.now();u.save(l.Key.LastTime,n);var r=Number(u.load(l.Key.Energy));if(t){r+=e||s.Global.addEnergy;var i=this.getComponent(o);return cc.tween(i).to((e||s.Global.addEnergy)/10,{energyNum:r}).start(),u.save(l.Key.Energy,r),r>=s.Global.startEnergy&&(this.timerLabel.string="",this.unschedule(this.updateTimer)),!0}return r-s.Global.levelEnergy<0?(this.showEnergy(),p.default.ins.showPowerModal(),!1):(r-=s.Global.levelEnergy,u.save(l.Key.Energy,r),this.energyLabel.string=""+r,r<s.Global.startEnergy&&this.startTimer(),!0)},e.prototype.startTimer=function(){this.timerLabel.string="",this.schedule(this.updateTimer,1)},e.prototype.updateTimer=function(){if(Number(u.load(l.Key.Energy))>=s.Global.startEnergy)return this.timerLabel.string="",void this.unschedule(this.updateTimer);if(this._time++,this._time>s.Global.recoveryEnergyTime){this._time=0;var t=Number(u.load(l.Key.Energy));return t++,u.save(l.Key.Energy,t),this.energyLabel.string=""+t,void(t>s.Global.startEnergy&&(this.timerLabel.string="",this.unschedule(this.updateTimer)))}var e=s.Global.recoveryEnergyTime-this._time-this._passTime;this._time+=this._passTime,this._passTime=0;var o=Math.floor(e/60),n=e-60*o;this.timerLabel.string=o+":"+n,u.save(l.Key.PassTime,s.Global.recoveryEnergyTime-n)},e.prototype.showEnergy=function(){return c(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.ins=null,i([d(cc.Label)],e.prototype,"energyLabel",void 0),i([d(cc.Label)],e.prototype,"timerLabel",void 0),o=i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../utils/Tools":"Tools","../view/HomeTopView":"HomeTopView"}],Enums:[function(t,e,o){"use strict";cc._RF.push(e,"860e9yo5Z5FdpwLnSS14+jg","Enums");var n,r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TagStatus=o.RoleStatus=o.titleArr=o.prop=o.ui=o.events=o.Key=o.Assets=o.Clips=o.SoundStatus=o.PropType=o.spacesArr=o.dft_lingWidth=o.TUBE_SELECTED_MOVE_HEIGHT=o.AnimationTime=o.defaultColor=o.WaterColors=o.SPLIT_COUNT=o.ANGLE_FACTOR=o.HEIGHT_FACTOR=o.PourAction=o.BASIC_DATA=o.MAX_ARR_LEN=o.shareVideoConfig=o.shareConfig=o.shareVideoContent=o.shareContent=o.adConfig=void 0;var i=cc._decorator,c=i.ccclass,a=i.property,s=function(){function t(){this.platform="platform",this.id=0,this.bannerId=[],this.intersitialId=[],this.videoId=[],this.customId=[]}return r([a()],t.prototype,"platform",void 0),r([a({type:cc.Integer})],t.prototype,"id",void 0),r([a({type:cc.String})],t.prototype,"bannerId",void 0),r([a({type:cc.String})],t.prototype,"intersitialId",void 0),r([a({type:cc.String})],t.prototype,"videoId",void 0),r([a({type:cc.String})],t.prototype,"customId",void 0),r([c("adConfig")],t)}();o.adConfig=s;var l=function(){function t(){this.shareId="",this.shareLink="",this.shareText="\u5206\u4eab\u6807\u9898"}return r([a()],t.prototype,"shareId",void 0),r([a()],t.prototype,"shareLink",void 0),r([a()],t.prototype,"shareText",void 0),r([c("shareContent")],t)}();o.shareContent=l;var u=function(){function t(){this.shareId="",this.title="\u5206\u4eab\u6807\u9898",this.desc="",this.videoTopics=[]}return r([a()],t.prototype,"shareId",void 0),r([a()],t.prototype,"title",void 0),r([a()],t.prototype,"desc",void 0),r([a({type:cc.String})],t.prototype,"videoTopics",void 0),r([c("shareVideoContent")],t)}();o.shareVideoContent=u;var p=function(){function t(){this.platform="platform",this.sharePics=[]}return r([a()],t.prototype,"platform",void 0),r([a({type:l})],t.prototype,"sharePics",void 0),r([c("shareConfig")],t)}();o.shareConfig=p;var f=function(){function t(){this.platform="platform",this.sharePics=[]}return r([a()],t.prototype,"platform",void 0),r([a({type:u})],t.prototype,"sharePics",void 0),r([c("shareVideoConfig")],t)}();o.shareVideoConfig=f,o.MAX_ARR_LEN=6,function(t){t[t.color_alpha=1]="color_alpha",t[t.color_range=255]="color_range",t[t.BYTE=4]="BYTE",t[t.color_alpha2=1]="color_alpha2",t[t.color_alpha3=2]="color_alpha3",t[t.color_alpha4=3]="color_alpha4"}(o.BASIC_DATA||(o.BASIC_DATA={})),function(t){t[t.none=0]="none",t[t.in=1]="in",t[t.out=2]="out"}(o.PourAction||(o.PourAction={})),o.HEIGHT_FACTOR=.8,o.ANGLE_FACTOR=.01,o.SPLIT_COUNT=4,o.WaterColors=["#0e97fe","#fffd25","#891a3b","#ff9614","#454574","#e20b00","#e6a3de","#dfdfdf","#0028b3","#24ff00","#e5c69a","#65dc8e","#9600ff","#f010bf","#3d8b31"],o.defaultColor="#538849",function(t){t[t.pourTime=.2]="pourTime",t[t.moveTime=.1]="moveTime"}(o.AnimationTime||(o.AnimationTime={})),o.TUBE_SELECTED_MOVE_HEIGHT=100,o.dft_lingWidth=6,o.spacesArr=((n={})[1]=[40,1],n[2]=[80,1],n[3]=[50,1],n[4]=[40,.9],n[5]=[30,.85],n[6]=[30,.85],n[7]=[20,.7,60],n[8]=[10,.7,80],n),function(t){t[t.reset=0]="reset",t[t.back=1]="back",t[t.tube=2]="tube",t[t.debris=3]="debris",t[t.power=4]="power"}(o.PropType||(o.PropType={})),function(t){t[t.on=1]="on",t[t.off=-1]="off"}(o.SoundStatus||(o.SoundStatus={})),o.Clips={Button_Click:"Button_Click",challenge:"challenge",ContainerFinish:"ContainerFinish",draw:"draw",firework_1:"firework_1",modal:"modal",pourWater:"pourWater",Show_Victory:"Show_Victory",reward:"reward",music:"music",muyu:"muyu"},o.Assets={BrickPrefab:{type:cc.Prefab,path:"Preload/Prefabs/Brick"},UiPrefab:{type:cc.Prefab,path:"Preload/Prefabs/UI/"},NewYear:{type:cc.Prefab,path:"Preload/Prefabs/NewYear/"},PropPrefab:{type:cc.Prefab,path:"Preload/Prefabs/Prop/"},Json:{type:cc.JsonAsset,path:"Preload/Jsons/"},Spin:{type:cc.Asset,path:"Preload/Spin/"},Sound:{type:cc.AudioClip,path:"Preload/Clips/"},Frame:{type:cc.SpriteFrame,path:"Preload/UI/"},Material:{type:cc.Material,path:"Preload/Effect/"}},o.Key={PropsSetting:"propsSetting",Energy:"Energy",LastTime:"LastTime",PassTime:"PassTime",Lv:"Lv",SignArr:"SignArr",Today:"Today",PeopleSetting:"peopleSetting",CupSetting:"cupSetting",ReceiveList:"ReceiveList",ReceiveListTime:"ReceiveListTime",SideReward:"SideReward",CodeList:"CodeList",ChallengeLv:"ChallengeLv"},o.events={Challenge:"challenge",gameStart:"gameStart",Toast:"toast",closeGame:"closeGame",addPower:"addPower",changeSound:"changeSound",taskFinish:"taskFinish",Reset:"Reset",Back:"Back",AddTube:"AddTube",Next:"Next",TimeStop:"TimeStop",Random:"Random",GoFire:"GoFire",LevelFinish:"LevelFinish",Do_pour:"Do_pour",Pause:"Pause",OpenPowerModal:"OpenPowerModal",ExcuteGuideTask:"ExcuteGuideTask",ReceiveClose:"ReceiveClose",isCanBack:"isCanBack",checkEnterBag:"checkBag",pushCupOver:"pushCupOver",refreshFullNode:"refreshFullNode",deleteCupData:"deleteCupData",backHome:"backHome"},o.ui={HomeTopView:{name:"HomeTopView",layer:0,clear:!1},HomeView:{name:"HomeView",layer:0,clear:!1},GameView:{name:"GameView",layer:3,clear:!1},RandomColorGameView:{name:"RandomColorGameView",layer:3,clear:!1},ResultView:{name:"VictoryModalView",layer:3,clear:!1},ChallengeVictoryModalView:{name:"ChallengeVictoryModalView",layer:3,clear:!1},DrawView:{name:"DrawView",layer:3,clear:!1},SignModalView:{name:"SignModalView",layer:3,clear:!1},ShopView:{name:"ShopModalView",layer:3,clear:!1},PeopleModalView:{name:"PeopleModalView",layer:3,clear:!1},ReceiveModalView:{name:"ReceiveModalView",layer:3,clear:!1},PropsModalView:{name:"PropsModalView",layer:3,clear:!1},DrawPropsModalView:{name:"DrawPropsModalView",layer:3,clear:!1},PhysicalModalView:{name:"PhysicalModalView",layer:3,clear:!1},AddModalView:{name:"AddModalView",layer:3,clear:!1},ChallengeCancelView:{name:"ChallengeCancelView",layer:3,clear:!1},GridAdView:{name:"GridAdView",layer:3,clear:!1},PropRoleOrCupModalView:{name:"PropRoleOrCupModalView",layer:3,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1},GongdeView:{name:"GongdeView",layer:6,clear:!1},DragonGetModal:{name:"DragonGetModal",layer:6,clear:!1},DragonHeaderImgModal:{name:"DragonHeaderImgModal",layer:6,clear:!1},DragonAVModal:{name:"DragonAVModal",layer:6,clear:!1},RedemptionCodeModalView:{name:"RedemptionCodeModalView",layer:6,clear:!1},RedemptionCodeInputView:{name:"RedemptionCodeInputView",layer:6,clear:!1},RankListView:{name:"RankListView",layer:6,clear:!1}},o.prop={reset:{name:"reset",layer:3,clear:!1},back:{name:"back",layer:3,clear:!1},tube:{name:"tube",layer:3,clear:!1},debris:{name:"debris",layer:3,clear:!1},power:{name:"power",layer:3,clear:!1}},o.titleArr=[{title:"\u7b28\u5934\u7b28\u8111",lv:8,desc:"",children:[{title:"\u7b28\u5934\u7b28\u81111\u661f",lv:3},{title:"\u7b28\u5934\u7b28\u81112\u661f",lv:5},{title:"\u7b28\u5934\u7b28\u81113\u661f",lv:8}]},{title:"\u9a6c\u9a6c\u864e\u864e",lv:24,desc:"",children:[{title:"\u9a6c\u9a6c\u864e\u864e1\u661f",lv:10},{title:"\u9a6c\u9a6c\u864e\u864e2\u661f",lv:13},{title:"\u9a6c\u9a6c\u864e\u864e3\u661f",lv:18},{title:"\u9a6c\u9a6c\u864e\u864e4\u661f",lv:24}]},{title:"\u5e73\u51e1\u65e0\u5947",lv:50,desc:"",children:[{title:"\u5e73\u51e1\u65e0\u59471\u661f",lv:30},{title:"\u5e73\u51e1\u65e0\u59472\u661f",lv:34},{title:"\u5e73\u51e1\u65e0\u59473\u661f",lv:39},{title:"\u5e73\u51e1\u65e0\u59474\u661f",lv:50}]},{title:"\u806a\u660e\u51fa\u4f17",lv:86,desc:"",children:[{title:"\u806a\u660e\u51fa\u4f171\u661f",lv:60},{title:"\u806a\u660e\u51fa\u4f172\u661f",lv:65},{title:"\u806a\u660e\u51fa\u4f173\u661f",lv:73},{title:"\u806a\u660e\u51fa\u4f174\u661f",lv:86}]},{title:"\u8db3\u667a\u591a\u8c0b",lv:150,desc:"",children:[{title:"\u8db3\u667a\u591a\u8c0b1\u661f",lv:100},{title:"\u8db3\u667a\u591a\u8c0b2\u661f",lv:108},{title:"\u8db3\u667a\u591a\u8c0b3\u661f",lv:120},{title:"\u8db3\u667a\u591a\u8c0b4\u661f",lv:150}]},{title:"\u806a\u660e\u7edd\u9876",lv:215,desc:"",children:[{title:"\u806a\u660e\u7edd\u98761\u661f",lv:150},{title:"\u806a\u660e\u7edd\u98762\u661f",lv:170},{title:"\u806a\u660e\u7edd\u98763\u661f",lv:185},{title:"\u806a\u660e\u7edd\u98764\u661f",lv:215}]},{title:"\u795e\u673a\u5999\u7b97",lv:310,desc:"",children:[{title:"\u795e\u673a\u5999\u7b971\u661f",lv:250},{title:"\u795e\u673a\u5999\u7b972\u661f",lv:260},{title:"\u795e\u673a\u5999\u7b973\u661f",lv:280},{title:"\u795e\u673a\u5999\u7b974\u661f",lv:310}]},{title:"\u667a\u6167\u65e0\u8fb9",lv:410,desc:"",children:[{title:"\u667a\u6167\u65e0\u8fb91\u661f",lv:330},{title:"\u667a\u6167\u65e0\u8fb92\u661f",lv:350},{title:"\u667a\u6167\u65e0\u8fb93\u661f",lv:380},{title:"\u667a\u6167\u65e0\u8fb94\u661f",lv:410}]}],function(t){t[t.locked=0]="locked",t[t.unlocked=1]="unlocked",t[t.selected=2]="selected"}(o.RoleStatus||(o.RoleStatus={})),function(t){t[t.law=0]="law",t[t.god=1]="god"}(o.TagStatus||(o.TagStatus={})),cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"fc646V3p1hLl4EMPJbOXsZW","GameMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../enum/Enums"),a=t("./AudioMgr"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){cc.director.on(c.events.Do_pour,this.onDo_pour,this),cc.director.on(c.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onDisable=function(){cc.director.off(c.events.Do_pour,this.onDo_pour,this),cc.director.off(c.events.LevelFinish,this.onLevelFinish,this)},e.prototype.onDo_pour=function(){console.log("===================================="),console.log("onDo_pour"),console.log("====================================")},e.prototype.onLevelFinish=function(){console.log("===================================="),console.log("onLevelFinish"),console.log("===================================="),a.AudioMgr.ins.playSound(c.Clips.Show_Victory)},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../enum/Enums":"Enums","./AudioMgr":"AudioMgr"}],GameView:[function(t,e,o){"use strict";cc._RF.push(e,"945b0ldndVLiZvMb+WPC41w","GameView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../ad/DyRecorderManager"),u=t("../enum/Enums"),p=t("../game/PropMgr"),f=t("../manager/AudioMgr"),h=t("../manager/CupMgr"),d=t("../manager/ResMgr"),y=t("../utils/Tools"),g=t("./BaseView"),v=t("./SettingView"),m=t("./VictoryModalView"),b=t("./topBagView"),_=cc._decorator,w=_.ccclass,C=_.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lvLabel=null,e.resetMgr=null,e.backMgr=null,e.tubeMgr=null,e.topBag=null,e.settingModal=null,e.allFullCupInfo=[],e.isChanllengeModel=!1,e.isGameOver=!1,e.onceAdd=!1,e}var o;return r(e,t),o=e,e.prototype.replaceSpin=function(){},e.prototype.onEnable=function(){cc.director.on(u.events.closeGame,this.goBack,this),cc.director.on(u.events.LevelFinish,this.GameResult,this),cc.director.on(u.events.isCanBack,this.backStatusChange,this),cc.director.on(u.events.checkEnterBag,this.checkEnterBag,this),cc.director.on(u.events.pushCupOver,this.pushCupOver,this),cc.director.on(u.events.refreshFullNode,this.refreshFullNode,this),cc.director.on(u.events.backHome,this.goBack,this),cc.director.on(u.events.Next,this.nextGame,this)},e.prototype.onDisable=function(){cc.director.off(u.events.closeGame,this.goBack,this),cc.director.off(u.events.LevelFinish,this.GameResult,this),cc.director.off(u.events.isCanBack,this.backStatusChange,this),cc.director.off(u.events.checkEnterBag,this.checkEnterBag,this),cc.director.off(u.events.pushCupOver,this.pushCupOver,this),cc.director.off(u.events.refreshFullNode,this.refreshFullNode,this),cc.director.off(u.events.backHome,this.goBack,this),cc.director.off(u.events.Next,this.nextGame,this)},e.prototype.nextGame=function(){this.isGameOver=!1},e.prototype.start=function(){y.save("isPlayGame",!0),o.ins=this},e.prototype.refreshFullNode=function(t){console.log(t,"\u5237\u65b0\u6ee1\u7684\u8282\u70b9"),this.allFullCupInfo=t},e.prototype.checkEnterBag=function(t,e){if(this.isChanllengeModel)h.default.ins.checkIsAllFinished()&&this.GameResult();else{var o=this.topBag.getColorArray(),n=o.indexOf(e);console.log(n,o,"\u74f6\u5b50\u5339\u914d\u888b\u5b50"),-1!=n?(h.default.ins.setBagStatus(!0),this.topBag.pushCup(t,n)):this.allFullCupInfo.push({cup:t,colorId:e})}},e.prototype.pushCupOver=function(){this.topBag.checkBagData(this.allFullCupInfo)},e.prototype.showSettings=function(){var t=cc.instantiate(this.settingModal);t.parent=this.node,t.getComponent(v.default).showBackBtn()},e.prototype.backStatusChange=function(t){t?(this.backMgr.node.getComponent(cc.Button).interactable=!0,this.backMgr.node.children[0].getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))):(this.backMgr.node.getComponent(cc.Button).interactable=!1,this.backMgr.node.children[0].getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")))},e.prototype.setLvLabel=function(){this.lvLabel.string=""+s.Global.lv},e.prototype.onResetClick=function(t){console.log(s.Global.getPropsSetting("reset")),s.Global.getPropsSetting("reset")>0?(s.Global.addPropsSetting("reset",-1),cc.director.emit(u.events.Reset)):(console.log(t.target),cc.director.emit(u.events.Reset)),this.onceAdd=!1,this.setProps(s.Global._propsSetting)},e.prototype.onBackClick=function(t){h.default.ins.checkCanUndo()&&(s.Global.getPropsSetting("back")>0?(s.Global.addPropsSetting("back",-1),cc.director.emit(u.events.Back),h.default.ins.setStatus(h.cupsNowStatus.hasBack)):(console.log(t.target),cc.director.emit(u.events.Back),h.default.ins.setStatus(h.cupsNowStatus.hasBack)),this.setProps(s.Global._propsSetting))},e.prototype.onNextClick=function(){this.GameResult()},e.prototype.onAddTubeClick=function(t){if(this.onceAdd)return console.log("\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a\u74f6\u5b50"),void cc.director.emit(u.events.Toast,"\u6bcf\u5173\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a\u74f6\u5b50");h.default.ins.checkCanAddTube()&&(s.Global.getPropsSetting("tube")>0?(s.Global.addPropsSetting("tube",-1),this.onceAdd=!0,cc.director.emit(u.events.AddTube)):(console.log(t.target),this.onceAdd=!0,cc.director.emit(u.events.AddTube)),this.setProps(s.Global._propsSetting))},e.prototype.showPowerModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,d.default.ins.getUI(u.ui.PhysicalModalView)];case 1:return t.sent().parent=cc.find("Canvas"),[2]}})})},e.prototype.onTimeStopClick=function(t){console.log(t.target),cc.director.emit(u.events.TimeStop)},e.prototype.onRandomClick=function(t){console.log(t.target),cc.director.emit(u.events.Random)},e.prototype.GameResult=function(){return c(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return this.isGameOver?[2]:(this.isGameOver=!0,this.onceAdd=!1,s.Global.addLv(),f.AudioMgr.ins.playSound(u.Clips.Show_Victory),this.init(),[4,d.default.ins.getUI(u.ui.ResultView)]);case 1:return t=o.sent(),cc.find("Canvas").addChild(t),t.getComponent(m.default).init(),[4,l.DyRecorderManager.ins.stop()];case 2:return e=o.sent(),console.log(e,"videoPath"),cc.director.emit(u.events.GoFire,e),[2]}})})},e.prototype.init=function(){this.setLvLabel();var t=y.load(u.Key.PropsSetting,2);s.Global._propsSetting=t||s.Global._propsSetting,this.setProps(s.Global._propsSetting)},e.prototype.goBack=function(){console.log("\u6e38\u620f\u8fd4\u56de"),this.node.destroy()},e.prototype.setProps=function(t){this.resetMgr.setNum(t.reset),this.backMgr.setNum(t.back),this.tubeMgr.setNum(t.tube)},e.prototype.changeSpin=function(){},e.prototype.muyuClick=function(){return c(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.ins=null,i([C(cc.Label)],e.prototype,"lvLabel",void 0),i([C(p.default)],e.prototype,"resetMgr",void 0),i([C(p.default)],e.prototype,"backMgr",void 0),i([C(p.default)],e.prototype,"tubeMgr",void 0),i([C(b.default)],e.prototype,"topBag",void 0),i([C(cc.Prefab)],e.prototype,"settingModal",void 0),o=i([w],e)}(g.default);o.default=P,cc._RF.pop()},{"../Global":"Global","../ad/DyRecorderManager":"DyRecorderManager","../enum/Enums":"Enums","../game/PropMgr":"PropMgr","../manager/AudioMgr":"AudioMgr","../manager/CupMgr":"CupMgr","../manager/ResMgr":"ResMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./SettingView":"SettingView","./VictoryModalView":"VictoryModalView","./topBagView":"topBagView"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"97215z3FR9KQZoWbMciCTCo","Global"),Object.defineProperty(o,"__esModule",{value:!0}),o.Global=o.defaultChallengeLv=void 0;var n=t("./enum/Enums"),r=t("./utils/Tools");o.defaultChallengeLv=200;var i=function(){function t(){}return Object.defineProperty(t,"challenge_lv",{get:function(){return t._challenge_lv},set:function(e){r.save(n.Key.ChallengeLv,e),t._challenge_lv=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"receiveList",{get:function(){return t._receiveList},set:function(t){this._receiveList=t},enumerable:!1,configurable:!0}),t.setReceiveList=function(e){t._receiveList.push(e),this.saveReceiveListLocal()},t.saveReceiveListLocal=function(){r.save(n.Key.ReceiveList,JSON.stringify(t._receiveList)),r.save(n.Key.ReceiveListTime,r.getDate())},t.clearReceiveList=function(){t._receiveList=[],this.saveReceiveListLocal()},Object.defineProperty(t,"codeList",{get:function(){return this._codeList},set:function(t){this._codeList=t},enumerable:!1,configurable:!0}),t.setCodeList=function(t){this._codeList.push(t),r.save(n.Key.CodeList,JSON.stringify(this._codeList))},Object.defineProperty(t,"peopleSetting",{get:function(){return this._peopleSetting},set:function(t){this._peopleSetting=t},enumerable:!1,configurable:!0}),t.setPeopleCurrent=function(e){t._peopleSetting.current=e==t._peopleSetting.current?null:e,r.save(n.Key.PeopleSetting,JSON.stringify(t._peopleSetting))},t.setPeopleHaveList=function(e){t._peopleSetting.haveList.includes(e)||(t._peopleSetting.haveList.push(e),r.save(n.Key.PeopleSetting,JSON.stringify(t._peopleSetting)))},Object.defineProperty(t,"cupSetting",{get:function(){return this._cupSetting},set:function(t){this._cupSetting=t},enumerable:!1,configurable:!0}),t.setCupCurrent=function(e){t._cupSetting.current=e==t._cupSetting.current?null:e,r.save(n.Key.CupSetting,JSON.stringify(t._cupSetting))},t.setCupHavaList=function(e){t._cupSetting.haveList.includes(e)||(t._cupSetting.haveList.push(e),r.save(n.Key.CupSetting,JSON.stringify(t._cupSetting)))},Object.defineProperty(t,"signArr",{get:function(){return 0===t._signArr.length&&(t._signArr=r.load(n.Key.SignArr,2)||[]),t._signArr},set:function(e){t._signArr=e,r.save(n.Key.SignArr,JSON.stringify(e))},enumerable:!1,configurable:!0}),t.addSignArr=function(t){r.save(n.Key.Today,r.getDate());var e=this._signArr;e.push(t),this.signArr=e.slice()},t.clearSignArr=function(){this.signArr=[]},t.addPropsSetting=function(t,e){this._propsSetting[t]+=+e,r.save(n.Key.PropsSetting,JSON.stringify(this._propsSetting))},t.getPropsSetting=function(t){return+this._propsSetting[t]},t.addLv=function(){this.lv<this.maxLv&&this.lv++,r.save(n.Key.Lv,this.lv)},t.subLv=function(){this.lv>1&&this.lv--,r.save(n.Key.Lv,this.lv)},t.setLv=function(t){t>0&&t<=this.maxLv&&(this.lv=t),r.save(n.Key.Lv,this.lv)},t.Pause=function(e){void 0===e&&(e=!0),cc.director.emit(n.events.Pause,e),t.start=!e},t.Debug=!0,t.bgm=n.SoundStatus.on,t.sound=n.SoundStatus.on,t.LoadingRate=0,t.enableShareAd=!0,t.start=!1,t.layer=[],t._challenge_lv=o.defaultChallengeLv,t.openChallenge_lv=30,t.lv=1,t.maxLv=999,t.maxTube=15,t.action_list=[],t.task_num=5,t.action_step=5,t.recoveryEnergyTime=60,t.addDebris=10,t.startEnergy=10,t.addEnergy=5,t.levelEnergy=1,t._receiveList=[],t._propsSetting={reset:1,back:1,tube:1,debris:1,next:1},t._peopleSetting={haveList:["C01"],current:"C01"},t._cupSetting={haveList:["01"],current:"01"},t._codeList=[],t._signArr=[],t}();o.Global=i,cc._RF.pop()},{"./enum/Enums":"Enums","./utils/Tools":"Tools"}],Gongde:[function(t,e,o){"use strict";cc._RF.push(e,"b269aLT+JtI3JXRS/izsyqg","Gongde");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){var t=this;cc.tween(this.node).set({y:this.node.y,opacity:255}).to(1.5,{y:this.node.y+650,opacity:0}).call(function(){t.animationFinshFn()}).start()},e.prototype.animationFinshFn=function(){this.node.destroy()},e.prototype.onDestroy=function(){},i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],GridAdView:[function(t,e,o){"use strict";cc._RF.push(e,"5385amRpe5BMa7/fTUIk7Km","GridAdView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseView"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.closeAd(),this.showMatrixAdFn()},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"./BaseView":"BaseView"}],GuideFinger:[function(t,e,o){"use strict";cc._RF.push(e,"a98d3lGMCVFDoOpdeXCzU2K","GuideFinger");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideFinger=void 0;var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Component));o.GuideFinger=s,cc._RF.pop()},{}],GuideTaskMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0ea37Q85FJO/Iq13E7CO66f","GuideTaskMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideTaskMgr=void 0;var c=cc._decorator,a=c.ccclass,s=c.property,l=t("async"),u=t("../enum/Enums"),p=cc.v3(),f=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.FINGER_PREFAB=null,t._finger=null,t._isOpenMaskInfo=!0,t}var n;return r(o,e),n=o,o.prototype.onLoad=function(){this.FINGER_PREFAB&&(this._finger=cc.instantiate(this.FINGER_PREFAB),this._finger.parent=this.node,this._finger.active=!1),this.node.setContentSize(cc.winSize),cc.systemEvent.on(u.events.ExcuteGuideTask,this.ExcuteGuideTask,this),this.node.on(cc.Node.EventType.TOUCH_START,this.addSetSwallowTouchesEventListener,this),this._mask=this.node.getComponentInChildren(cc.Mask),this._maskInfo=this._mask.node.getChildByName("info"),this._mask.node.active=!1,this._maskInfo.active=this._isOpenMaskInfo},o.prototype.ExcuteGuideTask=function(e){var o=this;this._mask.node.active=!0;var r=e.taskFlie,i=e.stepIndex,c=t(r).task,a=c.steps[i];this._targetNode=null;var s=function(){l.default.series({stepStart:function(t){a.onStart?a.onStart(function(){t()}):t()},stepExcute:function(t){a.onExcute&&a.onExcute(function(){o._mask.node.getChildByName("label").getComponent(cc.Label).string=a.command.text,o.scheduleOnce(function(){var e=n[a.command.cmd];e&&e(o,a,function(e){t(e)})},a.delayTime||0)})},stepEnd:function(t){a.onEnd?a.onEnd(function(){t()}):t(),(a=c.steps[++i])?s():(o._mask._graphics.clear(),o._mask.node.active=!1,o._finger.active=!1)}},function(){})};s()},o.prototype.addSetSwallowTouchesEventListener=function(t){if(this._mask.node.active)if(this._targetNode){if(cc.isValid(this._targetNode)){var e=this._targetNode.getBoundingBox();console.log(this._targetNode.getPosition(),t.getLocation(),"event.getLocation()event.getLocation()event.getLocation()");var o=this._targetNode.getWorldPosition(p);console.log(o);var n=t.getLocation(),r=e.width/2,i=e.height/2;n.x>=o.x-r&&n.x<=o.x+e.width+r&&n.y>=o.y-i&&n.y<=o.y+e.height+i?this.node._touchListener.setSwallowTouches(!1):this.node._touchListener.setSwallowTouches(!0)}}else this.node._touchListener.setSwallowTouches(!0);else this.node._touchListener.setSwallowTouches(!1)},o.movefinger=function(t,e,o){var n=e.command;t._targetNode=null,t.find(n.args,function(e){var n=e;t.fingerToNode(n,function(){t._targetNode=n,e.once(cc.Node.EventType.TOUCH_END,function(){o()})})})},o.prototype.find=function(t,e){var o=this,n=cc.find("Canvas");this.locateNode(n,t,function(t,n){if(t)console.error(t);else{var r=o._focusToNode(n);console.log(r,"rectrectrectrect"),r.width=105,e&&e(n,r)}})},o.prototype.parse=function(t){for(var e,o=[],n={},r=0,i=t.split(/[.,//,>,#]/g);r<i.length;r++){var c=i[r],a=new RegExp("[.,//,>,#]+"+c,"g"),s=t.match(a),l=s&&(null===(e=s[n[c]||0])||void 0===e?void 0:e.replace(c,""))||"/";n[c]?n[c]++:n[c]=1,o.push({symbol:l,name:c.trim(),index:n[c]-1||0})}return o},o.prototype.locateNode=function(t,e,o){for(var n,r=this.parse(e),i=t,c=function(t){var e=r[t];switch(e.symbol){case"/":n=i.getChildByName(e.name);break;case",":n=i.parent.children.filter(function(t){return t.name==e.name})[e.index]}if(!n)return i=null,"break";i=n},a=0;a<r.length&&"break"!==c(a);a++);return i&&i.active&&o?o(null,i):o(e),i},o.prototype._focusToNode=function(t){this._mask._graphics.clear();var e=t.getBoundingBoxToWorld(),o=this.node.convertToNodeSpaceAR(e.origin);return e.x=o.x,e.y=o.y,e.width=105,this._mask._graphics.fillRect(e.x,e.y,e.width,e.height),e},o.prototype.fingerToNode=function(t,e){this._finger||e(),this._finger.active=!0,this._finger.stopAllActions();var o=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position));o.y-=160,this._finger.setPosition(o),e()},o.FINGER="movefinger",o.typeList=[n.FINGER],i([s(cc.Prefab)],o.prototype,"FINGER_PREFAB",void 0),n=i([a],o)}(cc.Component);o.GuideTaskMgr=f,cc._RF.pop()},{"../enum/Enums":"Enums",async:2}],GuideTask:[function(t,e,o){"use strict";cc._RF.push(e,"a4f296uOsBCoau1POJLaXqn","GuideTask"),Object.defineProperty(o,"__esModule",{value:!0}),o.task=void 0,o.task={name:"\u3010\u4efb\u52a1\u5f15\u5bfc\u6d41\u7a0b\u3011",debug:!0,steps:[{order:0,name:"GuideTask",command:{cmd:"movefinger",text:"\u8bf7\u9009\u4e2d\u8fd9\u4e2a\u74f6\u5b50",args:"game/GameView/midUI/bottomBoard/cupMgr/layout_v/layout_h_0/img_cup",index:0},delayTime:.1,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}},{order:1,name:"GuideBag",command:{cmd:"movefinger",text:"\u5c06\u76f8\u540c\u989c\u8272\u7684\u6c34\uff0c\u5012\u6ee1\u540c\u4e00\u4e2a\u74f6\u5b50\u4e2d\u5219\u8fc7\u5173",args:"game/GameView/midUI/bottomBoard/cupMgr/layout_v/layout_h_0/img_cup,img_cup",index:1},delayTime:.2,onStart:function(t){t()},onExcute:function(t){t()},onEnd:function(t){t()}}]},cc._RF.pop()},{}],HomeTopView:[function(t,e,o){"use strict";cc._RF.push(e,"27ea07aux1OlbRtu512idX2","HomeTopView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.ModalGroup=void 0;var s=t("../Global"),l=t("../com/index"),u=t("../enum/Enums"),p=t("../manager/BadgeBtnMgr"),f=t("../manager/ResMgr"),h=t("../utils/Tools"),d=t("./BaseView"),y=cc._decorator,g=y.ccclass,v=y.property,m=function(){function t(){this.settingModal=null}return i([v(cc.Prefab)],t.prototype,"settingModal",void 0),i([g("ModalGroup")],t)}();o.ModalGroup=m;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modalGroup=null,e.nextLvDesc=null,e.receiveBtnMgr=null,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){o.ins=this},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),cc.director.on(u.events.ReceiveClose,this.setReceiveListDate,this),cc.director.on(u.events.OpenPowerModal,this.showPowerModal,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.off(u.events.ReceiveClose,this.setReceiveListDate,this),cc.director.off(u.events.OpenPowerModal,this.showPowerModal,this)},e.prototype.setReceiveListDate=function(){var t=h.load(u.Key.ReceiveListTime,0);h.getDate()!==t&&s.Global.clearReceiveList(),this.receiveBtnMgr.setNumToLabel(s.Global.action_step-s.Global.receiveList.length)},e.prototype.start=function(){s.Global.peopleSetting.haveList,this.nextLvDesc.string=l.Title.getNextLvDesc(s.Global.lv,u.titleArr),this.setReceiveListDate()},e.prototype.showSettings=function(){cc.instantiate(this.modalGroup.settingModal).parent=this.node.parent},e.prototype.showLotteryModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.DrawView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.showSignModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.SignModalView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.showTaskModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.ReceiveModalView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.showShopModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.ShopView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.showPowerModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.PhysicalModalView)];case 1:return t.sent().parent=cc.find("Canvas"),[2]}})})},e.prototype.showNewYearModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.DragonAVModal)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.openAddModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.AddModalView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.openRankModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.RankListView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.openGridAdModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.ins.getUI(u.ui.GridAdView)];case 1:return t.sent().parent=this.node.parent,[2]}})})},e.prototype.moreGameShow=function(){},i([v(m)],e.prototype,"modalGroup",void 0),i([v(cc.RichText)],e.prototype,"nextLvDesc",void 0),i([v(p.default)],e.prototype,"receiveBtnMgr",void 0),o=i([g],e)}(d.default);o.default=b,cc._RF.pop()},{"../Global":"Global","../com/index":"index","../enum/Enums":"Enums","../manager/BadgeBtnMgr":"BadgeBtnMgr","../manager/ResMgr":"ResMgr","../utils/Tools":"Tools","./BaseView":"BaseView"}],HomeView:[function(t,e,o){"use strict";cc._RF.push(e,"708babojGtBvKFtIIPZYpb3","HomeView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/EnergyMgr"),p=t("../manager/AudioMgr"),f=t("../manager/ResMgr"),h=t("./BaseView"),d=t("./GameView"),y=t("./RandomColorGameView"),g=cc._decorator,v=g.ccclass,m=g.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnShow=null,e}return r(e,t),e.prototype.start=function(){cc.tween(this.btnShow).repeatForever(cc.tween().to(2,{scale:1.1}).to(2,{scale:1})).start()},e.prototype.changeSpin=function(){},e.prototype.onLoad=function(){},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),p.AudioMgr.ins.playLoopSound(l.Clips.music)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.goGame=function(){return c(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return u.default.ins.changeEnergy(!1)?[4,f.default.ins.getUI(l.ui.GameView)]:(cc.director.emit(l.events.Toast,"\u4f53\u529b\u4e0d\u8db3"),[2]);case 1:return t=o.sent(),e=t.getComponent(d.default),console.log(t,"view",e),e.init(),t.parent=this.node.parent,[2]}})})},e.prototype.goChallengeGame=function(){return c(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return s.Global.lv<s.Global.openChallenge_lv?(cc.director.emit(l.events.Toast,"\u5173\u5361\u4e0d\u8db3"+s.Global.openChallenge_lv+"\u4e0d\u80fd\u8fdb\u5165"),[2]):u.default.ins.changeEnergy(!1)?[4,f.default.ins.getUI(l.ui.RandomColorGameView)]:(cc.director.emit(l.events.Toast,"\u4f53\u529b\u4e0d\u8db3"),[2]);case 1:return(t=e.sent()).getComponent(y.default).init(),t.parent=this.node.parent,[2]}})})},i([m(cc.Node)],e.prototype,"btnShow",void 0),i([v],e)}(h.default);o.default=b,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/EnergyMgr":"EnergyMgr","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./GameView":"GameView","./RandomColorGameView":"RandomColorGameView"}],LoadCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"b4c8dowH5FE/5w1IPRr0ufz","LoadCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/ResMgr"),p=t("../utils/Tools"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.load=null,e.loadingNode=null,e.isload=!0,e.once=!1,e}return r(e,t),e.prototype.closeLoad=function(){return c(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,u.default.ins.getUI(l.ui.HomeTopView)];case 1:return t=e.sent(),[4,u.default.ins.getUI(l.ui.HomeView)];case 2:return e.sent().parent=this.node.parent,t.parent=this.node.parent,p.load("isPlayGame",0)?[3,4]:[4,u.default.ins.getUI(l.ui.GameView)];case 3:e.sent().parent=this.node.parent,e.label=4;case 4:return this.isload=!1,this.loadingNode.active=!1,this.node.destroy(),[2]}})})},e.prototype.update=function(){this.isload&&(this.load.progress=s.Global.LoadingRate,s.Global.LoadingRate>=.99&&!this.once&&(this.once=!0,this.closeLoad()))},i([d(cc.ProgressBar)],e.prototype,"load",void 0),i([d(cc.Node)],e.prototype,"loadingNode",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/ResMgr":"ResMgr","../utils/Tools":"Tools"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"76bc6IsaypCZIihqXEele4k","Main");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../utils/Tools"),p=t("./ResMgr"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxLevel=999,e.openChallenge_lv=30,e.currentLevel=5,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){this.loadData(),o.ins=this},e.prototype.start=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.loadRes()];case 1:return t.sent(),[2]}})})},e.prototype.loadRes=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return s.Global.LoadingRate=.04,[4,p.default.ins.loadBundle(1,.01)];case 1:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.Json,.03)];case 2:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.Frame,.1)];case 3:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.Sound,.2)];case 4:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.UiPrefab,.2)];case 5:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.BrickPrefab,.2)];case 6:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.PropPrefab,.2)];case 7:return t.sent(),[4,p.default.ins.loadRes(1,l.Assets.Spin,.2)];case 8:return t.sent(),p.default.ins.getUI(l.ui.ToastView),[2]}})})},e.prototype.loadData=function(){var t;s.Global.maxLv=this.maxLevel,s.Global.openChallenge_lv=null!==(t=this.openChallenge_lv)&&void 0!==t?t:30;var e=u.load(l.Key.Lv);e||(e=this.currentLevel||1),s.Global.setLv(e);var o=u.load(l.Key.PropsSetting,2);s.Global._propsSetting=o||s.Global._propsSetting;var n=u.load(l.Key.PeopleSetting,2);s.Global.peopleSetting=n||s.Global._peopleSetting;var r=u.load(l.Key.CupSetting,2);s.Global.cupSetting=r||s.Global._cupSetting;var i=u.load(l.Key.ReceiveList,2);s.Global.receiveList=i||s.Global._receiveList;var c=u.load(l.Key.CodeList,2);s.Global.codeList=c||s.Global._codeList;var a=u.load(l.Key.ChallengeLv,1);s.Global.challenge_lv=a||s.defaultChallengeLv},e.ins=null,i([d({type:cc.Integer,tooltip:"\u6700\u5927\u5173\u5361"})],e.prototype,"maxLevel",void 0),i([d({type:cc.Integer,tooltip:"\u5f00\u59cb\u6311\u6218\u5173\u5361"})],e.prototype,"openChallenge_lv",void 0),i([d({type:cc.Integer,tooltip:"\u5f53\u524d\u5173\u5361"})],e.prototype,"currentLevel",void 0),o=i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../utils/Tools":"Tools","./ResMgr":"ResMgr"}],NewScript:[function(t,e,o){"use strict";cc._RF.push(e,"63a23EoW4RA8bKTuMNHgJGa","NewScript");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},i([s(cc.Label)],e.prototype,"label",void 0),i([s],e.prototype,"text",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PeopleModalView:[function(t,e,o){"use strict";cc._RF.push(e,"e35d3K+PPVGJaiBlkad6Jmg","PeopleModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseView"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.peopleName=null,e.peopleText=null,e.peopleImg=null,e}return r(e,t),e.prototype.setInfo=function(t,e,o){this.peopleName.string=t,this.peopleName.string=e,this.peopleImg.spriteFrame=o},e.prototype.setCallbackFn=function(t){this.callback=t},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.getDebris=function(){this.callback&&this.callback(),this.close()},e.prototype.start=function(){},i([l(cc.Label)],e.prototype,"peopleName",void 0),i([l(cc.Label)],e.prototype,"peopleText",void 0),i([l(cc.Sprite)],e.prototype,"peopleImg",void 0),i([s],e)}(c.default);o.default=u,cc._RF.pop()},{"./BaseView":"BaseView"}],PhysicalModalView:[function(t,e,o){"use strict";cc._RF.push(e,"fdfd9h2hQhMga0leqORy/E8","PhysicalModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),a=t("../enum/Enums"),s=t("../manager/AudioMgr"),l=t("../manager/EnergyMgr"),u=t("./BaseView"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.powerLabel=null,e}return r(e,t),e.prototype.start=function(){this.node.zIndex=999,this.powerLabel.string="+"+c.Global.addEnergy},e.prototype.getReward=function(){l.default.ins.changeEnergy(!0),s.AudioMgr.ins.playSound(a.Clips.reward),this.close()},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([h(cc.Label)],e.prototype,"powerLabel",void 0),i([f],e)}(u.default);o.default=d,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/EnergyMgr":"EnergyMgr","./BaseView":"BaseView"}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b9306dIq49BWp865ZnBWsam","PoolMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.PoolMgr=void 0;var n=function(){function t(){this._dictPool={},this._dictPrefab={}}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins)},enumerable:!1,configurable:!0}),t.prototype.copyNode=function(t,e){var o=t.name,n=null;if(this._dictPool.hasOwnProperty(o))n=(r=this._dictPool[o]).size()>0?r.get():cc.instantiate(t);else{var r=new cc.NodePool;this._dictPool[o]=r,n=cc.instantiate(t)}return e&&(n.parent=e,n.active=!0),n},t.prototype.getNode=function(t,e,o){var n,r,i;if("string"==typeof t?(n=this._dictPrefab[t],r=t):(n=t,r=t.data.name),this._dictPool.hasOwnProperty(r))if((c=this._dictPool[r]).size()>0)i=c.get();else{if(!n)return console.log("Pool invalid prefab name = ",r),null;i=cc.instantiate(n)}else{if(!n)return console.log("Pool invalid prefab name = ",r),null;var c=new cc.NodePool;this._dictPool[r]=c,i=cc.instantiate(n)}return e&&(i.parent=e,i.active=!0,o&&(i.position=o)),i},t.prototype.putNode=function(t,e){if(void 0===e&&(e=!1),t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new cc.NodePool,this._dictPool[o]=n),n.put(t)}},t.prototype.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},t.prototype.setPrefab=function(t,e){this._dictPrefab[t]=e},t.prototype.getPrefab=function(t){return this._dictPrefab[t]},t}();o.PoolMgr=n,cc._RF.pop()},{}],PropBlockMgr:[function(t,e,o){"use strict";cc._RF.push(e,"aaa4cdODmNKgZEs8bxjVLgp","PropBlockMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.labelShow=!0,e}return r(e,t),e.prototype.start=function(){this.labelShow||(this.label.node.active=!1),this.setLabelFontSize(25)},e.prototype.setLabel=function(t){this.label.string=t},e.prototype.setLabelColor=function(t){this.label.node.color=t},e.prototype.setLabelFontSize=function(t){this.label.fontSize=t},e.prototype.setBold=function(){this.label.enableBold=!0},i([s(cc.Label)],e.prototype,"label",void 0),i([s(cc.Boolean)],e.prototype,"labelShow",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PropMgr:[function(t,e,o){"use strict";cc._RF.push(e,"554c0mzm+1PjK6tmvsRNfvT","PropMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PropState=void 0;var c,a=cc._decorator,s=a.ccclass,l=a.property;(function(t){t[t.Video=1]="Video",t[t.Share=2]="Share"})(c=o.PropState||(o.PropState={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoNode=null,e.shareNode=null,e.numNode=null,e.num=0,e.state=c.Video,e}return r(e,t),e.prototype.setNum=function(t){this.num=t,this.showNodeByState()},e.prototype.showNodeByState=function(){this.num>0?(this.numNode.active=!0,this.numNode.getComponent(cc.Label).string=this.num.toString(),this.videoNode.active=!1,this.shareNode.active=!1):(this.numNode.active=!1,this.state==c.Video?(this.videoNode.active=!0,this.shareNode.active=!1):(this.videoNode.active=!1,this.shareNode.active=!0))},e.prototype.setState=function(t){this.state=t},e.prototype.start=function(){},i([l(cc.Node)],e.prototype,"videoNode",void 0),i([l(cc.Node)],e.prototype,"shareNode",void 0),i([l(cc.Node)],e.prototype,"numNode",void 0),i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],PropModalView:[function(t,e,o){"use strict";cc._RF.push(e,"284f9VJYdFCqLsU8AEjAxQ1","PropModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../enum/Enums"),l=t("../manager/AudioMgr"),u=t("../manager/PropBlockMgr"),p=t("../manager/ResMgr"),f=t("./BaseView"),h=cc._decorator,d=h.ccclass,y=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnGroup=null,e.propLayout=null,e.labelLayout=null,e._watchVideoCallback=null,e.oldPropList=[],e}return r(e,t),Object.defineProperty(e.prototype,"watchVideoCallback",{get:function(){return this._watchVideoCallback},set:function(t){this._watchVideoCallback=t},enumerable:!1,configurable:!0}),e.prototype.start=function(){},e.prototype.renderProps=function(t){this.oldPropList=t;for(var e=0,o=t;e<o.length;e++){var n=o[e];this.renderPropBlock(n),this.renderLabel(n)}},e.prototype.renderPropBlock=function(t){return c(this,void 0,void 0,function(){var e;return a(this,function(o){switch(o.label){case 0:return[4,p.default.ins.getUI(s.prop[t.key])];case 1:return e=o.sent(),console.log(e.children[0]),e.getComponent(u.default).labelShow=!1,e.parent=this.propLayout,[2]}})})},e.prototype.renderLabel=function(t,e){void 0===e&&(e=!1);var o=new cc.Node;o.name="LabelNode";var n=o.addComponent(cc.LabelOutline);n.color=cc.Color.BLACK,n.width=4;var r=o.addComponent(cc.Label);r.fontSize=44,r.fontFamily="Arial",r.enableBold=!0,r.string="x"+(e?2*t.num:t.num),o.parent=this.labelLayout},e.prototype.clearnLabel=function(){this.labelLayout.removeAllChildren()},e.prototype.onWatchVideo=function(){if(this.watchVideoCallback){console.log("\u770b\u89c6\u9891\u9886\u53d6\u5956\u52b1"),l.AudioMgr.ins.playSound(s.Clips.modal,.5),this.btnGroup.active=!1,this.clearnLabel();for(var t=0,e=this.oldPropList;t<e.length;t++){var o=e[t];this.renderLabel(o,!0)}this.watchVideoCallback()}},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([y(cc.Node)],e.prototype,"btnGroup",void 0),i([y(cc.Node)],e.prototype,"propLayout",void 0),i([y(cc.Node)],e.prototype,"labelLayout",void 0),i([d],e)}(f.default);o.default=g,cc._RF.pop()},{"../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/PropBlockMgr":"PropBlockMgr","../manager/ResMgr":"ResMgr","./BaseView":"BaseView"}],PropRoleOrCupModalView:[function(t,e,o){"use strict";cc._RF.push(e,"e2db6D/v1VA2YRr1aZaw11b","PropRoleOrCupModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./BaseView"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleArr=[],e.propSprite=null,e.rootNode=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.setTitleImg=function(){},e.prototype.setPropImg=function(t){this.propSprite.spriteFrame=t},e.prototype.setScale=function(t){this.rootNode.scale=t},e.prototype.close=function(){this.node.destroy(),this.cancelFn&&this.cancelFn()},i([l([cc.SpriteFrame])],e.prototype,"titleArr",void 0),i([l(cc.Sprite)],e.prototype,"propSprite",void 0),i([l(cc.Node)],e.prototype,"rootNode",void 0),i([s],e)}(c.default);o.default=u,cc._RF.pop()},{"./BaseView":"BaseView"}],QQPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"471b5ra1sBCW7AEh14gsEGD","QQPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.QQPlatform=void 0;var i=t("../manager/Main"),c=function(){function t(){this.qq=window.qq}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.qq.showShareMenu({withShareTicket:!0,menus:["qq","qzone","wechatFriends","wechatMoment"]});var t=i.default.ins.Shares[0].sharePics;t.length>0&&this.qq.onShareAppMessage(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink}})},t.prototype.getLaunchOption=function(){return this.qq.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.qq.getLaunchOptionsSync().scene},t.prototype.showShare=function(t){if(void 0===t&&(t=""),i.default.ins.Shares[0]){var e=i.default.ins.Shares[0].sharePics;if(!(e.length<=0)){var o=Math.floor(Math.random()*e.length);CC_WECHATGAME&&this.qq.shareAppMessage({title:e[o].shareText,imageUrl:e[o].shareLink,query:t})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;if(void 0===t&&(t=2),CC_WECHATGAME){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var o=i.default.ins.Platforms[2].bannerId[0],n=this.qq.getSystemInfoSync();console.log(o,"id");var r,c=this.qq.createBannerAd({adUnitId:o,adIntervals:30,style:{left:0,top:500,width:300}});r=1==t?n.windowWidth-c.style.realWidth:2==t?n.windowWidth/2-c.style.realWidth/2:0,c.onResize(function(){c.style.top=n.windowHeight-c.style.realHeight,c.style.left=r,c.show()}),c.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=c}),c.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)})}},t.prototype.showCustomAd=function(t){var e=this;if(CC_WECHATGAME){var o,n=i.default.ins.Platforms[2].customId[0],r=this.qq.getSystemInfoSync();if(o={width:r.screenWidth/1.5,left:(r.screenWidth-r.screenWidth/1.5)/.4-40,top:100,fixed:0},this.custom)this.custom.show();else{var c=this.qq.createBlockAd({adUnitId:n,orientation:"vertical",size:1,style:o});c.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),c.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),e.custom=c}),c.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}}},t.prototype.hideCustomAd1=function(){this.custom1&&(this.custom1.hide(),this.custom1=null)},t.prototype.showCustomAd1=function(t){var e,o=this;if(CC_WECHATGAME)if(i.default.ins.Platforms[2].customId[0],this.qq.getSystemInfoSync(),e={width:128,left:64,top:300,fixed:0},this.custom1)this.custom1.show();else{var n=this.qq.createBlockAd({adUnitId:"\u539f\u751f\u4e94\u884c\u683c\u5b50\u5e7f\u544aid",orientation:"vertical",size:1,style:e});n.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),o.custom1=n}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)})}},t.prototype.showCustomAd3=function(t){return n(this,void 0,void 0,function(){var e,o,n,c=this;return r(this,function(){return CC_WECHATGAME?(e=i.default.ins.Platforms[2].customId[1],this.qq.getSystemInfoSync(),o={top:76,width:375,fixed:0},(n=this.qq.createBlockAd({adUnitId:e,orientation:"vertical",size:1,style:o})).onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),c.custom3=n}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)}),[2]):[2]})})},t.prototype.hideCustomAd=function(){this.custom&&(this.custom=null)},t.prototype.showInterstitialAd=function(t){if(void 0===t&&(t=0),CC_WECHATGAME){var e=i.default.ins.Platforms[2].intersitialId[0],o=this.qq.createInterstitialAd({adUnitId:e});o&&(o.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onClose(function(t){console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),o.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),setTimeout(function(){o.show().catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})},1e3*t))}},t.prototype.showRewardVideo=function(t){var e=this,o=i.default.ins.Platforms[2].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(c);var n=this.qq.createRewardedVideoAd({adUnitId:o});this.rewardVideo2=n,n.load().then(function(){e.qq.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),n.show()});var r=!1;n.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),r||(r=!0,e.qq.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2))});var c=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),n.offClose(c)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),t(0))};n.onClose(c)},t}();o.QQPlatform=c,cc._RF.pop()},{"../manager/Main":"Main"}],RandomColorGameView:[function(t,e,o){"use strict";cc._RF.push(e,"4fba4ZmLGpPYICYZIg/HKwR","RandomColorGameView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/AudioMgr"),p=t("../manager/ResMgr"),f=t("./ChallengeVictoryModalView"),h=t("./GameView"),d=cc._decorator,y=d.ccclass,g=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setLvLabel=function(){this.lvLabel.string=""+(s.Global.challenge_lv-s.defaultChallengeLv+1)},e.prototype.start=function(){this.isChanllengeModel=!0},e.prototype.GameResult=function(){return c(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.onceAdd=!1,s.Global.challenge_lv++,u.AudioMgr.ins.playSound(l.Clips.Show_Victory),this.init(),[4,p.default.ins.getUI(l.ui.ChallengeVictoryModalView)];case 1:return t=e.sent(),cc.find("Canvas").addChild(t),t.getComponent(f.default),cc.director.emit(l.events.Next),[2]}})})},e.prototype.goBack=function(){return c(this,void 0,void 0,function(){return a(this,function(){return cc.director.loadScene("main"),[2]})})},e.prototype.onLoad=function(){this.finshFn()},e.prototype.finshFn=function(){console.log("Animation completed")},i([y],e)}(h.default));o.default=g,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/ResMgr":"ResMgr","./ChallengeVictoryModalView":"ChallengeVictoryModalView","./GameView":"GameView"}],RandomCupMgr:[function(t,e,o){"use strict";cc._RF.push(e,"73b0cQOKxVP1ZgEH4THYX7T","RandomCupMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),a=t("./CupMgr"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.initCfg=function(){this.curCfg=[];for(var t=this.levelCfg.json[c.Global.challenge_lv-1],e=0;e<t.length;){var o={colorIds:[t[e],t[e+1]||0,t[e+2]||0,t[e+3]||0]};this.curCfg.push(o),e+=4}},i([l],e)}(a.default));o.default=u,cc._RF.pop()},{"../Global":"Global","./CupMgr":"CupMgr"}],RandowColorCup:[function(t,e,o){"use strict";cc._RF.push(e,"8133cu/et9D4rlcUQ8HWtf9","RandowColorCup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),a=t("../enum/Enums"),s=t("../utils/Tools"),l=t("./Cup"),u=cc._decorator,p=u.ccclass,f=u.property,h=[{colors:["#FF7B31","#FFBA09","#F7C850","#FFAE4F","#E8770F","#DA6F33","#F3B865","#F3A165","#C95141","#E38F74","#99221A","#F29F3E","#F88848","#BE5A12","#FFB198"],default_color:"#FFB198"},{colors:["#DD8C71","#E9BE85","#E7CA95","#E6B58C","#CA8565","#BE7C65","#E0BC95","#DBA98C","#AC635C","#CB988B","#803B39","#D9A77E","#DA957A","#A46750","#E8B9AC"],default_color:"#E8B9AC"},{colors:["#FFB48B","#FFE0A4","#FFE8B6","#FFDAAC","#FFAF78","#FFA67B","#FFE0B6","#FFD1AF","#FE8475","#FFC3B1","#E53528","#FFCF9C","#FFBF98","#FA8A49","#FFDCCF"],default_color:"#FFDCCF"},{colors:["#000000","#4F4F4F","#737373","#939393","#B8B8B8","#DBDBDB","#FFFFFF","#4A4E6D","#696E97","#7D84B1","#949DD6","#ADB0FF","#BFC7FF","#939EE2","#6F7CD0"],default_color:"#6F7CD0"},{colors:["#008FF7","#3AACFF","#6EC2FF","#5B6CFF","#1E33F4","#650DF5","#003397","#6C9EFF","#4A76B8","#006FD5","#8A8FFF","#ADB0FF","#0075FF","#00529E","#001EB9"],default_color:"#001EB9"},{colors:["#758DB8","#8CA7C8","#A5BCD4","#7276B4","#484BA0","#5C49A1","#333A66","#909FC5","#69758F","#5D709A","#9596C2","#B3B4D2","#6679B4","#455272","#323478"],default_color:"#323478"},{colors:["#BCE6FF","#D2F1FF","#E4F6FF","#C8D2FF","#8193FF","#CD7EFF","#4E85FF","#DCECFF","#BCD8FF","#9FD3FF","#E5E7FF","#F1F2FF","#ACD8FF","#75B7FF","#4C63FF"],default_color:"#4C63FF"},{colors:["#2D9179","#11A670","#1AAF67","#73AA59","#41C998","#36DA33","#65F3AC","#65F3D1","#65C941","#91E374","#00B8B8","#D8FF98","#559040","#1FCA59","#98FFA9"],default_color:"#98FFA9"},{colors:["#69887E","#739A85","#79A287","#8DA285","#91BCA8","#97C997","#B4E4C8","#B6E5D7","#98BC91","#B8D7B0","#82ADAD","#E7F7D2","#72886D","#8BBB93","#CCF2D1"],default_color:"#CCF2D1"},{colors:["#44CEAF","#48DFA2","#4DE697","#91E55E","#60F7C3","#88FC87","#C1FEDD","#C0FEEE","#89F760","#C1FCAD","#53EAEA","#F2FFDF","#74CF4B","#5AF887","#DCFFE2"],default_color:"#DCFFE2"}],d=null,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.randomSpace=10,e}return r(e,t),e.prototype.onLoad=function(){var t,e,o,n,r,i=s.load(a.Key.ChallengeLv,1);d||(t=i||c.defaultChallengeLv,e=h.length,o=this.randomSpace,n=0,r=0,d=function(i){return console.log(i,t,e,o),i==r?n:(r=i,i%o==0&&n++,i%(o*e)!=0&&i!=t||(n=0),n)});var l=a.WaterColors,u=a.defaultColor;this.setWaterColor(l,u)},i([f(cc.Integer)],e.prototype,"randomSpace",void 0),i([p],e)}(l.default);o.default=y,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../utils/Tools":"Tools","./Cup":"Cup"}],RankListView:[function(t,e,o){"use strict";cc._RF.push(e,"c8d27lXSBZOlo6w5jhP0wpP","RankListView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.LinkImg=void 0;var c,a=t("../com/SubContent"),s=t("./BaseView"),l=cc._decorator,u=l.ccclass,p=l.property;(function(t){t[t.Default=1]="Default",t[t.Challenge=2]="Challenge"})(c||(c={}));var f=function(){function t(){this.defaultImg=null,this.checkImg=null}return i([p(cc.SpriteFrame)],t.prototype,"defaultImg",void 0),i([p(cc.SpriteFrame)],t.prototype,"checkImg",void 0),i([u("LinkImg")],t)}();o.LinkImg=f;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=[],e.btnsNode=null,e.currentIndex=c.Default,e}return r(e,t),e.prototype.start=function(){this.changeState(void 0,this.currentIndex)},e.prototype.changeState=function(t,e){var o=this;this.currentIndex=e,this.btnsNode.children.forEach(function(t,e){t.getComponent(cc.Sprite).spriteFrame=o.imgs[e].defaultImg}),setTimeout(function(){a.SubContent.getData(e)},300),this.btnsNode.children[e-1].getComponent(cc.Sprite).spriteFrame=this.imgs[e-1].checkImg},e.prototype.goBack=function(){t.prototype.close.call(this),this.node.destroy()},i([p([f])],e.prototype,"imgs",void 0),i([p(cc.Node)],e.prototype,"btnsNode",void 0),i([u],e)}(s.default);o.default=h,cc._RF.pop()},{"../com/SubContent":"SubContent","./BaseView":"BaseView"}],ReceiveItem:[function(t,e,o){"use strict";cc._RF.push(e,"a64a3e4dExAv6vkNmlruOEZ","ReceiveItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteGroup=void 0;var s=t("../com/index"),l=t("../enum/Enums"),u=t("../interfaces/BaseInter"),p=t("./PropBlockMgr"),f=t("./ResMgr"),h=cc._decorator,d=h.ccclass,y=h.property,g=function(){function t(){this.select=null,this.unselect=null}return i([y(cc.SpriteFrame)],t.prototype,"select",void 0),i([y(cc.SpriteFrame)],t.prototype,"unselect",void 0),i([d("SpriteGroup")],t)}();o.SpriteGroup=g;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propNode=null,e.taskName=null,e.taskReward=null,e.taskBtn=null,e.clickFn=null,e}return r(e,t),e.prototype.setClickFn=function(t){this.clickFn=t},e.prototype.setTaskInfo=function(t,e){return void 0===e&&(e="unselect"),c(this,void 0,void 0,function(){var o,n=this;return a(this,function(r){switch(r.label){case 0:return console.log(t.type,"type"),[4,f.default.ins.getUI(l.prop[s.getPropNameByType(t.type)])];case 1:return(o=r.sent()).getComponent(p.default).labelShow=!1,o.parent=this.propNode,this.taskName.string=t.name,this.taskReward.string=s.getPropNameByType(t.type,!0)+"x"+t.num,this.setBtnState(t,e),"select"===e?[2]:(this.taskBtn.once("click",function(){n.clickFn&&n.clickFn(function(){return n.setBtnState(t,"select")})}),[2])}})})},e.prototype.setBtnState=function(t,e){switch(e){case"select":this.taskBtn.getComponent(cc.Button).interactable=!1,this.taskBtn.children[0].active=!1,this.taskBtn.children[1].active=!1,this.taskBtn.children[2].active=!1,this.taskBtn.children[3].active=!0;break;case"unselect":this.taskBtn.getComponent(cc.Button).interactable=!0,t.access==u.AccessType.Video?(this.taskBtn.children[0].active=!0,this.taskBtn.children[1].active=!1,this.taskBtn.children[2].active=!1,this.taskBtn.children[3].active=!1):t.access==u.AccessType.Share&&(this.taskBtn.children[0].active=!1,this.taskBtn.children[1].active=!0,this.taskBtn.children[2].active=!1,this.taskBtn.children[3].active=!1)}},e.prototype.start=function(){return c(this,void 0,void 0,function(){return a(this,function(){return[2]})})},i([y(cc.Node)],e.prototype,"propNode",void 0),i([y(cc.Label)],e.prototype,"taskName",void 0),i([y(cc.Label)],e.prototype,"taskReward",void 0),i([y(cc.Node)],e.prototype,"taskBtn",void 0),i([d],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../com/index":"index","../enum/Enums":"Enums","../interfaces/BaseInter":"BaseInter","./PropBlockMgr":"PropBlockMgr","./ResMgr":"ResMgr"}],ReceiveModalView:[function(t,e,o){"use strict";cc._RF.push(e,"a5d7044IdFIyo1MHQF0E+12","ReceiveModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../Global"),u=t("../com/index"),p=t("../enum/Enums"),f=t("../interfaces/BaseInter"),h=t("../manager/AudioMgr"),d=t("../manager/EnergyMgr"),y=t("../manager/ReceiveItem"),g=t("../manager/ResMgr"),v=t("./BaseView"),m=t("./PropModalView"),b=cc._decorator,_=b.ccclass,w=b.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.receiveItem=null,e.receiveItemHeight=0,e.spacing=20,e}return r(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return this.ins=this,t=g.default.ins.getJson("task"),[4,this.init(t.json.data)];case 1:return e.sent(),[2]}})})},e.prototype.init=function(t){var e=this;this.tasks=t.map(function(t){return i(i({},t),{status:l.Global.receiveList.includes(t.id+"")})}),this.content.removeAllChildren();var o=t.length;this.content.height=o*(this.receiveItemHeight+this.spacing);for(var n=function(o){var n=t[o],i=cc.instantiate(r.receiveItem),c=i.getComponent(y.default);c.setTaskInfo(n,l.Global.receiveList.includes(n.id+"")?"select":"unselect"),c.setClickFn(function(t){n.access===f.AccessType.Video?(console.log("\u770b\u89c6\u9891\u9886\u53d6\u5956\u52b1"),e.openModalView(n),t()):(e.openModalView(n),t())}),i.parent=r.content},r=this,c=0;c<o;c++)n(c)},e.prototype.getUnfinishedNum=function(){var t=0;return this.tasks.forEach(function(e){e.status&&t++}),t},e.prototype.start=function(){},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy(),cc.director.emit(p.events.ReceiveClose)},e.prototype.openModalView=function(t){return a(this,void 0,void 0,function(){var e,o,n,r;return s(this,function(c){switch(c.label){case 0:return console.log("\u9886\u5956\u52b1",t),e=u.getPropNameByType(t.type),o=u.getPropNameByType(t.type,!0),l.Global.setReceiveList(t.id+""),t.type===p.PropType.power?d.default.ins.changeEnergy(!0,+t.num):l.Global.addPropsSetting(e,t.num),h.AudioMgr.ins.playSound(p.Clips.modal,.5),[4,g.default.ins.getUI(p.ui.PropsModalView)];case 1:return n=c.sent(),(r=n.getComponent(m.default)).renderProps([i(i({},t),{key:e,label:o})]),r.watchVideoCallback=function(){t.type===p.PropType.power?d.default.ins.changeEnergy(!0,+t.num):l.Global.addPropsSetting(e,t.num),console.log("\u9886\u53d6\u5956\u52b1X2")},n.parent=this.node,[2]}})})},c([w(cc.ScrollView)],e.prototype,"scrollView",void 0),c([w(cc.Node)],e.prototype,"content",void 0),c([w(cc.Prefab)],e.prototype,"receiveItem",void 0),c([w(cc.Integer)],e.prototype,"receiveItemHeight",void 0),c([w(cc.Integer)],e.prototype,"spacing",void 0),c([_],e)}(v.default);o.default=C,cc._RF.pop()},{"../Global":"Global","../com/index":"index","../enum/Enums":"Enums","../interfaces/BaseInter":"BaseInter","../manager/AudioMgr":"AudioMgr","../manager/EnergyMgr":"EnergyMgr","../manager/ReceiveItem":"ReceiveItem","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./PropModalView":"PropModalView"}],RedemptionCodeInputView:[function(t,e,o){"use strict";cc._RF.push(e,"e786eJSAXhH1be6UQ35ZDvb","RedemptionCodeInputView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/EnergyMgr"),p=t("../manager/ResMgr"),f=t("./BaseView"),h=t("./RedemptionCodeModalView"),d=cc._decorator,y=d.ccclass,g=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editBox=null,e.codeString="",e}return r(e,t),e.prototype.onLoad=function(){var t=p.default.ins.getJson("redemptionCode").json;this.codeList=t},e.prototype.start=function(){},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.inputChange=function(t){var e;this.editBox.string=this.codeString=(null!==(e=t.string)&&void 0!==e?e:t).replace(/[^a-zA-Z0-9]/g,"")},e.prototype.redemptionCodeChange=function(){return c(this,void 0,void 0,function(){var t,e,o,n,r,i=this;return a(this,function(c){switch(c.label){case 0:return(t=this.codeList.find(function(t){return t.code===i.codeString}))?[3,1]:(cc.director.emit(l.events.Toast,"\u5151\u6362\u7801\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"),[3,3]);case 1:return s.Global.codeList.includes(this.codeString)?(cc.director.emit(l.events.Toast,"\u5151\u6362\u7801\u5df2\u88ab\u9886\u53d6"),[2]):(s.Global.setCodeList(this.codeString),[4,p.default.ins.getUI(l.ui.RedemptionCodeModalView)]);case 2:for((e=c.sent()).getComponent(h.default).renderProps(t.list),e.parent=cc.find("Canvas"),o=0,n=t.list;o<n.length;o++)"power"===(r=n[o]).key?u.default.ins.changeEnergy(!0,+r.num):s.Global.addPropsSetting(r.key,+r.num);c.label=3;case 3:return this.codeString="",this.editBox.string="",[2]}})})},i([g(cc.EditBox)],e.prototype,"editBox",void 0),i([y],e)}(f.default);o.default=v,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/EnergyMgr":"EnergyMgr","../manager/ResMgr":"ResMgr","./BaseView":"BaseView","./RedemptionCodeModalView":"RedemptionCodeModalView"}],RedemptionCodeModalView:[function(t,e,o){"use strict";cc._RF.push(e,"5a28dcKFHVJ4aQcz1B1wwB5","RedemptionCodeModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../enum/Enums"),l=t("../manager/AudioMgr"),u=t("../manager/PropBlockMgr"),p=t("../manager/ResMgr"),f=t("./BaseView"),h=cc._decorator,d=h.ccclass,y=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propLayout=null,e.labelLayout=null,e.oldPropList=[],e}return r(e,t),e.prototype.start=function(){},e.prototype.renderProps=function(t){this.oldPropList=t;for(var e=0,o=t;e<o.length;e++){var n=o[e];this.renderPropBlock(n),this.renderLabel(n)}},e.prototype.renderPropBlock=function(t){return c(this,void 0,void 0,function(){var e;return a(this,function(o){switch(o.label){case 0:return[4,p.default.ins.getUI(s.prop[t.key])];case 1:return(e=o.sent()).getComponent(u.default).labelShow=!1,l.AudioMgr.ins.playSound(s.Clips.modal,.5),e.parent=this.propLayout,[2]}})})},e.prototype.renderLabel=function(t,e){void 0===e&&(e=!1);var o=new cc.Node;o.name="LabelNode";var n=o.addComponent(cc.LabelOutline);n.color=cc.Color.BLACK,n.width=4;var r=o.addComponent(cc.Label);r.fontSize=44,r.fontFamily="Arial",r.enableBold=!0,r.string="x"+(e?2*t.num:t.num),o.parent=this.labelLayout},e.prototype.clearnLabel=function(){this.labelLayout.removeAllChildren()},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([y(cc.Node)],e.prototype,"propLayout",void 0),i([y(cc.Node)],e.prototype,"labelLayout",void 0),i([d],e)}(f.default);o.default=g,cc._RF.pop()},{"../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/PropBlockMgr":"PropBlockMgr","../manager/ResMgr":"ResMgr","./BaseView":"BaseView"}],ResMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ea555+Z+wJAP4xZ/cjfbSBs","ResMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Global"),c=t("../enum/Enums"),a=t("./PoolMgr"),s=function(){function t(){this._abBundleMap={},this._atlasMap={},this._spinMap=[],this._frameMap={},this._jsonAssetMap={},this._clipMap={},this._matMap={},this._loadStemp=null,this.loadTime=0,this._totalTime=0}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.printTimer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(t+"\uff0cload time===",this.loadTime,"ms"),e&&console.log("Load finish, total time===",this._totalTime,"ms")},t.prototype.loadBundle=function(t,e){return void 0===e&&(e=0),n(this,void 0,Promise,function(){var o,n,c=this;return r(this,function(){return this._loadStemp||(this._loadStemp=Date.now()),o=i.Global.LoadingRate,n="Bundle"+t,[2,new Promise(function(r){cc.assetManager.loadBundle(n,function(n,a){n?console.error("Bundle"+t+" load error, error==",n):(2!=t&&(c._abBundleMap[t]=a),c.printTimer("Bundle"+t+"__load success"),i.Global.LoadingRate=o+e,r&&r())})})]})})},t.prototype.loadRes=function(t,e,o){return void 0===o&&(o=0),n(this,void 0,Promise,function(){var n,s=this;return r(this,function(){return n=i.Global.LoadingRate,[2,new Promise(function(r){s._abBundleMap[t].loadDir(e.path,e.type,function(t,e){o>0&&(i.Global.LoadingRate=n+o*t/e)},function(o,n){var l;switch(o&&(console.error("Error===",o),r&&r()),e){case c.Assets.UiPrefab:for(var u=0;u<n.length;u++){var p=(l=n[u]).data.name;a.PoolMgr.ins.setPrefab(p,l),i.Global.Debug&&console.log("prefab name==",p)}break;case c.Assets.PropPrefab:case c.Assets.BrickPrefab:for(u=0;u<n.length;u++)p=(l=n[u]).data.name,a.PoolMgr.ins.setPrefab(p,l),i.Global.Debug&&console.log("prefab name==",p);break;case c.Assets.Sound:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("clip name==",l.name),s._clipMap[l.name]||(s._clipMap[l.name]=l);break;case c.Assets.Frame:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("Frame name==",l.name),s._frameMap[l.name]||(s._frameMap[l.name]=l);break;case c.Assets.Json:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("json name==",l.name),s._jsonAssetMap[l.name]||(s._jsonAssetMap[l.name]=l);break;case c.Assets.Spin:for(u=0;u<n.length;u++)l=n[u],i.Global.Debug&&console.log("atlas name==",l.name),s._spinMap.push(l)}s.printTimer("Bundle"+t+"__"+e.path+"loaded success"),r&&r()})})]})})},t.prototype.loadBgm=function(){return n(this,void 0,Promise,function(){var t,e=this;return r(this,function(){return t=this,[2,new Promise(function(o){e._abBundleMap[5].load("bgm",function(e,n){e&&(console.error("Error info===",e),o&&o()),t._clipMap[n.name]||(t._clipMap[n.name]=n),o&&o()})})]})})},t.prototype.loadPrefab=function(t){return n(this,void 0,Promise,function(){var e=this;return r(this,function(){return i.Global.LoadingRate,[2,new Promise(function(o){e._abBundleMap[t.bundle].load(t.path+t.name,function(e,n){e&&(console.error("Error info===",e),o&&o()),a.PoolMgr.ins.setPrefab(t.name,n),o&&o()})})]})})},t.prototype.getAtlas=function(t){return this._atlasMap[t]},t.prototype.getFrameMap=function(t){return this._frameMap[t]},t.prototype.getPrefab=function(t,e){return n(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return a.PoolMgr.ins.getPrefab(t.name)?[2,a.PoolMgr.ins.getNode(t.name,e)]:[4,this.loadPrefab(t)];case 1:return o.sent(),[2,a.PoolMgr.ins.getNode(t.name,e)]}})})},t.prototype.getJson=function(t){return this._jsonAssetMap[t]},t.prototype.getClip=function(t){return this._clipMap[t]},t.prototype.getMat=function(t){return this._matMap[t]},t.prototype.getSpin=function(t){return this._spinMap.find(function(e){return e.name==t})},t.prototype.getUI=function(t,e){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:if(t.clear&&!e&&i.Global.layer[t.layer].children[0]){if(i.Global.layer[t.layer].children[0].name==t.name)return[2];a.PoolMgr.ins.putNode(i.Global.layer[t.layer].children[0])}return o=e||i.Global.layer[t.layer],[4,this.getPrefab(t,o)];case 1:return[2,n.sent()]}})})},t._ins=null,t}();o.default=s,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","./PoolMgr":"PoolMgr"}],ResultView:[function(t,e,o){"use strict";cc._RF.push(e,"38aeeCg0LpAhYzM0gQ58wXw","ResultView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../com/index"),u=t("../enum/Enums"),p=t("../manager/EnergyMgr"),f=t("./BaseView"),h=cc._decorator,d=h.ccclass,y=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lvLabel=null,e.lvTitle=null,e.lvDesc=null,e.nextLvDesc=null,e}return r(e,t),e.prototype.returnHome=function(){cc.director.emit(u.events.closeGame),this.node.destroy(),t.prototype.close.call(this)},e.prototype.init=function(){s.Global.addLv(),this.getLevelTitle()},e.prototype.next=function(){return c(this,void 0,void 0,function(){return a(this,function(){return p.default.ins.changeEnergy(!1)?(this.loadLevel(),[2]):(cc.director.emit(u.events.Toast,"\u4f53\u529b\u4e0d\u8db3"),console.log("===================================="),console.log("\u4f53\u529b\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8fdb\u5165\u4e0b\u4e00\u5173"),console.log("===================================="),[2])})})},e.prototype.getLevelTitle=function(t){this.lvTitle.string=l.Title.getTitle(t||s.Global.lv,u.titleArr),this.lvDesc.string=l.Title.getDesc(t||s.Global.lv,u.titleArr),this.nextLvDesc.string=l.Title.getNextLvDesc(t||s.Global.lv,u.titleArr)},e.prototype.loadLevel=function(){t.prototype.close.call(this),this.node.destroy()},e.prototype.start=function(){},i([y(cc.Label)],e.prototype,"lvLabel",void 0),i([y(cc.Label)],e.prototype,"lvTitle",void 0),i([y(cc.Label)],e.prototype,"lvDesc",void 0),i([y(cc.RichText)],e.prototype,"nextLvDesc",void 0),i([d],e)}(f.default);o.default=g,cc._RF.pop()},{"../Global":"Global","../com/index":"index","../enum/Enums":"Enums","../manager/EnergyMgr":"EnergyMgr","./BaseView":"BaseView"}],SettingView:[function(t,e,o){"use strict";cc._RF.push(e,"14034n8+wxG167GC8UZhqzK","SettingView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.SpriteFrameState=void 0;var s=t("../Global"),l=t("../enum/Enums"),u=t("../manager/AudioMgr"),p=t("../manager/ResMgr"),f=t("./BaseView"),h=cc._decorator,d=h.ccclass,y=h.property,g=function(){function t(){this.on=null,this.off=null}return i([y(cc.SpriteFrame)],t.prototype,"on",void 0),i([y(cc.SpriteFrame)],t.prototype,"off",void 0),i([d("SpriteFrameState")],t)}();o.SpriteFrameState=g;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmNode=null,e.soundNode=null,e.backHomeBtn=null,e}return r(e,t),e.prototype.start=function(){this.checkSpriteFrame("bgm"),this.checkSpriteFrame("sound")},e.prototype.changeBgm=function(){s.Global.bgm*=-1,this.checkSpriteFrame("bgm"),cc.director.emit(l.events.changeSound,"bgm")},e.prototype.checkSpriteFrame=function(t){switch(t){case"bgm":1==s.Global.bgm?(this.bgmNode.children[0].active=!0,this.bgmNode.children[1].active=!1,u.AudioMgr.ins.playLoopSound(l.Clips.music)):(this.bgmNode.children[0].active=!1,this.bgmNode.children[1].active=!0,u.AudioMgr.ins.stopLoopSound());break;case"sound":1==s.Global.sound?(this.soundNode.children[0].active=!0,this.soundNode.children[1].active=!1):(this.soundNode.children[0].active=!1,this.soundNode.children[1].active=!0)}},e.prototype.backToHome=function(){cc.director.emit(l.events.backHome)},e.prototype.showBackBtn=function(){this.backHomeBtn.active=!0},e.prototype.showPirvacy=function(){var t,e=null===(t=window.parent?window.parent:window)||void 0===t?void 0:t.AndroidBridge;null==e||e.startWebView("\u9690\u79c1\u653f\u7b56")},e.prototype.changeSound=function(){s.Global.sound*=-1,this.checkSpriteFrame("sound"),cc.director.emit(l.events.changeSound,"sound")},e.prototype.openCodeModal=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,p.default.ins.getUI(l.ui.RedemptionCodeInputView)];case 1:return t.sent().parent=this.node,[2]}})})},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([y(cc.Node)],e.prototype,"bgmNode",void 0),i([y(cc.Node)],e.prototype,"soundNode",void 0),i([y(cc.Node)],e.prototype,"backHomeBtn",void 0),i([d],e)}(f.default);o.default=v,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/ResMgr":"ResMgr","./BaseView":"BaseView"}],ShopCardItem:[function(t,e,o){"use strict";cc._RF.push(e,"f8832HbZQJBSKuhCZBBZbNI","ShopCardItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.LockState=void 0;var s,l=t("../enum/Enums"),u=cc._decorator,p=u.ccclass,f=u.property;(function(t){t[t.lock=0]="lock",t[t.debris=1]="debris",t[t.video=2]="video"})(s=o.LockState||(o.LockState={}));var h=function(){function t(){this[e]=null,this[o]=null}var e,o;return e=l.TagStatus.law,o=l.TagStatus.god,i([f({type:cc.SpriteFrame,tooltip:"\u6cd5"})],t.prototype,e,void 0),i([f({type:cc.SpriteFrame,tooltip:"\u795e"})],t.prototype,o,void 0),i([p("TagGroup")],t)}(),d=function(){function t(){this[e]=null,this[o]=null,this[n]=null}var e,o,n;return e=s.lock,o=s.debris,n=s.video,i([f({type:cc.Node,tooltip:"\u672a\u89e3\u9501"})],t.prototype,e,void 0),i([f({type:cc.Node,tooltip:"\u788e\u7247\u89e3\u9501"})],t.prototype,o,void 0),i([f({type:cc.Node,tooltip:"\u89c6\u9891\u89e3\u9501"})],t.prototype,n,void 0),i([p("BuyGroup")],t)}(),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._state=l.RoleStatus.unlocked,e.lockedGroup=null,e.unlockedGroup=null,e.selectedGroup=null,e.tagGroup=new h,e.buyGroup=new d,e.tagNode=null,e.hireBtn=null,e.nameLabel=null,e.peopleBg=null,e.peopleLockBg=null,e.itemClickFn=null,e.itemHireClickFn=null,e.itemBuyClickFn=null,e}return r(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.setNameAndPeopleBg=function(t,e){this.nameLabel.string=t,this.peopleBg.spriteFrame=e,this.peopleLockBg.spriteFrame=e},e.prototype.setState=function(t){switch(this.state=t,t){case l.RoleStatus.locked:this.lockedGroup.active=!0,this.unlockedGroup.active=!1,this.selectedGroup.active=!1,this.hireBtn.active=!1;break;case l.RoleStatus.unlocked:this.lockedGroup.active=!1,this.unlockedGroup.active=!0,this.selectedGroup.active=!1,this.hireBtn.active=!0;break;case l.RoleStatus.selected:this.lockedGroup.active=!1,this.unlockedGroup.active=!0,this.selectedGroup.active=!0,this.hireBtn.active=!1}},e.prototype.setTagStatus=function(t){switch(t){case l.TagStatus.god:this.tagNode.getComponent(cc.Sprite).spriteFrame=this.tagGroup[l.TagStatus.god];break;case l.TagStatus.law:this.tagNode.getComponent(cc.Sprite).spriteFrame=this.tagGroup[l.TagStatus.law]}},e.prototype.hireClick=function(){this.itemHireClickFn&&(this.itemHireClickFn(this)?this.setState(l.RoleStatus.selected):this.setState(l.RoleStatus.unlocked))},e.prototype.setItemFn=function(t,e,o){this.itemClickFn=t,this.itemHireClickFn=e,this.itemBuyClickFn=o},e.prototype.onClick=function(){this.itemClickFn&&this.itemClickFn(this)},e.prototype.onLoad=function(){return c(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.showStateToLock=function(t,e){switch(t){case s.lock:this.buyGroup[s.lock].active=!0,this.buyGroup[s.debris].active=!1,this.buyGroup[s.video].active=!1;break;case s.debris:this.buyGroup[s.debris].active=!0,this.buyGroup[s.debris].getChildByName("Label").getComponent(cc.Label).string=e+"",this.buyGroup[s.lock].active=!1,this.buyGroup[s.video].active=!1;break;case s.video:this.buyGroup[s.video].active=!0,this.buyGroup[s.lock].active=!1,this.buyGroup[s.debris].active=!1}},e.prototype.buyBtnClick=function(t,e){["debris","video"].includes(e)&&this.itemBuyClickFn(e)},e.prototype.start=function(){},i([f(cc.Node)],e.prototype,"lockedGroup",void 0),i([f(cc.Node)],e.prototype,"unlockedGroup",void 0),i([f(cc.Node)],e.prototype,"selectedGroup",void 0),i([f(h)],e.prototype,"tagGroup",void 0),i([f(d)],e.prototype,"buyGroup",void 0),i([f(cc.Node)],e.prototype,"tagNode",void 0),i([f(cc.Node)],e.prototype,"hireBtn",void 0),i([f(cc.Label)],e.prototype,"nameLabel",void 0),i([f(cc.Sprite)],e.prototype,"peopleBg",void 0),i([f(cc.Sprite)],e.prototype,"peopleLockBg",void 0),i([p],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../enum/Enums":"Enums"}],ShopModalItemView:[function(t,e,o){"use strict";cc._RF.push(e,"50996x6FWdCfZTXVbJba2jt","ShopModalItemView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ShopModalItemSpriteFrames=void 0;var c=cc._decorator,a=c.ccclass,s=c.property,l=function(){function t(){this.default=null,this.have=null,this.check=null}return i([s(cc.SpriteFrame)],t.prototype,"default",void 0),i([s(cc.SpriteFrame)],t.prototype,"have",void 0),i([s(cc.SpriteFrame)],t.prototype,"check",void 0),i([a("ShopModalItemSpriteFrames")],t)}();o.ShopModalItemSpriteFrames=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=null,e}return r(e,t),e.prototype.checkState=function(t){switch(t){case"have":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.have;break;case"check":this.node.getComponent(cc.Sprite).spriteFrame=this.imgs.check}},e.prototype.start=function(){},i([s(l)],e.prototype,"imgs",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],ShopModalView:[function(t,e,o){"use strict";cc._RF.push(e,"a36eed/FhtOyaiomX/lyfL6","ShopModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Tab_Tag=void 0;var s,l=t("../Global"),u=t("../enum/Enums"),p=t("../manager/AudioMgr"),f=t("../manager/ResMgr"),h=t("../utils/Tools"),d=t("./BaseView"),y=t("./PropRoleOrCupModalView"),g=t("./ShopModalItemView"),v=cc._decorator,m=v.ccclass,b=v.property;(function(t){t.CUP="0",t.ROLE="1"})(s=o.Tab_Tag||(o.Tab_Tag={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cupsFrame=[],e.shopCardItem=null,e.scrollView=null,e.content=null,e.spacing=20,e.rowNum=2,e.shopItems=["01","02","03","04","05","06","07","08","09"],e}return r(e,t),e.prototype.init=function(t,e){h.scrollFunc({list:t,spacing:2*this.spacing,row:this.rowNum,scrollView:this.scrollView,content:this.content,receiveItemHeight:this.shopCardItem.data.height,cb:this.setPreFab.bind(this,e)})},e.prototype.setPreFab=function(t,e){var o,n,r,i=this;t===s.CUP&&(o=l.Global.cupSetting,n=l.Global.setCupCurrent,r=this.cupsFrame);var c=cc.instantiate(this.shopCardItem),a=c.getComponent(g.default),u=o.current,p=o.haveList;c.on("click",function(){p.includes(e)&&u!==e&&(n(e),i.tabChange(t))}),u===e?(a.checkState("check"),c.getChildByName("node").getComponent(cc.Sprite).spriteFrame=r[+e.replace("C","")-1],c.getChildByName("node").active=!0):p.includes(e)&&(a.checkState("have"),c.getChildByName("node").getComponent(cc.Sprite).spriteFrame=r[+e.replace("C","")-1],c.getChildByName("node").active=!0),c.parent=this.content},e.prototype.tabChange=function(t){switch(this.tabIndex=t,console.log(t),t){case s.CUP:this.init(this.shopItems,t);break;case s.ROLE:var e=l.Global.peopleSetting.haveList,o=this.shopItems.map(function(t){return"C"+t});e.includes("C10")?(o.unshift("C10"),this.init(o,t)):this.init(o,t)}},e.prototype.onLoad=function(){this.tabChange(s.CUP)},e.prototype.goBack=function(){this.node.destroy()},e.prototype.start=function(){},e.prototype.gainRewards=function(){return c(this,void 0,void 0,function(){var t,e,o,n,r,i,c,d,g=this;return a(this,function(a){switch(a.label){case 0:return this.tabIndex===s.CUP&&(t=l.Global.cupSetting,e=l.Global.setCupHavaList,o=this.cupsFrame),t.current,n=t.haveList,0==(r=this.shopItems.filter(function(t){return!n.includes(t)})).length?(console.log("\u4e0d\u80fd\u62bd\u5956\u4e86"),[2]):(p.AudioMgr.ins.playSound(u.Clips.modal,.5),i=r[h.randomNum(0,r.length-1)],[4,f.default.ins.getUI(u.ui.PropRoleOrCupModalView)]);case 1:return c=a.sent(),d=c.getComponent(y.default),e(this.tabIndex===s.CUP?i:"C"+i),d.setTitleImg(this.tabIndex),this.tabIndex===s.ROLE&&d.setScale(1.5),d.cancelFn=function(){g.tabChange(g.tabIndex)},d.setPropImg(o[+i-1]),c.parent=this.node,[2]}})})},e.prototype.randomProp=function(){return c(this,void 0,void 0,function(){return a(this,function(){return this.gainRewards(),[2]})})},i([b([cc.SpriteFrame])],e.prototype,"cupsFrame",void 0),i([b(cc.Prefab)],e.prototype,"shopCardItem",void 0),i([b(cc.ScrollView)],e.prototype,"scrollView",void 0),i([b(cc.Node)],e.prototype,"content",void 0),i([b(cc.Integer)],e.prototype,"spacing",void 0),i([b(cc.Integer)],e.prototype,"rowNum",void 0),i([m],e)}(d.default);o.default=_,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/AudioMgr":"AudioMgr","../manager/ResMgr":"ResMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./PropRoleOrCupModalView":"PropRoleOrCupModalView","./ShopModalItemView":"ShopModalItemView"}],ShopView:[function(t,e,o){"use strict";cc._RF.push(e,"08a6fWrGCNFOK2085AjF4Dy","ShopView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Global"),l=t("../enum/Enums"),u=t("../interfaces/BaseInter"),p=t("../manager/ResMgr"),f=t("../manager/ShopCardItem"),h=t("../utils/Tools"),d=t("./BaseView"),y=t("./PeopleModalView"),g={"\u96f7\u9706\u560e\u5df4\u5e1d\u738b":{default:"thunderEmperor",lock:"lock-thunderEmperor"},"\u706b\u4e91\u90aa\u795e":{default:"fireGod",lock:"lock-fireGod"},"\u7ea2\u5b9d\u5b9d":{default:"redBaby",lock:"lock-redBaby"},"\u970d\u683c\u6c83\u8328\u9ebb\u74dc":{default:"muggles",lock:"lock-muggles"},"\u70bc\u91d1\u672f\u58eb":{default:"alchemist",lock:"lock-alchemist"},"\u5b5f\u5a46":{default:"goddessOld",lock:"lock-goddessOld"},"\u592a\u4e0a\u8001\u541b":{default:"laotse",lock:"lock-laotse"}},v=cc._decorator,m=v.ccclass,b=v.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.content=null,e.receiveItem=null,e.spacing=20,e.rowNum=2,e.descLabel=null,e.debrisNum=null,e.cards=[],e}return r(e,t),e.prototype.setDebrisNum=function(t){this.debrisNum.string=t+""},e.prototype.onLoad=function(){this.descLabel.string="",this.setDebrisNum(s.Global.getPropsSetting("debris"))},e.prototype.start=function(){return c(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return t=p.default.ins.getJson("shop"),[4,this.init(t.json.data)];case 1:return e.sent(),[2]}})})},e.prototype.init=function(t){h.scrollFunc({list:t,spacing:2*this.spacing,row:this.rowNum,scrollView:this.scrollView,content:this.content,receiveItemHeight:this.receiveItem.data.height,cb:this.setPreFab.bind(this)})},e.prototype.cardItemClick=function(t){if(this.upInfo===t)return this.descLabel.string="",void(this.upInfo=void 0);this.upInfo=t;var e=this.getItemStatus(t).isHave;this.descLabel.string=e?t.describe:t.lockText,console.log(t)},e.prototype.cardItemBtnClick=function(t){for(var e=s.Global.peopleSetting.current,o=0,n=this.cards;o<n.length;o++){var r=n[o];this.getItemStatus(r.info).isHave&&r.script.setState(l.RoleStatus.unlocked)}return s.Global.setPeopleCurrent(t.id),!(+e==t.id)},e.prototype.setPreFab=function(t){var e=this,o=this.getItemStatus(t),n=o.lvSatisfy,r=o.isHave,i=o.isDress,c=cc.instantiate(this.receiveItem),a=c.getComponent(f.default);this.cards.push({info:t,script:a}),a.setItemFn(function(){return e.cardItemClick(t)},function(o){return e.cardItemBtnClick(t,o)},function(o){return e.unLockClick(o,t,a)});var s=l.RoleStatus.locked;if(s=r?i?l.RoleStatus.selected:l.RoleStatus.unlocked:l.RoleStatus.locked,a.setTagStatus(t.tag),n){var p=t.access===u.AccessType.Video?f.LockState.video:f.LockState.debris;a.showStateToLock(p,t.price)}a.setState(s),this.setImg(t,s,a),c.parent=this.content},e.prototype.setImg=function(t,e,o){return c(this,void 0,void 0,function(){var n,r;return a(this,function(i){switch(i.label){case 0:return n=g[t.name],[4,p.default.ins.getFrameMap(e===l.RoleStatus.locked?n.lock:n.default)];case 1:return r=i.sent(),o.setNameAndPeopleBg(t.name,r),[2]}})})},e.prototype.getItemStatus=function(t){var e=s.Global.peopleSetting,o=e.haveList,n=e.current,r=+t.ask<=s.Global.lv,i=o.includes(t.id+""),c=+n==t.id;return{lvSatisfy:r,isHave:i,isdebrisNumSatisfy:t.price<=s.Global.getPropsSetting("debris"),isDress:c}},e.prototype.getDebris=function(){console.log("\u83b7\u53d6\u788e\u7247"),s.Global.addPropsSetting("debris",s.Global.addDebris),this.setDebrisNum(s.Global.getPropsSetting("debris"))},e.prototype.unLockClick=function(e,o,n){var r=this;console.log(e);var i=function(){return c(r,void 0,void 0,function(){var t,e,r,i;return a(this,function(c){switch(c.label){case 0:return[4,p.default.ins.getUI(l.ui.PeopleModalView)];case 1:return(t=c.sent()).parent=this.node.parent,e=t.getComponent(y.default),r=g[o.name],[4,p.default.ins.getFrameMap(r.default)];case 2:return i=c.sent(),e.setCallbackFn(this.getDebris.bind(this)),e.setInfo(o.name,o.describe,i),s.Global.setPeopleHaveList(o.id),n.setState(l.RoleStatus.unlocked),this.setImg(o,l.RoleStatus.unlocked,n),[2]}})})};switch(e){case"video":t.prototype.showVideo.call(this,function(){i()});break;case"debris":this.getItemStatus(o).isdebrisNumSatisfy?(s.Global.addPropsSetting("debris",-o.price),this.setDebrisNum(s.Global.getPropsSetting("debris")),i()):console.log("\u788e\u7247\u4e0d\u8db3")}},e.prototype.close=function(){t.prototype.close.call(this),this.node.destroy()},i([b(cc.ScrollView)],e.prototype,"scrollView",void 0),i([b(cc.Node)],e.prototype,"content",void 0),i([b(cc.Prefab)],e.prototype,"receiveItem",void 0),i([b(cc.Integer)],e.prototype,"spacing",void 0),i([b(cc.Integer)],e.prototype,"rowNum",void 0),i([b(cc.Label)],e.prototype,"descLabel",void 0),i([b(cc.Label)],e.prototype,"debrisNum",void 0),i([m],e)}(d.default);o.default=_,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../interfaces/BaseInter":"BaseInter","../manager/ResMgr":"ResMgr","../manager/ShopCardItem":"ShopCardItem","../utils/Tools":"Tools","./BaseView":"BaseView","./PeopleModalView":"PeopleModalView"}],SignItemView:[function(t,e,o){"use strict";cc._RF.push(e,"cbcbdpmB0xK45gZZhPg44y3","SignItemView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../enum/Enums"),l=t("../interfaces/BaseInter"),u=t("../manager/PropBlockMgr"),p=t("../manager/ResMgr"),f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dayLabel=null,e.content=null,e.maskNode=null,e.checkNode=null,e.signLayoutNode=null,e.mendSignFn=null,e._signState=!1,e._isToday=!1,e}return r(e,t),e.prototype.setDayLabel=function(t){this.dayLabel&&(this.dayLabel.string="\u7b2c"+t+"\u5929")},e.prototype.setMaskState=function(t){this.maskNode.active=t},e.prototype.updateSignState=function(t){this._signState=t,this.signLayoutNode.active=t},e.prototype.updateTodayState=function(t){this._isToday=t,this.checkNode.active=t},e.prototype.addContentNode=function(t){return c(this,void 0,void 0,function(){var e,o;return a(this,function(n){switch(n.label){case 0:return[4,p.default.ins.getUI(s.prop[t.key])];case 1:return e=n.sent(),(o=e.getComponent(u.default)).setLabel(t.label+"x"+t.num),e.parent=this.content,o.setLabelColor(new cc.Color(101,101,223)),o.setBold(),[2]}})})},e.prototype.updateMendSignState=function(t,e){switch(this.signLayoutNode.active=!e,t){case l.AccessType.Share:case l.AccessType.Video:}},e.prototype.mendSignClick=function(){console.log("\u8865\u7b7e"),this.mendSignFn&&this.mendSignFn()},e.prototype.start=function(){},i([d(cc.Label)],e.prototype,"dayLabel",void 0),i([d(cc.Node)],e.prototype,"content",void 0),i([d(cc.Node)],e.prototype,"maskNode",void 0),i([d(cc.Node)],e.prototype,"checkNode",void 0),i([d(cc.Node)],e.prototype,"signLayoutNode",void 0),i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../enum/Enums":"Enums","../interfaces/BaseInter":"BaseInter","../manager/PropBlockMgr":"PropBlockMgr","../manager/ResMgr":"ResMgr"}],SignModalView:[function(t,e,o){"use strict";cc._RF.push(e,"87bb7d8D+pGOaCM4MLWXyQQ","SignModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../Global"),u=t("../enum/Enums"),p=t("../interfaces/BaseInter"),f=t("../manager/AudioMgr"),h=t("../manager/EnergyMgr"),d=t("../manager/ResMgr"),y=t("../utils/Tools"),g=t("./BaseView"),v=t("./PropModalView"),m=t("./SignItemView"),b=cc._decorator,_=b.ccclass,w=b.property;function C(t){var e=(t?new Date(t):new Date).getDay();return 0===e&&(e=7),e}var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPre=null,e.fullPre=null,e.content=null,e.btnGrousp=null,e.todayItem=null,e.allList=[],e.signTypes=[],e}return r(e,t),e.prototype.start=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return t=d.default.ins.getJson("sign"),[4,this.init(t.json.data)];case 1:return e.sent(),[2]}})})},e.prototype.addSignType=function(t){l.Global.addSignArr(t),this.signTypes.includes(t)||this.signTypes.push(t)},e.prototype.init=function(t){var e=this,o=C(),n=y.load(u.Key.Today,0);(!n||o<C(n))&&l.Global.clearSignArr();for(var r=(t=t.map(function(t){var o=l.Global.signArr.includes(t.id.toString());return o&&e.addSignType(t.type),i(i({},t),{isSign:o})})).filter(function(t){return t.type===p.SignInType.FULL_WEEK}),c=0,a=t=t.filter(function(t){return t.type!==p.SignInType.FULL_WEEK});c<a.length;c++){var s=a[c];this.addSignItem(s,o)}this.addFullWeek(r),this.todayItem||this.hideBtn()},e.prototype.addFullWeek=function(t){var e=cc.instantiate(this.fullPre);e.parent=this.content;var o=e.getComponent(m.default);this.allList.push({info:t,signScript:o}),o.updateSignState(this.signTypes.length>=7),o.updateTodayState(6==this.signTypes.length),o.setMaskState(this.signTypes.length>=7);for(var n=0;n<t.length;n++){var r=t[n];o.addContentNode(r)}},e.prototype.addSignItem=function(t,e){var o=this,n=cc.instantiate(this.itemPre);n.parent=this.content;var r=n.getComponent(m.default);this.allList.push({info:[t],signScript:r});var i=+t.type===e&&!t.isSign;r.setDayLabel(+t.type),r.addContentNode(t),r.updateMendSignState(t.access,+t.type<e),r.setMaskState(+t.type<e||t.isSign),r.updateSignState(t.isSign),r.updateTodayState(i),i&&(this.todayItem={info:[t],signScript:r}),r.mendSignFn=function(){t.isSign||(t.access===p.AccessType.Share?(console.log("\u5206\u4eab"),r.updateSignState(!0),o.getReward([t],r,!1),o.checkIsFullWeek()):(console.log("\u89c6\u9891"),r.updateSignState(!0),o.getReward([t],r,!1),o.checkIsFullWeek()))}},e.prototype.onGetBtnClick=function(){this.todayItem&&this.getReward(this.todayItem.info,this.todayItem.signScript,!1),this.checkIsFullWeek(),this.hideBtn()},e.prototype.onGetDoubleBtnClick=function(){this.getReward(this.todayItem.info,this.todayItem.signScript,!0),this.checkIsFullWeek(!0),this.hideBtn()},e.prototype.getReward=function(t,e,o){return void 0===o&&(o=!1),a(this,void 0,void 0,function(){var n,r,i,c=this;return s(this,function(a){switch(a.label){case 0:return this.checkIsSign(t)?[2]:(f.AudioMgr.ins.playSound(u.Clips.modal,.5),n=t.map(function(t){var n=t.id;return t.num*=o?2:1,"power"===t.key?h.default.ins.changeEnergy(!0,+t.num):l.Global.addPropsSetting(t.key,+t.num),c.addSignType(t.type),e.updateMendSignState(t.access,!1),e.updateSignState(!0),e.updateTodayState(!1),e.setMaskState(!0),{id:n,label:t.label,key:t.key,num:t.num}}),[4,d.default.ins.getUI(u.ui.PropsModalView)]);case 1:return r=a.sent(),(i=r.getComponent(v.default)).renderProps(n),i.watchVideoCallback=function(){for(var t=0,e=n;t<e.length;t++){var o=e[t];"power"===o.key?h.default.ins.changeEnergy(!0,+o.num):l.Global.addPropsSetting(o.key,+o.num)}console.log("\u9886\u53d6\u5956\u52b1X2")},r.parent=this.node,[2]}})})},e.prototype.checkIsSign=function(t){return t.some(function(t){return t.isSign})},e.prototype.checkIsFullWeek=function(t){if(void 0===t&&(t=!1),this.signTypes.length>=7)for(var e=0,o=this.allList.filter(function(t){return t.info[0].type===p.SignInType.FULL_WEEK});e<o.length;e++){var n=o[e];this.getReward(n.info,n.signScript,t)}},e.prototype.hideBtn=function(){this.todayItem=null,this.btnGrousp.active=!1},e.prototype.close=function(){this.node.destroy()},c([w(cc.Prefab)],e.prototype,"itemPre",void 0),c([w(cc.Prefab)],e.prototype,"fullPre",void 0),c([w(cc.Node)],e.prototype,"content",void 0),c([w(cc.Node)],e.prototype,"btnGrousp",void 0),c([_],e)}(g.default);o.default=P,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../interfaces/BaseInter":"BaseInter","../manager/AudioMgr":"AudioMgr","../manager/EnergyMgr":"EnergyMgr","../manager/ResMgr":"ResMgr","../utils/Tools":"Tools","./BaseView":"BaseView","./PropModalView":"PropModalView","./SignItemView":"SignItemView"}],SubContent:[function(t,e,o){"use strict";cc._RF.push(e,"f23a33KXQRLDJbE9+81kYkR","SubContent"),Object.defineProperty(o,"__esModule",{value:!0}),o.SubContent=o.LinkType=void 0,function(t){t[t.Default=1]="Default",t[t.Challenge=2]="Challenge"}(o.LinkType||(o.LinkType={}));var n=function(){function t(){}return t.getUserInfo=function(){wx.login({success:function(t){console.log(t),t.code}})},t.setData=function(t){var e=t.score,o=t.type;wx.getOpenDataContext().postMessage({event:"setScore",score:e,type:o})},t.getData=function(t){wx.getOpenDataContext().postMessage({event:"getRank",type:t,openid:this.openId})},t}();o.SubContent=n,cc._RF.pop()},{}],TabView:[function(t,e,o){"use strict";cc._RF.push(e,"0433btW7shHvKUX9Qxq+d19","TabView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TabSpriteFrame=void 0;var c=cc._decorator,a=c.ccclass,s=c.property,l=function(){function t(){this.default=null,this.check=null}return i([s(cc.SpriteFrame)],t.prototype,"default",void 0),i([s(cc.SpriteFrame)],t.prototype,"check",void 0),i([a("TabSpriteFrame")],t)}();o.TabSpriteFrame=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgs=[],e.currentIndex=0,e.tabsLayout=null,e}return r(e,t),e.prototype.checkState=function(t){if(this.currentIndex!==t){this.currentIndex=t;for(var e=this.tabsLayout.children,o=0;o<e.length;o++)e[o].getComponent(cc.Sprite).spriteFrame=this.imgs[o].default;e[t].getComponent(cc.Sprite).spriteFrame=this.imgs[t].check}},e.prototype.tabClick=function(t,e){console.log(t,e),this.checkState(+e),this.tabCb&&this.tabCb(e)},e.prototype.start=function(){},i([s([l])],e.prototype,"imgs",void 0),i([s(cc.Integer)],e.prototype,"currentIndex",void 0),i([s(cc.Node)],e.prototype,"tabsLayout",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],"Test - 001":[function(t,e,o){"use strict";cc._RF.push(e,"a8f610Ll79M9IkKxPUpnyhe","Test - 001");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../scripts/enum/Enums"),a=t("../scripts/utils/Tools"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return r(e,t),e.prototype.handleClick=function(){a.Tools.copyToClipboard(this.label.string).then(function(){cc.director.emit(c.events.Toast,"\u590d\u5236\u6210\u529f")}).catch(function(){cc.director.emit(c.events.Toast,"\u590d\u5236\u5931\u8d25")})},e.prototype.start=function(){},i([u(cc.Label)],e.prototype,"label",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../scripts/enum/Enums":"Enums","../scripts/utils/Tools":"Tools"}],Test:[function(t,e,o){"use strict";cc._RF.push(e,"ec6f2AJ8VVByJGBj3uvAA7D","Test");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./manager/ResMgr"),l=t("./manager/keelReplaceSkinMgr"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.replaceSkin=null,e}return r(e,t),e.prototype.changeSpin=function(){s.default.ins.getSpin("NewProject_ske"),s.default.ins.getSpin("NewProject_tex")},e.prototype.testfn=function(t){return c(this,void 0,void 0,function(){return a(this,function(){return console.log(t.string),[2]})})},e.prototype.start=function(){},i([f(l.default)],e.prototype,"replaceSkin",void 0),i([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./manager/ResMgr":"ResMgr","./manager/keelReplaceSkinMgr":"keelReplaceSkinMgr"}],ToastCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"f6ca7yTc+FBrr1t8pzVCsYH","ToastCtrl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./enum/Enums"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.toast=null,e._tw=new cc.Tween,e.time=1,e}return r(e,t),e.prototype.onEnable=function(){cc.director.on(c.events.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},e.prototype.onDisable=function(){cc.director.off(c.events.Toast,this.showToast,this)},e.prototype.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},i([l(cc.Label)],e.prototype,"text",void 0),i([l(cc.Node)],e.prototype,"toast",void 0),i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./enum/Enums":"Enums"}],Tools:[function(t,e,o){"use strict";function n(t){var e=document.createElement("div");return e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.textContent=t,document.body.appendChild(e),e.contentEditable=!0,e}function r(t){var e=document.createRange();e.selectNodeContents(t);var o=window.getSelection();o.removeAllRanges(),o.addRange(e)}cc._RF.push(e,"859c4IGX/ZFBq3OPUhXZN9I","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=o.randomNum=o.scrollFunc=o.getDate=o.load=o.save=void 0,o.save=function(t,e){"number"==typeof e&&(e=""+e),cc.sys.localStorage.setItem(t,e||"")},o.load=function(t,e){void 0===e&&(e=1);var o=cc.sys.localStorage.getItem(t);if(o){switch(e){case 0:break;case 1:o=Number(o);break;case 2:o=JSON.parse(o)}return o}return null},o.getDate=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},o.scrollFunc=function(t){var e=t.list,o=t.spacing,n=t.row,r=t.scrollView,i=t.content,c=t.receiveItemHeight,a=t.cb;i.removeAllChildren();var s=e.length;i.height=Math.ceil(s/n)*(c+o);for(var l=0;l<s;l++)a&&a(e[l],l,e);r.scrollToTop(0)},o.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+"");case 2:return parseInt(Math.random()*(e-t+1)+t+"");default:return 0}};var i=function(){function t(){}return t.fadeIn=function(t,e){void 0===e&&(e=.2),cc.tween(t).set({scale:0}).to(e,{scale:1}).start()},t.copyToClipboard=function(t){var e=t,o=!0;return new Promise(function(i,c){var a=null;if(cc.sys.WECHAT_GAME&&(a=wx),cc.sys.WECHAT_GAME&&(a=tt),a)wx.setClipboardData({data:t,success:function(){i(o=!0)},fail:function(t){c(t)}});else if(window.clipboardData)window.clipboardData.setData("Text",e);else{var s=n(e);r(s);try{window.netscape&&netscape.security&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),o=document.execCommand("copy",!1,null),i(o)}catch(l){o=!1,c(l)}document.body.removeChild(s)}})},t}();o.Tools=i,cc._RF.pop()},{}],VictoryModalView:[function(t,e,o){"use strict";cc._RF.push(e,"880b4jObvVCVJjx7VQ6E+4k","VictoryModalView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Global"),a=t("../com/index"),s=t("../enum/Enums"),l=t("./BaseView"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextLvDesc=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.returnHome=function(){this.node.destroy(),t.prototype.close.call(this),cc.director.emit(s.events.closeGame)},e.prototype.init=function(){a.Title.getNextLvDesc(c.Global.lv,s.titleArr)},e.prototype.getLevelTitle=function(t){this.nextLvDesc.string=a.Title.getNextLvDesc(t||c.Global.lv,s.titleArr)},e.prototype.loadLevel=function(){this.node.destroy(),cc.director.emit(s.events.Next)},e.prototype.start=function(){},e.prototype.shareFn=function(){console.log("\u5206\u4eab")},e.prototype.getVideoSharePath=function(t){this.videoPath=t},e.prototype.onEnable=function(){t.prototype.onEnable.call(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this)},e.prototype.goFire=function(){},i([f(cc.RichText)],e.prototype,"nextLvDesc",void 0),i([p],e)}(l.default);o.default=h,cc._RF.pop()},{"../Global":"Global","../com/index":"index","../enum/Enums":"Enums","./BaseView":"BaseView"}],WaterFlow:[function(t,e,o){"use strict";cc._RF.push(e,"89a60u2p+5LCaWjYEQt3c4x","WaterFlow");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.WaterFlow=void 0;var i=t("../enum/Enums"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._toPt=cc.v2(),e.from=cc.v2(),e}return r(e,t),e.prototype.onLoad=function(){this.lineWidth=i.dft_lingWidth,this.lineCap=cc.Graphics.LineCap.ROUND},Object.defineProperty(e.prototype,"toPt",{get:function(){return this._toPt},set:function(t){this._toPt=t,this.clear(),this.moveTo(this.from.x,this.from.y),this.lineTo(this._toPt.x,this._toPt.y),this.stroke()},enumerable:!1,configurable:!0}),e.prototype.playFlowAni=function(t,e,o,n,r){this.clear(),this.from=n?e:t,this.moveTo(this.from.x,this.from.y),cc.tween(this).set({toPt:t}).to(o,{toPt:e}).call(r).start()},e.prototype.setLineScale=function(t){this.lineWidth=i.dft_lingWidth*t},e}(cc.Graphics);o.WaterFlow=c,cc._RF.pop()},{"../enum/Enums":"Enums"}],Water:[function(t,e,o){"use strict";cc._RF.push(e,"607d01cGPpC1Y4XE+JkcAAc","Water");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../com/index"),a=t("../enum/Enums"),s=cc._decorator,l=s.ccclass,u=s.property,p=(s.requireComponent,s.executeInEditMode),f=(s.disallowMultiple,s.executionOrder,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ratio=1,e.effect=null,e._tiltAngle=0,e.material=null,e._action=a.PourAction.none,e.infos=[],e.stopIdx=-1,e.curIdx=0,e._actionHeight=0,e.eventState=!1,e.onInFInish=null,e.onOutStart=null,e.onOutFinish=null,e}return r(e,t),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.round(100*t)/100,this._tiltAngle=t,this.updateAngleHeight()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actionHeight",{get:function(){return this._actionHeight},set:function(t){if(t>a.HEIGHT_FACTOR&&(t=a.HEIGHT_FACTOR),t<0)throw console.log(t,this._actionHeight),new Error("\u5012\u6c34\u9ad8\u5ea6\u4e0d\u80fd\u5c0f\u4e8e0");this._actionHeight=t},enumerable:!1,configurable:!0}),e.prototype.changeAction=function(t){this._action=t},e.prototype.addInfo=function(t){var e=this.actionHeight;this.actionHeight=t.height,t.height=0;var o=this.infos[this.curIdx];this._action===a.PourAction.in&&(this.actionHeight+=e-((null==o?void 0:o.height)||0)),this._action=a.PourAction.in,o&&o.colorId==t.colorId?this.actionHeight+=o.height:this.infos.push(t),this.curIdx=this.infos.length-1,this.initSizeColor()},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t.spriteFrame&&(t.spriteFrame.getTexture().packable=!1),this.effect&&(this.material=cc.Material.create(this.effect),t.setMaterial(0,this.material)),this.material=t.getMaterial(0),this._ratio=this.node.height/this.node.width},e.prototype.initInfos=function(t){this.infos=this.waterHandle(t),this.curIdx=this.infos.length-1,this.initSizeColor(),this.updateAngleHeight()},e.prototype.waterHandle=function(t){for(var e=[],o=0;o<t.length;o++){var n=t[o];e[e.length-1]&&e[e.length-1].colorId==n.colorId?e[e.length-1].height+=n.height:e.push(n)}return e},e.prototype.initSizeColor=function(){for(var t=new Float32Array(a.MAX_ARR_LEN*a.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++){var o=this.infos[e].color;t[e*a.BASIC_DATA.BYTE]=o.r/a.BASIC_DATA.color_range,t[e*a.BASIC_DATA.BYTE+a.BASIC_DATA.color_alpha2]=o.g/a.BASIC_DATA.color_range,t[e*a.BASIC_DATA.BYTE+a.BASIC_DATA.color_alpha3]=o.b/a.BASIC_DATA.color_range,t[e*a.BASIC_DATA.BYTE+a.BASIC_DATA.color_alpha4]=a.BASIC_DATA.color_alpha}this.material.setProperty("colors",t),this.material.setProperty("iResult",cc.v2(this.node.width,this.node.height)),this.node.getComponent(cc.Sprite).enabled=!1,this.material.setProperty("corrugationType",0)},e.prototype.updateAngleHeight=function(){for(var t=new Float32Array(a.MAX_ARR_LEN*a.BASIC_DATA.BYTE),e=0;e<this.infos.length;e++)t[e*a.BASIC_DATA.BYTE]=this.infos[e].height,this.infos[e].height;this.material.setProperty("heights",t),this.material.setProperty("tiltAngle",this._tiltAngle);var o=0;this._action==a.PourAction.in?(o=1,this.node.getComponent(cc.Sprite).enabled=!1):this._action==a.PourAction.out&&(o=2,this.node.getComponent(cc.Sprite).enabled=!0),this.material.setProperty("corrugationType",o)},e.prototype.upHeight=function(){if(this.isFull())return this.actionHeight=0,void(this._action=a.PourAction.none);if(!(this.curIdx<0)){var t=this.infos[this.curIdx];t.height+=a.ANGLE_FACTOR,t.height>=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight=0,this._action=a.PourAction.none,this.onInFInish&&(this.onInFInish(),this.onInFInish=null)),this.isFull()&&console.log("\u6c34\u5012\u5b8c\u4e86",this.infos),this.updateAngleHeight()}},e.prototype.downHeight=function(){if(this.stopIdx<0)this._action=a.PourAction.none;else{var t=this.infos[this.curIdx];(this.isAtBottleTop()||t.height<.05)&&(this.eventState=!0,this.onOutStart&&(this.onOutStart(),this.onOutStart=null),t.height-=a.ANGLE_FACTOR,this.actionHeight<0&&(this.actionHeight=0),t.height<=this.actionHeight&&(t.height=this.actionHeight,this.actionHeight<=0&&(this.infos.pop(),this.curIdx--,this.stopIdx=-1),this.eventState=!1,this.onOutFinish&&(this.onOutFinish(),this.onOutFinish=null),this._action=a.PourAction.none,this.actionHeight=0),this.updateAngleHeight())}},e.prototype.isFull=function(){return this.infos.reduce(function(t,e){return t+e.height},0)>=a.HEIGHT_FACTOR},e.prototype.isEmpty=function(){return 0==this.infos.length},e.prototype.getTopInfo=function(){return this.infos[this.curIdx]},e.prototype.getPourStartAngle=function(){for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getPourEndAngle=function(){this.stopIdx=this.curIdx-this.getTopSameColorNum();for(var t=0,e=0;e<=this.stopIdx;e++)t+=this.infos[e].height;return this.getCriticalAngleWithHeight(t)},e.prototype.getCriticalAngleWithHeight=function(t){var e=0;if(0==t)return 90;if(t<.5){var o=this._ratio/(2*t);e=Math.atan(o)}else o=2*this._ratio*(1-t),e=Math.atan(o);return c.radian2angle(e)},e.prototype.onStartPour=function(t){this._action=a.PourAction.out;var e=a.HEIGHT_FACTOR/a.SPLIT_COUNT;t&&(this.actionHeight=this.infos[this.curIdx].height-t*e),this.actionHeight<=0&&(this.actionHeight=0),this.stopIdx=this.curIdx-this.getTopSameColorNum(),this.stopIdx<0&&(this.stopIdx=0)},e.prototype.getTopSameColorNum=function(){for(var t=0,e=null,o=this.curIdx;o>=0;o--)if(null==e)t++,e=this.infos[o].colorId;else{if(this.infos[o].colorId!=e)break;t++}return t},e.prototype.isAtBottleTop=function(){for(var t=0,e=0;e<=this.curIdx;e++)t+=this.infos[e].height;var o=this.tiltAngle%360*Math.PI/180,n=Math.abs(Math.tan(o));if(t<.5)return n>this._ratio/(2*t);var r=1-t;return n>2*this._ratio*r},e.prototype.update=function(){this._action==a.PourAction.out?this.downHeight():this._action==a.PourAction.in&&this.upHeight()},e.prototype.setPourInCallback=function(t){this.onInFInish=t},e.prototype.setPourOutCallback=function(t,e){this.onOutStart=t,this.onOutFinish=e},i([u(cc.EffectAsset)],e.prototype,"effect",void 0),i([u],e.prototype,"_tiltAngle",void 0),i([u({tooltip:!1})],e.prototype,"tiltAngle",null),i([l,p],e)}(cc.Component));o.default=f,cc._RF.pop()},{"../com/index":"index","../enum/Enums":"Enums"}],WxPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"53d6cQ5YNFKYL96X+NiCobr","WxPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.WxPlatform=void 0;var i=t("../manager/Main"),c=function(){function t(){this.wx=window.wx}return Object.defineProperty(t,"ins",{get:function(){return this._ins?this._ins:(this._ins=new t,this._ins.init(),this._ins)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.initCustomAd1();var t=i.default.ins.Shares[0].sharePics;t.length>0&&(this.wx.onShareAppMessage(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrlId:t[e].shareId,imageUrl:t[e].shareLink}}),this.wx.onShareTimeline(function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink,query:""}}))},t.prototype.getLaunchOption=function(){return this.wx.getLaunchOptionsSync().query},t.prototype.getScene=function(){return this.wx.getLaunchOptionsSync().scene},t.prototype.showShare=function(t){if(void 0===t&&(t=""),i.default.ins.Shares[0]){var e=i.default.ins.Shares[0].sharePics;if(!(e.length<=0)){var o=Math.floor(Math.random()*e.length);CC_WECHATGAME&&this.wx.shareAppMessage({title:e[o].shareText,imageUrlId:e[o].shareId,imageUrl:e[o].shareLink,query:t})}}},t.prototype.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},t.prototype.showBanner=function(t){var e=this;void 0===t&&(t=2);var o=i.default.ins.Platforms[1].bannerId[0];if(CC_WECHATGAME&&o){if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);var n=this.wx.getSystemInfoSync();console.log(o,"id");var r,c=this.wx.createBannerAd({adUnitId:o,adIntervals:30,style:{left:0,top:500,width:300}});r=1==t?n.windowWidth-c.style.realWidth:2==t?n.windowWidth/2-c.style.realWidth/2:0,c.onResize(function(){c.style.top=n.windowHeight-c.style.realHeight,c.style.left=r}),c.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.banner=c}),c.onError(function(t){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef",t)}),c.show()}},t.prototype.showCustomAd=function(t){var e=this;this.timeId&&(clearTimeout(this.timeId),this.timeId=null);var o=i.default.ins.Platforms[1].customId[0];if(CC_WECHATGAME&&o){var n,r=this.wx.getSystemInfoSync();if(n={width:r.screenWidth/1.5,left:(r.screenWidth-r.screenWidth/1.5)/.4-15,top:100,fixed:0},this.custom)this.custom.show();else{var c=this.wx.createCustomAd({adUnitId:o,style:n});c.onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),c.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),t(0)}),e.custom=c}),c.onClose(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",o)}),c.onError(function(o){e.custom=null,e.timeId=setTimeout(function(){return e.showCustomAd(t)},5e3),console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",o),t(0)})}}},t.prototype.hideCustomAd1=function(){this.custom1&&this.custom1.hide()},t.prototype.initCustomAd1=function(){var t=this,e=i.default.ins.Platforms[1].customId[1];if(CC_WECHATGAME&&e){var o,n=this.wx.getSystemInfoSync();o={width:.85*n.screenWidth,left:.08*n.screenWidth,top:105,fixed:0};var r=this.wx.createCustomAd({adUnitId:e,style:o});r.onLoad(function(){t.custom1=r}),r.onClose(function(t){console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",t)}),r.onError(function(t){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",t)})}},t.prototype.showCustomAd1=function(t){this.custom1&&this.custom1.show().then(function(){return t(1)}).catch(function(){return t(0)})},t.prototype.showCustomAd3=function(t){return n(this,void 0,void 0,function(){var e,o,n,c=this;return r(this,function(){return e=i.default.ins.Platforms[1].customId[0],CC_WECHATGAME&&e?(this.wx.getSystemInfoSync(),o={top:76,width:375,fixed:0},(n=this.wx.createCustomAd({adUnitId:e,style:o})).onLoad(function(){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t(1),n.show().then(function(){return console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){console.log("\u539f\u751f\u6a21\u677f \u5e7f\u544a\u663e\u793a\u5931\u8d25",e),t(0)}),c.custom3=n}),n.onClose(function(t){console.log("\u5173\u95ed\u539f\u751f\u6a21\u677f\u5e7f\u544a",t)}),n.onError(function(e){console.log("\u539f\u751f\u6a21\u677fCustomAd \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff1a",e),t(0)}),[2]):[2]})})},t.prototype.hideCustomAd=function(){this.custom},t.prototype.showInterstitialAd=function(t){void 0===t&&(t=0);var e=i.default.ins.Platforms[1].intersitialId[0];if(CC_WECHATGAME&&e){var o=this.wx.createInterstitialAd({adUnitId:e});o&&(o.load().then(function(){console.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.onClose(function(t){console.log("\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a",t)}),o.onError(function(t){console.log("err:\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),setTimeout(function(){o.show().catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",t)})},1e3*t))}},t.prototype.showRewardVideo=function(t){var e=this,o=i.default.ins.Platforms[1].videoId[0];null!=this.rewardVideo2&&this.rewardVideo2.offClose(c);var n=this.wx.createRewardedVideoAd({adUnitId:o});this.rewardVideo2=n,n.load().then(function(){e.wx.showToast({title:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),n.show()});var r=!1;n.onError(function(o){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",o),r||(r=!0,e.wx.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2))});var c=function(e){e&&e.isEnded?(console.log("res:  ",e),t(1),n.offClose(c)):(console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),t(0))};n.onClose(c)},t}();o.WxPlatform=c,cc._RF.pop()},{"../manager/Main":"Main"}],handleBtnMgr:[function(t,e,o){"use strict";cc._RF.push(e,"00ea5/4yrVLa7G5uZLgUFJx","handleBtnMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.badgeLabel=null,e.badgeNode=null,e.haveBadge=!1,e}return r(e,t),e.prototype.start=function(){this.haveBadge&&(this.badgeLabel.node.active=!0)},e.prototype.setNumToLabel=function(t){t<=0?this.badgeNode.active=!1:(this.badgeNode.active=!0,this.badgeLabel.string=t+"")},e.prototype.update=function(){},i([s(cc.Label)],e.prototype,"badgeLabel",void 0),i([s(cc.Node)],e.prototype,"badgeNode",void 0),i([s(cc.Boolean)],e.prototype,"haveBadge",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],index:[function(t,e,o){"use strict";cc._RF.push(e,"e6b58UKm01IBZaaoeLDHIFB","index"),Object.defineProperty(o,"__esModule",{value:!0}),o.Title=o.getPropNameByType=o.getRandomIntInclusive=o.debounce=o.rotatePt=o.radian2angle=void 0;var n=t("../enum/Enums");function r(t){for(;t>360;)t-=360;for(;t<-360;)t+=360;return t%360*Math.PI/180}o.radian2angle=function(t){return t/Math.PI*180},o.rotatePt=function(t,e){var o=r(e),n=cc.v2();return n.x=t.x*Math.cos(o)-t.y*Math.sin(o),n.y=t.x*Math.sin(o)+t.y*Math.cos(o),n},o.debounce=function(t,e){var o=null;return function(){o&&clearTimeout(o),o=setTimeout(t,e)}},o.getRandomIntInclusive=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},o.getPropNameByType=function(t,e){var o="";switch(t){case n.PropType.back:o=e?"\u540e\u9000":"back";break;case n.PropType.reset:o=e?"\u91cd\u7f6e":"reset";break;case n.PropType.tube:o=e?"\u74f6\u5b50":"tube";break;case n.PropType.debris:o=e?"\u788e\u7247":"debris";break;case n.PropType.power:o=e?"\u4f53\u529b":"power"}return o};var i=function(){function t(){}return t.getTitle=function(t,e){for(var o,n,r,i="",c=0;c<e.length;c++){var a=e[c],s=e[c+1];if(t<a.lv){i=a.title,a.children&&(i=this.getChildTitle(t,a.children));break}i=s&&a.lv>=t?(null===(o=s.children)||void 0===o?void 0:o[0].title)||"":(null===(n=e[e.length-1].children)||void 0===n?void 0:n[0].title)||""}return t>=e[e.length-1].lv&&(i=(null===(r=e[e.length-1].children)||void 0===r?void 0:r[e[e.length-1].children.length-1].title)||""),i},t.getChildTitle=function(t,e){for(var o="",n="",r=0;r<e.length;r++){var i=e[r],c=e[r+1];if(t<i.lv){o=i.title,i.lv,c&&(n=c.title);break}o=e[e.length-1].title}return o||n||""},t.getDesc=function(t,e){for(var o="",n=0;n<e.length;n++){var r=e[n];if(t<r.lv&&r.children){o=r.desc;break}}return t>=e[e.length-1].lv&&(o=e[e.length-1].desc),o},t.getNextLvDesc=function(t,e){for(var o,n="",r=0;r<e.length;r++){var i=e[r],c=e[r+1],a=this.getNextLvAndTitleByChild(t,i.children),s=a.nextLv,l=a.nextTitle;if(t<i.lv){i.lv>=t&&(n="<b><outline color=#000000 width=4><color=#ffffff>\u518d\u8fc7<color=#FA5A00>"+((s||i.lv)-t)+"</color>\u5173\uff0c\u53ef\u664b\u5347\u4e3a<color=#FA5A00>"+(l||(null===(o=c.children)||void 0===o?void 0:o[0].title)||"")+"</color></color></outline></b>");break}n=""}return n},t.getNextLvAndTitleByChild=function(t,e){for(var o=0,n="",r=0;r<e.length;r++){var i=e[r],c=e[r+1];if(t<i.lv){o=i.lv,c&&(n=c.title);break}}return{nextLv:o,nextTitle:n}},t}();o.Title=i,cc._RF.pop()},{"../enum/Enums":"Enums"}],keelReplaceSkinMgr:[function(t,e,o){"use strict";cc._RF.push(e,"88b4cgpMZFIkbLIbbhJyJhn","keelReplaceSkinMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{s(n.next(t))}catch(e){i(e)}}function a(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.demon=null,e}return r(e,t),e.prototype.replaceSkin=function(t,e,o,n){void 0===t&&(t="01"),void 0===e&&(e="Armature"),o&&(this.demon.dragonAsset=o),n&&(this.demon.dragonAtlasAsset=n),this.demon.armatureName=e,this.demon.playAnimation(t,0)},e.prototype.oneReplace=function(t,e){return new Promise(function(o){cc.resources.load("spin/"+t,dragonBones.DragonBonesAsset,function(t,n){cc.resources.load("spin/"+e,dragonBones.DragonBonesAtlasAsset,function(t,e){o({dbAsset:n,dbAtlas:e})})})})},e.prototype.dynamicCreate=function(t){return c(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(e,o){cc.resources.loadDir(t,cc.Asset,function(t,n){t?(console.error(t),o(t)):e(n)})})]})})},e.prototype.loadRemote=function(t,e,o){return new Promise(function(n){cc.loader.load(t,function(t,r){cc.loader.load({url:o,type:"txt"},function(t,o){cc.loader.load({url:e,type:"txt"},function(t,e){var i=new dragonBones.DragonBonesAtlasAsset;i.atlasJson=o,i.texture=r;var c=new dragonBones.DragonBonesAsset;c.dragonBonesJson=e,n({dbAsset:c,dbAtlas:i})})})})})},e.prototype.start=function(){},i([u(dragonBones.ArmatureDisplay)],e.prototype,"demon",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],singleBag:[function(t,e,o){"use strict";cc._RF.push(e,"7d304QPMg1MLbmgQs9Pbo00","singleBag");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../enum/Enums"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.openNodes=[],e.closeNode=null,e.cupNode=null,e.colorNode=null,e.isHide=!1,e}return r(e,t),e.prototype.start=function(){},e.prototype.pushCup=function(t){var e=this,o=this.cupNode.convertToWorldSpaceAR(cc.v2(0,0)).clone(),n=t.parent.convertToNodeSpaceAR(o);this.openNodes.forEach(function(t){t.active=!0}),this.closeNode.active=!1,cc.tween(t).to(.3,{scale:.7,position:cc.v3(n.x,n.y+300)}).call(function(){t.parent=e.cupNode,t.position=cc.v3(0,300)}).to(.1,{position:cc.v3(0,0)}).call(function(){cc.director.emit(c.events.pushCupOver,e.node)}).start()},e.prototype.removeCup=function(){if(this.cupNode.children[0]){var t=this.cupNode.children[0];cc.director.emit(c.events.deleteCupData,t),t.destroy()}},e.prototype.init=function(t){this.colorNode.color=(new cc.Color).fromHEX(c.WaterColors[t]),this.openNodes.forEach(function(t){t.active=!1}),this.closeNode.active=!0,this.removeCup()},e.prototype.changeBag=function(){},e.prototype.hide=function(){this.node.y+=1e3,this.isHide=!0},i([l(cc.Node)],e.prototype,"openNodes",void 0),i([l(cc.Node)],e.prototype,"closeNode",void 0),i([l(cc.Node)],e.prototype,"cupNode",void 0),i([l(cc.Node)],e.prototype,"colorNode",void 0),i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../enum/Enums":"Enums"}],topBagView:[function(t,e,o){"use strict";cc._RF.push(e,"68bd9dWmBhMWa1Qo8MZtfYr","topBagView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../enum/Enums"),a=t("../Global"),s=t("../manager/CupMgr"),l=t("./singleBag"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelCfg=null,e.allColorIds=[],e.sequenceColorIds=[-1,-1,-1],e}return r(e,t),e.prototype.start=function(){this.initBags(),cc.director.on(c.events.Reset,this.initBags,this),cc.director.on(c.events.Next,this.initBags,this)},e.prototype.onDisable=function(){cc.director.off(c.events.Reset,this.initBags,this),cc.director.off(c.events.Next,this.initBags,this)},e.prototype.initBags=function(){var t=this,e=this.levelCfg.json[a.Global.lv-1];this.allColorIds=this.compressArray(e),this.allColorIds.length>3?(this.sequenceColorIds=this.randomSelectThree(this.allColorIds),console.log(this.allColorIds,this.sequenceColorIds)):(this.allColorIds.forEach(function(e,o){t.sequenceColorIds[o]=e}),this.allColorIds=[]),this.node.children.forEach(function(e,o){-1==t.sequenceColorIds[o]?e.active=!1:(e.active=!0,e.y=0,e.getComponent(l.default).init(t.sequenceColorIds[o]))})},e.prototype.checkBagData=function(t){var e=this,o=!1,n=null;console.log(t,this.sequenceColorIds,this.allColorIds,"\u5f85\u547d\u7684\u6ee1\u6c34\u74f6\u6570\u636e");var r=-1;if(this.node.children.forEach(function(t,i){-1==e.sequenceColorIds[i]&&t.active&&(n=t,r=i,e.allColorIds.length>0&&(o=!0))}),console.log(o,n,"\u662f\u5426\u6362\u65b0\u7684\u888b\u5b50"),o){var i=this.randomSelectOne(this.allColorIds);cc.tween(n).by(.3,{position:cc.v3(0,600)}).call(function(){e.sequenceColorIds[r]=i,n.getComponent(l.default).init(i)}).by(.3,{position:cc.v3(0,-600)}).call(function(){for(var o=!1,n=0;n<t.length;n++){var c=t[n];if(c.colorId==i){o=!0,e.pushCup(c.cup,r),t.splice(n,1);break}}o||(console.log("\u53ef\u4ee5\u91cd\u65b0\u70b9\u51fb\u676f\u5b50"),s.default.ins.setBagStatus(!1))}).start()}else cc.tween(n).by(.3,{position:cc.v3(0,600)}).call(function(){console.log("\u53ef\u4ee5\u91cd\u65b0\u70b9\u51fb\u676f\u5b50"),s.default.ins.setBagStatus(!1),n.getComponent(l.default).removeCup(),n.active=!1,0===e.allColorIds.length&&e.sequenceColorIds.every(function(t){return-1===t})&&cc.director.emit(c.events.LevelFinish)}).start()},e.prototype.randomSelectOne=function(t){if(0===t.length)return null;var e=Math.floor(Math.random()*t.length),o=t[e];return t.splice(e,1),o},e.prototype.randomSelectThree=function(t){for(var e=[],o=0;o<3&&t.length>0;o++){var n=Math.floor(Math.random()*t.length);e.push(t[n]),t.splice(n,1)}return e},e.prototype.getColorArray=function(){return this.sequenceColorIds},e.prototype.pushCup=function(t,e){this.sequenceColorIds[e]=-1,console.log(this.sequenceColorIds,"\u5e8f\u5217\u989c\u8272"),this.node.children[e].getComponent(l.default).pushCup(t)},e.prototype.compressArray=function(t){for(var e={},o=0;o<t.length;o++)0!==(r=t[o])&&(void 0===e[r]?e[r]=1:e[r]++);var n=[];for(var r in e){var i=e[r],c=Math.floor(i/4);for(o=0;o<c;o++)n.push(Number(r))}return n},i([f(cc.JsonAsset)],e.prototype,"levelCfg",void 0),i([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Global":"Global","../enum/Enums":"Enums","../manager/CupMgr":"CupMgr","./singleBag":"singleBag"}]},{},["Test - 001","Global","Gongde","Test","ToastCtrl","AdMgr","AndroidAD","DyPlatform","DyRecorderManager","QQPlatform","WxPlatform","SubContent","index","LoadCtrl","Enums","Cup","PropMgr","RandowColorCup","Water","WaterFlow","GuideFinger","GuideTask","GuideTaskMgr","BaseInter","AudioMgr","BadgeBtnMgr","CupMgr","EnergyMgr","GameMgr","Main","PoolMgr","PropBlockMgr","RandomCupMgr","ReceiveItem","ResMgr","ShopCardItem","handleBtnMgr","keelReplaceSkinMgr","DragonAVModal","Tools","AddModalView","BaseView","ChallengeCancelView","ChallengeVictoryModalView","DrawView","GameView","GridAdView","HomeTopView","HomeView","NewScript","PeopleModalView","PhysicalModalView","PropModalView","PropRoleOrCupModalView","RandomColorGameView","RankListView","ReceiveModalView","RedemptionCodeInputView","RedemptionCodeModalView","ResultView","SettingView","ShopModalItemView","ShopModalView","ShopView","SignItemView","SignModalView","TabView","VictoryModalView","singleBag","topBagView"]);