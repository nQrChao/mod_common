window.__require=function t(e,i,o){function n(r,s){if(!i[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){return n(e[r][1][t]||t)},d,d.exports,t,e,i,o)}return i[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({ActionItem:[function(t,e,i){"use strict";cc._RF.push(e,"d0ae7hc43JAYrlnMArDgLF/","ActionItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("GameEnums"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actType=r.ACTION_TYPE.DEFAULT,e.actTimes=0,e.reDoTimes=1,e.time=.5,e.delayTime=0,e.value=.05,e.movePos=cc.v2(),e}return o(e,t),e.prototype.onLoad=function(){var t=ymtApp.tweenMgr.getTweenByType(this.actType,this.node,{doTimes:this.reDoTimes,time:this.time,value:this.value,delayTime:this.delayTime,pos:this.movePos});cc.isValid(this.node)&&(this.repeatAct&&this.repeatAct.stop(),0==this.actTimes?this.repeatAct=cc.tween(this.node).repeatForever(t).start():this.repeatAct=cc.tween(this.node).repeat(this.actTimes,t).start())},n([l({type:cc.Enum(r.ACTION_TYPE),tooltip:"\u52a8\u753b\u7c7b\u578b"})],e.prototype,"actType",void 0),n([l({type:cc.Integer,tooltip:"\u91cd\u590d\u6b21\u6570\uff0c0\u4e3a\u6c38\u4e45"})],e.prototype,"actTimes",void 0),n([l({type:cc.Integer,tooltip:"\u6643\u52a8\u6b21\u6570",visible:function(){return this.actType==r.ACTION_TYPE.ROCK}})],e.prototype,"reDoTimes",void 0),n([l({tooltip:"\u52a8\u753b\u65f6\u95f4"})],e.prototype,"time",void 0),n([l({tooltip:"\u5ef6\u8fdf\u65f6\u95f4"})],e.prototype,"delayTime",void 0),n([l({visible:function(){return this.actType!=r.ACTION_TYPE.TREMBLE&&this.actType!=r.ACTION_TYPE.MOVE}})],e.prototype,"value",void 0),n([l({visible:function(){return this.actType==r.ACTION_TYPE.TREMBLE||this.actType==r.ACTION_TYPE.MOVE}})],e.prototype,"movePos",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums"}],AdBanner:[function(t,e,i){"use strict";cc._RF.push(e,"5f114/amRNFVYcW03lmR6vF","AdBanner");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("SDKEnum"),s=t("SDKMgr"),c=t("UIMgr"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.banner=null,e.finger=null,e.bannerSpr=[],e.bannerNet=[],e.index=0,e.count=0,e}return o(e,t),e.prototype.onLoad=function(){this.show(),this.onClick(this.banner,this.onClickBanner,this,{clickTime:.5})},e.prototype.show=function(){var t=this;this.count=(s.default.banner_refresh_time||30)-1,this.index=0,this.finger.active=!1,s.default.confData.finger_guide&&1==s.default.confData.finger_guide&&this.scheduleOnce(function(){t.finger.active=!0},2),this.node.parent.height>this.node.parent.width&&(this.node.scale=this.node.parent.width/this.banner.width)},e.prototype.onClickBanner=function(){s.default.showVideo(function(){c.default.onClickType(r.CLICK_TYPE.BANNER)},null,null,r.VIDEO_TYPE.BANNER_VIDEO)},e.prototype.changeBanner=function(){var t=this;if(s.default.confData.banner_video_img&&s.default.confData.banner_video_img.length>0)if(this.index=(this.index+1)%s.default.confData.banner_video_img.length,this.bannerNet[this.index])this.banner.getComponent(cc.Sprite).spriteFrame=this.bannerNet[this.index];else{var e=s.default.confData.banner_video_img[this.index];ymtApp.resMgr.loadRemote(e,function(e,i){if(!e){var o=new cc.SpriteFrame(i);t.bannerNet[t.index]=o,t.banner.getComponent(cc.Sprite).spriteFrame=o}})}else this.bannerSpr.length<=0||(this.index=(this.index+1)%this.bannerSpr.length,this.banner.getComponent(cc.Sprite).spriteFrame=this.bannerSpr[this.index])},e.prototype.update=function(t){this.count+=t,this.count>=s.default.banner_refresh_time&&(this.count=0,this.changeBanner())},n([u(cc.Node)],e.prototype,"banner",void 0),n([u(cc.Node)],e.prototype,"finger",void 0),n([u(cc.SpriteFrame)],e.prototype,"bannerSpr",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{BaseComponent:"BaseComponent",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],AdInterstitialView:[function(t,e,i){"use strict";cc._RF.push(e,"6f065DDoyRBMJj8bC5JNIGX","AdInterstitialView");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseUI"),c=t("MainConfig"),l=t("SDKEnum"),d=t("SDKMgr"),u=t("UIMgr"),p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.finger=null,e.sprCenter=null,e.ADFrame=[],e.interstitialNet=[],e.index=0,e.count=0,e}return o(e,t),e.prototype.start=function(){this.open()},e.prototype.open=function(){var t=this;this.count=0,u.default.addInsertadTimes(),this.finger.active=!1,d.default.confData.finger_guide&&1==d.default.confData.finger_guide&&this.scheduleOnce(function(){t.finger.active=!0},2)},e.prototype.onClickCenter=function(){return a(this,void 0,void 0,function(){var t=this;return r(this,function(){return this.finger.active=!1,d.default.showVideo(function(){u.default.onClickType(l.CLICK_TYPE.AD_INTERSTITIAL),t.onBack()},null,null,l.VIDEO_TYPE.INSERTAD_VIDEO),[2]})})},e.prototype.changeCenter=function(){var t=this;if(d.default.confData.self_insertad_img&&d.default.confData.self_insertad_img.length>0)if(this.index=(this.index+1)%d.default.confData.self_insertad_img.length,this.interstitialNet[this.index])this.sprCenter.getComponent(cc.Sprite).spriteFrame=this.interstitialNet[this.index];else{var e=d.default.confData.self_insertad_img[this.index];cc.assetManager.loadRemote(e,function(e,i){if(!e){var o=new cc.SpriteFrame(i);t.interstitialNet[t.index]=o,t.sprCenter.getComponent(cc.Sprite).spriteFrame=o}})}else this.ADFrame.length<=0||(this.index=(this.index+1)%this.ADFrame.length,this.sprCenter.getComponent(cc.Sprite).spriteFrame=this.ADFrame[this.index])},e.prototype.onBack=function(){ymtApp.viewMgr.hideView(c.UI.AD_INTERSTITIAL_VIEW)},e.prototype.update=function(t){this.count+=t,this.count>5&&(this.count=0,this.changeCenter())},n([f(cc.Node)],e.prototype,"btnClose",void 0),n([f(cc.Node)],e.prototype,"finger",void 0),n([f(cc.Node)],e.prototype,"sprCenter",void 0),n([f(cc.SpriteFrame)],e.prototype,"ADFrame",void 0),n([h],e)}(s.default);i.default=m,cc._RF.pop()},{BaseUI:"BaseUI",MainConfig:"MainConfig",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],AdMgr:[function(t,e,i){"use strict";cc._RF.push(e,"f8a13Dd16NHPIWQLeGrU5YQ","AdMgr");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("SDKMgr"),r=cc._decorator,s=r.ccclass;r.property;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.update=function(t){a.default.isBannerShow&&(a.default.bannerShowTime+=t,a.default.bannerShowTime>=a.default.banner_refresh_time&&a.default.reCreateBanner())},n([s],e)}(cc.Component);i.default=c,cc._RF.pop()},{SDKMgr:"SDKMgr"}],AndroidAd:[function(t,e,i){"use strict";cc._RF.push(e,"cd8467WcqNNpL+aXVn8EEM3","AndroidAd");var o,n=__extends;Object.defineProperty(i,"__esModule",{value:!0});var a,r=t("AudioUtil"),s=t("GameSys"),c=t("mTimer"),l=t("YmtUtils"),d=t("YmtAdManager"),u=t("ymt_enum");(a=o||(o={}))[a.ERROR=-1]="ERROR",a[a.SUCC=1]="SUCC",a[a.SHOW=2]="SHOW",a[a.CLOSE=3]="CLOSE";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeInterTime=0,e.closeNativeTime=0,e.closeNormalBannerTime=0,e.showLimmitTime=0,e.longTimeNoClick=0,e.showVideoTime=0,e}return n(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this.isGameCd=s.default.adInfo.bannerDelay>0,t.prototype.initAd.call(this),this._gameCd(),this.getNativePlatfom()==u.PLATFORM.MI&&(this.showLimmitTime=s.default.adInfo.miAdGapLimt),this.initBanner(),this.initNativeAd())},e.prototype._gameCd=function(){var t=this;(new c.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner()},1e3*s.default.adInfo.bannerDelay)},e.prototype.getNativePlatfom=function(){return l.default.callMethod("getNativePlatfom")},e.prototype.showNormalBanner=function(){var t=this;this.get_time()-this.closeNormalBannerTime<this.showLimmitTime||l.default.callMethod("showNormalBanner",null,function(e){e==o.SHOW?t.bannerTimer&&t.bannerTimer.stop():t.closeNormalBannerTime=t.get_time()})},e.prototype.hideNormalBanner=function(){l.default.callMethod("hideNormalBanner")},e.prototype.destroyNormalBanner=function(){this.hideNormalBanner()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;if(this.isGameCd||!s.default.canShowBanner)return this.isNeedShowBanner=!0,console.log("%c[YMT_GAME]showBanner \u5e7f\u544aCD\u4e2d","color: #33ccff");this.hideBanner(),this.bannerDelayTimer=c.default.once(function(){var e=t.get_time()-t.closeNativeTime<t.showLimmitTime;if(console.log("%c[YMT_GAME]\u5f53\u524d"+(e?"\u4e0d":"")+"\u53ef\u4ee5\u5c55\u793aBanner","color: #33ccff"),!e){var i=t.getLocalNativeData(u.ad_native_type.banner);if(null==t.bannerTimer&&(t.bannerTimer=new c.default),s.default.adInfo.bannerUpdateTime>0){var o=t;t.bannerTimer.once(function(){console.log("[YMT_GAME]this.bannerTimer.once"),o.showBanner()},1e3*s.default.adInfo.bannerUpdateTime)}if(null==i||void 0===i)t.showNormalBanner();else{var n=cc.instantiate(l.default.getRes("hs_ui/ui_banner",cc.Prefab));t.bannerNode=n.getComponent("hs_ui_banner"),t.bannerNode.show(i,function(){},function(){t.closeNativeTime=t.get_time(),t.hideBanner()})}}},1e3)},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.hideNormalBanner()},e.prototype.showVideo=function(t){var e=this;this.get_time()-this.showVideoTime<500||(this.showVideoTime=this.get_time(),l.default.callMethod("showVideo",null,function(i){i==o.ERROR?e.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):i==o.CLOSE?(r.default.setMusicVolume(1),r.default.setSoundVolume(1)):i==o.SHOW&&(r.default.setMusicVolume(0),r.default.setSoundVolume(0)),t&&t(i==o.SUCC)}))},e.prototype.clickNative=function(){if(this.isGameCd||s.default.isShieldArea)return console.log("%c[YMT_GAME]\u5e7f\u544aCD\u4e2d","color: #33ccff");var t=this.getLocalNativeData(u.ad_native_type.inner_interstitial);null==t&&(t=this.getLocalNativeData(u.ad_native_type.banner)),null==t&&(t=this.getLocalNativeData(u.ad_native_type.interstitial)),null==t&&(t=this.getLocalNativeData(u.ad_native_type.native_icon)),t?(this.reportAdShow(t),this.reportAdClick(t)):(console.log("\u81ea\u52a8\u8df3\u8f6c,\u6293\u53d6\u5e7f\u544a\u5931\u8d25!!!"),this.clickNativeFail())},e.prototype.destroyVideo=function(){l.default.callMethod("destroyVideo")},e.prototype.showInterstitial=function(t,e){var i=this;if(this.get_time()-this.closeInterTime<this.showLimmitTime)return e&&e();var n=l.default.randomInt(1,100)<=s.default.adInfo.showInteNormalRto;l.default.callMethod("showInter",n,function(n){console.log("[YMT_GAME] showInter ret = ",n),n==o.SHOW?(i.hideBanner(),t&&t()):(n==o.CLOSE&&(i.closeInterTime=i.get_time()),i.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyNormalInter=function(){l.default.callMethod("destroyInter")},e.prototype.showInterVideo=function(t,e){var i=this;if(this.isGameCd)return e&&e(),console.log("%c[YMT_GAME]showInterVideo \u5e7f\u544aCD\u4e2d","color: #33ccff");if(this.get_time()-this.closeInterTime<this.showLimmitTime)return e&&e();var n=l.default.randomInt(1,100)<=s.default.adInfo.showInteNormalRto;l.default.callMethod("showInterVideo",n,function(n){n==o.SHOW?(t&&t(),r.default.setMusicVolume(0),r.default.setSoundVolume(0)):(n==o.CLOSE&&(i.closeInterTime=i.get_time()),e&&e(),r.default.setMusicVolume(1),r.default.setSoundVolume(1))})},e.prototype.destroyInterVideo=function(){l.default.callMethod("destroyInterVideo")},e.prototype.create_ad=function(t){var e=this;return new Promise(function(i){l.default.callMethod("createNativeAd",t.toString(),function(t){if(console.log("%c[YMT_GAME]native data load succ:"+JSON.stringify(t),"color: #33ccff"),t==o.ERROR);else try{e.add_native_data(t)}catch(i){console.log(i)}}),setTimeout(i,100)})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.native_icon)}).then(function(){return t.create_ad(u.ad_native_type.interstitial)}).then(function(){return t.create_ad(u.ad_native_type.inner_interstitial)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,i,o){var n=this;if(this.isGameCd||s.default.isShieldArea)return o&&o(),console.log("%c[YMT_GAME]showInterstitialNative \u5e7f\u544aCD\u4e2d","color: #33ccff");if(this.get_time()-this.closeNativeTime<this.showLimmitTime)return o&&o();this.hideInterstitialNative();var a=this.getLocalNativeData(u.ad_native_type.inner_interstitial);if(null==a||void 0===a)o&&o();else{this.isNeedShowBanner=!1;var r=cc.instantiate(l.default.getRes("hs_ui/ui_inner_interstitial",cc.Prefab));this.innerInter=r.getComponent("hs_ui_inner_interstitial"),this.innerInter&&this.innerInter.show(t,a,e,function(){n.hideBanner(),i&&i()},function(){n.closeNativeTime=n.get_time(),o&&o()})}},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,i){var o=this;if(void 0===i&&(i=1),this.get_time()-this.closeNativeTime<this.showLimmitTime||this.get_time()-this.interShowTime<=1e3*s.default.adInfo.interTick||this.isGameCd)return e&&e(),console.log("%c[YMT_GAME]showNativeInterstitial \u5e7f\u544aCD\u4e2d","color: #33ccff");this.hideNativeInterstitial(),this.nativeInterTimer||(this.nativeInterTimer=new c.default),this.nativeInterTimer.once(function(){o.isNeedShowBanner=!1;var i=o.getLocalNativeData(u.ad_native_type.interstitial);if(null==i||void 0===i)console.log("[YMT_GAME] \u666e\u901a\u63d2\u5c4f"),o.showInterstitial(t,e);else{if(console.log("[YMT_GAME] \u63d2\u5c4f\u6982\u7387",s.default.adInfo.showInterRto),l.default.randomInt(1,100)>s.default.adInfo.showInterRto)return e&&e();var n=cc.instantiate(l.default.getRes("hs_ui/ui_interstitial",cc.Prefab));o.nativeInter=n.getComponent("hs_ui_interstitial"),console.log("[YMT_GAME] \u63d2\u5c4f\u5c55\u793a",JSON.stringify(i)),o.nativeInter.show(i,function(){o.interShowTime=o.get_time(),o.hideBanner(),t&&t()},function(){o.closeNativeTime=o.get_time(),o.isNeedShowBanner=!0,e&&e()})}},s.default.isShenHe||s.default.isShieldArea?0:1e3*i)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.showNativeIcon=function(t){if(this.isGameCd)return console.log("%c[YMT_GAME]showNativeIcon \u5e7f\u544aCD\u4e2d","color: #33ccff");if(this.platformVersion()==u.PLATFORM.VIVO){var e={x:0,y:0};null!=t&&(e.x=(t.x-t.anchorX*t.width)*s.default.scale,e.y=(t.y-t.anchorY*t.height)*s.default.scale),l.default.callMethod("showNativeIcon",JSON.stringify(e))}else{var i=u.ad_native_type.native_icon,o=s.default.adInfo.adunit_native[i];o==s.default.adInfo.adunit_native[u.ad_native_type.inner_interstitial]?i=u.ad_native_type.inner_interstitial:o==s.default.adInfo.adunit_native[u.ad_native_type.banner]&&(i=u.ad_native_type.banner);var n=this.getLocalNativeData(i);if(null==n||void 0===n)return console.log("%c[YMT_GAME]showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e","color: #33ccff");var a=cc.instantiate(l.default.getRes("hs_ui/ui_native_icon",cc.Prefab));this.nativeIcon=a.getComponent("hs_ui_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,n)}},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this),this.platformVersion()==u.PLATFORM.VIVO&&l.default.callMethod("hideNativeIcon")},e.prototype.loop_get_native_data=function(){},e.prototype.reportAdClick=function(t){t&&void 0!==t&&(l.default.callMethod("reportAdClick",t.adId),this.remove_native_data(t),this.longTimeNoClick=Date.now(),console.log("report click///////////////"),s.default.uploadOcpx("gads"))},e.prototype.showFeedAd=function(t,e){if(this.isGameCd)return console.log("%c[YMT_GAME]showFeedAd \u5e7f\u544aCD\u4e2d","color: #33ccff");l.default.callMethod("showFeedAd",null,function(i){i==o.SHOW?(t&&t(),r.default.setMusicVolume(0),r.default.setSoundVolume(0)):(e&&e(),r.default.setMusicVolume(1),r.default.setSoundVolume(1))})},e.prototype.destroyFeedAd=function(){l.default.callMethod("destroyFeedAd")},e.prototype.showGamePortal=function(){l.default.callMethod("jumpLeisureSubject")},e.prototype.openUrl=function(t){l.default.callMethod("openUrl",t)},e.prototype.showPrivacy=function(){l.default.callMethod("showPrivacy")},e.prototype.clickNativeFail=function(){l.default.callMethod("clickNativeFail")},e.prototype.supportGameBox=function(){return this.getNativePlatfom()==u.PLATFORM.OPPO||this.getNativePlatfom()==u.PLATFORM.VIVO},e.prototype.add_native_data=function(){},e}(d.default);i.default=p,cc._RF.pop()},{AudioUtil:"AudioUtil",GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],AudioManager:[function(t,e,i){"use strict";cc._RF.push(e,"c4079UL4rROh5LoNPR4lD8Z","AudioManager");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("Singleton"),s=t("GameEnums"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._currentMusic=-1,e._soundList={},e.musicClips={},e.musicList=[],e.curIdx=0,e.timerId=null,e.audioMap={},e.singleName=null,e}return o(e,t),e.prototype.playMusic=function(t,e,i){return void 0===i&&(i=!0),n(this,void 0,Promise,function(){var o;return a(this,function(n){switch(n.label){case 0:return 0==ymtApp.gameController.getSettingStatus(s.SETTING_TYPE.MUSIC)?[2,-1]:(-1!=this._currentMusic&&cc.audioEngine.stop(this._currentMusic),[4,ymtApp.resMgr.getAudioClip(t,e)]);case 1:return(o=n.sent())&&(this._currentMusic=cc.audioEngine.playMusic(o,i),this.musicClips[this._currentMusic]=o),[2,this._currentMusic]}})})},e.prototype.playMusicList=function(t){var e=this;this.musicList=t,this.curIdx=0,null==this.musicList||this.musicList.length<=0||(null!=this.timerId&&(clearTimeout(this.timerId),this.timerId=null),function t(){return n(e,void 0,void 0,function(){var e,i,o,n=this;return a(this,function(a){switch(a.label){case 0:return e=this.musicList[this.curIdx],[4,this.playMusic(e.name,e.bundle)];case 1:return i=a.sent(),o=cc.audioEngine.getDuration(i),this.timerId=setTimeout(function(){n.curIdx=(n.curIdx+1)%n.musicList.length,t()},1e3*Math.floor(o)),[2]}})})}())},e.prototype.stopMusic=function(){null!=this.timerId&&(clearTimeout(this.timerId),this.timerId=null),-1!=this._currentMusic&&(delete this.musicClips[this._currentMusic],cc.audioEngine.getState(this._currentMusic)!=cc.audioEngine.AudioState.ERROR&&(cc.audioEngine.stopMusic(),this._currentMusic=-1))},e.prototype.pauseMusic=function(){-1!=this._currentMusic&&cc.audioEngine.getState(this._currentMusic)!=cc.audioEngine.AudioState.ERROR&&cc.audioEngine.pauseMusic()},e.prototype.resumeMusic=function(){-1!=this._currentMusic&&cc.audioEngine.getState(this._currentMusic)!=cc.audioEngine.AudioState.ERROR&&cc.audioEngine.resumeMusic()},e.prototype.isPlayMusic=function(){return cc.audioEngine.isMusicPlaying()},e.prototype.playSound=function(t,e,i,o,r,c){return void 0===e&&(e=!1),void 0===i&&(i=s.SETTING_TYPE.EFFECT),void 0===o&&(o=1),n(this,void 0,Promise,function(){var n,s=this;return a(this,function(a){switch(a.label){case 0:return 0==ymtApp.gameController.getSettingStatus(i)?[2,-1]:[4,ymtApp.resMgr.getAudioClip(t,r)];case 1:return(n=a.sent())?[2,this.play(n,e,o,function(t){delete s._soundList[t],c&&c()})]:[2,-1]}})})},e.prototype.playEffect=function(t,e,i){return void 0===e&&(e=!1),n(this,void 0,Promise,function(){return a(this,function(){return[2,this.playSound(t.url,e,s.SETTING_TYPE.EFFECT,t.volume||1,t.bundle,i)]})})},e.prototype.play=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=1);var n=cc.audioEngine.play(t,e,i);return this._soundList[n]=1,cc.audioEngine.setFinishCallback(n,function(){o&&o(n)}),n},e.prototype.playWithTimes=function(t,e,i,o,n,a){var r=this;if(void 0===i&&(i=1),void 0===n&&(n=!1),void 0===a&&(a=!0),e)if(0!=i){n&&this.singleName!=t&&(null!=this.singleName&&this.stopAudioTimes(this.singleName),this.singleName=t);var c=!1;-1==i&&(c=!0);var l=ymtApp.gameController.getSettingStatus(s.SETTING_TYPE.EFFECT),d=cc.audioEngine.play(e,c,l);if((null!=this.audioMap[t]||a)&&(this.audioMap[t]={id:d,times:i,clip:e,callback:o,isSingle:n}),this.audioMap[t].times=i,!c&&!this.audioMap[t].isPause)return cc.audioEngine.setFinishCallback(d,function(){if(r.audioMap[t]&&i-1!=0)if(r.audioMap[t].isPause)r.audioMap[t].id=-1;else{var n=r.playWithTimes(t,e,i-1,o,!1,!1);o&&o(i-1,n)}else r.stopAudioTimes(t)}),d}else this.stopAudioTimes(t)},e.prototype.stopAudioTimes=function(t){this.audioMap[t]&&(this.stop(this.audioMap[t].id),this.audioMap[t]=null)},e.prototype.pauseAudioTimes=function(t){this.audioMap[t]&&(this.pause(this.audioMap[t].id),this.audioMap[t].isPause=!0)},e.prototype.resumeAudioTimes=function(t){if(this.audioMap[t]){this.audioMap[t].isPause=!1;var e=this.audioMap[t];e.id&&e.id>0?this.resume(e.id):this.playWithTimes(t,e.clip,(e.times||1)-1,e.callback,e.isSingle,!1)}},e.prototype.stop=function(t){cc.audioEngine.stop(t)},e.prototype.pause=function(t){cc.audioEngine.pause(t)},e.prototype.resume=function(t){cc.audioEngine.resume(t)},e.prototype.stopSound=function(t){-1!=t&&cc.audioEngine.getState(t)!=cc.audioEngine.AudioState.ERROR&&(cc.audioEngine.stop(t),delete this._soundList[t])},e.prototype.stopSounds=function(){for(var t in this._soundList){var e=Number(t);cc.audioEngine.getState(e)!=cc.audioEngine.AudioState.ERROR&&(cc.audioEngine.stop(e),cc.audioEngine.stopAll())}this._soundList={}},e}(r.default);i.default=c,cc._RF.pop()},{GameEnums:"GameEnums",Singleton:"Singleton"}],AudioUtil:[function(t,e,i){"use strict";cc._RF.push(e,"a88ddPPNINHB59CaTJiSO/V","AudioUtil"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("YmtUserData"),n=function(){function t(){}return t.playSound=function(t,e){if(void 0===e&&(e=!1),o.default.soundPlay)return void 0===t||null==t?null:(null!=cc.loader.getRes(t,cc.AudioClip)?t=cc.loader.getRes(t,cc.AudioClip):"string"==typeof t&&(t=cc.url.raw("resources/"+t)),cc.audioEngine.playEffect(t,e))},t.stopSound=function(t){NaN!==Number(t)&&cc.audioEngine.stopEffect(t)},t.stopAllSounds=function(){cc.audioEngine.stopAllEffects()},t.playMusic=function(t,e){if(void 0===e&&(e=!0),o.default.musicPlay){if(void 0===t||null==t)return null;null!=cc.loader.getRes(t,cc.AudioClip)?t=cc.loader.getRes(t,cc.AudioClip):"string"==typeof t&&(t=cc.url.raw("resources/"+t)),this.stopMusic(),this.musicHandle=cc.audioEngine.playMusic(t,e)}},t.stopMusic=function(){this.musicHandle=null,cc.audioEngine.stopMusic()},t.pauseAll=function(){cc.audioEngine.pauseAll()},t.resumeAll=function(){cc.audioEngine.resumeAll()},t.isMusicPlaying=function(){return cc.audioEngine.isMusicPlaying()},t.pauseMusic=function(){this.musicHandle&&cc.audioEngine.pauseMusic()},t.resumeMusic=function(){this.musicHandle&&cc.audioEngine.resumeMusic()},t.stopAll=function(){cc.audioEngine.stopAll()},t.setSoundVolume=function(t){cc.audioEngine.setEffectsVolume(t)},t.setMusicVolume=function(t){cc.audioEngine.setMusicVolume(t)},t.musicHandle=null,t.effectHandle=[],t}();i.default=n,cc._RF.pop()},{YmtUserData:"YmtUserData"}],AutoLocalizeSprites:[function(t,e,i){"use strict";cc._RF.push(e,"add99Rw0FFJA520CZgvUu2+","AutoLocalizeSprites");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeImage"),r=t("LocalizeLabel"),s=t("LocalizeMgr"),c=cc._decorator,l=c.ccclass;c.property;var d=c.menu,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var t=this,e=this.node.getComponentsInChildren(cc.Sprite);if(e.length>0)for(var i=0;i<e.length;i++){var o=e[i];if(!o.getComponent(r.default)&&o.spriteFrame&&o.spriteFrame.getTexture&&o.spriteFrame.getTexture().nativeUrl){var n=cc.assetManager.utils.getUuidFromURL(o.spriteFrame.getTexture().nativeUrl),c=cc.assetManager.resources.getAssetInfo(n);c&&c.path&&c.path.includes("localizeImage")&&null==o.getComponent(a.default)&&o.addComponent(a.default)}}var l=this.node.getComponentsInChildren(cc.Label);if(l.length>0){var d=function(e){var i=l[e];i.string.length>0&&!i.getComponent(r.default)&&u.hasChinese(i.string)&&(i.string=s.LocalizeMgr.inst.toLocalize(i.string,null,function(){i.node.width>10?i.overflow=cc.Label.Overflow.SHRINK:t.scheduleOnce(function(){i.overflow=cc.Label.Overflow.SHRINK})}))},u=this;for(i=0;i<l.length;i++)d(i)}},e.prototype.onDestroy=function(){},e.prototype.hasChinese=function(t){return/[\u4E00-\u9FA5]+/g.test(t)},n([l,d("yomitoo/tools/AutoLocalizeSprites")],e)}(cc.Component);i.default=u,cc._RF.pop()},{LocalizeImage:"LocalizeImage",LocalizeLabel:"LocalizeLabel",LocalizeMgr:"LocalizeMgr"}],BackgroundFixComponent:[function(t,e,i){"use strict";cc._RF.push(e,"49cbc9G6+RDZrtWtkluTHuB","BackgroundFixComponent");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass;a.property;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeWidth=0,e.nodeHeight=0,e}return o(e,t),e.prototype.onLoad=function(){this.nodeWidth=this.node.width,this.nodeHeight=this.node.height},e.prototype.start=function(){var t=cc.view.getVisibleSize();this.nodeWidth/this.node.height<t.width/t.height?this.node.scale=t.width/this.nodeWidth:this.node.scale=t.height/this.node.height},n([r],e)}(cc.Component);i.default=s,cc._RF.pop()},{}],BackgroundFix:[function(t,e,i){"use strict";var o;cc._RF.push(e,"385705Y8nRB+a2/qBZtoqIS","BackgroundFix");var n=i;o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};var a=function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t,e,i,o){var n,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(a<3?n(r):a>3?n(e,i,r):n(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass;s.property;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeWidth=null,e.nodeHeight=null,e}return a(e,t),e.prototype.onLoad=function(){this.nodeWidth=this.node.width,this.nodeHeight=this.node.height},e.prototype.start=function(){var t=cc.view.getVisibleSize();this.nodeWidth/this.node.height<t.width/t.height?this.node.scale=t.width/this.nodeWidth:this.node.scale=t.height/this.node.height},r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],BaseComponent:[function(t,e,i){"use strict";cc._RF.push(e,"ca3fcP+TpBA5IQ3mTJHeIqG","BaseComponent");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass;a.property;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listeners=[],e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.init(),this.addEventListener(),ymtApp.timeMgr.addUpdate(function(e){t.updateTime(e)},this)},e.prototype.start=function(){},e.prototype.onEnable=function(){this.onShow()},e.prototype.onDisable=function(){this.onHide()},e.prototype.onDestroy=function(){this.removeAllListener(),ymtApp.timeMgr.clearUpdate(this)},e.prototype.init=function(){},e.prototype.addEventListener=function(){},e.prototype.onShow=function(){},e.prototype.onHide=function(){},e.prototype.open=function(){},e.prototype.close=function(){},e.prototype.eventEmit=function(t,e,i,o,n,a){ymtApp.eventTarget.emit(t,e,i,o,n,a)},e.prototype.eventOn=function(t,e,i){for(var o=0;o<this.listeners.length;o++)if(this.listeners[o].event==t)return void console.error("BaseComponent eventOn",t);this.listeners.push({event:t,func:e,target:i}),ymtApp.eventTarget.on(t,e,i)},e.prototype.removeAllListener=function(){for(var t=0;t<this.listeners.length;t++){var e=this.listeners[t];ymtApp.eventTarget.off(e.event,e.func,e.target)}this.listeners=[]},e.prototype.seekChild=function(t,e){if(t){if(t.name===e)return t;for(var i=t.children,o=0;o<i.length;++o){var n=this.seekChild(i[o],e);if(n)return n}}},e.prototype.forEachChild=function(t,e){if(t)for(var i=t.children,o=0;o<i.length;++o)e&&e(i[o]),this.forEachChild(i[o],e)},e.prototype.onClick=function(t,e,i,o){ymtApp.nodeMgr.onClick(t,e,i,o)},e.prototype.offClick=function(t,e,i){ymtApp.nodeMgr.offClick(t,e,i)},e.prototype.updateTime=function(){},n([r],e)}(cc.Component);i.default=s,cc._RF.pop()},{}],BaseConstant:[function(t,e,i){"use strict";cc._RF.push(e,"0855e3t5/RICq1q7UzYlZUs","BaseConstant"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return Object.defineProperty(t,"IS_WEB_GAME",{get:function(){if(this.IS_IOS||this.IS_ANDROID)return!1;var t=!0;for(var e in this)if("IS_WEB_GAME"!=e&&(e.search(/IS_.*?_GAME$/i)>=0&&(t=t&&!this[e]),!t))return t;return t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"PLATFORM_CODE",{get:function(){return cc.sys.platform},enumerable:!1,configurable:!0}),t.BASE_URL="https://yomituproject-1316735335.cos.accelerate.myqcloud.com/",t.IS_IOS=cc.sys.os==cc.sys.OS_IOS&&!1,t.IS_ANDROID=cc.sys.os==cc.sys.OS_ANDROID&&!1,t.IS_WECHAT_GAME=(cc.sys.platform==cc.sys.WECHAT_GAME||void 0!==window.wx)&&null==window.tt&&void 0===window.ks,t.IS_QQ_GAME=cc.sys.platform==cc.sys.QQ_PLAY||void 0!==window.qq,t.IS_OPPO_GAME=cc.sys.platform==cc.sys.OPPO_GAME||void 0!==window.qg&&"OPPO"==window.qg.getProvider(),t.IS_VIVO_GAME=cc.sys.platform==cc.sys.VIVO_GAME||void 0!==window.qg&&"vivo"==window.qg.getProvider(),t.IS_BAIDU_GAME=cc.sys.platform==cc.sys.BAIDU_GAME||void 0!==window.swan,t.IS_BYTEDANCE_GAME=cc.sys.platform==cc.sys.BYTEDANCE_GAME||void 0!==window.tt,t.IS_HUAWEI_GAME=cc.sys.platform==cc.sys.HUAWEI_GAME||void 0!==window.hbs,t.IS_MEIZU_GAME=void 0!==window.mz_jsb,t.IS_UC_GAME=void 0!==window.uc,t.IS_KS_GAME=void 0!==window.ks,t.IS_HG_GAME=void 0!==window.hg,t.IS_XM_G426_Game=void 0!==window.xmG426,t.IS_MI_H5_Game=void 0!==window.mih5game,t.IS_HIPPOOBOX_Game=void 0!==window.hippoobox,t.IS_CYMiniplay_Game=void 0!==window.CYMiniplay,t.IS_GOOGLEPLAY=void 0!==window.GooglePlay,t.IS_RUSTORE_ANDROID=void 0!==window.rustore,t.IS_Y8_GAME=void 0!==window.Y8Game,t.IS_UG_GAME=void 0!==window.UGGame,t.IS_GamePix_GAME=void 0!==window.GamePixAd,t.IS_VidMate_GAME=void 0!==window.vidmateGame,t.IS_Jolibox_Game=void 0!==window.joliboxSdk,t.IS_GD_Game=void 0!==window.GDSDK,t}();i.default=o,cc._RF.pop()},{}],BaseDialog:[function(t,e,i){"use strict";cc._RF.push(e,"cecaetxs7VJI73t7onirhtG","BaseDialog");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("ComDialog"),c=t("SDKMgr"),l=t("BaseUI"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDelayShow=!0,e.showCustom=!1,e.openCallback=null,e.nodeAct=null,e.rootAct=null,e}return o(e,t),e.prototype.showInterstitial=function(){c.default.showDialogInterstitial(this.node),this.showCustom=!0,c.default.isShowCustom(5,!0)},e.prototype.onAdaptUI=function(){ymtApp.nodeMgr.adaptNode2MinScreen(this.root)},e.prototype.addDialogBg=function(t){return a(this,void 0,void 0,function(){var e;return r(this,function(i){switch(i.label){case 0:return this.comDialog?[3,2]:[4,ymtApp.resMgr.getPrefab(ymtApp.main.prefab.ComDialog)];case 1:e=i.sent(),this.comDialog=cc.instantiate(e),this.comDialog.parent=this.root,this.comDialog.zIndex=-1,i.label=2;case 2:return t.pos&&this.comDialog.setPosition(t.pos),this.comDialog.getComponent(s.default).setData(t),[2]}})})},e.prototype.setCloseVisible=function(t){this.comDialog&&this.comDialog.getComponent(s.default).setCloseVisible(t)},e.prototype.setTitle=function(t){if(this.comDialog)return this.comDialog.getComponent(s.default).setTitle(t)},e.prototype.open=function(){var e=this;t.prototype.open.call(this),ymtApp.gameController.addPause(),this.arg=this.arg||{},this.node.opacity=0,this.root.opacity=0,this.root.scale=0;var i=ymtApp.nodeMgr.getAdaptMinScale(this.root);this.nodeAct&&this.nodeAct.stop(),this.rootAct&&this.rootAct.stop(),this.nodeAct=cc.tween(this.node).to(.2,{opacity:255}).start(),this.rootAct=cc.tween(this.root).to(.2,{scale:i,opacity:255},cc.easeCubicActionOut()).call(function(){e.openCallback&&e.openCallback()}).start(),this.doCloseBtnAct()},e.prototype.doCloseBtnAct=function(){},e.prototype.doCloseAct=function(t){var e=this;this.nodeAct&&this.nodeAct.stop(),this.rootAct&&this.rootAct.stop(),this.nodeAct=cc.tween(this.node).to(.15,{opacity:0}).start(),this.rootAct=cc.tween(this.root).to(.2,{scale:.5}).call(function(){t&&t(),e.node.opacity=255,e.root.opacity=255,e.root.scale=ymtApp.nodeMgr.getAdaptMinScale(e.root)}).start()},e.prototype.close=function(){t.prototype.close.call(this),ymtApp.gameController.delPause(),this.showCustom&&c.default.isShowCustom(5,!1),this.showCustom=!1},e.prototype.setArg=function(t){this.arg=t,this.updateUI()},e.prototype.updateUI=function(){},n([p(cc.Node)],e.prototype,"comDialog",void 0),n([u],e)}(l.default);i.default=h,cc._RF.pop()},{BaseUI:"BaseUI",ComDialog:"ComDialog",SDKMgr:"SDKMgr"}],BaseGameSys:[function(t,e,i){"use strict";cc._RF.push(e,"7c51be5oA5LSL6UCGpPkNG9","BaseGameSys");var o=__awaiter,n=__generator;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("YmtAdManager"),s=t("AndroidAd"),c=t("HgAd"),l=t("ymt_enum"),d=t("KSAd"),u=t("MZAd"),p=t("OppoAd"),h=t("TTAd"),f=t("VIVOAd"),m=t("WxAd"),g=t("YmtConstant"),_=t("Enum"),y=t("HttpManager"),v=t("ymt_local_datas"),I=t("YmtLog"),A=t("mTimer"),T=t("YmtStringUtil"),E=t("TJ"),S=t("YmtUserData"),w=t("YmtUtils"),C=t("XiaoMiG426Ad"),M=t("XiaoMiH5Ad"),b=t("CYMiniplayAd"),D=t("RuStoreAndroidAd"),R=t("GlobalExtentions"),N=t("Y8GameAd"),L=t("UGGameAd"),G=t("GamePixAd"),O=t("GooglePlayAd"),P=t("VidMateH5Ad"),k=t("JoliboxAd"),B=t("GDGameAd"),U=function(){function t(){}return t.hgDebug=function(){return o(this,void 0,void 0,function(){return n(this,function(){return[2,new Promise(function(t,e){hg.initWebDebug({gameId:"yiqiqulvyou",user:2,env:"Test",countryCode:"ID",language:"key",success:function(){console.log("hago start webdebug success"),t(!0)},fail:function(t){console.log("hago start webdebug fail",t),e(!0)}})})]})})},t.initGame=function(t){return o(this,void 0,void 0,function(){var e,i,o,r,s=this;return n(this,function(n){switch(n.label){case 0:return R.globalExtentions,[4,a.LocalizeMgr.inst.loadDatas("data/configs")];case 1:for(e in n.sent(),g.default)(i=g.default[e])&&I.default.w(e,i);return o=function(){s.Ad().initAd(),t&&t()},r=function(){console.warn("afterLogin");var t=null;if(g.default.IS_VidMate_GAME||g.default.IS_Jolibox_Game||g.default.IS_GD_Game)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_GamePix_GAME)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_UG_GAME)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_Y8_GAME)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_RUSTORE_ANDROID)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_CYMiniplay_Game)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_MI_H5_Game)a.LocalizeMgr.inst.languageType=a.LanguageType.key;else if(g.default.IS_XM_G426_Game)a.LocalizeMgr.inst.languageType=a.LanguageType.cn;else if(g.default.IS_HG_GAME){switch(t=hg.getSystemInfoSync(),console.log("sysInfo:",t.language),t.language){case"en-us":a.LocalizeMgr.inst.languageType=a.LanguageType.key;break;case"id":a.LocalizeMgr.inst.languageType=a.LanguageType.id;break;case"vi":a.LocalizeMgr.inst.languageType=a.LanguageType.vi;break;case"pt-br":a.LocalizeMgr.inst.languageType=a.LanguageType.pt_br;break;default:a.LocalizeMgr.inst.languageType=a.LanguageType.key}a.LocalizeMgr.inst.languageType=a.LanguageType.key}else g.default.IS_WECHAT_GAME?(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){return{title:s.shareWord,imageUrl:s.sharePath}}),t=wx.getSystemInfoSync(),a.LocalizeMgr.inst.languageType=a.LanguageType.cn):g.default.IS_BYTEDANCE_GAME?(t=tt.getSystemInfoSync(),tt.showShareMenu({success:function(){console.log("\u5df2\u6210\u529f\u663e\u793a\u8f6c\u53d1\u6309\u94ae")},fail:function(t){console.log("showShareMenu \u8c03\u7528\u5931\u8d25",t.errMsg)},complete:function(){console.log("showShareMenu \u8c03\u7528\u5b8c\u6210")}}),tt.onShareAppMessage(function(t){return console.log(t.channel),{title:s.shareWord[1],imageUrl:s.sharePath,success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(t){console.log("\u5206\u4eab\u5931\u8d25",t)}}})):g.default.IS_BAIDU_GAME?t=swan.getSystemInfoSync():g.default.IS_QQ_GAME?(qq.showShareMenu({withShareTicket:!0}),qq.onShareAppMessage(function(){return{title:s.shareWord,imageUrl:s.sharePath}}),t=qq.getSystemInfoSync()):g.default.IS_OPPO_GAME?t=qg.getSystemInfoSync():g.default.IS_VIVO_GAME?t=qg.getSystemInfoSync():g.default.IS_UC_GAME?t=uc.getSystemInfoSync():g.default.IS_MEIZU_GAME?t=qg.getSystemInfoSync():g.default.IS_KS_GAME?t=ks.getSystemInfoSync():a.LocalizeMgr.inst.languageType=a.LanguageType.key;if(I.default.l("\u5f53\u524d\u8bed\u8a00\uff1a",a.LocalizeMgr.inst.languageType),t&&(s.screenWidth=t.screenWidth,s.screenHeight=t.screenHeight,window.cc?cc.winSize.width<=cc.winSize.height?s.scale=s.screenWidth/cc.winSize.width:s.scale=s.screenHeight/cc.winSize.height:window.Laya,s.isPhoneX=-1!=t.model.search("iPhone X")||-1!=t.model.search("iPhone 11")),g.default.SDK_TYPE==_.e_sdk_type.HS&&0==g.default.IS_HG_GAME&&s.useNetConfig){var e=g.default.BASE_URL+"games/config/"+g.default.PROGECT_NAME+"/"+s.getPlatformName()+"/configs"+s.gVersion()+".json";y.default.send(e).then(function(t){s.parseData(t),o&&o()}).catch(function(){s.parseData(v.YMT_LOCAL_DATAS),o&&o()})}else s.parseData(v.YMT_LOCAL_DATAS),o&&o()},g.default.IS_GamePix_GAME||g.default.IS_UG_GAME||g.default.IS_MI_H5_Game||g.default.IS_Y8_GAME||g.default.IS_GOOGLEPLAY||g.default.IS_VidMate_GAME||g.default.IS_Jolibox_Game||g.default.IS_GD_Game?r():g.default.IS_OPPO_GAME||g.default.IS_VIVO_GAME?(this.addTouchListener(),this.Ad().login()):g.default.IS_BYTEDANCE_GAME||(g.default.IS_HG_GAME?(this.Ad().isServer=!1,this.Ad().login(function(t){var e=t.userInfo;s.userInfo.openid=e.openid,s.userInfo.avatarUrl=e.avatarUrl,s.userInfo.nickName=e.nickName,s.userInfo.token=t.token,s.userInfo.uid=t.userId,I.default.l("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f:",s.userInfo),r()})):(g.default.IS_WEB_GAME||g.default.IS_ANDROID||g.default.IS_IOS)&&r()),[2]}})})},t.getPlatformName=function(){return g.default.IS_HG_GAME?"hg":g.default.IS_WECHAT_GAME?"wx":g.default.IS_VIVO_GAME?"vivo":g.default.IS_OPPO_GAME?"oppo":g.default.IS_VIVO_GAME?"vivo":g.default.IS_BYTEDANCE_GAME?"tt":g.default.IS_HUAWEI_GAME?"hw":g.default.IS_QQ_GAME?"qq":g.default.IS_BAIDU_GAME?"bd":"other"},t.parseData=function(t){if(null!=t.is_shen_he&&(this.isShenHe=1==t.is_shen_he),t.banner_update_time&&w.default.isNumber(t.banner_update_time)?this.adInfo.bannerUpdateTime=Number(t.banner_update_time):t.native_refresh&&w.default.isNumber(t.native_refresh)&&(this.adInfo.bannerUpdateTime=Number(t.native_refresh)),t.banner_update_num&&(this.adInfo.bannerUpdateNum=t.banner_update_num),t.adunit_banner&&""!=T.default.trim(t.adunit_banner)&&(this.adInfo.adunit_banner=T.default.toArray(t.adunit_banner)),t.adunit_native_banner&&""!=T.default.trim(t.adunit_native_banner)&&(this.adInfo.adunit_native[l.ad_native_type.banner]=t.adunit_native_banner),t.adunit_intestital&&""!=T.default.trim(t.adunit_intestital)&&(this.adInfo.adunit_intestital=T.default.trim(t.adunit_intestital)),t.adunit_native_intestital&&""!=T.default.trim(t.adunit_native_intestital)&&(this.adInfo.adunit_native[l.ad_native_type.interstitial]=t.adunit_native_intestital),t.adunit_appid&&""!=T.default.trim(t.adunit_appid)&&(this.adInfo.adunit_appid=T.default.trim(t.adunit_appid)),t.adunit_video&&""!=T.default.trim(t.adunit_video)&&(this.adInfo.adunit_video=T.default.trim(t.adunit_video)),t.adunit_native&&""!=T.default.trim(t.adunit_native)&&(this.adInfo.adunit_native[l.ad_native_type.inner_interstitial]=t.adunit_native),t.adunit_native_icon&&""!=T.default.trim(t.adunit_native_icon)&&(this.adInfo.adunit_native[l.ad_native_type.native_icon]=T.default.trim(t.adunit_native_icon)),t.adunit_custom_banner&&""!=T.default.trim(t.adunit_custom_banner)&&(this.adInfo.adunit_custom_banner=T.default.toArray(t.adunit_custom_banner)),t.adunit_custom_inter&&""!=T.default.trim(t.adunit_custom_inter)&&(this.adInfo.adunit_custom_inter=T.default.trim(t.adunit_custom_inter)),t.share&&(this.shareWord=T.default.toArray(t.share)),t.sharePath&&(this.sharePath=t.sharePath),t.banner_delay&&w.default.isNumber(t.banner_delay)&&(this.adInfo.bannerDelay=Number(t.banner_delay)),t.inte2&&(this.adInfo.showInterRto=t.inte2),t.inte1&&(this.adInfo.showInteNormalRto=t.inte1),t.forceclick&&(this.adInfo.forceClickRto=t.forceclick),t.native_percent?this.adInfo.closeClickRto=t.native_percent:t.cpwc&&(this.adInfo.closeClickRto=t.cpwc),t.intetick&&(this.adInfo.interTick=t.intetick),t.switch_pool&&(this.adInfo.switchPool=1==t.switch_pool),this.canShowBanner=1==t.can_show_banner,this.canShowInter=1==t.can_show_inter,t.of_oppo_sleep&&(this.btnDelay=t.of_oppo_sleep),t.recommedPath)for(var e=0,i=T.default.toArray(t.recommedPath);e<i.length;e++){var o=i[e];this.recommedList.push({appId:o})}t.city_list&&(this.cityList=T.default.toArray(t.city_list)),t.toggleReward&&(this.toggleReward=1==t.toggleReward),t.toggleFuhuo&&(this.adInfo.nativeInnerInstitialClickWarp=t.native_inner_institial_click_warp),t.toggleTiShi&&(this.toggleTiShi=t.toggleTiShi),t.native_banner_click_warp&&(this.adInfo.nativeBannerClickWarp=t.native_banner_click_warp),t.adunit_portal&&""!=T.default.trim(t.adunit_portal)&&(this.adInfo.adunit_portal=T.default.trim(t.adunit_portal)),t.adunit_game_banner&&""!=T.default.trim(t.adunit_game_banner)&&(this.adInfo.adunit_game_banner=T.default.trim(t.adunit_game_banner)),t.show_game_portal&&(this.adInfo.showGamePortal=1==t.show_game_portal),t.click_native_time&&(this.adInfo.clickNativeTime=t.click_native_time),t.mi_ad_gap_limit&&(this.adInfo.miAdGapLimt=t.mi_ad_gap_limit),t.QLSP&&(this.adInfo.QLSP=1==t.QLSP),t.baoXiangONOFF&&(this.adInfo.boxSwitch=t.baoXiangONOFF),t.hasOwnProperty("show_authorize")&&(this.isShowAuthorize=1==t.show_authorize),t.hasOwnProperty("can_play_refuse")&&(this.canPlayWithRefuse=1==t.can_play_refuse),t.hasOwnProperty("nativead_limit_count")&&(this.adInfo.nativeAdLimitCount=t.nativead_limit_count),t.inter_delay_time&&t.hasOwnProperty("inter_delay_time")&&(this.adInfo.interDelayTime=t.inter_delay_time),t.showbanner&&t.hasOwnProperty("showbanner")&&(this.adInfo.showBanner=t.showbanner),this.adInfo.cpzs=1==t.cpzs,t.ys_open&&t.hasOwnProperty("ys_open")&&(this.adInfo.videoToAdRto=t.ys_open),t.ZJManwc&&(this.warpRto.ZJManwc=t.ZJManwc),t.YXZanwc&&(this.warpRto.YXZanwc=t.YXZanwc),t.GQYanwc&&(this.warpRto.GQYanwc=t.GQYanwc),t.GQYanwc2&&(this.warpRto.GQYanwc2=t.GQYanwc2),t.GQYanwc3&&(this.warpRto.GQYanwc3=t.GQYanwc3),t.GQYanwc4&&(this.warpRto.GQYanwc4=t.GQYanwc4),t.PFSYYanwc&&(this.warpRto.PFSYYanwc=t.PFSYYanwc),t.WZwc&&(this.warpRto.WZwc=t.WZwc),t.WZwc2&&(this.warpRto.WZwc2=t.WZwc2),t.WZwc3&&(this.warpRto.WZwc3=t.WZwc3),t.WZwc4&&(this.warpRto.WZwc4=t.WZwc4),t.WZwc5&&(this.warpRto.WZwc5=t.WZwc5),t.WZwc6&&(this.warpRto.WZwc6=t.WZwc6),t.WZwc7&&(this.warpRto.WZwc7=t.WZwc7),t.WZwc8&&(this.warpRto.WZwc8=t.WZwc8),t.playnumshare&&!isNaN(t.playnumshare)&&(this.playNumShare=Number(t.playnumshare)),this.canReportOcpx=1==t.report_ocpx,this.showCompany=1==t.show_com,this.adInfo.showCustomBanner=1==t.show_custom_banner,this.adInfo.showCustomInner=1==t.show_custom_inner,t.hasOwnProperty("jumpNativeWaitClick")&&(this.jumpNativeWaitClick=t.jumpNativeWaitClick),t.hasOwnProperty("filterYLH")&&(this.filterYLH=1==t.filterYLH)},t.Ad=function(){if(g.default.IS_GD_Game)return B.default.getInstance();if(g.default.IS_Jolibox_Game)return k.default.getInstance();if(g.default.IS_VidMate_GAME)return P.default.getInstance();if(g.default.IS_GOOGLEPLAY)return O.default.getInstance();if(g.default.IS_GamePix_GAME)return G.default.getInstance();if(g.default.IS_UG_GAME)return L.default.getInstance();if(g.default.IS_Y8_GAME)return N.default.getInstance();if(g.default.IS_RUSTORE_ANDROID)return D.default.getInstance();if(g.default.IS_CYMiniplay_Game)return b.default.getInstance();if(g.default.IS_MI_H5_Game)return M.default.getInstance();if(g.default.IS_XM_G426_Game)return C.default.getInstance();if(g.default.IS_HG_GAME)return c.default.getInstance();if(g.default.IS_WECHAT_GAME)return m.default.getInstance();if(!g.default.IS_OPPO_GAME)return g.default.IS_VIVO_GAME?f.default.getInstance():g.default.IS_MEIZU_GAME?u.default.getInstance():g.default.IS_KS_GAME?d.default.getInstance():g.default.IS_ANDROID?s.default.getInstance():g.default.IS_BYTEDANCE_GAME?h.default.getInstance():r.default.getInstance();if(g.default.SDK_TYPE==_.e_sdk_type.QL);else if(g.default.SDK_TYPE!=_.e_sdk_type.YDHW)return p.default.getInstance()},t.shareGame=function(t){var e=this;if(g.default.IS_WECHAT_GAME){wx.shareAppMessage({title:this.shareWord[0],imageUrl:this.sharePath});var i=(new Date).getTime();wx.onShow(function o(){(new Date).getTime()-i>=3e3?t&&t(!0):wx.showModal({title:"\u63d0\u793a",content:"\u8be5\u7fa4\u5df2\u5206\u4eab\u8fc7,\u8bf7\u6362\u4e2a\u7fa4",showCancel:!0,cancelText:"\u53d6\u6d88",cancelColor:"#000",confirmText:"\u53bb\u5206\u4eab",confirmColor:"#08f",success:function(i){i.confirm?e.shareGame(t):i.cancel&&t&&t(!1)}}),wx.offShow(o)})}else g.default.IS_QQ_GAME?qq.shareAppMessage({title:this.shareWord[0],imageUrl:this.sharePath,query:"",success:function(){t&&t(!0)},fail:function(){t&&t(!1)}}):g.default.IS_UC_GAME?uc.shareAppMessage():g.default.IS_BYTEDANCE_GAME&&tt.shareAppMessage({title:this.shareWord[0],desc:this.shareWord[1],imageUrl:this.sharePath,query:"",success:function(){console.log("\u5206\u4eab\u6210\u529f"),t&&t(!0)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),t&&t(!1)}})},t.sendEvent=function(t,e){void 0===e&&(e=null),g.default.IS_WECHAT_GAME||(g.default.IS_ANDROID||g.default.IS_IOS)&&w.default.callMethod("onEvent",t?t.toString():""),null!=g.default.APPID&&""!=g.default.APPID.replace(" ","")&&E.TJ.DevKit.ReYun.Event(null,t)},t.levelStart=function(t){g.default.IS_WECHAT_GAME||g.default.IS_OPPO_GAME||g.default.IS_VIVO_GAME||(g.default.IS_ANDROID||g.default.IS_IOS)&&w.default.callMethod("levelStart",t?t.toString():""),null!=g.default.APPID&&""!=g.default.APPID.replace(" ","")&&E.TJ.DevKit.ReYun.Event(null,"\u7b2c"+t+"\u5173\u5f00\u59cb")},t.levelEnd=function(t,e){void 0===e&&(e=!1),g.default.IS_WECHAT_GAME||g.default.IS_OPPO_GAME||g.default.IS_VIVO_GAME||(g.default.IS_ANDROID||g.default.IS_IOS)&&w.default.callMethod("levelEnd",t?t.toString():""),null!=g.default.APPID&&""!=g.default.APPID.replace(" ","")&&E.TJ.DevKit.ReYun.Event(null,"\u7b2c"+t+"\u5173\u7ed3\u675f-"+(e?"\u5b8c\u6210":"\u5931\u8d25"))},t.vibrate=function(t){void 0===t&&(t=!1),S.default.vibrate&&(g.default.IS_WECHAT_GAME?wx.vibrateShort&&!t?wx.vibrateShort():wx.vibrateLong():g.default.IS_OPPO_GAME||g.default.IS_VIVO_GAME?qg.vibrateShort&&!t?qg.vibrateShort({}):qg.vibrateLong({}):g.default.IS_QQ_GAME?qq.vibrateShort&&!t?qq.vibrateShort({}):qq.vibrateLong({}):g.default.IS_BYTEDANCE_GAME?tt.vibrateShort&&!t?tt.vibrateShort({}):tt.vibrateLong({}):g.default.IS_BAIDU_GAME?swan.vibrateShort&&!t?swan.vibrateShort({}):swan.vibrateLong({}):(g.default.IS_ANDROID||g.default.IS_IOS)&&w.default.callMethod("vibrate",!t))},t.loadGameComplete=function(){if(!this.isLoadGameComplete){if(this.loadGameProgress(100),I.default.w("\u6e38\u620f\u52a0\u8f7d\u5b8c\u6210\u6253\u70b9",new Date),g.default.IS_HG_GAME)hg.gameLoadResult&&hg.gameLoadResult({code:0});else if(g.default.IS_MI_H5_Game){var t=window;t.funmax&&t.funmax.loadReady(),h5splash.hideLoading()}else g.default.IS_Jolibox_Game?window.joliboxSdk.runtime.loadFinished():g.default.IS_GD_Game?window.GDSDK.loadGameComplete():g.default.IS_Y8_GAME&&h5splash.hideLoading();this.isLoadGameComplete=!0}},t.loadGameProgress=function(t){g.default.IS_Jolibox_Game&&(window.joliboxSdk.runtime.notifyLoadProgress(t.toFixed(0)),console.warn("notifyLoadProgress "+t.toFixed(0)))},t.checkIP=function(){return new Promise(function(t){t(!0)})},t.getDeviceId=function(){return new Promise(function(t){var e,i=cc.sys.localStorage.getItem("__deviceid__");if(null!=i&&""!==i&&void 0!==i)return t(i);e=S.default.uid,cc.sys.localStorage.setItem("__deviceid__",e),t(e)})},t.loopShowAd=function(t,e,i){var o=this;void 0===t&&(t=_.AUTO_AD_TYPE.NO),this.adInfo.clickNativeTime>0&&!this.isShenHe&&!this.isShieldArea&&(this.adInfo.showCustomInner&&this.adInfo.showCustomBanner&&(t=_.AUTO_AD_TYPE.INTER),this.loopShowAdTimer||(this.loopShowAdTimer=new A.default),this.loopShowAdTimer.clear(),this.loopShowAdTimer.once(function(){o.showAd(t,e,i)},1e3*this.adInfo.clickNativeTime))},t.loopShowAdClear=function(){this.loopShowAdTimer&&this.loopShowAdTimer.clear()},t.showAd=function(t,e,i){var o=this;if(t==_.AUTO_AD_TYPE.CLICK){if(this.filterYLH)for(var n=this.Ad().getAllNativeData(),a=n.length,r=a-Math.ceil(a/3),s=0,c=a-1;c>=0;c--)this.Ad().isYLH(n[c])&&++s>r&&this.Ad().removeNativeData(n[c]);this.loopShowNativeData=this.Ad().getNativeData(),0==this.jumpNativeWaitClick?(this.Ad().clickNative(this.loopShowNativeData),this.loopShowAd(t)):1==this.jumpNativeWaitClick?this.nextTimeClick=!0:2==this.jumpNativeWaitClick&&(this.Ad().isYLH(this.loopShowNativeData)?this.nextTimeClick=!0:(this.Ad().clickNative(this.loopShowNativeData),this.loopShowAd(t)))}else t==_.AUTO_AD_TYPE.INTER?this.Ad().showNativeInterstitial(function(){e&&e()},function(){i&&i(),o.loopShowAd(t,e,i)}):t==_.AUTO_AD_TYPE.VIDEO&&this.Ad().showVideo(function(){o.loopShowAd(t)})},t.gVersion=function(){return g.default.IS_ANDROID||g.default.IS_IOS?w.default.callMethod("getGVersion"):g.default.GAME_VERSION_NAME},t.uploadOcpx=function(){},t.addTouchListener=function(){},t.useNetConfig=!1,t.bannerH=140,t.rewardType=_.REWARD_TYPE.VIDEO,t.scale=1,t.screenWidth=0,t.screenHeight=0,t.isPhoneX=!1,t.toggleReward=0,t.toggleTiShi=!1,t.canShowBanner=!0,t.canShowInter=!0,t.userInfo={uid:"",openid:"",avatarUrl:"",nickName:"",token:""},t.btnDelay=0,t.adInfo={adunit_banner:[],adunit_native:[],adunit_intestital:null,adunit_video:null,adunit_custom_banner:null,adunit_custom_inter:null,adunit_appid:null,adunit_portal:null,adunit_game_banner:null,showGamePortal:!0,bannerUpdateTime:10,bannerUpdateNum:0,customUpdateTime:30,bannerDelay:0,showInterRto:100,showInteNormalRto:100,forceClickRto:-1,nativeInnerInstitialClickWarp:-1,nativeBannerClickWarp:-1,interTick:0,closeClickRto:-1,clickNativeTime:0,switchPool:!0,miAdGapLimt:0,QLSP:!1,bannerMoveTime:0,boxSwitch:0,nativeAdLimitCount:5,interDelayTime:1,showBanner:0,cpzs:!1,videoToAdRto:0,showCustomBanner:!1,showCustomInner:!1},t.warpRto={ZJManwc:0,YXZanwc:0,GQYanwc:0,GQYanwc2:0,GQYanwc3:0,GQYanwc4:0,PFSYYanwc:0,WZwc:0,WZwc2:0,WZwc3:0,WZwc4:0,WZwc5:0,WZwc6:0,WZwc7:0,WZwc8:0},t.recBtnInfo={SPDC:!1,MLKG:!1,XFDD:!1,CBL:!1,HYRWGD:!1,RMTJ:!1,BKYX:!1,JRXY:!1,RMPH:!1,JSY:!1,GDYX:!1,DL:!1,BXKG:!1},t.isShenHe=!1,t.isShieldArea=!0,t.isShieldScene=!1,t.shareWord=["","",""],t.sharePath="",t.cityList=[],t.sceneList=[],t.lowerPhoneType=4,t.recommedList=[],t.isShowAuthorize=!1,t.canPlayWithRefuse=!1,t.playNumShare=0,t.showCompany=!1,t.jumpNativeWaitClick=2,t.filterYLH=!1,t.isLoadGameComplete=!1,t.loopShowNativeData=null,t.gameInfo={package:"",name:"",versionName:"",versionCode:""},t.canReportOcpx=!1,t.nextTimeClick=!1,t}();i.default=U,cc._RF.pop()},{AndroidAd:"AndroidAd",CYMiniplayAd:"CYMiniplayAd",Enum:"Enum",GDGameAd:"GDGameAd",GamePixAd:"GamePixAd",GlobalExtentions:"GlobalExtentions",GooglePlayAd:"GooglePlayAd",HgAd:"HgAd",HttpManager:"HttpManager",JoliboxAd:"JoliboxAd",KSAd:"KSAd",LocalizeMgr:"LocalizeMgr",MZAd:"MZAd",OppoAd:"OppoAd",RuStoreAndroidAd:"RuStoreAndroidAd",TJ:"TJ",TTAd:"TTAd",UGGameAd:"UGGameAd",VIVOAd:"VIVOAd",VidMateH5Ad:"VidMateH5Ad",WxAd:"WxAd",XiaoMiG426Ad:"XiaoMiG426Ad",XiaoMiH5Ad:"XiaoMiH5Ad",Y8GameAd:"Y8GameAd",YmtAdManager:"YmtAdManager",YmtConstant:"YmtConstant",YmtLog:"YmtLog",YmtStringUtil:"YmtStringUtil",YmtUserData:"YmtUserData",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum",ymt_local_datas:"ymt_local_datas"}],BasePage:[function(t,e,i){"use strict";cc._RF.push(e,"37e4dTIauFDRKkwj0HROk3u","BasePage");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=cc._decorator,s=r.ccclass;r.property;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onShow=function(){this.pageShow()},e.prototype.pageShow=function(){},n([s],e)}(a.default);i.default=c,cc._RF.pop()},{BaseComponent:"BaseComponent"}],BaseUI:[function(t,e,i){"use strict";cc._RF.push(e,"502d9q+1otBC6RAvJTvZK/b","BaseUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.root=null,e.arg={},e}return o(e,t),e.prototype.showInterstitial=function(){},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.onAdaptUI()},e.prototype.onAdaptUI=function(){ymtApp.nodeMgr.adaptNode2MinScreen(this.root,!0)},e.prototype.setArg=function(t){this.arg=t,this.updateUI()},e.prototype.updateUI=function(){},e.prototype.close=function(){t.prototype.close.call(this),ymtApp.viewMgr.hideCurrency(this.name)},n([c(cc.Node)],e.prototype,"root",void 0),n([s],e)}(a.default);i.default=l,cc._RF.pop()},{BaseComponent:"BaseComponent"}],BaseUserData:[function(t,e,i){"use strict";cc._RF.push(e,"a38820n8vtE7Kx67MMZvXfq","BaseUserData"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("Enum"),n=t("YmtUtils"),a=function(){function t(){}return Object.defineProperty(t,"coin",{get:function(){return n.default.getItem("COIN",0)},set:function(t){n.default.setItem("COIN",t),n.default.emit(o.EVENT_TYPE.CHANGE_COIN)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"power",{get:function(){return n.default.getItem("POWER",10)},set:function(t){n.default.setItem("POWER",t),n.default.emit(o.EVENT_TYPE.CHANGE_POWER)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"powerTime",{get:function(){return n.default.getItem("POWERTIME",0)},set:function(t){n.default.setItem("POWERTIME",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"maxLevel",{get:function(){return n.default.getItem("MAXLEVEL",0)},set:function(t){n.default.setItem("MAXLEVEL",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"signDay",{get:function(){return n.default.getItem("SIGNDAY",0)},set:function(t){n.default.setItem("SIGNDAY",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"signNum",{get:function(){return n.default.getItem("SIGNNUM",0)},set:function(t){n.default.setItem("SIGNNUM",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"skinInfo",{get:function(){return n.default.getItem("SKININFO",{})},set:function(t){n.default.setItem("SKININFO",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"curSkinUsed",{get:function(){return n.default.getItem("CURSKINUSED",null)},set:function(t){n.default.setItem("CURSKINUSED",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"musicPlay",{get:function(){return n.default.getItem("MUSIC",!0)},set:function(t){n.default.setItem("MUSIC",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"soundPlay",{get:function(){return n.default.getItem("SOUND",!0)},set:function(t){n.default.setItem("SOUND",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"vibrate",{get:function(){return n.default.getItem("VIBRATE",!0)},set:function(t){n.default.setItem("VIBRATE",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isNewPlay",{get:function(){return n.default.getItem("NEWPLAY",!0)},set:function(t){n.default.setItem("NEWPLAY",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"uid",{get:function(){var t=n.default.getItem("UUID",null);if(null==t){var e=(new Date).getTime(),i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});n.default.setItem("UUID",i)}return t},enumerable:!1,configurable:!0}),t}();i.default=a,cc._RF.pop()},{Enum:"Enum",YmtUtils:"YmtUtils"}],BoxUI:[function(t,e,i){"use strict";cc._RF.push(e,"2c4b2ok2yZDGKmm+tkg4DFC","BoxUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labDesc=null,e.btnStart=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnStart,this.onClickStart,this)},e.prototype.open=function(){t.prototype.open.call(this),this.arg=this.arg||{},this.source=this.arg.source||"UNKNOWN",this.addDialogBg({hideTitle:!0,size:cc.size(600,538),closeCb:this.onClickClose.bind(this)})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(s.UI.BOX)},e.prototype.onClickStart=function(){ymtApp.gameController.startGame(r.GAME_TYPE.COMMON)},n([d(cc.Label)],e.prototype,"labDesc",void 0),n([d(cc.Node)],e.prototype,"btnStart",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",MainConfig:"MainConfig"}],BoxView:[function(t,e,i){"use strict";cc._RF.push(e,"a7d6dsLWKpBGJYCj/oAxC6w","BoxView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("SDKMgr"),s=t("UIMgr"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBox=null,e.btnClick=null,e.progressBar=null,e.reduceValue=1,e.addPer=1,e.showAdPoint=[],e.bannerTime=0,e.shakeTime=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnClick,this.onClickBtn,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.GAME_SHOW,this.onGameShow,this)},e.prototype.open=function(){this.progressBar.progress=0,r.default.bannerVisible(!1),this.shakeTime=2},e.prototype.shakeBox=function(){this.boxTween&&this.boxTween.stop(),this.sprBox.angle=0,this.reduceValue=r.default.getBxReduceValue(),this.addPer=r.default.getBxClickAddPer()/100,this.showAdPoint=r.default.getBxShowAdPoint(),this.boxTween=cc.tween(this.sprBox).to(.1,{angle:30}).to(.2,{angle:-30}).to(.1,{angle:0}).start()},e.prototype.onClickBtn=function(){this.shakeBox(),this.shakeTime=2;for(var t=0;t<this.showAdPoint.length;t++){var e=Number(this.showAdPoint[t])/100;if(this.progressBar.progress<e&&e<=this.progressBar.progress+this.addPer){r.default.bannerVisible(!0,r.default.getBxBottomAdType()),this.bannerTime=1;break}}this.progressBar.progress+=this.addPer,this.progressBar.progress>=1&&this.onBack()},e.prototype.onGameShow=function(){this.onBack()},e.prototype.onBack=function(){this.removeAllListener(),this.shakeTime=0,this.bannerTime=0,r.default.bannerVisible(!1,r.default.getBxBottomAdType()),s.default.nextProcess()},e.prototype.update=function(t){var e=t*this.reduceValue;this.progressBar.progress>0&&(this.progressBar.progress-=e/100,this.progressBar.progress<0&&(this.progressBar.progress=0)),this.shakeTime>0&&(this.shakeTime-=t,this.shakeTime<=0&&(this.shakeBox(),this.shakeTime=2)),this.bannerTime>0&&(this.bannerTime-=t,this.bannerTime<=0&&r.default.bannerVisible(!1,r.default.getBxBottomAdType()))},n([d(cc.Node)],e.prototype,"sprBox",void 0),n([d(cc.Node)],e.prototype,"btnClick",void 0),n([d(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseUI:"BaseUI",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],BtnMore:[function(t,e,i){"use strict";cc._RF.push(e,"7631b9Hj1xCVY4SRf1Ryafq","BtnMore");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("MainConfig"),s=t("SDKMgr"),c=cc._decorator,l=c.ccclass;c.property;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasRoot=!1,e}return o(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.onClick(this.node,this.onClickSelf,this),this.loadGameIcon()},e.prototype.loadGameIcon=function(){for(var t=s.default.getExportData(),e=0;e<t.length;e++)ymtApp.resMgr.loadRemote(t[e].images,null)},e.prototype.onClickSelf=function(){ymtApp.viewMgr.showView(r.UI.MORE_GAME_VIEW)},n([l],e)}(a.default);i.default=d,cc._RF.pop()},{BaseComponent:"BaseComponent",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],BtnRedPacket:[function(t,e,i){"use strict";cc._RF.push(e,"25eb4vbJZpAbaK2mm0brlDS","BtnRedPacket");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("SDKEnum"),s=t("SDKMgr"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprVideo=null,e.index=null,e.callback=null,e.isVideo=!1,e.moveX=1,e.moveY=1,e}return o(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.onClick(this.node,this.onClickSelf,this)},e.prototype.setData=function(t,e){this.index=t,this.callback=e},e.prototype.updateView=function(){if(this.isVideo=!1,s.default.confData.float_red_video_per&&s.default.confData.float_red_video_per>0){var t=Math.ceil(100*Math.random());this.isVideo=t<=s.default.confData.float_red_video_per}this.sprVideo.active=this.isVideo,this.node.x=Math.random()*((this.node.parent.width-this.node.width)/2)*(Math.random()>.5?1:-1),this.node.y=Math.random()*((this.node.parent.height-this.node.height)/2)*(Math.random()>.5?1:-1)},e.prototype.onClickSelf=function(){var t=this;this.isVideo?s.default.showVideo(function(){t.callback&&t.callback(t.index)},null,null,r.VIDEO_TYPE.FLOAT_RED):this.callback&&this.callback(this.index)},e.prototype.update=function(){(this.node.x>(this.node.parent.width-this.node.width)/2||this.node.x<-(this.node.parent.width-this.node.width)/2)&&(this.moveX=-1*this.moveX),(this.node.y>(this.node.parent.height-this.node.height)/2||this.node.y<-(this.node.parent.height-this.node.height)/2)&&(this.moveY=-1*this.moveY),this.node.x+=this.moveX,this.node.y+=this.moveY},n([d(cc.Node)],e.prototype,"sprVideo",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseComponent:"BaseComponent",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr"}],CYMiniplayAd:[function(t,e,i){"use strict";cc._RF.push(e,"df183RLl8FETohynPw8etbg","CYMiniplayAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){window.CYMiniplay&&console.error("\u6682\u6ca1banner\u5b9e\u73b0: showBanner")},e.prototype.hideBanner=function(){window.CYMiniplay&&console.error("\u6682\u6ca1banner\u5b9e\u73b0: hideBanner")},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){},e.prototype.showVideo=function(t){var e=this;this.videocallback=t,miniplay.isReady()?(cc.audioEngine.pauseAll(),miniplay.showRewardAsync().then(function(){console.log("showReward success"),e.videocallback&&e.videocallback(!0),cc.audioEngine.resumeAll()}).catch(function(t){console.log("showReward fail: "+t),e.videocallback&&e.videocallback(!1),cc.audioEngine.resumeAll()})):(console.log("reward ad is not ready"),this.videocallback&&this.videocallback(!1))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(t,e,i,o){var a=this;miniplay.isReady()?(cc.audioEngine.pauseAll(),setTimeout(function(){a.tmpShow=a.willShowBanner,a.hideBanner(),a.willShowBanner=a.tmpShow,console.error("\u63d2\u5c4f beforeAd",a.willShowBanner)},200),miniplay.showInterstitialAsync().then(function(){console.log("showInterstitial success"),cc.audioEngine.resumeAll(),setTimeout(function(){a.canShowInterstitialAd=!0},a.interstitialAdDelay),console.error("\u63d2\u5c4f afterAd",a.willShowBanner),a.willShowBanner&&a.showBanner()}).catch(function(t){console.log("showInterstitial fail: "+t),cc.audioEngine.resumeAll()})):console.log("interstitial ad is not ready"),n.default.w("==\u64ad\u653e\u63d2\u5c4f==",i,o),window.adsbygoogle&&window.adBreak&&window.adBreak({type:"browse",name:o,beforeAd:function(){a.canShowInterstitialAd=!1,cc.audioEngine.pauseAll(),setTimeout(function(){a.tmpShow=a.willShowBanner,a.hideBanner(),a.willShowBanner=a.tmpShow,console.error("\u63d2\u5c4f beforeAd",a.willShowBanner)},200)},afterAd:function(){setTimeout(function(){a.canShowInterstitialAd=!0},a.interstitialAdDelay),cc.audioEngine.resumeAll(),console.error("\u63d2\u5c4f afterAd",a.willShowBanner),a.willShowBanner&&a.showBanner()}})},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.e("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],CenterLayout:[function(t,e,i){"use strict";cc._RF.push(e,"3eab6b0oK5ByJXDT1iDMwyA","CenterLayout");var o,n=__extends,a=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var r,s=cc._decorator,c=s.ccclass,l=s.inspector,d=s.property,u=s.disallowMultiple,p=s.menu;(r=o||(o={}))[r.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",r[r.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",r[r.CENTER_TO_SIDE=2]="CENTER_TO_SIDE";var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.centerHorizontalDirection=o.CENTER_TO_SIDE,e}return n(e,t),e.prototype._doLayoutHorizontally=function(t,e,i,n){var a=this.node.getAnchorPoint(),r=this.node.children,s=1,c=this.paddingLeft,l=-a.x*t;this.centerHorizontalDirection===o.RIGHT_TO_LEFT&&(s=-1,l=(1-a.x)*t,c=this.paddingRight);for(var d=l+s*c-s*this.spacingX,u=0,p=0,h=0,f=0,m=0,g=0,_=0,y=0;y<r.length;++y)(I=r[y]).activeInHierarchy&&_++;var v=this.cellSize.width;for(this.type!==cc.Layout.Type.GRID&&this.resizeMode===cc.Layout.ResizeMode.CHILDREN&&(v=(t-(this.paddingLeft+this.paddingRight)-(_-1)*this.spacingX)/_),y=0;y<r.length;++y){var I=r[y],A=this._getUsedScaleValue(I.scaleX),T=this._getUsedScaleValue(I.scaleY);if(I.activeInHierarchy){this.resizeMode===cc.Layout.ResizeMode.CHILDREN&&(I.width=v/A,this.type===cc.Layout.Type.GRID&&(I.height=this.cellSize.height/T));var E=I.anchorX,S=I.width*A,w=I.height*T;h>p&&(p=h),w>=p&&(h=p,p=w,g=I.getAnchorPoint().y),this.centerHorizontalDirection===o.RIGHT_TO_LEFT&&(E=1-I.anchorX),d=d+s*E*S+s*this.spacingX;var C=s*(1-E)*S;if(e){var M=d+C+s*(s>0?this.paddingRight:this.paddingLeft),b=this.centerHorizontalDirection!==o.RIGHT_TO_LEFT&&M>(1-a.x)*t,D=this.centerHorizontalDirection===o.RIGHT_TO_LEFT&&M<-a.x*t;(b||D)&&(w>=p?(0===h&&(h=p),u+=h,h=p):(u+=p,h=w,p=0),d=l+s*(c+E*S),f++)}var R,N=i(I,u,f);t>=S+this.paddingLeft+this.paddingRight&&n&&I.setPosition(cc.v2(d,N));var L=1,G=0===p?w:p;this.verticalDirection===cc.Layout.VerticalDirection.TOP_TO_BOTTOM?(m=m||this.node.height,(R=N+(L=-1)*(G*g+this.paddingBottom))<m&&(m=R)):(m=m||-this.node.height,(R=N+L*(G*g+this.paddingTop))>m&&(m=R)),d+=C}}if(r.length>0&&this.centerHorizontalDirection==o.CENTER_TO_SIDE){var O=(.5-a.x)*t,P=0,k=-1,B=Number.MIN_SAFE_INTEGER;s=-1;for(var U=r.length-1;U>=0;U--){var V=r[U];A=this._getUsedScaleValue(V.scaleX),E=V.anchorX,S=V.width*A,Math.abs(V.y-B)>1&&(B=V.y,P=V.x+(1-E)*S+this.paddingRight,k=O+.5*(P=t*a.x+P)+s*c-s*this.spacingX),V.activeInHierarchy&&(k=k+s*E*S+s*this.spacingX,V.x=k,k+=C=s*(1-E)*S)}}return m},e.prototype._getUsedScaleValue=function(t){return this.affectedByScale?Math.abs(t):1},a([d({type:cc.Enum(o)})],e.prototype,"centerHorizontalDirection",void 0),a([c,u(),p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/CenterLayout"),l("packages://custom_inspector/centerlayout.js")],e)}(cc.Layout);i.default=h,cc._RF.pop()},{}],ChallengeUI:[function(t,e,i){"use strict";cc._RF.push(e,"eb44aFcOFhIQJQrVih3nN8E","ChallengeUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("DateItem"),s=t("GameEnums"),c=t("MainConfig"),l=t("SDKMgr"),d=t("GameServerConf"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.labDate=null,e.btnPrev=null,e.btnNext=null,e.btnBox1=null,e.labBox1=null,e.btnBox2=null,e.labBox2=null,e.btnBox3=null,e.labBox3=null,e.progTZ=null,e.labProg=null,e.labCen=null,e.sprSele=null,e.labSele=null,e.layoutDate=null,e.dateItem=null,e.btnChallenge=null,e.sprVideo=null,e.labChallenge=null,e.dateList=[],e.curMonth=0,e.curDay=0,e.progList=[],e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnBack,this.onClickBack,this),this.onClick(this.btnPrev,this.onClickPrev,this),this.onClick(this.btnNext,this.onClickNext,this),this.onClick(this.btnChallenge,this.onClickChallenge,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.CHALLENGE_REWARD_CHANGE,this.updateCross,this),this.eventOn(ymtApp.eventName.LEVEL_CHANGE,this.freshSeleMonth,this),this.eventOn(ymtApp.eventName.CHALLENGE_STATUS_CHANGE,this.onChallengeStatusChange,this)},e.prototype.open=function(){ymtApp.viewMgr.showCurrency(this.name,[{itemId:s.ITEM_ID.COIN},{itemId:s.ITEM_ID.STRENGTH},{itemId:s.ITEM_ID.STAR,isHideAdd:!0}]),this.initView(),this.freshSeleMonth(),this.updateCross()},e.prototype.initView=function(){var t,e,i,o=d.default.I.challengeBoxCfg||[];this.progList[0]=(null===(t=o[0])||void 0===t?void 0:t.win)||1,this.progList[1]=(null===(e=o[1])||void 0===e?void 0:e.win)||10,this.progList[2]=(null===(i=o[2])||void 0===i?void 0:i.win)||30,this.labBox1.string=""+this.progList[0]+"\u83b7\u80dc".toLocalize(),this.labBox2.string=""+this.progList[1]+"\u83b7\u80dc".toLocalize(),this.labBox3.string=""+this.progList[2]+"\u83b7\u80dc".toLocalize();var n=ymtApp.gameController.getCurDate();this.curMonth=0;for(var a=!1,r=0;r<6;r++){var s=n.month-r,c=n.year;if(s<=0&&(s=12+s,c--),ymtApp.gameController.getMaxFreeDay({year:c,month:s})>0){this.curMonth=r,a=!0;break}}a||(this.btnChallenge.active=!1)},e.prototype.freshCalendar=function(t,e){var i=this,o=ymtApp.gameController.getDataByDate(t,e),n=7==o.start?0:o.start;ymtApp.nodeMgr.addListItemSelf(42,this.dateList,this.dateItem,this.layoutDate,function(a,s){var c=a.getComponent(r.default);if(n<=s&&o.total+n>s){var l=s-n+1;c.setDay(t,e,l,function(){i.onSeleDay(t,e,l,s)})}else c.hide()});var a=ymtApp.gameController.getMaxFreeDay({year:t,month:e});a>0&&this.scheduleOnce(function(){if(i.seleDate&&i.seleDate.year==t&&i.seleDate.month==e){var o=ymtApp.gameController.getDateStatus(t,e,i.seleDate.day);if(o==s.CHALLENGE_DAY_STATUS.FREE||o==s.CHALLENGE_DAY_STATUS.LOCK)return}var r=a+n-1;i.onSeleDay(t,e,a,r)}),this.btnChallenge.active=a>0,this.sprSele.active=a>0},e.prototype.onSeleDay=function(t,e,i,o){this.seleDate={year:t,month:e,day:i},this.labChallenge.string="\u6311\u6218".toLocalize()+" "+e+"/"+i,this.labCen.string=t+"/"+e+"/"+i;var n=ymtApp.gameController.getDateStatus(t,e,i);if(this.sprVideo.active=n==s.CHALLENGE_DAY_STATUS.LOCK,ymtApp.gameController.isCurDay(t,e,i)&&(this.sprVideo.active=!1),this.curDay=o,this.dateList[o]){this.sprSele.active=!0,this.labSele.string=""+i;var a=ymtApp.nodeMgr.getNodeInNodePos(this.dateList[o],this.sprSele.parent);this.sprSele.setPosition(a)}else this.sprSele.active=!1},e.prototype.onChallengeStatusChange=function(){this.onSeleDay(this.seleDate.year,this.seleDate.month,this.seleDate.day,this.curDay)},e.prototype.onClickBack=function(){ymtApp.viewMgr.hideView(c.UI.CHALLENGE)},e.prototype.onClickPrev=function(){this.curMonth<5&&(this.curMonth++,this.freshSeleMonth())},e.prototype.onClickNext=function(){this.curMonth>0&&(this.curMonth--,this.freshSeleMonth())},e.prototype.freshSeleMonth=function(){var t=ymtApp.gameController.getChallengeDate(this.curMonth);if(t){if(0==this.curMonth){var e=ymtApp.gameController.getCurDate();this.freshCalendar(e.year,e.month)}else this.freshCalendar(t.year,t.month);this.labDate.string=t.year+"/"+t.month}this.btnPrev.active=this.curMonth<5,this.btnNext.active=this.curMonth>0},e.prototype.updateCross=function(){var t=ymtApp.gameController.getChallengeData(),e=ymtApp.gameController.getTotalBoxCount();this.labProg.string=t.cross+"/"+e,this.progTZ.progress=t.cross/e;var i="sprite/challenge/icon_gift_";ymtApp.spriteMgr.loadImg(this.btnBox1,t.cross>=this.progList[0]?i+"open_1":i+"1",s.BUNDLENAME.RES),ymtApp.spriteMgr.loadImg(this.btnBox2,t.cross>=this.progList[1]?i+"open_2":i+"2",s.BUNDLENAME.RES),ymtApp.spriteMgr.loadImg(this.btnBox3,t.cross>=this.progList[2]?i+"open_3":i+"3",s.BUNDLENAME.RES),ymtApp.gameController.getChallengeBoxReward()},e.prototype.onClickChallenge=function(){var t=this,e=ymtApp.gameController.getDayByDate(this.seleDate);this.sprVideo.active?l.default.showVideo(function(){ymtApp.gameController.startGame(s.GAME_TYPE.CHALLENGE,e),ymtApp.gameController.changeDateStatus(t.seleDate.year,t.seleDate.month,t.seleDate.day,s.CHALLENGE_DAY_STATUS.FREE)}):ymtApp.gameController.startGame(s.GAME_TYPE.CHALLENGE,e)},n([h(cc.Node)],e.prototype,"btnBack",void 0),n([h(cc.Label)],e.prototype,"labDate",void 0),n([h(cc.Node)],e.prototype,"btnPrev",void 0),n([h(cc.Node)],e.prototype,"btnNext",void 0),n([h(cc.Node)],e.prototype,"btnBox1",void 0),n([h(cc.Label)],e.prototype,"labBox1",void 0),n([h(cc.Node)],e.prototype,"btnBox2",void 0),n([h(cc.Label)],e.prototype,"labBox2",void 0),n([h(cc.Node)],e.prototype,"btnBox3",void 0),n([h(cc.Label)],e.prototype,"labBox3",void 0),n([h(cc.ProgressBar)],e.prototype,"progTZ",void 0),n([h(cc.Label)],e.prototype,"labProg",void 0),n([h(cc.Label)],e.prototype,"labCen",void 0),n([h(cc.Node)],e.prototype,"sprSele",void 0),n([h(cc.Label)],e.prototype,"labSele",void 0),n([h(cc.Node)],e.prototype,"layoutDate",void 0),n([h(cc.Node)],e.prototype,"dateItem",void 0),n([h(cc.Node)],e.prototype,"btnChallenge",void 0),n([h(cc.Node)],e.prototype,"sprVideo",void 0),n([h(cc.Label)],e.prototype,"labChallenge",void 0),n([p],e)}(a.default);i.default=f,cc._RF.pop()},{BaseUI:"BaseUI",DateItem:"DateItem",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],ChestUI:[function(t,e,i){"use strict";cc._RF.push(e,"423a1GqYl9HqKQWVk7GiXkY","ChestUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=t("GameServerConf"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labDesc=null,e.btnSure=null,e.btnGet=null,e.btnClose=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnSure,this.onClickClose,this),this.onClick(this.btnGet,this.onClickSure,this),this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),this.updateView()},e.prototype.updateView=function(){var t=ymtApp.gameController.getLevelByType(r.GAME_TYPE.COMMON)-ymtApp.gameController.getRewardLevel()>=((c.default.I.rewardLevelCfg||{}).interval||10);this.btnSure.active=!t,this.btnGet.active=t},e.prototype.onClickSure=function(){ymtApp.gameController.setRewardLevel(),this.updateView()},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(s.UI.CHEST)},n([u(cc.Label)],e.prototype,"labDesc",void 0),n([u(cc.Node)],e.prototype,"btnSure",void 0),n([u(cc.Node)],e.prototype,"btnGet",void 0),n([u(cc.Node)],e.prototype,"btnClose",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig"}],CoinSupplyUI:[function(t,e,i){"use strict";cc._RF.push(e,"a18fa4kaeRBcYj7qxctC+aQ","CoinSupplyUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("ShopItem"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=t("SDKMgr"),u=t("./XDAD/XDADpublic").default,p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.content=null,e.shopItem=null,e.shopList=[],e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnBack,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.gameController.dotGameStr(s.DOT_TYPE.OPEN_COINSHOP),ymtApp.viewMgr.showCurrency(this.name,[{itemId:s.ITEM_ID.COIN,isHideAdd:!0}]),this.updateView()},e.prototype.updateView=function(){var t=l.default.I.shopList||[];ymtApp.nodeMgr.addListItemSelf(t.length,this.shopList,this.shopItem,this.content,function(e,i){e.getComponent(r.default).setData(t[i])})},e.prototype.onClickSure=function(){u.showXDAD(),d.default.showVideo(function(){ymtApp.viewMgr.showView(c.UI.REWARD,{type:s.REWARD_TYPE.SINGLE,rewards:[{itemId:s.ITEM_ID.COIN,amount:1e3}]})})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(c.UI.COIN_SUPPLY)},n([f(cc.Node)],e.prototype,"btnBack",void 0),n([f(cc.Node)],e.prototype,"content",void 0),n([f(cc.Node)],e.prototype,"shopItem",void 0),n([h],e)}(a.default);i.default=m,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseUI:"BaseUI",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr",ShopItem:"ShopItem"}],ComCurrency:[function(t,e,i){"use strict";cc._RF.push(e,"650b5d0zLFN05DioMMcUFjF","ComCurrency");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("GameEnums"),s=t("MainConfig"),c=t("UIMgr"),l=t("SDKMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprCurrencyBg=null,e.sprIcon=null,e.labTime=null,e.labNum=null,e.sprAdd=null,e.addCount=0,e}return o(e,t),e.prototype.onShow=function(){this.updateCurrency()},e.prototype.init=function(){this.onClick(this.node,this.onClickSelf,this)},e.prototype.addEventListener=function(){var t=this;this.eventOn(ymtApp.eventName.ITEM_CHANGE,this.onItemChange,this),this.eventOn(ymtApp.eventName.STRENGTH_CHANGE,function(e){t.onItemChange(r.ITEM_ID.STRENGTH,e)},this)},e.prototype.setData=function(t,e){void 0===e&&(e=!1),this.itemId=t,3==t&&(e=!0),this.setHideAdd(e);var i=ymtApp.gameController.getItemIcon(t);ymtApp.spriteMgr.loadImg(this.sprIcon,i),this.updateCurrency()},e.prototype.setHideAdd=function(t){null==t&&(t=!1),this.sprAdd.active=!t},e.prototype.getIconWPos=function(){return this.sprIcon.convertToWorldSpaceAR(cc.v2())},e.prototype.doIconAct=function(){cc.Tween.stopAllByTarget(this.sprIcon),this.sprIcon.scale=1,cc.tween(this.sprIcon).to(.05,{scale:1.3}).to(.05,{scale:1}).start()},e.prototype.onItemChange=function(t){t==this.itemId&&this.updateCurrency()},e.prototype.updateCurrency=function(){if(this.itemId==r.ITEM_ID.STRENGTH){var t=c.default.getRecoveryTime();this.labNum.string=""+c.default.getStrength();var e=ymtApp.gameController.getServerTime();if(0==t||t<e)this.labTime.string="";else{var i=Math.ceil((t-e)/1e3)%l.default.getRecoverTime();this.labTime.string=ymtApp.utils.formatSecToStr(i)}}else this.labNum.string=""+ymtApp.gameController.getItemNum(this.itemId)},e.prototype.onClickSelf=function(){this.sprAdd.active&&(this.itemId==r.ITEM_ID.COIN?ymtApp.viewMgr.showView(s.UI.COIN_SUPPLY):this.itemId==r.ITEM_ID.STAR||this.itemId==r.ITEM_ID.STRENGTH&&ymtApp.viewMgr.showView(s.UI.STRENGTH))},e.prototype.updateTime=function(t){this.itemId==r.ITEM_ID.STRENGTH&&c.default.getRecoveryTime()>0&&(this.addCount+=t,this.addCount>1&&(this.addCount-=1,this.updateCurrency()))},n([p(cc.Node)],e.prototype,"sprCurrencyBg",void 0),n([p(cc.Node)],e.prototype,"sprIcon",void 0),n([p(cc.Label)],e.prototype,"labTime",void 0),n([p(cc.Label)],e.prototype,"labNum",void 0),n([p(cc.Node)],e.prototype,"sprAdd",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",MainConfig:"MainConfig",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],ComDialog:[function(t,e,i){"use strict";cc._RF.push(e,"da828ueXN1P94kAnQ4LPM3c","ComDialog");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.btnClose=null,e.nodeTitle=null,e.labTitle=null,e.labOutline=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.setData=function(t){(t=t||{}).hideTitle?this.nodeTitle.active=!1:(this.nodeTitle.active=!0,this.setTitle(t.title)),this.closeCb=t.closeCb,t.isGray&&ymtApp.spriteMgr.setSpriteGray(this.nodeTitle.getComponent(cc.Sprite),!0)},e.prototype.setTitle=function(t){void 0===t&&(t="\u63d0\u793a"),this.labTitle.string=t},e.prototype.onClickClose=function(){this.closeCb&&this.closeCb()},e.prototype.setCloseVisible=function(t){this.btnClose.active=t},n([c(cc.Node)],e.prototype,"sprBg",void 0),n([c(cc.Node)],e.prototype,"btnClose",void 0),n([c(cc.Node)],e.prototype,"nodeTitle",void 0),n([c(cc.Label)],e.prototype,"labTitle",void 0),n([c(cc.LabelOutline)],e.prototype,"labOutline",void 0),n([s],e)}(a.default);i.default=l,cc._RF.pop()},{BaseComponent:"BaseComponent"}],ComMood:[function(t,e,i){"use strict";cc._RF.push(e,"513e63Yu9xCG5TSkl2CD6bw","ComMood");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("BaseComponent"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labDesc=null,e}return o(e,t),e.prototype.init=function(){this.node.angle=0,cc.tween(this.node).delay(3).to(.2,{angle:10}).to(.4,{angle:-10}).to(.4,{angle:10}).to(.4,{angle:-10}).to(.2,{angle:0}).union().repeatForever().start()},e.prototype.setDay=function(t){void 0===t&&(t=15),this.labDesc.string=a.LocalizeMgr.inst.toLocalize("\u89e3\u9501\u8d27\u67dc\n\uff08\u589e\u52a0{0}\u79d2\uff09",[String(t)])},n([l(cc.Label)],e.prototype,"labDesc",void 0),n([c],e)}(r.default);i.default=d,cc._RF.pop()},{BaseComponent:"BaseComponent",LocalizeMgr:"LocalizeMgr"}],ComScrollSele:[function(t,e,i){"use strict";cc._RF.push(e,"da31aSNy/ZGVKmM2/vaN/fl","ComScrollSele");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeArrow=null,e.isScroll=!1,e.isAdd=!0,e}return o(e,t),e.prototype.setData=function(t){this.scrollFunc=t,this.nodeArrow.angle=0,this.isAdd=!0,this.isScroll=!0,this.scrollFunc&&this.scrollFunc(5)},e.prototype.startScroll=function(){this.isScroll=!0},e.prototype.stop=function(){this.isScroll=!1,Math.abs(this.nodeArrow.angle)<=10?this.scrollFunc&&this.scrollFunc(5):Math.abs(this.nodeArrow.angle)<=28?this.scrollFunc&&this.scrollFunc(3):this.scrollFunc&&this.scrollFunc(2)},e.prototype.update=function(t){if(this.isScroll)if(this.nodeArrow.angle>40)this.isAdd=!1,this.nodeArrow.angle=40;else if(this.nodeArrow.angle<-40)this.isAdd=!0,this.nodeArrow.angle=-40;else{var e=this.nodeArrow.angle;this.isAdd?this.nodeArrow.angle+=80*t:this.nodeArrow.angle-=80*t,Math.abs(e)<10?Math.abs(this.nodeArrow.angle)>=10&&this.scrollFunc&&this.scrollFunc(3):Math.abs(e)<28?Math.abs(this.nodeArrow.angle)<10?this.scrollFunc&&this.scrollFunc(5):Math.abs(this.nodeArrow.angle)>=28&&this.scrollFunc&&this.scrollFunc(2):Math.abs(this.nodeArrow.angle)<28&&this.scrollFunc&&this.scrollFunc(3)}},n([s(cc.Node)],e.prototype,"nodeArrow",void 0),n([r],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],ComTakeout:[function(t,e,i){"use strict";cc._RF.push(e,"670ad+fYJlM/IY4dhIooBv/","ComTakeout");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("GameEnums"),s=t("GameServerConf"),c=t("SDKMgr"),l=t("TakeoutItem"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spRight=null,e.spWait=null,e.sprBubble=null,e.labTips=null,e.nodeOder=null,e.nodeLayout=null,e.goodsItem=null,e.progTime=null,e.sprBar=null,e.labTime=null,e.btnSkip=null,e.sprFinger=null,e.itemList=[],e.isStart=!1,e.isFinish=!1,e.barStatus=0,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.onClick(this.btnSkip,this.onClickSkip,this)},e.prototype.setData=function(t,e){this.clear(),this.takeoutTime=t.time,this.countTime=t.time,this.waitCount=t.goods.length,this.labTips.active=!0,this.nodeOder.active=!1,this.sprFinger.active=!1,ymtApp.nodeMgr.addListItemSelf(t.goods.length,this.itemList,this.goodsItem,this.nodeLayout,function(e,i){e.getComponent(l.default).setData(t.goods[i],t.isPeppery)}),this.outFunc=e,this.updateProg()},e.prototype.addGoodsId=function(t){for(var e=0;e<this.itemList.length;e++)if(this.itemList[e].active){var i=this.itemList[e].getComponent(l.default);if(i&&i.getGoodsId()==t&&!i.isComplete())return this.waitCount--,i.complete(),this.checkFinish(),this.itemList[e]}return null},e.prototype.checkFinish=function(){for(var t=this,e=0;e<this.itemList.length;e++)if(this.itemList[e].active){var i=this.itemList[e].getComponent(l.default);if(i&&!i.isComplete())return}this.out(function(){t.outFunc&&t.outFunc(r.TAKEOUT_TYPE.FINISH)},1)},e.prototype.updateCountTime=function(t){this.countTime=t},e.prototype.updateProg=function(){this.progTime.progress=this.countTime/this.takeoutTime;var t=s.default.I.takeoutTime||[60,15];this.countTime>0?(this.labTime.string=ymtApp.utils.formatTime(this.countTime,"mm:ss"),this.countTime>t[0]?1!=this.barStatus&&(this.barStatus=1,this.sprBar.color=cc.color(119,229,30)):this.countTime>t[1]?2!=this.barStatus&&(this.barStatus=2,this.sprBar.color=cc.color(255,108,0)):3!=this.barStatus&&(this.barStatus=3,this.sprBar.color=cc.color(255,53,24),this.showGuide(),this.angry())):(this.labTime.string="\u5916\u5356\u8d85\u65f6".toLocalize(),this.outFunc&&this.outFunc(r.TAKEOUT_TYPE.TIME_OUT))},e.prototype.showGuide=function(){this.sprFinger.active=!0,cc.Tween.stopAllByTarget(this.sprFinger);var t=cc.v2(60,-115);this.sprFinger.setPosition(t),cc.tween(this.sprFinger).to(.2,{x:t.x+5,y:t.y-5}).to(.2,{x:t.x,y:t.y}).union().repeatForever().start()},e.prototype.move=function(t){this.spRight.node.active=!0,this.spWait.node.active=!1,this.sprBubble.active=t,ymtApp.spineMgr.playSpineAnimation(this.spRight,"qiche",!0)},e.prototype.down=function(){var t=this;this.spRight.node.active=!0,this.spWait.node.active=!1,ymtApp.spineMgr.playSpineAnimation(this.spRight,"tiaoche",!1,function(){t.idle()})},e.prototype.idle=function(){var t=this;this.spRight.node.active=!1,this.spWait.node.active=!0,ymtApp.spineMgr.playSpineAnimation(this.spWait,"ider",!0),this.labTips.active=!1,this.nodeOder.active=!0,this.sprBubble.active=!0,cc.Tween.stopAllByTarget(this.sprBubble),this.sprBubble.scale=0,cc.tween(this.sprBubble).to(.2,{scale:1},cc.easeBackOut()).call(function(){t.isStart=!0}).start()},e.prototype.angry=function(){var t=this;this.spRight.node.active=!1,this.spWait.node.active=!0,ymtApp.spineMgr.playSpineAnimation(this.spWait,"shengqi_guodu",!1,function(){ymtApp.spineMgr.playSpineAnimation(t.spWait,"sq",!0)})},e.prototype.out=function(t,e){var i=this;void 0===e&&(e=0),cc.Tween.stopAllByTarget(this.sprBubble),this.sprBubble.scale=1,cc.tween(this.sprBubble).delay(e).to(.2,{scale:1},cc.easeBackIn()).call(function(){t&&t(),i.sprBubble.active=!1}).start()},e.prototype.isFail=function(){return this.countTime<.1&&this.waitCount>0},e.prototype.onClickSkip=function(){var t=this;c.default.showVideo(function(){t.isFinish=!0,t.out(function(){t.outFunc&&t.outFunc(r.TAKEOUT_TYPE.SKIP)})})},e.prototype.waitTime=function(t){if(this.isStart&&!this.isFinish&&this.countTime>0&&this.waitCount>0){if(this.count+=t,this.count<.1)return;this.count-=.1,this.countTime-=.1,this.updateProg()}},e.prototype.clear=function(){this.isFinish=!1,this.isStart=!1,this.countTime=0,this.count=0,this.waitCount=0,this.barStatus=0},n([p(sp.Skeleton)],e.prototype,"spRight",void 0),n([p(sp.Skeleton)],e.prototype,"spWait",void 0),n([p(cc.Node)],e.prototype,"sprBubble",void 0),n([p(cc.Node)],e.prototype,"labTips",void 0),n([p(cc.Node)],e.prototype,"nodeOder",void 0),n([p(cc.Node)],e.prototype,"nodeLayout",void 0),n([p(cc.Node)],e.prototype,"goodsItem",void 0),n([p(cc.ProgressBar)],e.prototype,"progTime",void 0),n([p(cc.Node)],e.prototype,"sprBar",void 0),n([p(cc.Label)],e.prototype,"labTime",void 0),n([p(cc.Node)],e.prototype,"btnSkip",void 0),n([p(cc.Node)],e.prototype,"sprFinger",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",GameServerConf:"GameServerConf",SDKMgr:"SDKMgr",TakeoutItem:"TakeoutItem"}],ComToggle:[function(t,e,i){"use strict";cc._RF.push(e,"65ec2YnDvNFQKNaLijhWN/B","ComToggle");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeOn=null,e.nodeOff=null,e.isOn=!0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.node,this.onClickToggle,this)},e.prototype.setData=function(t){this.isOn=!0,this.updateStatus(),this.seleCB=t},e.prototype.onClickToggle=function(){this.setToggleStatue(!this.isOn)},e.prototype.updateStatus=function(){this.nodeOn.active=this.isOn,this.nodeOff.active=!this.isOn},e.prototype.setToggleStatue=function(t,e){void 0===e&&(e=!0),this.isOn=t,this.updateStatus(),e&&this.seleCB&&this.seleCB(this.isOn)},n([c(cc.Node)],e.prototype,"nodeOn",void 0),n([c(cc.Node)],e.prototype,"nodeOff",void 0),n([s],e)}(a.default);i.default=l,cc._RF.pop()},{BaseComponent:"BaseComponent"}],CurrencyUI:[function(t,e,i){"use strict";cc._RF.push(e,"d4425X8O0VDS7mAMvffaLFK","CurrencyUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseComponent"),c=t("ComCurrency"),l=t("GameEnums"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.root=null,e.layoutCurrency=null,e.itemMap={},e.queue=[],e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.onAdaptUI()},e.prototype.initCurrency=function(){return a(this,void 0,void 0,function(){var t,e,i,o,n,a;return r(this,function(r){switch(r.label){case 0:return this.itemMap={},t=this.itemMap,e=l.ITEM_ID.COIN,[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,l.ITEM_ID.COIN)];case 1:return t[e]=r.sent(),this.itemMap[l.ITEM_ID.COIN]&&(this.itemMap[l.ITEM_ID.COIN].active=!1),i=this.itemMap,o=l.ITEM_ID.STRENGTH,[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,l.ITEM_ID.STRENGTH)];case 2:return i[o]=r.sent(),this.itemMap[l.ITEM_ID.STRENGTH]&&(this.itemMap[l.ITEM_ID.STRENGTH].active=!1),n=this.itemMap,a=l.ITEM_ID.STAR,[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,l.ITEM_ID.STAR,!0)];case 3:return n[a]=r.sent(),this.itemMap[l.ITEM_ID.STAR]&&(this.itemMap[l.ITEM_ID.STAR].active=!1),[2]}})})},e.prototype.onAdaptUI=function(){ymtApp.nodeMgr.adaptNode2MinScreen(this.root,!0)},e.prototype.show=function(t,e){this.queue.push({name:t,list:e}),this.updateShow()},e.prototype.updateShow=function(){this.hideAll();var t=[];this.queue.length>0&&(t=this.queue[this.queue.length-1].list||[]);for(var e=0;e<t.length;e++){var i=t[e].itemId;console.log("\u663e\u793a\u8d27\u5e01",i),i&&this.itemMap[i]&&(this.itemMap[i].active=!0,3!=i&&this.itemMap[i].getComponent(c.default).setHideAdd(t[e].isHideAdd))}},e.prototype.hide=function(t){for(var e=this.queue.length-1;e>=0;e--)this.queue[e].name==t&&this.queue.splice(e,1);this.updateShow()},e.prototype.hideAll=function(){for(var t in this.itemMap)this.itemMap[t]&&this.itemMap[t].active&&(this.itemMap[t].active=!1)},n([p(cc.Node)],e.prototype,"root",void 0),n([p(cc.Node)],e.prototype,"layoutCurrency",void 0),n([u],e)}(s.default);i.default=h,cc._RF.pop()},{BaseComponent:"BaseComponent",ComCurrency:"ComCurrency",GameEnums:"GameEnums"}],DailyResultUI:[function(t,e,i){"use strict";cc._RF.push(e,"ef886LDJ2pM376eIvZWEJb3","DailyResultUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseDialog"),c=t("GameEnums"),l=t("MainConfig"),d=t("GameServerConf"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labStar=null,e.nodeLayer=null,e.progLevel=null,e.labProg=null,e.nodeBox=null,e.nodeBoxOpen=null,e.labChallenge=null,e.btnBack=null,e.btnContinue=null,e.labTitle=null,e}return o(e,t),e.prototype.init=function(){return a(this,void 0,Promise,function(){return r(this,function(){return this.onClick(this.btnBack,this.onClickBack,this),this.onClick(this.btnContinue,this.onClickContinue,this),[2]})})},e.prototype.open=function(){t.prototype.open.call(this),this.isWin=this.arg.isWin,this.curLevel=this.arg.level||0,this.starScore=this.arg.star||0,this.clickFun=this.arg.callback,this.updateView();var e="\u6311\u6218\u6210\u529f".toLocalize();this.isWin||(e="\u6311\u6218\u5931\u8d25".toLocalize()),this.labTitle.string=e},e.prototype.doScaleAct=function(t,e,i){void 0===i&&(i=.5),cc.Tween.stopAllByTarget(t),t.scale=0,cc.tween(t).to(i,{scale:1},cc.easeBackOut()).call(function(){e&&e()}).start()},e.prototype.updateView=function(){this.labStar.string="+"+this.starScore;var t=ymtApp.gameController.isDailyReward();this.nodeBox.active=t,this.nodeBoxOpen.active=!t,this.labChallenge.getComponent(cc.Label).string=t?"\u4eca\u65e5\u672a\u9886\u53d6".toLocalize():"\u4eca\u65e5\u5df2\u9886\u53d6".toLocalize(),this.isWin?(this.progLevel.progress=(this.curLevel+1)/2,this.labProg.string=this.curLevel+1+"/2"):(this.progLevel.progress=this.curLevel/2,this.labProg.string=this.curLevel+"/2")},e.prototype.onClickBack=function(){return a(this,void 0,void 0,function(){var t=this;return r(this,function(){return this.showBoxReward(function(){return a(t,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,ymtApp.gameController.exitGame()];case 1:return t.sent(),this.clickFun&&this.clickFun(0),ymtApp.viewMgr.hideView(l.UI.DAILY_RESULT),ymtApp.viewMgr.hideView(l.UI.WIN),[2]}})})}),[2]})})},e.prototype.onClickContinue=function(){this.showBoxReward();var t=this.curLevel+1;this.clickFun&&this.clickFun(t),ymtApp.viewMgr.hideView(l.UI.DAILY_RESULT),ymtApp.viewMgr.hideView(l.UI.WIN)},e.prototype.showBoxReward=function(t){if(this.isWin&&1==this.curLevel&&ymtApp.gameController.isDailyReward()){var e=d.default.I.dailyBoxReward||{},i=ymtApp.gameController.getRewardList(e.com,e.rand);ymtApp.viewMgr.showView(l.UI.REWARD,{type:c.REWARD_TYPE.DOUBLE,rewards:i,closeFunc:t}),ymtApp.gameController.setDailyReward()}else t&&t()},n([h(cc.Label)],e.prototype,"labStar",void 0),n([h(cc.Node)],e.prototype,"nodeLayer",void 0),n([h(cc.ProgressBar)],e.prototype,"progLevel",void 0),n([h(cc.Label)],e.prototype,"labProg",void 0),n([h(cc.Node)],e.prototype,"nodeBox",void 0),n([h(cc.Node)],e.prototype,"nodeBoxOpen",void 0),n([h(cc.Node)],e.prototype,"labChallenge",void 0),n([h(cc.Node)],e.prototype,"btnBack",void 0),n([h(cc.Node)],e.prototype,"btnContinue",void 0),n([h(cc.Label)],e.prototype,"labTitle",void 0),n([p],e)}(s.default);i.default=f,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig"}],DailyTZUI:[function(t,e,i){"use strict";cc._RF.push(e,"1dfa7Ma40dKx4qHi6CrWvSR","DailyTZUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("BaseDialog"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=t("UIMgr"),u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.labDesc=null,e.btnSure=null,e.labSure=null,e.isEnter=!1,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnSure,this.onClickSure,this),this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:s.ITEM_ID.COIN},{itemId:s.ITEM_ID.STRENGTH},{itemId:s.ITEM_ID.STAR,isHideAdd:!0}]),this.initView()},e.prototype.initView=function(){var t=l.default.I.dailyUnlockLevel||18,e=ymtApp.gameController.getLevelByType(s.GAME_TYPE.COMMON);this.isEnter=e>=t,this.isEnter?(this.labSure.string="\u5f00\u59cb".toLocalize(),this.labDesc.string="\u6311\u6218\u6210\u529f\uff0c\u9886\u53d6\u5956\u52b1".toLocalize(),ymtApp.gameController.preloadRes(s.GAME_TYPE.DAILY,0),ymtApp.gameController.preloadRes(s.GAME_TYPE.DAILY,1)):(this.labSure.string="\u786e\u5b9a".toLocalize(),this.labDesc.string=a.LocalizeMgr.inst.toLocalize("\u901a\u8fc7{0}\u5173\u89e3\u9501",[String(t)]))},e.prototype.onClickSure=function(){var t=this;if(this.isEnter)d.default.setPocessIdx(0),ymtApp.gameController.enterGame(s.GAME_TYPE.DAILY,0,function(){ymtApp.gameController.dotGameStr(s.DOT_TYPE.SUM_DAILY_GET),t.onClickClose()});else{var e=l.default.I.dailyUnlockLevel||18;ymtApp.viewMgr.showToast(a.LocalizeMgr.inst.toLocalize("\u901a\u8fc7{0}\u5173\u540e\u89e3\u9501",[String(e)])),this.onClickClose()}},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(c.UI.DAILY_TZ)},n([h(cc.Node)],e.prototype,"btnClose",void 0),n([h(cc.Label)],e.prototype,"labDesc",void 0),n([h(cc.Node)],e.prototype,"btnSure",void 0),n([h(cc.Label)],e.prototype,"labSure",void 0),n([p],e)}(r.default);i.default=f,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig",UIMgr:"UIMgr"}],DateItem:[function(t,e,i){"use strict";cc._RF.push(e,"3f2f6YRcphGOoX2LKjN1m/M","DateItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("GameEnums"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprCross=null,e.labDay=null,e.year=0,e.month=0,e.day=0,e.canSele=!1,e}return o(e,t),e.prototype.init=function(){this.onClick(this.node,this.onClickSele,this)},e.prototype.setDay=function(t,e,i,o){this.year=t,this.month=e,this.day=i,this.seleCallback=o,this.labDay.active=!0,this.labDay.getComponent(cc.Label).string=""+i,this.updateDate()},e.prototype.updateDate=function(){var t=ymtApp.gameController.getCurDate();this.canSele=!0;var e=cc.Color.GRAY,i=ymtApp.gameController.getDateStatus(this.year,this.month,this.day);i==r.CHALLENGE_DAY_STATUS.ACHIEVED?(this.canSele=!1,e=cc.color(121,45,20)):i==r.CHALLENGE_DAY_STATUS.FREE?e=cc.color(255,246,0):this.year==t.year&&this.month==t.month&&this.day==t.day?e=cc.color(255,0,8):i==r.CHALLENGE_DAY_STATUS.LOCK?e=cc.color(121,45,20):this.canSele=!1,this.sprCross.active=i==r.CHALLENGE_DAY_STATUS.ACHIEVED,this.labDay.color=e,this.node.getComponent(cc.Button).interactable=this.canSele},e.prototype.hide=function(){this.month=0,this.day=0,this.seleCallback=null,this.labDay.active=!1,this.sprCross.active=!1,this.node.getComponent(cc.Button).interactable=!1},e.prototype.onChallengeCross=function(){},e.prototype.onClickSele=function(){this.canSele&&!this.sprCross.active&&this.seleCallback&&this.seleCallback(this.month,this.day)},n([l(cc.Node)],e.prototype,"sprCross",void 0),n([l(cc.Node)],e.prototype,"labDay",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums"}],DialoguePanel:[function(t,e,i){"use strict";cc._RF.push(e,"04d48vOPStITqO0tTC80wT0","DialoguePanel");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("YmtConstant"),r=t("GameSys"),s=t("PlatformAdManager"),c=cc._decorator,l=c.ccclass,d=c.property,u=c.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowBanner=!0,e.refeshBanner=!0,e.afterCloseShowBanner=!1,e.isHideBanner=!0,e.isShowInsertAd=!1,e.showInsertCount=1,e.showInsertCount_google=1,e.type="browse",e.key="normal",e.isBannerHidding=!1,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){var t=this;if(this.isBannerHidding=!1,this.scheduleOnce(function(){1==t.canShowBanner?t.refeshBanner&&s.PlatformAdManager.inst.showBanner():(t.isBannerHidding=!0,s.PlatformAdManager.inst.hideBanner())},.1),this.isShowInsertAd.valueOf()){var e=this.showInsertCount;if(a.default.IS_MI_H5_Game&&(e=this.showInsertCount_google),e>0){var i="view_"+this.node.name+r.default.userInfo.openid,o=1;localStorage.getItem(i)&&(o=parseInt(localStorage.getItem(i))),0!=o&&o%e==0&&s.PlatformAdManager.inst.showNativeOrInsertAd(this.type,this.key),o++,localStorage.setItem(i,o.toString())}else s.PlatformAdManager.inst.showNativeOrInsertAd(this.type,this.key)}},e.prototype.onDisable=function(){this.afterCloseShowBanner?s.PlatformAdManager.inst.showBanner():1==this.isHideBanner&&0==this.isBannerHidding&&(this.isBannerHidding=!0,s.PlatformAdManager.inst.hideBanner())},e.prototype.onDestroy=function(){this.afterCloseShowBanner?s.PlatformAdManager.inst.showBanner():1==this.isHideBanner&&0==this.isBannerHidding&&(this.isBannerHidding=!0,s.PlatformAdManager.inst.hideBanner())},n([d({type:cc.Boolean})],e.prototype,"canShowBanner",void 0),n([d({type:cc.Boolean})],e.prototype,"refeshBanner",void 0),n([d({type:cc.Boolean})],e.prototype,"afterCloseShowBanner",void 0),n([d({type:cc.Boolean})],e.prototype,"isHideBanner",void 0),n([d({type:cc.Boolean})],e.prototype,"isShowInsertAd",void 0),n([d({type:Number})],e.prototype,"showInsertCount",void 0),n([d({type:Number})],e.prototype,"showInsertCount_google",void 0),n([d({type:String})],e.prototype,"type",void 0),n([d({type:String})],e.prototype,"key",void 0),n([l,u("yomitoo/tools/DialoguePanel")],e)}(cc.Component);i.default=p,cc._RF.pop()},{GameSys:"GameSys",PlatformAdManager:"PlatformAdManager",YmtConstant:"YmtConstant"}],Enum:[function(t,e,i){"use strict";var o;cc._RF.push(e,"97bc9nkIN1Lr7Ak/Tnyz6yq","Enum"),Object.defineProperty(i,"__esModule",{value:!0}),i.PLATFORM=i.e_sdk_type=i.BANNER_FIXED=i.HTTP_ERROR=i.HTTP_TYPE=i.REWARD_TYPE=i.AUTO_AD_TYPE=i.EVENT_TYPE=i.CUSTOM_EVENT=void 0,i.CUSTOM_EVENT||(i.CUSTOM_EVENT={}),(o=i.EVENT_TYPE||(i.EVENT_TYPE={})).CHANGE_POWER="CHANGE_POWER",o.CHANGE_COIN="CHANGE_COIN",o.CHANGE_SKIN="CHANGE_SKIN",o.GET_NEW_SKIN="GET_NEW_SKIN",o.SHOW_BANNER="SHOW_BANNER",o.HIDE_BANNER="HIDE_BANNER",o.CHANGE_BANNER_HEIGHT="CHANGE_BANNER_HEIGHT",o.AD_ERROR="AD_ERROR",o.GAME_OVER="GAME_OVER",o.LOAD_SUBPACKAGE_COMPLETE="LOAD_SUBPACKAGE_COMPLETE",o.LOAD_SUBPACKAGE_PROGRESS="LOAD_SUBPACKAGE_PROGRESS",o.OPEN_SETTING_VIEW="OPEN_SETTING_VIEW",o.OPEN_SKIN_VIEW="OPEN_SKIN_VIEW",o.OPEN_RESULT_VIEW="OPEN_RESULT_VIEW",o.OPEN_PAUSE_VIEW="OPEN_PAUSE_VIEW",o.OPEN_GAME_SCENE="OPEN_GAME_SCENE",o.CLOSE_LOADING_VIEW="CLOSE_LOADING_VIEW",o.CLOSE_SETTING_VIEW="CLOSE_SETTING_VIEW",o.CLOSE_SKIN_VIEW="CLOSE_SKIN_VIEW",o.CLOSE_RESULT_VIEW="CLOSE_RESULT_VIEW",o.CLOSE_PAUSE_VIEW="CLOSE_PAUSE_VIEW",o.CLOSE_WATCH_VIDEO="CLOSE_WATCH_VIDEO",o.SHARE_RECORDER_SUCC="SHARE_RECORDER_SUCC",function(t){t[t.NO=0]="NO",t[t.CLICK=1]="CLICK",t[t.INTER=2]="INTER",t[t.VIDEO=3]="VIDEO"}(i.AUTO_AD_TYPE||(i.AUTO_AD_TYPE={})),function(t){t[t.NO=0]="NO",t[t.SHARE=1]="SHARE",t[t.VIDEO=2]="VIDEO"}(i.REWARD_TYPE||(i.REWARD_TYPE={})),function(t){t.GET="GET",t.POST="POST"}(i.HTTP_TYPE||(i.HTTP_TYPE={})),function(t){t[t.TIME_OUT=0]="TIME_OUT"}(i.HTTP_ERROR||(i.HTTP_ERROR={})),function(t){t[t.NO=0]="NO",t[t.LEFT_TOP=1]="LEFT_TOP",t[t.TOP_CENTER=2]="TOP_CENTER",t[t.RIGHT_TOP=3]="RIGHT_TOP",t[t.LEFT_BOTTOM=4]="LEFT_BOTTOM",t[t.BOTTOM_CENTER=5]="BOTTOM_CENTER",t[t.RIGHT_BOTTOM=6]="RIGHT_BOTTOM"}(i.BANNER_FIXED||(i.BANNER_FIXED={})),function(t){t[t.NO=0]="NO",t[t.HS=1]="HS",t[t.QL=2]="QL",t[t.YDHW=3]="YDHW"}(i.e_sdk_type||(i.e_sdk_type={})),function(t){t[t.MI=0]="MI",t[t.OPPO=1]="OPPO",t[t.VIVO=2]="VIVO",t[t.CSJ=3]="CSJ"}(i.PLATFORM||(i.PLATFORM={})),cc._RF.pop()},{}],ExitUI:[function(t,e,i){"use strict";cc._RF.push(e,"74646wYNvRKrZiTrKWAXU8B","ExitUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseDialog"),c=t("GameEnums"),l=t("MainConfig"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.btnContinue=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnBack,this.onClickBack,this),this.onClick(this.btnContinue,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:c.ITEM_ID.COIN},{itemId:c.ITEM_ID.STRENGTH},{itemId:c.ITEM_ID.STAR,isHideAdd:!0}])},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(l.UI.EXIT)},e.prototype.onClickBack=function(){return a(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,ymtApp.gameController.exitGame()];case 1:return t.sent(),this.onClickClose(),[2]}})})},n([p(cc.Node)],e.prototype,"btnBack",void 0),n([p(cc.Node)],e.prototype,"btnContinue",void 0),n([u],e)}(s.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",MainConfig:"MainConfig"}],ExportItem:[function(t,e,i){"use strict";cc._RF.push(e,"2018fx7lSxOeogMY6tKZ7/t","ExportItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("WxMgr"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.labName=null,e.mData=null,e.hasRoot=!1,e}return o(e,t),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.onClick(this.node,this.onClickSelf,this)},e.prototype.setData=function(t){this.mData=t,this.updateView()},e.prototype.updateView=function(){var t=this;ymtApp.resMgr.loadRemote(this.mData.images,function(e,i){if(!e){var o=new cc.SpriteFrame(i);t.sprIcon.getComponent(cc.Sprite).spriteFrame=o}}),this.labName.string=""+(this.mData.name||"")},e.prototype.onClickSelf=function(){r.default.jumpToMiniProgram({appId:this.mData.appid,path:this.mData.path,jumpid:this.mData.id,type:250,images_id:this.mData.images_id})},n([l(cc.Node)],e.prototype,"sprIcon",void 0),n([l(cc.Label)],e.prototype,"labName",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseComponent:"BaseComponent",WxMgr:"WxMgr"}],FailUI:[function(t,e,i){"use strict";cc._RF.push(e,"b5d4fjkUvlFzqMri+5J3q6r","FailUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=t("GameServerConf"),l=t("SDKMgr"),d=t("./XDAD/XDADpublic").default,u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.labTime=null,e.btnRelife=null,e.sprVideo=null,e.sprFree=null,e.curType=1,e.relifeTimes=1,e.isVideo=!0,e.isFree=!1,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnClose,this.onClickExit,this),this.onClick(this.btnRelife,this.onClickReborn,this)},e.prototype.open=function(){t.prototype.open.call(this),this.compId=ymtApp.gameController.getCompId(),this.gameType=this.arg.gameType||r.GAME_TYPE.COMMON,this.curType=this.arg.type||1,this.curLevel=this.arg.level||0,this.relifeTimes=this.arg.times||0,this.clickFun=this.arg.callback,ymtApp.viewMgr.showCurrency(this.name,[{itemId:r.ITEM_ID.COIN,isHideAdd:!0},{itemId:r.ITEM_ID.STRENGTH,isHideAdd:!0},{itemId:r.ITEM_ID.STAR,isHideAdd:!0}]),this.updateView()},e.prototype.updateView=function(){this.labTime.string="+"+ymtApp.gameController.getReviveTime(this.relifeTimes)+"s",ymtApp.audioMgr.playSound(ymtApp.main.audio.timeOut),this.isVideo=!0,this.isFree=!1;var t=ymtApp.gameController.getRecordInfo(r.RECORD_KEY.REVIVE_FREE,0);1==c.default.I.firstReviveFree&&0==t&&(this.isFree=!0)},e.prototype.onClickReborn=function(){var t=this;this.isFree?(d.showXDAD(),ymtApp.gameController.dotGameStr(r.DOT_TYPE.FIRST_FREE),this.onRevive(),ymtApp.gameController.setRecordInfo(r.RECORD_KEY.REVIVE_FREE,1)):this.isVideo?l.default.showVideo(function(){ymtApp.gameController.dotGameVideo(t.gameType,t.curLevel+1),t.onRevive()}):l.default.share({success:function(){var e=ymtApp.gameController.getRecordInfo(r.RECORD_KEY.REVIVE_SHARE,0);ymtApp.gameController.setRecordInfo(r.RECORD_KEY.REVIVE_SHARE,e+1),ymtApp.gameController.setShareTimes(1),t.onRevive()},id:this.compId})},e.prototype.onRevive=function(){var t;ymtApp.gameController.dotComLevel(this.curLevel+1,r.DOT_LEVEL_TYPE.REVIVE),1==this.curType?t=r.ITEM_ID.REFRESH:2==this.curType&&(t=r.ITEM_ID.ADD_TIME,ymtApp.audioMgr.playSound(ymtApp.main.audio.obtain)),null!=t&&ymtApp.eventTarget.emit(ymtApp.eventName.GAME_REBORN,t),ymtApp.gameController.addTaskProg(r.TASK_TYPE.RELIVE),this.clickFun&&this.clickFun(1),ymtApp.viewMgr.hideView(s.UI.FAIL)},e.prototype.onClickExit=function(){this.clickFun&&this.clickFun(0),ymtApp.viewMgr.hideView(s.UI.FAIL)},n([h(cc.Node)],e.prototype,"btnClose",void 0),n([h(cc.Label)],e.prototype,"labTime",void 0),n([h(cc.Node)],e.prototype,"btnRelife",void 0),n([h(cc.Node)],e.prototype,"sprVideo",void 0),n([h(cc.Node)],e.prototype,"sprFree",void 0),n([p],e)}(a.default);i.default=f,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],FirstLoad:[function(t,e,i){"use strict";cc._RF.push(e,"7b4d5nQkjxCr5om8x4ptQ/b","FirstLoad");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("GameSys"),r=t("YmtLog"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneName="Default",e}return o(e,t),e.prototype.start=function(){var t=this;a.default.initGame(function(){r.default.i("LoadScene========================",t.sceneName),cc.director.loadScene(t.sceneName)})},n([l],e.prototype,"sceneName",void 0),n([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",YmtLog:"YmtLog"}],FirstTipsUI:[function(t,e,i){"use strict";cc._RF.push(e,"baca98sosFGDrpGA6dzj2Hk","FirstTipsUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e,i=null!==t&&t.apply(this,arguments)||this;return i.nodeXZ=null,i.nodeItem1=null,i.sprXiZhi1=null,i.sprIcon1=null,i.nodeItem2=null,i.sprXiZhi2=null,i.sprIcon2=null,i.nodeItem3=null,i.nodeBK=null,i.sprBK1=null,i.sprBK2=null,i.sprBK3=null,i.nodeSeat1=null,i.nodeSeat2=null,i.nodeSeat3=null,i.sprWM=null,i.sprDesc=null,i.btnSure=null,i.resMap=((e={})[1]="wm",e[2]="xz",e[3]="bk",e),i}return o(e,t),e.prototype.init=function(){this.onClick(this.btnSure,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),this.arg=this.arg||{};var e=this.arg.type||1;ymtApp.spriteMgr.loadImg(this.sprDesc,"sprite/firstTips/first_"+this.resMap[e]+"_desc",r.BUNDLENAME.RES),this.sprWM.active=1==e,this.nodeXZ.active=2==e,this.nodeBK.active=3==e,"\u5916\u5356".toLocalize(),2==e?("\u9521\u7eb8".toLocalize(),this.showXiZhi()):3==e&&("\u51b0\u5757".toLocalize(),this.showFrozen())},e.prototype.showFrozen=function(){var t=this;cc.Tween.stopAllByTarget(this.nodeSeat1),this.nodeSeat1.scale=1,cc.Tween.stopAllByTarget(this.nodeSeat2),this.nodeSeat2.scale=1,cc.Tween.stopAllByTarget(this.nodeSeat3),this.nodeSeat3.scale=1,this.sprBK1.active=!0,this.sprBK2.active=!1,this.sprBK3.active=!1,this.doScaleAct(this.nodeSeat1,function(){t.sprBK1.active=!1,t.sprBK2.active=!0,t.doScaleAct(t.nodeSeat2,function(){t.sprBK2.active=!1,t.sprBK3.active=!0,t.doScaleAct(t.nodeSeat3,function(){t.sprBK3.active=!1,t.scheduleOnce(function(){t.showFrozen()},.5)})})})},e.prototype.doScaleAct=function(t,e){cc.tween(t).to(.3,{scale:1.1}).to(.1,{scale:0}).call(function(){e&&e()}).start()},e.prototype.showXiZhi=function(){var t=this;cc.Tween.stopAllByTarget(this.nodeItem1),this.nodeItem1.scale=.6,this.nodeItem1.setPosition(-40,42),cc.Tween.stopAllByTarget(this.nodeItem2),this.nodeItem2.scale=.6,this.nodeItem2.setPosition(0,42),cc.Tween.stopAllByTarget(this.nodeItem3),this.nodeItem3.scale=.6,this.nodeItem3.setPosition(40,42),this.sprIcon1.active=!1,this.sprIcon2.active=!1,this.sprXiZhi1.active=!0,this.sprXiZhi2.active=!0,this.doUpAct(this.nodeItem1,cc.v2(-65,42),.5,function(){t.sprXiZhi1.active=!1,t.sprIcon1.active=!0}),this.doUpAct(this.nodeItem2,cc.v2(0,42),.65,function(){t.sprXiZhi2.active=!1,t.sprIcon2.active=!0}),this.doUpAct(this.nodeItem3,cc.v2(65,42),.8,function(){t.showXiZhi()},.5)},e.prototype.doUpAct=function(t,e,i,o,n){void 0===i&&(i=.5),void 0===n&&(n=.1),cc.tween(t).delay(i).to(.35,{x:e.x,y:e.y,scale:1}).delay(n).call(function(){o&&o()}).start()},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(s.UI.FIRST_TIPS)},n([d(cc.Node)],e.prototype,"nodeXZ",void 0),n([d(cc.Node)],e.prototype,"nodeItem1",void 0),n([d(cc.Node)],e.prototype,"sprXiZhi1",void 0),n([d(cc.Node)],e.prototype,"sprIcon1",void 0),n([d(cc.Node)],e.prototype,"nodeItem2",void 0),n([d(cc.Node)],e.prototype,"sprXiZhi2",void 0),n([d(cc.Node)],e.prototype,"sprIcon2",void 0),n([d(cc.Node)],e.prototype,"nodeItem3",void 0),n([d(cc.Node)],e.prototype,"nodeBK",void 0),n([d(cc.Node)],e.prototype,"sprBK1",void 0),n([d(cc.Node)],e.prototype,"sprBK2",void 0),n([d(cc.Node)],e.prototype,"sprBK3",void 0),n([d(cc.Node)],e.prototype,"nodeSeat1",void 0),n([d(cc.Node)],e.prototype,"nodeSeat2",void 0),n([d(cc.Node)],e.prototype,"nodeSeat3",void 0),n([d(cc.Node)],e.prototype,"sprWM",void 0),n([d(cc.Node)],e.prototype,"sprDesc",void 0),n([d(cc.Node)],e.prototype,"btnSure",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",MainConfig:"MainConfig"}],GDGameAd:[function(t,e,i){"use strict";cc._RF.push(e,"99f4dvvgD5KVZmxNwdKhDKq","GDGameAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(console.warn("GD 1"),window.gameShow=!0,this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo(),window.addEventListener("showAdEvent",function(){cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0)}),window.addEventListener("showAdCompleteEvent",function(){cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1)}),window.addEventListener("focus",function(){0==window.isShowAd&&(cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1))}),window.addEventListener("blur",function(){cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0)}))},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){1==window.isReady&&window.showBanner&&(window.showBanner(),this.willShowBanner=!0)},e.prototype.hideBanner=function(){1==window.isReady&&window.hideBanner&&(window.hideBanner(),this.willShowBanner=!1)},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){0==window.isReloadAd&&this.preloadRewardAd()},e.prototype.preloadRewardAd=function(){1==window.isReady&&gdsdk.preloadAd("rewarded").then(function(){console.log("preloadRewardAd success")}).catch(function(t){console.error("preloadRewardAd error",t)})},e.prototype.showVideo=function(t){var e=this;this.videocallback=t,1==window.isReady?(window.showLoading(),this.hideBanner(),cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),window.isShowAd=!0,gdsdk.showAd("rewarded").then(function(){window.hideLoading(),cc.director.resume(),console.log("showReward success"),e.videocallback&&e.videocallback(!0),cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),e.willShowBanner&&e.showBanner(),window.isShowAd=!1}).catch(function(t){window.hideLoading(),window.isShowAd=!1,cc.director.resume(),console.log("showReward fail: "+t),e.videocallback&&e.videocallback(!1),cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),e.willShowBanner&&e.showBanner()})):(console.log("reward ad is not ready"),this.videocallback&&this.videocallback(!1))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){var t=this;1==window.isReady?(this.hideBanner(),this.canShowInterstitialAd=!1,cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),window.isShowAd=!0,window.showLoading(),gdsdk.showAd("interstitial").then(function(){window.hideLoading(),window.isShowAd=!1,cc.director.resume(),cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),setTimeout(function(){t.canShowInterstitialAd=!0},t.interstitialAdDelay),t.willShowBanner&&t.showBanner()}).catch(function(e){window.hideLoading(),window.isShowAd=!1,cc.director.resume(),console.log("interstitial fail: "+e),cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),t.willShowBanner&&t.showBanner()})):console.log("interstitial ad is not ready")},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.l("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],GameConst:[function(t,e,i){"use strict";var o,n,a;cc._RF.push(e,"f2821MXbpJGHZzLu+J/IoIf","GameConst"),Object.defineProperty(i,"__esModule",{value:!0}),i.TASK_DESC_CFG=i.GAMES_RES=i.COM_CFG=i.ITEM_CFG=void 0;var r=t("GameServerConf"),s=t("SDKConfig"),c=t("GameEnums");i.ITEM_CFG=((o={})[c.ITEM_ID.STRENGTH]={icon:"icon_heart",name:"\u4f53\u529b"},o[c.ITEM_ID.STAR]={icon:"icon_star",name:"\u661f\u661f\u79ef\u5206"},o[c.ITEM_ID.COIN]={icon:"icon_coin",name:"\u91d1\u5e01"},o[c.ITEM_ID.ELIMINATE]={icon:"icon_xc",name:"\u6253\u5305",desc:"\u6d88\u9664\u4e09\u4e2a\u4e00\u6837\u7684\u70e4\u4e32"},o[c.ITEM_ID.FIRELOCK]={icon:"icon_phq",name:"\u89e3\u51bb",desc:"\u5feb\u901f\u878d\u5316\u51b0\u5757"},o[c.ITEM_ID.FROZEN]={icon:"icon_bd",name:"\u65f6\u505c",desc:"\u65f6\u95f4\u6682\u505c20\u79d2"},o[c.ITEM_ID.REFRESH]={icon:"icon_sx",name:"\u6574\u7406",desc:"\u91cd\u65b0\u8c03\u6574\u4e32\u4e32\u4f4d\u7f6e"},o[c.ITEM_ID.WAND]={icon:"icon_mfz",name:"\u9b54\u6cd5\u6756",desc:"\u8bd5\u8bd5\u4f7f\u7528\u9053\u5177\uff0c\u53ef\u6d88\u96644\u7ec4\u7269\u54c1",tips:"\u5c0f\u5fc3\uff0c\u8fd9\u5173\u5f88\u96be\uff01\u4f7f\u7528\u9b54\u6cd5\u6756\u5feb\u901f\u6d88\u9664"},o[c.ITEM_ID.ADD_TIME]={icon:"icon_add",name:"\u52a0\u65f6",desc:"\u8bd5\u8bd5\u4f7f\u7528\u9053\u5177\uff0c\u53ef\u989d\u5916\u83b7\u5f9760\u79d2\u65f6\u95f4",tips:"\u5c0f\u5fc3\uff0c\u8fd9\u5173\u5f88\u96be\uff01\u4f7f\u7528\u6c99\u6f0f\u83b7\u5f97\u989d\u5916\u65f6\u95f4"},o[c.ITEM_ID.ADD_STAR]={icon:"icon_double",name:"\u52a0\u661f",desc:"\u8bd5\u8bd5\u4f7f\u7528\u9053\u5177\uff0c\u672c\u5173\u661f\u661f\u6570x2",tips:"\u4f7f\u7528\u9053\u5177\u83b7\u5f97\u53cc\u500d\u661f\u661f\u5956\u52b1"},o),i.COM_CFG={FLOWER_HEIGHT:130,FLOWER_WIDTH:60,SHELVES_BOT_POS:100,SHELVES_BOT_WIDTH:355,SHELVES_BOT_SPACE:20,SHELVES_BOT_HEIGHT:240,SHELVES_B_WIDTH:175,GOODS_NUM:290,GRILL_ITEM_WIDTH:227,GRILL_ITEM_HEIGHT:265,GRILL_ITEM_SPACEX:30,GRILL_ITEM_SPACEY:15,GRILL_ITEM_POS_Y:60,GRILL_SEAT_WIDTH:210,GRILL_SEAT_HIGHT:160,GOODS_TOP_NUM:50,GRILL_TOUCH_HEIGHT:180,GRILL_TOUCH_WIDTH:250},i.GAMES_RES=((n={})[c.GAME_TYPE.COMMON]={resUrl:"https://cdn.gzgame99.cn/test/huogui/common/"},n[c.GAME_TYPE.CHALLENGE]={resUrl:""},n[c.GAME_TYPE.DAILY]={resUrl:""},n),i.TASK_DESC_CFG=((a={})[c.TASK_TYPE.CROSS]="\u4eca\u65e5\u901a\u8fc7<color=#D0504F>num</color>\u6b21\u666e\u901a\u5173\u5361",a[c.TASK_TYPE.BOX]="\u5f00\u542f<color=#D0504F>num</color>\u6b21\u5173\u5361\u5b9d\u7bb1",a[c.TASK_TYPE.RELIVE]="\u6210\u529f\u590d\u6d3b<color=#D0504F>num</color>\u6b21",a[c.TASK_TYPE.VIDEO]="\u4eca\u65e5\u89c2\u770b<color=#D0504F>num</color>\u6b21\u89c6\u9891",a[c.TASK_TYPE.COMBO]="\u4eca\u65e5\u6d88\u9664<color=#D0504F>num</color>\u7ec4\u4e32\u4e32",a[c.TASK_TYPE.ELIMINATE]="\u4eca\u65e5\u4f7f\u7528<color=#D0504F>num</color>\u6b21\u6253\u5305",a[c.TASK_TYPE.FIRELOCK]="\u4eca\u65e5\u4f7f\u7528<color=#D0504F>num</color>\u6b21\u55b7\u706b\u67aa",a[c.TASK_TYPE.FROZEN]="\u4eca\u65e5\u4f7f\u7528<color=#D0504F>num</color>\u6b21\u65f6\u95f4\u51bb\u7ed3",a[c.TASK_TYPE.REFRESH]="\u4eca\u65e5\u4f7f\u7528<color=#D0504F>num</color>\u6b21\u5173\u5361\u5237\u65b0",a);var l=function(){function t(){this.itemCfg=i.ITEM_CFG,this.comCfg=i.COM_CFG,this.gameRes=i.GAMES_RES}return t.prototype.isDebug=function(){return!1},t.prototype.isOpenId=function(){var t=r.default.I.openIdList||[];if(t.includes("allTest"))return!0;var e=s.default.openId||"";if(t.includes(e))return!0;for(var i=1;i<=100;i++)if((r.default.I["openIdList"+i]||[]).includes(e))return!0;return!1},t.prototype.getItemCfg=function(t){return i.ITEM_CFG[t]||{}},t.prototype.getTaskDesc=function(t){return i.TASK_DESC_CFG[t]},t.prototype.getGameRes=function(t){return i.GAMES_RES[t]},t}();i.default=l,cc._RF.pop()},{GameEnums:"GameEnums",GameServerConf:"GameServerConf",SDKConfig:"SDKConfig"}],GameCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"f8124rON5NIcYyNbKcCdIm4","GameCtrl");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("Singleton"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=t("UIMgr"),u=t("SDKConfig"),p=t("SDKEnum"),h=t("SDKMgr"),f=t("WxMgr"),m=t("TransitionUI"),g=function(t){function e(){var e,i=null!==t&&t.apply(this,arguments)||this;return i._pausedNum=0,i._shareTimes=0,i._compId=0,i.isFirstDay=!1,i.gameCfgMap={},i._gameResMap={},i.preloadMap={},i.itemUseMap={},i._enterDate={gameType:s.GAME_TYPE.COMMON,level:0},i.curDate=null,i._rankList=((e={})[s.RANK_TYPE.WORD]=[],e[s.RANK_TYPE.FRIEND]=[],e),i}return o(e,t),e.prototype.login=function(){this.initRemind(),this.checkNewDay(),ymtApp.data.challengeData&&ymtApp.data.challengeData.dates&&0!=ymtApp.data.challengeData.dates.length||this.freshChallengeData()},e.prototype.initRemind=function(){ymtApp.remindMgr.registerCheckRemind(s.REMIND_NAME.REMIND_BANK,this.getBankRemind,this),ymtApp.remindMgr.registerCheckRemind(s.REMIND_NAME.REMIND_FREE,this.getFreeRemind,this),ymtApp.remindMgr.registerCheckRemind(s.REMIND_NAME.REMIND_GIFT,this.getGiftRemind,this),ymtApp.remindMgr.registerCheckRemind(s.REMIND_NAME.REMIND_SKIN,this.getSkinRemind,this),ymtApp.remindMgr.registerCheckRemind(s.REMIND_NAME.REMIND_TASK,this.getTaskRemind,this),ymtApp.remindMgr.registerCheckRemind(s.REMIND_NAME.REMIND_STAR,this.getStarRemind,this)},e.prototype.checkNewDay=function(t){void 0===t&&(t=0);var e=this.getServerTime(),i=ymtApp.data.loginData||{first:0,login:0,online:0,time:0};i.first||(i.login?i.first=i.login:i.first=e,ymtApp.data.loginData=i);var o=Number(i.login||0);if(o<e&&new Date(o).toDateString()!=new Date(e).toDateString()){i.first||(i.first=i.login),i.login=e,ymtApp.data.loginData=i,this.setRecordInfo(s.RECORD_KEY.REVIVE_SHARE,0),ymtApp.eventTarget.emit(ymtApp.eventName.CROSS_DAY),this.curDate=null,this.freshChallengeData(),this.checkChallengeStatus();var n=ymtApp.data.freeData||{};n[s.FREE_FUNC_ID.LOGIN]=0,ymtApp.data.freeData=n,this.initGiftTime(),this.initTask(),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_FREE)}this.checkOnline()},e.prototype.getServerTime=function(){return Date.now()+u.default.diffTime},e.prototype.isRookie=function(){var t=ymtApp.data.loginData||{first:0,login:0};return 0==t.first||t.first==t.login},e.prototype.getLoginDay=function(){var t=ymtApp.data.loginData||{first:0,login:0};t.first||(t.login?t.first=t.login:t.first=this.getServerTime(),ymtApp.data.loginData=t);var e=new Date(t.login),i=new Date(t.first);return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),(e.getTime()-i.getTime())/864e5+1},e.prototype.initStart=function(){this._pausedNum=0,this._shareTimes=0},e.prototype.addPause=function(){this._pausedNum++},e.prototype.delPause=function(){this._pausedNum--},e.prototype.isPaused=function(){return this._pausedNum>0},e.prototype.getShareTimes=function(){return this._shareTimes},e.prototype.setShareTimes=function(t){this._shareTimes=t},e.prototype.getCompId=function(){return this._compId+=5,this._compId},e.prototype.setSeleGoods=function(t){if(!t||!this.seleSeat||t.seatId!=this.seleSeat.seatId||t.posId!=this.seleSeat.posId){var e=this.seleSeat;this.seleSeat=t,ymtApp.eventTarget.emit(ymtApp.eventName.SELE_SEAT_DATA,{cur:t,last:e})}},e.prototype.getSeleGoods=function(){return this.seleSeat},e.prototype.getTipsTime=function(t){for(var e=l.default.I.goodsTipsMap||[],i=0;i<e.length;i++){var o=e[i].area||[1,3];if(o[0]<=t&&(o[1]>=t||-1==o[1])&&null!=e[i].time)return e[i].time}return 0},e.prototype.getLevelByType=function(t){return t==s.GAME_TYPE.COMMON?ymtApp.data.level:t==s.GAME_TYPE.CHALLENGE?this.getDayByDate()+1:t==s.GAME_TYPE.DAILY?0:void 0},e.prototype.getGameCfg=function(t){if(null==this.gameCfgMap[t]){var e=l.default.I.gamesCfg[t];this.gameCfgMap[t]=e}return this.gameCfgMap[t]},e.prototype.getConfigUrl=function(t){var e="",i=this.getGameCfg(t);if(i&&null!=i.jsonUrl&&""!=i.jsonUrl)e=i.jsonUrl;else{var o=ymtApp.cons.getGameRes(t);e=o&&null!=o.jsonUrl&&""!=o.jsonUrl?o.jsonUrl:this.getResUrl(t)}return e||""},e.prototype.getResUrl=function(t){var e=this.getGameCfg(t);if(e&&null!=e.resUrl&&""!=e.resUrl)return e.resUrl;var i=ymtApp.cons.getGameRes(t);return i&&null!=i.resUrl&&""!=i.resUrl?i.resUrl:""},e.prototype.getResUrls=function(t,e){return n(this,void 0,Promise,function(){var i,o;return a(this,function(n){switch(n.label){case 0:return i=this.getResUrl(t),[4,this.getRealLevel(t,e)];case 1:return o=n.sent(),[2,i+"level/"+o.id+".json"]}})})},e.prototype.loadGameJson=function(t,e,i){var o=this;void 0===i&&(i=!0),i&&ymtApp.viewMgr.addWait("loadGameJson",""+t);var n=function(){e&&e(),i&&ymtApp.viewMgr.delWait("loadGameJson",""+t)},a=this.getConfigUrl(t);if(null!=a&&""!=a){var r=0,s=function(){0==r&&n()};if(null==this.getShelvesCfg(t))if(r++,a.includes("http")){var c=a+"shelves.json";ymtApp.resMgr.loadRemote(c,function(e,i){o.setShelvesCfg(t,i.json),cc.assetManager.releaseAsset(i),r--,s()})}else c=a+"shelves",ymtApp.resMgr.loadRes(c,cc.JsonAsset,!1,function(e,i){o.setShelvesCfg(t,i.json),cc.assetManager.releaseAsset(i),r--,s()});null==this.getGameLvCfg(t)&&(r++,a.includes("http")?ymtApp.resMgr.loadRemote(a+"res.json",function(e,i){o.setGameLvCfg(t,i.json),cc.assetManager.releaseAsset(i),o.preloadNext(t),r--,s()}):ymtApp.resMgr.loadRes(a+"res",cc.JsonAsset,!1,function(e,i){o.setGameLvCfg(t,i.json),cc.assetManager.releaseAsset(i),o.preloadNext(t),r--,s()})),s()}else n()},e.prototype.getRealLevel=function(t,e){return n(this,void 0,void 0,function(){var i,o,n,r;return a(this,function(a){switch(a.label){case 0:return i=this.getGameLvCfg(t)||[],[4,this.getResLevel(t,e)];case 1:return o=a.sent(),null!=i[o]?[3,3]:(n=this.getLevelByType(t)+1,[4,this.getMaxLevel(t)]);case 2:return r=a.sent(),[2,i[n%r]];case 3:return[2,i[o]]}})})},e.prototype.getResLevel=function(t,e){return n(this,void 0,void 0,function(){var i,o,n,r,c,d,u,p,h;return a(this,function(a){switch(a.label){case 0:return[4,this.getMaxLevel(t)];case 1:if(i=a.sent(),t==s.GAME_TYPE.DAILY)return[2,this.getDailyLv(e)];if(e<i)return[2,e];if(o=e,t!=s.GAME_TYPE.COMMON)return[3,2];if(n=[],ymtApp.data.lastIds){if(null!=ymtApp.data.lastIds[e])return[2,ymtApp.data.lastIds[e]];null!=ymtApp.data.lastIds[e-1]&&(r=l.default.I.gameFilterComLv||[0,1,2,3,4,5,6,7,8,9,10,11],n=[ymtApp.data.lastIds[e-1]].concat(r))}return o=ymtApp.utils.randIntFilters([1,i-1],n),[3,5];case 2:if(t!=s.GAME_TYPE.CHALLENGE)return[3,3];for(c=this.getDateByDay(e),d=ymtApp.data.challengeData.dates||[],u=0;u<d.length;u++)if(d[u].year==c.year&&d[u].month==c.month&&d[u].level&&null!=(p=ymtApp.data.challengeData.dates[u].level[c.day]))return[2,p];return h=this.getNearLvs(e),o=ymtApp.utils.randIntFilters([0,i-1],h),[3,5];case 3:return t!=s.GAME_TYPE.DAILY?[3,5]:[4,this.getDailyLv(e)];case 4:o=a.sent(),a.label=5;case 5:return[2,o]}})})},e.prototype.getDailyLv=function(t){return n(this,void 0,void 0,function(){var e;return a(this,function(i){switch(i.label){case 0:return 0==t?(this.dailyRealLv=null,[2,t]):null!=this.dailyRealLv?[2,this.dailyRealLv]:[4,this.getMaxLevel(s.GAME_TYPE.DAILY)];case 1:return e=i.sent(),this.dailyRealLv=ymtApp.utils.randIntFilters([1,e-1]),[2,this.dailyRealLv]}})})},e.prototype.getMaxLevel=function(t){var e=this;return new Promise(function(i){e.loadGameJson(t,function(){var o=e.getGameLvCfg(t)||[];i(o.length)})})},e.prototype.setGameLvCfg=function(t,e){null==this._gameLvCfg&&(this._gameLvCfg={}),this._gameLvCfg[t]=e},e.prototype.getGameLvCfg=function(t){if(this._gameLvCfg)return this._gameLvCfg[t]},e.prototype.setShelvesCfg=function(t,e){null==this._shelvesCfg&&(this._shelvesCfg={}),this._shelvesCfg[t]=e},e.prototype.getShelvesCfg=function(t){if(this._shelvesCfg)return this._shelvesCfg[t]},e.prototype.setGameRes=function(t,e,i){return n(this,void 0,void 0,function(){return a(this,function(){return null==this._gameResMap[t]&&(this._gameResMap[t]={}),this._gameResMap[t][e]=i,[2]})})},e.prototype.getGameRes=function(t,e,i){return n(this,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return this._gameResMap[t]?null!=i?[3,5]:t!=s.GAME_TYPE.COMMON?[3,1]:(i=ymtApp.data.lastIds[e],[3,5]):[3,6];case 1:return t!=s.GAME_TYPE.CHALLENGE?[3,3]:[4,this.getChallengeLvId(e)];case 2:return i=o.sent(),[3,5];case 3:return t!=s.GAME_TYPE.DAILY?[3,5]:[4,this.getDailyLv(e)];case 4:i=o.sent(),o.label=5;case 5:return this.setRecordRes(t,e,i),[2,this._gameResMap[t][i]];case 6:return[2]}})})},e.prototype.setRecordRes=function(t,e,i){if(t==s.GAME_TYPE.COMMON){var o=ymtApp.data.lastIds||{};null==o[e]&&(delete o[e-2],o[e]=i,ymtApp.data.lastIds=o)}else t==s.GAME_TYPE.CHALLENGE?this.setChallengeLvId(e,i):s.GAME_TYPE.DAILY},e.prototype.preloadNext=function(t,e,i){return n(this,void 0,void 0,function(){var o,n,r,s,c,l,d=this;return a(this,function(a){switch(a.label){case 0:return[4,this.getMaxLevel(t)];case 1:return o=a.sent(),null==(n=e)&&(n=this.getLevelByType(t)),r=n,n>=o?[4,this.getResLevel(t,n)]:[3,3];case 2:r=a.sent(),a.label=3;case 3:return[4,this.getGameRes(t,n,r)];case 4:return s=a.sent(),this.setRecordRes(t,n,r),s?[3,7]:[4,this.getRealLevel(t,n)];case 5:return c=a.sent(),[4,this.getResUrls(t,r)];case 6:return(l=a.sent()).includes("http")?ymtApp.resMgr.loadRemote(l,function(e,o){var n=o.json;n.takeout&&0!=n.takeout.length||c.takeout&&c.takeout.length>0&&(n.takeout=c.takeout),d.setGameRes(t,r,n),cc.assetManager.releaseAsset(o),i&&i(n)}):ymtApp.resMgr.loadRes(""+l.replace(".json",""),cc.JsonAsset,!0,function(e,o){var n=o.json;n.takeout&&0!=n.takeout.length||c.takeout&&c.takeout.length>0&&(n.takeout=c.takeout),d.setGameRes(t,r,n),cc.assetManager.releaseAsset(o),i&&i(n)}),[3,8];case 7:i&&i(s),a.label=8;case 8:return[2]}})})},e.prototype.preloadRes=function(t,e){var i=this;this.preloadNext(t,e,function(t){var e=t.goodsTypes||[];e.length;var o=e.length;l.default.I.gameItemUrl,ymtApp.utils.executeFrame(o,function(t){var o=e[t];1!=i.preloadMap[o]&&(ymtApp.resMgr.getSpriteFrame("sprite/outline/"+o,s.BUNDLENAME.RES),ymtApp.resMgr.getSpriteFrame("sprite/flower/"+o,s.BUNDLENAME.RES),i.preloadMap[o]=1)})})},e.prototype.isRemote=function(t){if(t>l.default.I.gameItemRemoteStart)return!0;for(var e=l.default.I.gameItemRemoteList||[],i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},e.prototype.getGoodsIdRes=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var i;return a(this,function(o){switch(o.label){case 0:return i=e?"sprite/outline/"+t:"sprite/flower/"+t,[4,ymtApp.resMgr.getSpriteFrame(i,s.BUNDLENAME.RES)];case 1:return[2,o.sent()]}})})},e.prototype.initUseItem=function(){this.itemUseMap={}},e.prototype.setUseItem=function(t,e){this.itemUseMap[t]=e},e.prototype.getUseItem=function(t){return this.itemUseMap[t]},e.prototype.useItem=function(t){return!!this.itemUseMap[t]&&(this.itemUseMap[t]=!1,this.addItem(t,-1),!0)},e.prototype.setEnterGame=function(t,e){this._enterDate={gameType:t,level:e}},e.prototype.getEnterGame=function(){return this._enterDate},e.prototype.isDailyReward=function(){var t=ymtApp.data.dailyData||{time:0,status:0},e=this.getServerTime();return!this.isSameDay(t.time,e)||1!=t.status},e.prototype.setDailyReward=function(){var t=ymtApp.data.dailyData||{time:0,status:0};t.time=this.getServerTime(),t.status=1,ymtApp.data.dailyData=t},e.prototype.isSameDay=function(t,e){return new Date(t||0).toDateString()==new Date(e||0).toDateString()},e.prototype.startGame=function(t,e,i,o){void 0===i&&(i=!1);var n=ymtApp.gameController.getLevelByType(s.GAME_TYPE.COMMON),a=[s.ITEM_ID.WAND,s.ITEM_ID.ADD_TIME,s.ITEM_ID.ADD_STAR],r=this.getLockLevel(a,!1);null==e&&(e=ymtApp.gameController.getLevelByType(t)),(l.default.I.itemChooseLevel||51)<=n&&(n>=r&&t!=s.GAME_TYPE.DAILY||n>=r-1&&t==s.GAME_TYPE.COMMON)?ymtApp.viewMgr.showView(c.UI.READY,{gameType:t,level:e,isGame:i}):(d.default.setPocessIdx(0),ymtApp.gameController.enterGame(t,e,function(){ymtApp.viewMgr.hideView(c.UI.READY),ymtApp.viewMgr.hideView(c.UI.CHALLENGE)},o))},e.prototype.enterGame=function(t,e,i,o){return n(this,void 0,void 0,function(){var r=this;return a(this,function(s){switch(s.label){case 0:return this.checkEnoughStrength(!1)?[4,this.enterRealGame(t,e,i)]:(ymtApp.viewMgr.showView(c.UI.STRENGTH,{callback:function(s){return n(r,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return 0==s?[3,2]:(this.checkEnoughStrength(!1),[4,this.enterRealGame(t,e,i)]);case 1:return n.sent(),ymtApp.viewMgr.hideView(c.UI.STRENGTH),o&&o(!0),[3,3];case 2:o&&o(!1),n.label=3;case 3:return[2]}})})}}),[2]);case 1:return s.sent(),[2]}})})},e.prototype.enterRealGame=function(t,e,i){return n(this,void 0,void 0,function(){var o,n=this;return a(this,function(a){switch(a.label){case 0:return null==t?[2]:(null==e&&(e=this.getLevelByType(t)),[4,ymtApp.viewMgr.showView(c.UI.TRANSITION)]);case 1:return(o=a.sent()).getComponent(m.default).showAct(function(){n.loadGameJson(t,function(){2!=d.default.getCurProcess()?(o.getComponent(m.default).closeAct(),t==s.GAME_TYPE.COMMON&&n.checkPropUnlock(e+1),n.setEnterGame(t,e),d.default.nextProcess(),i&&i()):console.warn("has enter game")})}),[2]}})})},e.prototype.exitGame=function(){return n(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,ymtApp.viewMgr.showView(c.UI.TRANSITION)];case 1:return(t=e.sent()).getComponent(m.default).showAct(function(){d.default.gameHome(),t.getComponent(m.default).closeAct()}),[2]}})})},e.prototype.isStrengthEnough=function(){return!h.default.isPowerOpen()||d.default.getStrength()>=h.default.getPowerCost()},e.prototype.checkEnoughStrength=function(t){return void 0===t&&(t=!0),!h.default.isPowerOpen()||(this.isStrengthEnough()?d.default.addStrength(-h.default.getPowerCost()):(t&&ymtApp.viewMgr.showView(c.UI.STRENGTH),!1))},e.prototype.crossGame=function(t,e){if(t==s.GAME_TYPE.COMMON)ymtApp.data.level<=e&&ymtApp.data.level++,f.default.setRankList(s.RANK_TYPE.WORD,ymtApp.data.level),f.default.setUserRankCloudStorage(ymtApp.data.level);else if(t==s.GAME_TYPE.CHALLENGE){var i=this.getDateByDay(e);this.changeDateStatus(i.year,i.month,i.day,s.CHALLENGE_DAY_STATUS.ACHIEVED)}else s.GAME_TYPE.DAILY;this.addTaskProg(s.TASK_TYPE.CROSS),ymtApp.eventTarget.emit(ymtApp.eventName.LEVEL_CHANGE)},e.prototype.getTimeData=function(t,e){var i=this.getGameCfg(t),o={area:[0,-1],time:l.default.I.gameTime,add:l.default.I.gameAddTime,step:l.default.I.gameStep,addStep:l.default.I.gameAddStep},n=i.level||[];if(n.length>0)for(var a=0;a<n.length;a++){var r=n[a];if(e>=r.area[0]&&(e<=r.area[1]||-1==r.area[1])){null!=r.time&&(o.time=r.time),null!=r.add&&(o.add=r.add),null!=r.step&&(o.step=r.step),null!=r.addStep&&(o.addStep=r.addStep);break}}return o},e.prototype.getReviveTime=function(t){void 0===t&&(t=1);var e=l.default.I.reviveTimeCfg,i=(e.star||60)+(t-1)*(e.add||10),o=e.end||120;return i>o&&(i=o),i},e.prototype.getRewardList=function(t,e){var i=(t||[]).slice();if(e&&e.length>0){var o=ymtApp.utils.getIndexByWeight(e);i.push(e[o])}return i},e.prototype.getRewardLevel=function(){return ymtApp.data.rewardLevel||0},e.prototype.setRewardLevel=function(){var t=this.getLevelByType(s.GAME_TYPE.COMMON),e=this.getRewardLevel(),i=l.default.I.rewardLevelCfg||{},o=ymtApp.gameController.getRewardList(i.reward,i.rand),n=i.interval||10;e+n<=t&&(ymtApp.data.rewardLevel+=n,this.dotGameStr(s.DOT_TYPE.SUM_LEVEL_GET),ymtApp.viewMgr.showView(c.UI.REWARD,{type:s.REWARD_TYPE.DOUBLE_BOX,rewards:o}),this.addTaskProg(s.TASK_TYPE.BOX),ymtApp.eventTarget.emit(ymtApp.eventName.UPDATE_REWARD_LEVEL))},e.prototype.getForceReward=function(t){var e=l.default.I.forceVideoCfg,i=null;if(t==s.FORCE_VIDEO_TYPE.SETTING?i=e.setting:t==s.FORCE_VIDEO_TYPE.HOME?i=e.home:t==s.FORCE_VIDEO_TYPE.WIN&&(i=e.win),this.isTrigger(i))return i.reward||[{itemId:s.ITEM_ID.COIN,amount:200}]},e.prototype.isAdInter=function(t){var e=l.default.I.forceAdInsertCfg,i=null;return t==s.FORCE_VIDEO_TYPE.SETTING?i=e.setting:t==s.FORCE_VIDEO_TYPE.WIN&&(i=e.win),this.isTrigger(i)},e.prototype.isSkinTry=function(){return this.isTrigger(l.default.I.skinTryCfg)},e.prototype.isTrigger=function(t){var e=this.getLevelByType(s.GAME_TYPE.COMMON)+1;return!!(t&&null!=t.level&&t.level<e&&Math.random()<=(t.rate||0))},e.prototype.initGiftTime=function(){var t=ymtApp.data.giftData||{time:0,times:0},e=l.default.I.luckyGiftCfg||{};t.time=e.time||900,t.times=0,ymtApp.data.giftData=t,ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_GIFT)},e.prototype.checkOnline=function(){var t=ymtApp.data.giftData||{time:0,times:0};t.time>0&&(t.time-=1,ymtApp.data.giftData=t,ymtApp.eventTarget.emit(ymtApp.eventName.GIFT_CHANGE),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_GIFT))},e.prototype.getGiftData=function(){return ymtApp.data.giftData||{time:0,times:0}},e.prototype.clearGiftTime=function(){var t=ymtApp.data.giftData||{time:0,times:0};t.time=0,ymtApp.data.giftData=t,ymtApp.eventTarget.emit(ymtApp.eventName.GIFT_CHANGE),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_GIFT)},e.prototype.getGiftRward=function(){var t,e=ymtApp.data.giftData||{time:0,times:0},i=l.default.I.luckyGiftCfg;return t=0==e.times?i.firstReward:i.reward,e.times++,e.time=(i.time||900)+(e.times||0)*(i.addTime||300),ymtApp.data.giftData=e,this.addItemList(t,!0),ymtApp.eventTarget.emit(ymtApp.eventName.GIFT_CHANGE),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_GIFT),t},e.prototype.addItem=function(t,e,i){void 0===i&&(i=!1);var o=ymtApp.data.itemData;return o[t]=o[t]||0,t==s.ITEM_ID.STRENGTH&&d.default.addStrength(e,i),!(e<0&&o[t]+e<0||(o[t]+=e,ymtApp.data.itemData=o,i||ymtApp.eventTarget.emit(ymtApp.eventName.ITEM_CHANGE,t,e),0))},e.prototype.updateItemList=function(t){for(var e=0;e<t.length;e++)ymtApp.eventTarget.emit(ymtApp.eventName.ITEM_CHANGE,t[e].itemId)},e.prototype.addItemList=function(t,e){void 0===e&&(e=!1);for(var i=0;i<t.length;i++){var o=t[i].itemId,n=t[i].amount;null==n&&null!=t[i].area&&t[i].area.length>1&&(n=ymtApp.utils.randByArea(t[i].area,!0)),this.addItem(o,n||0,e)}},e.prototype.getCalcItemList=function(t){for(var e=[],i=0;i<t.length;i++){var o=t[i].itemId,n=t[i].amount;null==n&&null!=t[i].area&&t[i].area.length>1&&(n=ymtApp.utils.randByArea(t[i].area,!0)),e.push({itemId:o,amount:n||0})}return e},e.prototype.getItemNum=function(t){return ymtApp.data.itemData[t]||0},e.prototype.getItemIcon=function(t){var e=ymtApp.cons.getItemCfg(t),i="";return e.icon&&""!=e.icon&&(i="sprite/icon/"+e.icon),i},e.prototype.checkPropUnlock=function(t){var e=l.default.I.propUnlockCfg||{},i=this.getRecordInfo(s.RECORD_KEY.UNLOCK_ITEM,{});for(var o in e)!i[o]&&e[o]&&e[o]<=t&&(i[o]=1);this.setRecordInfo(s.RECORD_KEY.UNLOCK_ITEM,i)},e.prototype.isPropUnlock=function(t){return 1==this.getRecordInfo(s.RECORD_KEY.UNLOCK_ITEM,{})[t]},e.prototype.getLockLevel=function(t,e){void 0===e&&(e=!0);for(var i=l.default.I.propUnlockCfg||{},o=999,n=0,a=0;a<t.length;a++){var r=i[t[a]];o=Math.min(o,r),n=Math.max(n,r)}return e?n:o},e.prototype.isAllUnlock=function(){var t=l.default.I.propUnlockCfg||[],e=this.getRecordInfo(s.RECORD_KEY.UNLOCK_ITEM,{});for(var i in t)if(!e[i])return!1;return!0},e.prototype.isItemGuide=function(t){return!!this.isPropUnlock(t)&&1!=this.getRecordInfo(s.RECORD_KEY.GUIDE_ITEM,{})[t]},e.prototype.setItemGuide=function(t){var e=this.getRecordInfo(s.RECORD_KEY.GUIDE_ITEM,{});e[t]=1,this.setRecordInfo(s.RECORD_KEY.GUIDE_ITEM,e)},e.prototype.getStarRemind=function(){var t=(l.default.I.starBoxReward||{}).cost||1e3,e=ymtApp.gameController.getRecordInfo(s.RECORD_KEY.STAR_REWARD,0);return ymtApp.gameController.getItemNum(s.ITEM_ID.STAR)>=t*(e+1)?1:0},e.prototype.getSkinLockCfg=function(t,e){for(var i=(l.default.I.skinUnlockCfg||{})[t]||[],o=0;o<i.length;o++)if(i[o].id==e)return i[o]},e.prototype.getSkinData=function(t){return(ymtApp.data.skinData||{})[t]||{use:1,free:[1]}},e.prototype.getCurSkinId=function(t){return this.getSkinData(t).use||1},e.prototype.getSkinStatus=function(t,e){var i=this.getSkinData(t);if(i.use==e)return s.SKIN_STATUS.USING;for(var o=i.free||[],n=0;n<o.length;n++)if(o[n]==e)return s.SKIN_STATUS.FREE;return this.getLevelByType(s.GAME_TYPE.COMMON)>=this.getSkinLockCfg(t,e).level?s.SKIN_STATUS.VIDEO:s.SKIN_STATUS.LOCK},e.prototype.changeSkinStatus=function(t,e,i){var o,n=ymtApp.data.skinData||((o={})[s.SKIN_TYPE.GRILL]={use:1,free:[1]},o[s.SKIN_TYPE.PLATE]={use:1,free:[1]},o);if(n[t]=n[t]||{use:1,free:[1]},i==s.SKIN_STATUS.USING&&(n[t].use=e),i==s.SKIN_STATUS.USING||i==s.SKIN_STATUS.FREE){for(var a=!0,r=n[t].free||[],c=0;c<r.length;c++)if(r[c]==e){a=!1;break}a&&n[t].free.push(e)}ymtApp.data.skinData=n,ymtApp.eventTarget.emit(ymtApp.eventName.SKIN_CHANGE,{type:t,id:e,status:i}),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_SKIN)},e.prototype.getSkinList=function(){for(var t=this.getLevelByType(s.GAME_TYPE.COMMON),e=[],i=[s.SKIN_TYPE.GRILL,s.SKIN_TYPE.PLATE],o=l.default.I.skinUnlockCfg||{},n=0;n<i.length;n++)for(var a=o[i[n]]||[],r=0;r<a.length;r++)a[r].level==t&&e.push({type:i[n],id:a[r].id});return e},e.prototype.getSkinRemind=function(){for(var t=[s.SKIN_TYPE.GRILL,s.SKIN_TYPE.PLATE],e=l.default.I.skinUnlockCfg||{},i=0;i<t.length;i++)for(var o=e[t[i]]||[],n=0;n<o.length;n++)if(this.getSkinStatus(t[i],o[n].id)==s.SKIN_STATUS.VIDEO)return 1;return 0},e.prototype.isCurDay=function(t,e,i){var o=this.getCurDate();return t==o.year&&e==o.month&&i==o.day},e.prototype.getCurDate=function(){if(null==this.curDate){var t=this.getServerTime(),e=new Date(t);this.curDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}return this.curDate},e.prototype.getMaxFreeDay=function(t){if(null==t||null==t.year||null==t.month){var e=this.getCurDate();t={year:e.year,month:e.month}}for(var i=this.getDataByDate(t.year,t.month),o=i.total;o>0;o--)if(null==i.date[o]||i.date[o]==s.CHALLENGE_DAY_STATUS.LOCK||i.date[o]==s.CHALLENGE_DAY_STATUS.FREE)return o;return 0},e.prototype.getDayByDate=function(t){var e=this.getCurDate();t?(t.year=t.year||e.year,t.month=t.month||e.month,t.day=t.day||e.day):t=e;var i=new Date(t.year,t.month-1,t.day).getTime()-new Date(t.year,0,1).getTime();return Math.ceil(i/864e5)},e.prototype.getDateByDay=function(t){var e;void 0===t&&(t=1);var i=this.getCurDate();e=t>this.getDayByDate(i)?new Date(i.year-1,0,1).getTime()+864e5*t:new Date(i.year,0,1).getTime()+864e5*t;var o=new Date(e);return{year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()}},e.prototype.getChallengeData=function(){return ymtApp.data.challengeData},e.prototype.getChallengeDate=function(t){return ymtApp.data.challengeData.dates[t]},e.prototype.getMonthDate=function(t,e){var i=new Date(t,e,0),o={year:i.getFullYear(),month:i.getMonth()+1,start:i.getDay(),total:i.getDate(),date:{},level:{}};i.setDate(1),o.start=i.getDay();for(var n=this.getCurDate(),a=n.year==t&&n.month==e,r=1;r<=o.total;r++)o.date[r]=s.CHALLENGE_DAY_STATUS.LOCK,a&&n.day<r&&(o.date[r]=s.CHALLENGE_DAY_STATUS.NO_REACH);return o},e.prototype.freshChallengeData=function(){var t=ymtApp.data.challengeData,e=this.getCurDate(),i=e.year,o=e.month,n=!1;null==t&&(t={reward:{},cross:0,dates:[]},n=!0);for(var a=0;a<=6;a++)this.getDataByDate(i,o)||(n=!0,t.dates.push(this.getMonthDate(i,o))),o--;n&&(t.dates.sort(function(t,e){return t.year!=e.year?e.year-t.year:e.month-t.month}),t.dates.slice(0,6),ymtApp.data.challengeData=t)},e.prototype.checkChallengeStatus=function(){for(var t=ymtApp.data.challengeData,e=this.getCurDate(),i=0;i<t.dates.length;i++)for(var o=t.dates[i],n=1;n<o.total;n++)o.date[n]==s.CHALLENGE_DAY_STATUS.NO_REACH&&this.isPassDay({year:o.year,month:o.month,day:n},e)&&(t.dates[i].date[n]=s.CHALLENGE_DAY_STATUS.LOCK);ymtApp.data.challengeData=t},e.prototype.isPassDay=function(t,e){return null==e&&(e=this.getCurDate()),!(t.year>e.year||t.month>e.month||t.day>e.day)},e.prototype.getDataByDate=function(t,e){var i=ymtApp.data.challengeData||{reward:{},cross:0,dates:[]};if(!i.dates||0==i.dates.length){i.dates=[];var o=this.getMonthDate(t,e);return i.dates.push(o),ymtApp.data.challengeData=i,o}for(var n=0;n<i.dates.length;n++)if(i.dates[n].year==t&&i.dates[n].month==e)return i.dates[n]},e.prototype.getTotalBoxCount=function(){if(!this.totalCount){var t=l.default.I.challengeBoxCfg||[];if(t.length>0){this.totalCount=0;for(var e=0;e<t.length;e++)this.totalCount=Math.max(t[e].win,this.totalCount)}else this.totalCount=30}return this.totalCount},e.prototype.changeDateStatus=function(t,e,i,o){for(var n=ymtApp.data.challengeData||{reward:{},cross:0,dates:[]},a=!1,r=0;r<n.dates.length;r++)if(n.dates[r].year==t&&n.dates[r].month==e&&n.dates[r].date[i]!=o){o==s.CHALLENGE_DAY_STATUS.ACHIEVED&&n.cross++,n.dates[r].date[i]=o,a=!0;break}a&&(ymtApp.data.challengeData=n,ymtApp.eventTarget.emit(ymtApp.eventName.CHALLENGE_STATUS_CHANGE))},e.prototype.getDateStatus=function(t,e,i){var o=this.getDataByDate(t,e);return o&&o.date&&o.date[i]||s.CHALLENGE_DAY_STATUS.LOCK},e.prototype.getChallengeBoxReward=function(){for(var t=ymtApp.data.challengeData||{reward:{},cross:0,dates:[]},e=l.default.I.challengeBoxCfg||[],i=this.getTotalBoxCount(),o=l.default.I.challengeRewards||[],n=[],a=0;a<e.length;a++)if(e[a]&&e[a].win&&e[a].win<=t.cross&&1!=t.reward[e[a].win]){t.reward[e[a].win]=1;for(var r=e[a].num||a+1,d=0;d<r;d++){var u=ymtApp.utils.getIndexByWeight(o);n.push(o[u])}}t.cross>=i&&(t.cross=0),ymtApp.data.challengeData=t,n.length>0&&(ymtApp.viewMgr.showView(c.UI.REWARD,{type:s.REWARD_TYPE.SINGLE_BOX,rewards:n}),ymtApp.eventTarget.emit(ymtApp.eventName.CHALLENGE_REWARD_CHANGE))},e.prototype.getNearLvs=function(t){for(var e=this.getDateByDay(t),i=ymtApp.data.challengeData.dates||[],o=0;o<i.length;o++)if(i[o].year==e.year&&i[o].month==e.month&&i[o].level){var n=[];if(null==i[o].date[e.day-1]&&i[o+1]){var a=i[o+1];null!=a.level[a.total]&&n.push(a.level[a.total])}else null!=i[o].level[e.day-1]&&n.push(i[o].level[e.day-1]);if(null==i[o].date[e.day+1]&&i[o-1]){var r=i[o-1];null!=r.level[1]&&n.push(r.level[1])}else null!=i[o].level[e.day+1]&&n.push(i[o].level[e.day+1]);return n}return[]},e.prototype.setChallengeLvId=function(t,e){for(var i=this.getDateByDay(t),o=ymtApp.data.challengeData,n=o.dates||[],a=0;a<n.length;a++)if(n[a].year==i.year&&n[a].month==i.month&&n[a].level)return o.dates[a].level=o.dates[a].level||{},o.dates[a].level[i.day]=e,void(ymtApp.data.challengeData=o)},e.prototype.getChallengeLvId=function(t){return n(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.getResLevel(s.GAME_TYPE.CHALLENGE,t)];case 1:return[2,e.sent()]}})})},e.prototype.getTurntableData=function(){return{times:0,date:0}},e.prototype.draw=function(){},e.prototype.setRoleInfo=function(t,e){var i=ymtApp.data.roleData||{};t&&""!=t&&(i.name=t),e&&""!=e&&(i.url=e),ymtApp.data.roleData=i},e.prototype.getRoleInfo=function(){return ymtApp.data.roleData},e.prototype.setRankList=function(t,e){var i;void 0===e&&(e=[]),this._rankList=this._rankList||((i={})[s.RANK_TYPE.WORD]=[],i[s.RANK_TYPE.FRIEND]=[],i),1==t&&(this._rankList[s.RANK_TYPE.WORD]=e)},e.prototype.getRankList=function(t){return this._rankList[t]||[]},e.prototype.getBankRemind=function(){var t;return this.getRecordInfo(s.RECORD_KEY.PIG_GOLD,0)>=((null===(t=l.default.I.piggyBankCfg)||void 0===t?void 0:t.coin)||300)?1:0},e.prototype.addPiggyBankCoin=function(t){var e=l.default.I.piggyBankCfg||{add:20,coin:300,max:600};t||(t=e.add||20);var i=this.getRecordInfo(s.RECORD_KEY.PIG_GOLD,0),o=e.max||600;i=Math.min(o,i+t),this.setRecordInfo(s.RECORD_KEY.PIG_GOLD,i),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_BANK)},e.prototype.getPiggyBankCoin=function(){var t=this.getRecordInfo(s.RECORD_KEY.PIG_GOLD,0);t<(l.default.I.piggyBankCfg||{add:20,coin:300,max:600}).coin||(this.addItem(s.ITEM_ID.COIN,t),this.setRecordInfo(s.RECORD_KEY.PIG_GOLD,0),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_BANK))},e.prototype.initTask=function(){ymtApp.data.taskData={},ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_TASK)},e.prototype.getTaskCfgByType=function(t){for(var e=l.default.I.taskList||[],i=0;i<e.length;i++)if(e[i].type==t)return e[i];return null},e.prototype.getTaskCfgById=function(t){for(var e=l.default.I.taskList||[],i=0;i<e.length;i++)if(e[i].id==t)return e[i];return null},e.prototype.addTaskProg=function(t){var e=ymtApp.data.taskData||{};if(e[t]=e[t]||{status:s.TASK_STATUS_TYPE.NOT,prog:0,max:0},!e[t].max){var i=this.getTaskCfgByType(t);e[t].max=i.max}e[t].prog++,e[t].status==s.TASK_STATUS_TYPE.NOT&&e[t].prog>=e[t].max&&(e[t].status=s.TASK_STATUS_TYPE.COMPLETED),ymtApp.data.taskData=e,ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_TASK),ymtApp.eventTarget.emit(ymtApp.eventName.TASK_PROG_UPDATE)},e.prototype.getTaskData=function(t){return(ymtApp.data.taskData||{})[t]||{status:s.TASK_STATUS_TYPE.NOT,prog:0,max:0}},e.prototype.getTaskStatus=function(t){var e=this.getTaskCfgById(t);return this.getTaskData(e.type).status||s.TASK_STATUS_TYPE.NOT},e.prototype.getTaskReward=function(t){var e=ymtApp.data.taskData||{};return e[t]=e[t]||{status:s.TASK_STATUS_TYPE.NOT,prog:0,max:0},e[t].status==s.TASK_STATUS_TYPE.COMPLETED&&(e[t].status=s.TASK_STATUS_TYPE.RECEIVED,ymtApp.data.taskData=e,ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_TASK),ymtApp.eventTarget.emit(ymtApp.eventName.TASK_PROG_UPDATE),!0)},e.prototype.getTaskRemind=function(){var t=ymtApp.data.taskData||{};for(var e in t)if(t[e].status==s.TASK_STATUS_TYPE.COMPLETED)return 1;return 0},e.prototype.isFreeCanGet=function(t){return 1!=(ymtApp.data.freeData||{})[t]},e.prototype.showGameSceme=function(t){console.log("GameCtrl showGameSceme",t),1223==t||1023==t?this.getFreeReward(s.FREE_FUNC_ID.ZHUO_MIAN):1131!=t&&1187!=t||this.getFreeReward(s.FREE_FUNC_ID.FU_CHUANG)},e.prototype.getFreeReward=function(t){var e=ymtApp.data.freeData||{};if(1!=e[t]){var i=l.default.I.loginRewards[t];this.addItemList(i,!0),ymtApp.viewMgr.showReward(i),e[t]=1,ymtApp.data.freeData=e,ymtApp.eventTarget.emit(ymtApp.eventName.FREE_REWARD_CHANGE),ymtApp.remindMgr.doRemind(s.REMIND_NAME.REMIND_FREE)}},e.prototype.getFreeRemind=function(){var t=ymtApp.data.freeData||{};return 1!=t[s.FREE_FUNC_ID.LOGIN]||1!=t[s.FREE_FUNC_ID.FU_CHUANG]||1!=t[s.FREE_FUNC_ID.ZHUO_MIAN]?1:0},e.prototype.getGiftRemind=function(){return 0==ymtApp.gameController.getGiftData().time?1:0},e.prototype.getSettingStatus=function(t){var e=ymtApp.data.settingData;return t==s.SETTING_TYPE.MUSIC?e.music:t==s.SETTING_TYPE.EFFECT?e.effect:t==s.SETTING_TYPE.VIBRATE?e.vibrate:0},e.prototype.setSettingStatus=function(t,e){var i=ymtApp.data.settingData;t==s.SETTING_TYPE.MUSIC?(i.music=e,0==e?ymtApp.audioMgr.stopMusic():d.default.getCurProcess()==p.PROCESS_TYPE.GAME?ymtApp.audioMgr.playMusic(ymtApp.main.audio.gameBgm):ymtApp.audioMgr.playMusic(ymtApp.main.audio.bgm)):t==s.SETTING_TYPE.EFFECT?(i.effect=e,0==e&&ymtApp.audioMgr.stopSounds()):t==s.SETTING_TYPE.VIBRATE&&(i.vibrate=e),ymtApp.data.settingData=i},e.prototype.dotGameVideo=function(t,e){t==s.GAME_TYPE.COMMON&&ymtApp.gameController.dotComLevel(e,s.DOT_LEVEL_TYPE.VIDEO)},e.prototype.dotComLevel=function(t,e){if(null!=e){var i="";switch(e){case s.DOT_LEVEL_TYPE.PLAY:i="game_play";break;case s.DOT_LEVEL_TYPE.WIN:i="game_win";break;case s.DOT_LEVEL_TYPE.VIDEO:i="game_video";break;case s.DOT_LEVEL_TYPE.READY_MFZ:i="game_ready_mfz";break;case s.DOT_LEVEL_TYPE.READY_ADDTIME:i="game_ready_addtime";break;case s.DOT_LEVEL_TYPE.READY_ADDXING:i="game_ready_addxing";break;case s.DOT_LEVEL_TYPE.READY_MFLW:i="game_ready_mflw";break;case s.DOT_LEVEL_TYPE.PROP_XC:i="game_xc";break;case s.DOT_LEVEL_TYPE.PROP_MB:i="game_mb";break;case s.DOT_LEVEL_TYPE.PROP_BD:i="game_bd";break;case s.DOT_LEVEL_TYPE.PROP_SX:i="game_sx";break;case s.DOT_LEVEL_TYPE.REVIVE:i="game_revive";break;case s.DOT_LEVEL_TYPE.UNLOCK:i="game_unlock";break;case s.DOT_LEVEL_TYPE.ORDER:i="order";break;case s.DOT_LEVEL_TYPE.ORDER_GET:i="order_get";break;case s.DOT_LEVEL_TYPE.ORDER_TIMEOUT:i="order_timeout";break;case s.DOT_LEVEL_TYPE.ORDER_TIMEGET:i="order_timeget";break;case s.DOT_LEVEL_TYPE.ORDER_JUMP:i="order_jump"}this.dotGameStr(i+"_lv"+t,null)}},e.prototype.dotUseItem=function(t,e){var i;switch(t){case s.ITEM_ID.ELIMINATE:i=s.DOT_LEVEL_TYPE.PROP_XC;break;case s.ITEM_ID.FIRELOCK:i=s.DOT_LEVEL_TYPE.PROP_MB;break;case s.ITEM_ID.FROZEN:i=s.DOT_LEVEL_TYPE.PROP_BD;break;case s.ITEM_ID.REFRESH:i=s.DOT_LEVEL_TYPE.PROP_SX;break;case s.ITEM_ID.WAND:i=s.DOT_LEVEL_TYPE.READY_MFZ;break;case s.ITEM_ID.ADD_TIME:i=s.DOT_LEVEL_TYPE.READY_ADDTIME;break;case s.ITEM_ID.ADD_STAR:i=s.DOT_LEVEL_TYPE.READY_ADDXING}this.dotComLevel(e,i)},e.prototype.dotGameStr=function(t,e,i){null==i&&(i=this.isRookie()),i&&h.default.umaTrackEvent(t+"_new",e),h.default.umaTrackEvent(t,e)},e.prototype.getRecordInfo=function(t,e){var i=ymtApp.data.recordData||{};return null!=i[t]?i[t]:e},e.prototype.setRecordInfo=function(t,e){var i=ymtApp.data.recordData||{};i[t]=e,ymtApp.data.recordData=i},e}(r.default);i.default=g,cc._RF.pop()},{GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKConfig:"SDKConfig",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",Singleton:"Singleton",TransitionUI:"TransitionUI",UIMgr:"UIMgr",WxMgr:"WxMgr"}],GameData:[function(t,e,i){"use strict";cc._RF.push(e,"c5b93dQ701O05IxoLulkYc9","GameData");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("Singleton"),a=t("GameEnums"),r=function(t){function e(){var e,i,o=null!==t&&t.apply(this,arguments)||this;return o._loginData={first:0,login:0},o._level=0,o._lastIds={},o._rewardLevel=0,o._itemData=((e={})[a.ITEM_ID.STRENGTH]=0,e[a.ITEM_ID.STAR]=0,e[a.ITEM_ID.COIN]=0,e[a.ITEM_ID.ELIMINATE]=1,e[a.ITEM_ID.FIRELOCK]=1,e[a.ITEM_ID.FROZEN]=1,e[a.ITEM_ID.REFRESH]=1,e[a.ITEM_ID.WAND]=1,e[a.ITEM_ID.ADD_TIME]=1,e[a.ITEM_ID.ADD_STAR]=1,e),o._dailyData={time:0,status:0},o._challengeData={reward:{},cross:0,dates:[]},o._skinData=((i={})[a.SKIN_TYPE.PLATE]={use:1,free:[1]},i[a.SKIN_TYPE.GRILL]={use:1,free:[1]},i),o._freeData={},o._recordData={},o._roleData={},o._giftData={time:0,times:0},o._settingData={music:1,effect:1,vibrate:1,teXiao:1},o._taskData={},o._exchangeData={},o._aiJson=null,o}return o(e,t),Object.defineProperty(e.prototype,"loginData",{get:function(){return this._loginData},set:function(t){this._loginData=t,ymtApp.utils.setItem(a.STORAGE.LOGIN_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t,ymtApp.utils.setItem(a.STORAGE.LEVEL,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastIds",{get:function(){return this._lastIds},set:function(t){this._lastIds=t,ymtApp.utils.setItem(a.STORAGE.LAST_IDS,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rewardLevel",{get:function(){return this._rewardLevel},set:function(t){this._rewardLevel=t,ymtApp.utils.setItem(a.STORAGE.REWARD_LEVEL,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemData",{get:function(){return this._itemData},set:function(t){this._itemData=t,ymtApp.utils.setItem(a.STORAGE.ITEM_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dailyData",{get:function(){return this._dailyData},set:function(t){this._dailyData=t,ymtApp.utils.setItem(a.STORAGE.DAILY_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"challengeData",{get:function(){return this._challengeData},set:function(t){this._challengeData=t,ymtApp.utils.setItem(a.STORAGE.CHALLENGE_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skinData",{get:function(){return this._skinData},set:function(t){this._skinData=t,ymtApp.utils.setItem(a.STORAGE.SKIN_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"freeData",{get:function(){return this._freeData},set:function(t){this._freeData=t,ymtApp.utils.setItem(a.STORAGE.FREE_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recordData",{get:function(){return this._recordData},set:function(t){this._recordData=t,ymtApp.utils.setItem(a.STORAGE.RECORD_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roleData",{get:function(){return this._roleData},set:function(t){this._roleData=t,ymtApp.utils.setItem(a.STORAGE.ROLE_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"giftData",{get:function(){return this._giftData},set:function(t){this._giftData=t,ymtApp.utils.setItem(a.STORAGE.GIFT_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"settingData",{get:function(){return this._settingData},set:function(t){this._settingData=t,ymtApp.utils.setItem(a.STORAGE.SETTING_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taskData",{get:function(){return this._taskData},set:function(t){this._taskData=t,ymtApp.utils.setItem(a.STORAGE.TASK_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exchangeData",{get:function(){return this._exchangeData},set:function(t){this._exchangeData=t,ymtApp.utils.setItem(a.STORAGE.EXCHANGE_DATA,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aiJson",{get:function(){return this._aiJson},set:function(t){this._aiJson=t},enumerable:!1,configurable:!0}),e}(n.default);i.default=r,cc._RF.pop()},{GameEnums:"GameEnums",Singleton:"Singleton"}],GameEnums:[function(t,e,i){"use strict";var o;cc._RF.push(e,"37eebXwM3NJGaxh50A8Q7Ye","GameEnums"),Object.defineProperty(i,"__esModule",{value:!0}),i.SKEWER_TYPE=i.RANK_TYPE=i.SHELVES_STATUS=i.TAKEOUT_TYPE=i.TASK_TYPE=i.TASK_STATUS_TYPE=i.SETTING_TYPE=i.SKIN_TYPE=i.FORCE_VIDEO_TYPE=i.REWARD_TYPE=i.FREE_FUNC_ID=i.CHALLENGE_DAY_STATUS=i.GAME_LOCK_STATUS=i.GAME_SHELVES_TYPE=i.SKIN_STATUS=i.REMIND_NAME=i.POOL_NAME=i.GUIDE_TYPE=i.DOT_LEVEL_TYPE=i.DOT_TYPE=i.OPEN_SOURCE=i.GAME_TYPE=i.VIEW_TYPE=i.ITEM_ID=i.ACTION_TYPE=i.BUNDLENAME=i.RECORD_KEY=i.STORAGE=void 0,(o=i.STORAGE||(i.STORAGE={})).SETTING_DATA="SETTING_DATA",o.SDK_DATA="SDK_DATA",o.ONLINE_TIME="ONLINE_TIME",o.LEVEL="LEVEL",o.LAST_IDS="LAST_IDS",o.REWARD_LEVEL="REWARD_LEVEL",o.RECORD_DATA="RECORD_DATA",o.LOGIN_DATA="LOGIN_DATA",o.FIRST_DATE="FIRST_DATE",o.ITEM_DATA="ITEM_DATA",o.CHALLENGE_DATA="CHALLENGE_DATA",o.SKIN_DATA="SKIN_DATA",o.EXCHANGE_DATA="EXCHANGE_DATA",o.FREE_DATA="FREE_DATA",o.TURNTABLE_DATA="TURNTABLE_DATA",o.ROLE_DATA="ROLE_DATA",o.DAILY_DATA="DAILY_DATA",o.GIFT_DATA="GIFT_DATA",o.TASK_DATA="TASK_DATA",function(t){t.PIG_GOLD="pigGold",t.GUIDE_TIMES="guideTimes",t.UNLOCK_ITEM="unlockItem",t.GUIDE_ITEM="guideItem",t.DAYTIME_NIGHT="daytimeNight",t.EFFECT_SWITCH="effectSwitch",t.REVIVE_SHARE="reviveShare",t.UP_ROLE_INFO="upRoleInfo",t.STAR_REWARD="starReward",t.REVIVE_FREE="reviveFree",t.FIRST_TAKEOUT="firstTakeout",t.FIRST_TIPS="firstTips",t.USE_CODE="useCode"}(i.RECORD_KEY||(i.RECORD_KEY={})),function(t){t.RESOURCES="resources",t.RES="res",t.SDK="sdk"}(i.BUNDLENAME||(i.BUNDLENAME={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ROTATE=1]="ROTATE",t[t.BREATH=2]="BREATH",t[t.TWINKLE=3]="TWINKLE",t[t.UP=4]="UP",t[t.TREMBLE=5]="TREMBLE",t[t.ROCK=6]="ROCK",t[t.MOVE=7]="MOVE"}(i.ACTION_TYPE||(i.ACTION_TYPE={})),function(t){t[t.STRENGTH=1]="STRENGTH",t[t.STAR=2]="STAR",t[t.COIN=3]="COIN",t[t.ELIMINATE=11]="ELIMINATE",t[t.FIRELOCK=12]="FIRELOCK",t[t.FROZEN=13]="FROZEN",t[t.REFRESH=14]="REFRESH",t[t.WAND=21]="WAND",t[t.ADD_TIME=22]="ADD_TIME",t[t.ADD_STAR=23]="ADD_STAR"}(i.ITEM_ID||(i.ITEM_ID={})),function(t){t[t.UI=1]="UI",t[t.GAME=2]="GAME",t[t.DIALOG=3]="DIALOG",t[t.SDK=4]="SDK",t[t.TIPS=5]="TIPS",t[t.TOP=6]="TOP"}(i.VIEW_TYPE||(i.VIEW_TYPE={})),function(t){t[t.COMMON=1]="COMMON",t[t.CHALLENGE=2]="CHALLENGE",t[t.DAILY=3]="DAILY"}(i.GAME_TYPE||(i.GAME_TYPE={})),function(t){t.CUR_STRENGTH="CUR_STRENGTH",t.CUR_START="CUR_START",t.CUR_COIN="CUR_COIN"}(i.OPEN_SOURCE||(i.OPEN_SOURCE={})),function(t){t.GAME_LOADING_NEW="game_loading_new",t.GAME_PLAY_NEW="game_play_new",t.GAME_PLAY_ZHUTI_NEW="game_play_zhuti_new",t.GAME_PLAY_ZHUYE_NEW="game_play_zhuye_new",t.GAME_PLAY_PHB_NEW="game_play_phb_new",t.GAME_PLAY_CHALLENGE_NEW="game_play_challenge_new",t.GAME_PLAY_GUANQAI_LEVEL1_NEW="game_play_guanqai_level1_new",t.GAME_PLAY_LEVELCHEST="game_play_levelChest",t.GAME_PLAY_STORE="game_play_store",t.GAME_PLAY_LOGINGET="game_play_loginGet",t.GAME_PLAY_ONCECHALLENGE="game_play_onceChallenge",t.SUM_LOGIN="sum_login",t.SUM_LOADING="sum_loading",t.SUM_PLAY="sum_play",t.SUM_HOME="sum_home",t.SUM_PHB="sum_phb",t.SUM_DAILY="sum_daily",t.SUM_CHALLENGE="sum_Challenge",t.SUM_HOME_ST="sum_home_st",t.SUM_GAME_ST="sum_game_st",t.SUM_GAME_ST_AGAIN="sum_game_st_again",t.SUM_LEVELCHEST="sum_levelChest",t.SUM_LOGINGET="sum_loginGet",t.SUM_PLAY_LEVEL="sum_play_level",t.SUM_LUCKY_FREE="sum_lucky_free",t.SUM_LUCKY_UNLOCK="sum_lucky_unlock",t.SUM_ST_EFFECT="sum_st_effect",t.VID_SKIN="vid_skin",t.VID_SKIN_SUC="vid_skin_suc",t.GET_TONG="get_tong",t.GET_XIANG="get_xiang",t.GET_HUOGIFT="get_huogift",t.GET_VIDEOGIFT="get_videogift",t.GET_CLEAN200="get_clean200",t.GET_DOUBLE="get_double",t.GET_MOFA="get_mofa",t.GET_TIME="get_time",t.GET_SHUAXIN="get_shuaxin",t.SUM_LEVEL_GET="sum_level_get",t.SUM_DAILY_GET="sum_daily_get",t.SUM_LOGIN_GIFT="sum_login_gift",t.CLICK_PIFU="click_pifu",t.CLICK_PIFU1="click_pifu1",t.GET_PIFU1="get_pifu1",t.CLICK_PIFU2="click_pifu2",t.GET_PIFU2="get_pifu2",t.CLICK_PIFU3="click_pifu3",t.GET_PIFU3="get_pifu3",t.CLICK_PANZI1="click_panzi1",t.GET_PANZI1="get_panzi1",t.CLICK_PANZI2="click_panzi2",t.GET_PANZI2="get_panzi2",t.CLICK_PANZI3="click_panzi3",t.GET_PANZI3="get_panzi3",t.OPEN_POWER="open_power",t.GET_POWER="get_power",t.CLICK_STAR="click_star",t.GET_STAR="get_star",t.OPEN_COINSHOP="open_coinshop",t.GET_COINSHOP="get_coinshop",t.CLICK_STARDOUBLE="click_stardouble",t.GET_STARDOUBLE="get_stardouble",t.FIRST_FREE="first_free"}(i.DOT_TYPE||(i.DOT_TYPE={})),function(t){t[t.PLAY=1]="PLAY",t[t.WIN=2]="WIN",t[t.VIDEO=3]="VIDEO",t[t.READY_MFZ=4]="READY_MFZ",t[t.READY_ADDTIME=5]="READY_ADDTIME",t[t.READY_ADDXING=6]="READY_ADDXING",t[t.READY_MFLW=7]="READY_MFLW",t[t.PROP_XC=8]="PROP_XC",t[t.PROP_MB=9]="PROP_MB",t[t.PROP_BD=10]="PROP_BD",t[t.PROP_SX=11]="PROP_SX",t[t.REVIVE=12]="REVIVE",t[t.UNLOCK=13]="UNLOCK",t[t.ORDER=21]="ORDER",t[t.ORDER_GET=22]="ORDER_GET",t[t.ORDER_TIMEOUT=23]="ORDER_TIMEOUT",t[t.ORDER_TIMEGET=24]="ORDER_TIMEGET",t[t.ORDER_JUMP=25]="ORDER_JUMP"}(i.DOT_LEVEL_TYPE||(i.DOT_LEVEL_TYPE={})),i.GUIDE_TYPE||(i.GUIDE_TYPE={}),function(t){t.SHELVES="SHELVES",t.GOODS="GOODS",t.STAR="STAR",t.VIDEO="VIDEO",t.COIN="COIN"}(i.POOL_NAME||(i.POOL_NAME={})),function(t){t.REMIND_BANK="REMIND_BANK",t.REMIND_FREE="REMIND_FREE",t.REMIND_GIFT="REMIND_GIFT",t.REMIND_SKIN="REMIND_SKIN",t.REMIND_TASK="REMIND_TASK",t.REMIND_STAR="REMIND_STAR"}(i.REMIND_NAME||(i.REMIND_NAME={})),function(t){t[t.LOCK=1]="LOCK",t[t.VIDEO=2]="VIDEO",t[t.FREE=3]="FREE",t[t.USING=4]="USING"}(i.SKIN_STATUS||(i.SKIN_STATUS={})),function(t){t[t.EMPTY=0]="EMPTY",t[t.BOX=1]="BOX",t[t.PALLET=2]="PALLET",t[t.TOP_GRID=3]="TOP_GRID",t[t.LOCK=4]="LOCK"}(i.GAME_SHELVES_TYPE||(i.GAME_SHELVES_TYPE={})),function(t){t[t.FREE=0]="FREE",t[t.CHAIN=1]="CHAIN",t[t.FROZEN=2]="FROZEN",t[t.DOUBLE=3]="DOUBLE"}(i.GAME_LOCK_STATUS||(i.GAME_LOCK_STATUS={})),function(t){t[t.LOCK=1]="LOCK",t[t.FREE=2]="FREE",t[t.ACHIEVED=3]="ACHIEVED",t[t.NO_REACH=4]="NO_REACH"}(i.CHALLENGE_DAY_STATUS||(i.CHALLENGE_DAY_STATUS={})),function(t){t[t.LOGIN=1]="LOGIN",t[t.FU_CHUANG=2]="FU_CHUANG",t[t.ZHUO_MIAN=3]="ZHUO_MIAN"}(i.FREE_FUNC_ID||(i.FREE_FUNC_ID={})),function(t){t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE",t[t.SINGLE_BOX=3]="SINGLE_BOX",t[t.DOUBLE_BOX=4]="DOUBLE_BOX"}(i.REWARD_TYPE||(i.REWARD_TYPE={})),function(t){t[t.SETTING=1]="SETTING",t[t.HOME=2]="HOME",t[t.WIN=3]="WIN"}(i.FORCE_VIDEO_TYPE||(i.FORCE_VIDEO_TYPE={})),function(t){t[t.GRILL=1]="GRILL",t[t.PLATE=2]="PLATE"}(i.SKIN_TYPE||(i.SKIN_TYPE={})),function(t){t[t.MUSIC=1]="MUSIC",t[t.EFFECT=2]="EFFECT",t[t.VIBRATE=3]="VIBRATE",t[t.TE_XIAO=4]="TE_XIAO"}(i.SETTING_TYPE||(i.SETTING_TYPE={})),function(t){t[t.NOT=1]="NOT",t[t.COMPLETED=2]="COMPLETED",t[t.RECEIVED=3]="RECEIVED"}(i.TASK_STATUS_TYPE||(i.TASK_STATUS_TYPE={})),function(t){t[t.CROSS=1]="CROSS",t[t.BOX=2]="BOX",t[t.RELIVE=3]="RELIVE",t[t.VIDEO=4]="VIDEO",t[t.COMBO=5]="COMBO",t[t.ELIMINATE=6]="ELIMINATE",t[t.FIRELOCK=7]="FIRELOCK",t[t.FROZEN=8]="FROZEN",t[t.REFRESH=9]="REFRESH"}(i.TASK_TYPE||(i.TASK_TYPE={})),function(t){t[t.FINISH=1]="FINISH",t[t.TIME_OUT=2]="TIME_OUT",t[t.SKIP=3]="SKIP"}(i.TAKEOUT_TYPE||(i.TAKEOUT_TYPE={})),function(t){t[t.COM=0]="COM",t[t.EMPTY=1]="EMPTY",t[t.FULL=2]="FULL",t[t.FAIL=3]="FAIL"}(i.SHELVES_STATUS||(i.SHELVES_STATUS={})),function(t){t[t.WORD=1]="WORD",t[t.FRIEND=2]="FRIEND"}(i.RANK_TYPE||(i.RANK_TYPE={})),function(t){t[t.COM=1]="COM",t[t.UNKNOWN=2]="UNKNOWN",t[t.FROZEN=3]="FROZEN"}(i.SKEWER_TYPE||(i.SKEWER_TYPE={})),cc._RF.pop()},{}],GameEvents:[function(t,e,i){"use strict";cc._RF.push(e,"3d720GtwRVIPqcClWY8wIAi","GameEvents"),Object.defineProperty(i,"__esModule",{value:!0}),i.default={CLICK:"click",LOAD_FINISH:"LOAD_FINISH",LOAD_PROGERSS:"LOAD_PROGERSS",CROSS_DAY:"CROSS_DAY",GAME_HIDE:"GAME_HIDE",GAME_SHOW:"GAME_SHOW",STRENGTH_CHANGE:"STRENGTH_CHANGE",REMIND_CHANGE:"REMIND_CHANGE",ITEM_CHANGE:"ITEM_CHANGE",ITEM_USE:"ITEM_USE",SHOW_VIEW:"SHOW_VIEW",HIDE_VIEW:"HIDE_VIEW",GOODS_ELIMINATE:"GOODS_ELIMINATE",LEVEL_CHANGE:"LEVEL_CHANGE",CLEAR_GOODS_TIPS:"CLEAR_GOODS_TIPS",ITEM_TIMEOUT:"ITEM_TIMEOUT",SKIN_CHANGE:"SKIN_CHANGE",GAME_TOUCH:"GAME_TOUCH",GAME_RESET:"GAME_RESET",GAME_REBORN:"GAME_REBORN",CHALLENGE_REWARD_CHANGE:"CHALLENGE_REWARD_CHANGE",CHALLENGE_STATUS_CHANGE:"CHALLENGE_STATUS_CHANGE",AREA_CHANGE:"AREA_CHANGE",FREE_REWARD_CHANGE:"FREE_REWARD_CHANGE",SETTING_CHANGE:"SETTING_CHANGE",REQ_RANK:"REQ_RANK",UPDATE_REWARD_LEVEL:"UPDATE_REWARD_LEVEL",SELE_SEAT_DATA:"SELE_SEAT_DATA",EVENT_LOG:"EVENT_LOG",EVENT_REMOVE:"EVENT_REMOVE",GIFT_CHANGE:"GIFT_CHANGE",TASK_PROG_UPDATE:"TASK_PROG_UPDATE",GOODS_COMBO:"GOODS_COMBO",VIEW_CLOSE:"VIEW_CLOSE",VIEW_VISIBLE:"VIEW_VISIBLE"},cc._RF.pop()},{}],GamePixAd:[function(t,e,i){"use strict";cc._RF.push(e,"74815+fGkdBEoXLHk1BbSjI","GamePixAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adPlaying=!1,e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.isReward=!1,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){var e=this;this.isInitAd||(this.isInitAd=!0,console.log("initVideo==============="),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&(console.log("\u9875\u9762\u88ab\u663e\u793a\u4e86"),e.adPlaying&&(cc.audioEngine.pauseAll(),cc.director.pause()))}),t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){},e.prototype.showVideo=function(t){var e=this;this.videocallback=t,1==window.isReady?(this.adPlaying=!0,cc.audioEngine.pauseAll(),cc.director.pause(),GamePix.rewardAd().then(function(t){e.adPlaying=!1,t.success?(cc.director.resume(),cc.audioEngine.resumeAll(),console.log("showReward success"),e.videocallback&&e.videocallback(!0)):(console.log("Error while open video ad"),cc.director.resume(),cc.audioEngine.resumeAll(),e.videocallback&&e.videocallback(!1))})):(this.adPlaying=!1,console.log("reward ad is not ready"),this.videocallback&&this.videocallback(!1))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){var t=this;cc.audioEngine.pauseAll(),cc.director.pause(),console.log("YMT_showInterstitial"),this.adPlaying=!0,GamePix.interstitialAd().then(function(e){t.adPlaying=!1,e.success?(cc.audioEngine.resumeAll(),cc.director.resume(),t.canShowInterstitialAd=!1,setTimeout(function(){console.log("YMT_\u53ef\u4ee5\u64ad\u653e\u63d2\u5c4f\u4e86!!!!!!!!!!!!!!!======"),t.canShowInterstitialAd=!0},t.interstitialAdDelay)):(cc.audioEngine.resumeAll(),cc.director.resume())})},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.l("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],GameServerConf:[function(t,e,i){"use strict";cc._RF.push(e,"5757eAG8DpElaJk9zB+bjyB","GameServerConf"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("GameEnums"),n=function(){function t(){var t,e,i,n,a;this.open_test_id=[],this.openIdList=[],this.userCodes=[{id:123,openId:"123456",rewards:[{itemId:o.ITEM_ID.ELIMINATE,amount:1},{itemId:o.ITEM_ID.REFRESH,amount:1}]}],this.guideList=[],this.showWaitCircleTime=0,this.hideWaitCircleTime=30,this.guoguanVisible=0,this.maxItemNum=1e3,this.shareTime=3,this.gameTipsTime=10,this.gameFullTipsTime=3,this.useItemType=1,this.tipsItemType=0,this.obtainUseType=1,this.gameBannerVisible=0,this.botBannerHeight=180,this.botHeightRate=.1,this.cutTimeAct=15,this.wordWarnTime=59,this.gameTimeWarn=[90,30,15],this.reviveTimeCfg={star:60,add:10,end:120},this.goodsTipsMap=[{area:[1,3],time:3},{area:[4,8],time:5},{area:[9,-1],time:5}],this.comItemTips=[{itemId:o.ITEM_ID.ELIMINATE,weight:1},{itemId:o.ITEM_ID.FIRELOCK,weight:1},{itemId:o.ITEM_ID.FROZEN,weight:1,rate:50},{itemId:o.ITEM_ID.REFRESH,weight:1}],this.challengeItemTips=[{itemId:o.ITEM_ID.ELIMINATE,weight:1},{itemId:o.ITEM_ID.FIRELOCK,weight:1},{itemId:o.ITEM_ID.FROZEN,weight:1,rate:70},{itemId:o.ITEM_ID.REFRESH,weight:1}],this.rewardLevelCfg={interval:10,reward:[{itemId:o.ITEM_ID.COIN,amount:250}],circle:[],rand:[{itemId:o.ITEM_ID.ELIMINATE,amount:1,weight:1},{itemId:o.ITEM_ID.FIRELOCK,amount:1,weight:1},{itemId:o.ITEM_ID.FROZEN,amount:1,weight:1},{itemId:o.ITEM_ID.REFRESH,amount:1,weight:1}]},this.gameTime=300,this.gameAddTime=60,this.gameStep=60,this.gameAddStep=10,this.gamefrozenTime=30,this.enterStartGame=1,this.gameItemRemoteStart=290,this.gameItemRemoteList=[],this.freshDoubleRate=.6,this.wxQRCodeUrl="",this.gameItemUrl="",this.gamesCfg=((t={})[o.GAME_TYPE.COMMON]={name:"\u666e\u901a\u5173\u5361",resUrl:"config/command/",level:[{area:[0,5],time:300},{area:[6,-1],time:240}]},t[o.GAME_TYPE.CHALLENGE]={name:"\u6311\u6218\u5173\u5361",resUrl:"config/challenge/",level:[{area:[0,5],step:60},{area:[6,-1],step:50}],unlock:0},t[o.GAME_TYPE.DAILY]={name:"\u6bcf\u65e5\u6311\u6218",resUrl:"config/daily/",level:[{area:[0,0],time:300},{area:[1,1],time:240}],unlock:0},t),this.lianWinCfg=((e={})[o.GAME_TYPE.COMMON]=[10,20,30],e[o.GAME_TYPE.CHALLENGE]=[2,4,6],e),this.exchangeCfg=[],this.challengeBoxCfg=[{win:3,num:1},{win:10,num:2},{win:30,num:3}],this.challengeRewards=[{itemId:o.ITEM_ID.FIRELOCK,amount:1},{itemId:o.ITEM_ID.ADD_TIME,amount:1},{itemId:o.ITEM_ID.ADD_STAR,amount:1},{itemId:o.ITEM_ID.ELIMINATE,amount:1},{itemId:o.ITEM_ID.FROZEN,amount:1},{itemId:o.ITEM_ID.REFRESH,amount:1},{itemId:o.ITEM_ID.COIN,amount:100}],this.areaChangeTimes=1,this.loginRewards=((i={})[o.FREE_FUNC_ID.LOGIN]=[{itemId:o.ITEM_ID.FIRELOCK,amount:1},{itemId:o.ITEM_ID.ADD_TIME,amount:1},{itemId:o.ITEM_ID.ADD_STAR,amount:1}],i[o.FREE_FUNC_ID.FU_CHUANG]=[{itemId:o.ITEM_ID.ELIMINATE,amount:1},{itemId:o.ITEM_ID.FROZEN,amount:1}],i[o.FREE_FUNC_ID.ZHUO_MIAN]=[{itemId:o.ITEM_ID.REFRESH,amount:1},{itemId:o.ITEM_ID.WAND,amount:1}],i),this.dailyShareReward={itemId:o.ITEM_ID.REFRESH,amount:1},this.dailyShareLimit=[0,0],this.dailyShareOpen=0,this.turntableCfg={times:3,fresh:86400,rewards:[{itemId:o.ITEM_ID.COIN,amount:50},{itemId:o.ITEM_ID.COIN,amount:80},{itemId:o.ITEM_ID.COIN,amount:100},{itemId:o.ITEM_ID.COIN,amount:120},{itemId:o.ITEM_ID.COIN,amount:150},{itemId:o.ITEM_ID.COIN,amount:200},{itemId:o.ITEM_ID.COIN,amount:220},{itemId:o.ITEM_ID.COIN,amount:250}]},this.piggyBankCfg={add:20,coin:300,max:600},this.showReadyLevel=12,this.skinUnlockCfg=((n={})[o.SKIN_TYPE.GRILL]=[{id:1,level:0},{id:2,level:5},{id:3,level:15},{id:4,level:25}],n[o.SKIN_TYPE.PLATE]=[{id:1,level:0},{id:2,level:7},{id:3,level:17},{id:4,level:27}],n),this.propUnlockCfg=((a={})[o.ITEM_ID.ELIMINATE]=4,a[o.ITEM_ID.FIRELOCK]=6,a[o.ITEM_ID.FROZEN]=8,a[o.ITEM_ID.REFRESH]=2,a[o.ITEM_ID.WAND]=12,a[o.ITEM_ID.ADD_TIME]=16,a[o.ITEM_ID.ADD_STAR]=20,a),this.propSorList=[o.ITEM_ID.ELIMINATE,o.ITEM_ID.REFRESH,o.ITEM_ID.FROZEN,o.ITEM_ID.FIRELOCK],this.comboCfg=[{combo:[1,3],star:1,time:10},{combo:[4,6],star:2,time:8},{combo:[7,9],star:3,time:6},{combo:[10,12],star:4,time:5},{combo:[13,-1],star:5,time:4}],this.dailyBoxReward={com:[{itemId:o.ITEM_ID.COIN,amount:300}],rand:[{itemId:o.ITEM_ID.ELIMINATE,amount:1,weight:1},{itemId:o.ITEM_ID.FIRELOCK,amount:1,weight:1},{itemId:o.ITEM_ID.FROZEN,amount:1,weight:1},{itemId:o.ITEM_ID.REFRESH,amount:1,weight:1},{itemId:o.ITEM_ID.WAND,amount:1,weight:1},{itemId:o.ITEM_ID.ADD_TIME,amount:1,weight:1},{itemId:o.ITEM_ID.ADD_STAR,amount:1,weight:1}]},this.starBoxReward={cost:1e3,com:[{itemId:o.ITEM_ID.COIN,amount:50}],circle:[{itemId:o.ITEM_ID.ELIMINATE,amount:1},{itemId:o.ITEM_ID.REFRESH,amount:1}]},this.forceVideoCfg={setting:{rate:.08,level:6,reward:[{itemId:o.ITEM_ID.COIN,amount:200}]},home:{rate:.08,level:6,reward:[{itemId:o.ITEM_ID.COIN,amount:200}]},win:{rate:.08,level:4,reward:[{itemId:o.ITEM_ID.COIN,amount:200}]}},this.forceAdInsertCfg={setting:{rate:.08,level:2},win:{rate:.08,level:5}},this.skinTryCfg={rate:.1,level:8},this.shopList=[{reward:{itemId:o.ITEM_ID.COIN,amount:100},video:1,cost:0},{reward:{itemId:o.ITEM_ID.ELIMINATE,amount:1},video:1,cost:100},{reward:{itemId:o.ITEM_ID.FIRELOCK,amount:1},video:1,cost:300},{reward:{itemId:o.ITEM_ID.FROZEN,amount:1},video:1,cost:100},{reward:{itemId:o.ITEM_ID.REFRESH,amount:1},video:1,cost:300}],this.strengthCfg={video:3,costAdd:1,costValue:100},this.commonUnlockLevel=25,this.dailyUnlockLevel=18,this.gameFilterComLv=[0,1,2,3,4,5,6,7,8,9,10,11],this.gameCenDistance=50,this.videoCabinetLevel=5,this.priorRandGoods=[20,50],this.grillSmokeInterval=10,this.luckyGiftCfg={time:900,addTime:300,firstReward:[{itemId:o.ITEM_ID.ELIMINATE,amount:1},{itemId:o.ITEM_ID.FIRELOCK,amount:1},{itemId:o.ITEM_ID.FROZEN,amount:1},{itemId:o.ITEM_ID.REFRESH,amount:1},{itemId:o.ITEM_ID.COIN,amount:100}],reward:[{itemId:o.ITEM_ID.ELIMINATE,amount:2},{itemId:o.ITEM_ID.FIRELOCK,amount:2},{itemId:o.ITEM_ID.FROZEN,amount:2},{itemId:o.ITEM_ID.REFRESH,amount:2},{itemId:o.ITEM_ID.COIN,amount:200}]},this.reviveShareCfg={day:15,rate:100,times:10},this.skinUnlockShowTime=3,this.skinBgSortPath=[1,2,3,4,5,6,7,8,9,10,11],this.skinBgExptSortPath=[4,2,3,1,5,6,7,8,9,10,11],this.taskList=[{id:1,type:o.TASK_TYPE.CROSS,name:"\u6bcf\u65e5\u901a\u5173",reward:{itemId:o.ITEM_ID.COIN,amount:50},max:5},{id:2,type:o.TASK_TYPE.BOX,name:"\u5173\u5361\u5b9d\u7bb1",reward:{itemId:o.ITEM_ID.FIRELOCK,amount:1},max:1},{id:3,type:o.TASK_TYPE.RELIVE,name:"\u590d\u6d3b\u8fbe\u4eba",reward:{itemId:o.ITEM_ID.COIN,amount:50},max:2},{id:4,type:o.TASK_TYPE.VIDEO,name:"\u89c2\u770b\u5e7f\u544a",reward:{itemId:o.ITEM_ID.ELIMINATE,amount:1},max:1},{id:5,type:o.TASK_TYPE.COMBO,name:"\u70e4\u4e32\u6d88\u9664",reward:{itemId:o.ITEM_ID.COIN,amount:20},max:200},{id:6,type:o.TASK_TYPE.ELIMINATE,name:"\u4f7f\u7528\u6253\u5305",reward:{itemId:o.ITEM_ID.COIN,amount:20},max:2},{id:7,type:o.TASK_TYPE.FIRELOCK,name:"\u4f7f\u7528\u55b7\u706b\u67aa",reward:{itemId:o.ITEM_ID.COIN,amount:20},max:2},{id:8,type:o.TASK_TYPE.FROZEN,name:"\u51bb\u7ed3\u65f6\u95f4",reward:{itemId:o.ITEM_ID.COIN,amount:20},max:2},{id:9,type:o.TASK_TYPE.REFRESH,name:"\u5173\u5361\u5237\u65b0",reward:{itemId:o.ITEM_ID.COIN,amount:20},max:2}],this.isOpenTest=1,this.videoAddTime=15,this.showPlateNum=1,this.firstReviveFree=1,this.itemChooseLevel=51,this.takeoutRange=[2,3],this.takeoutTime=[60,15]}return Object.defineProperty(t,"I",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.parse=function(t){if(t)for(var e=0,i=Object.entries(this);e<i.length;e++){var o=i[e],n=o[0];if(o[1],t.hasOwnProperty(n)){if(null==t[n]){console.error("data err",n);continue}this[n]=t[n]}}},t._instance=null,t}();i.default=n,cc._RF.pop()},{GameEnums:"GameEnums"}],GameSys:[function(t,e,i){"use strict";cc._RF.push(e,"82ae7QhgrxCB7kZ05wmSmIF","GameSys");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.switchList={YSGG:!0,CKXQ:!0,adUpdateTime:25,KSYXYS:[1,1],btnDelay:0,XYGYS:[1,1]},e.lowerPhoneType=4,e.playGameCount=0,e}(t("BaseGameSys").default);i.default=n,cc._RF.pop()},{BaseGameSys:"BaseGameSys"}],GameUI:[function(t,e,i){"use strict";cc._RF.push(e,"270c5znOmFDdaDGiNb/KGLg","GameUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("LocalizeMgr"),c=t("BaseUI"),l=t("GoodsItem"),d=t("GrillItem"),u=t("ReadyBtn"),p=t("GameEnums"),h=t("MainConfig"),f=t("SDKMgr"),m=t("GameServerConf"),g=t("UIMgr"),_=t("WxMgr"),y=t("TransitionUI"),v=t("./XDAD/XDADpublic").default,I=cc._decorator,A=I.ccclass,T=I.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprMFZ=null,e.sprBg=null,e.layerTop=null,e.nodeTop=null,e.btnSetting=null,e.btnNext=null,e.btnAddTime=null,e.progCombo=null,e.labProg=null,e.labLv=null,e.sprStar=null,e.labStar=null,e.sprClock=null,e.labTime=null,e.progLevel=null,e.sprLevel=null,e.btnRemove=null,e.btnLog=null,e.layerMain=null,e.layers=[],e.layerLocks=[],e.nodeCen=null,e.sprPlate=null,e.spPlate=null,e.layoutBtn=null,e.nodeBot=null,e.sprTips=null,e.sprBubble=null,e.btnClose=null,e.labTips=null,e.progTimer=null,e.sprCombo=null,e.labCombo=null,e.sprFinger=null,e.nodeFirelock=null,e.sprFirelock=null,e.sprFrozen=null,e.sprWarn=null,e.nodeWait=null,e.nodeTimeOut=null,e.sprTimeOut=null,e.guideTips=null,e.guideMask=null,e.guideBlock=null,e.labGuide=null,e.guideFinger=null,e.grillItem=null,e.btnItem=null,e.shelvesList=[],e.btnItemList=[],e.botList=[],e.layerDiff=[2],e.initTime=0,e.initStep=0,e.curTime=0,e.starMult=1,e.starScore=0,e.countStar=0,e.comboTime=0,e.comboCutTime=0,e.comboTimes=0,e.frozenStep=0,e.frozenTime=0,e.tipsTime=0,e.maxLayerCount=0,e.checkTimes=0,e.isFinish=!1,e.isTimeOut=!1,e.moveCount=0,e.goodsTipsTime=0,e.goodsTipsTimes=1,e.isTips=!1,e.propList=[],e.totalProg=0,e.curProg=0,e.isCheckmate=!1,e.isStart=!1,e.reviveTimes=0,e.tipsPosY=300,e.doubleRate=.4,e.curShelvesCfg=[],e.hasFire=!1,e.grillMap={},e.lockSeatList=[],e.waitNum=0,e.timeIdx=-1,e.countTime=0,e}return o(e,t),e.prototype.init=function(){var t=this;this.onClick(this.btnSetting,this.onClickSetting,this),this.onClick(this.btnClose,this.onClickClose,this),this.onClick(this.btnRemove,function(){t.curTime=3,t.labTime.string=""+ymtApp.utils.formatSecToStr(Math.ceil(t.curTime))}),this.onClick(this.btnNext,function(){t.gameType==p.GAME_TYPE.DAILY?t.crossDailyGame():(ymtApp.viewMgr.showView(h.UI.WIN,{gameType:t.gameType,level:t.curLevel,star:30}),ymtApp.gameController.crossGame(t.gameType,t.curLevel))}),this.onClick(this.btnAddTime,this.onClickAddTime,this),this.btnLog.active=ymtApp.cons.isDebug(),this.btnRemove.active=ymtApp.cons.isDebug(),this.btnNext.active=ymtApp.cons.isDebug(),this.btnAddTime.active=ymtApp.cons.isDebug(),cc.tween(this.sprWarn).to(.5,{opacity:100}).to(.5,{opacity:255}).union().repeatForever().start(),this.nodeFirelock.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.GOODS_ELIMINATE,this.onGoodsEliminate,this),this.eventOn(ymtApp.eventName.GAME_TOUCH,this.onGameTouch,this),this.eventOn(ymtApp.eventName.GAME_RESET,this.onGameReset,this),this.eventOn(ymtApp.eventName.GAME_REBORN,this.onGameReborn,this),this.eventOn(ymtApp.eventName.CLEAR_GOODS_TIPS,this.clearGoodsTips,this),this.eventOn(ymtApp.eventName.ITEM_TIMEOUT,this.onItemTimeout,this)},e.prototype.open=function(){var e=this;t.prototype.open.call(this);var i=ymtApp.gameController.getEnterGame();this.gameType=i.gameType,this.curLevel=i.level,null==this.curLevel&&(this.curLevel=ymtApp.gameController.getLevelByType(this.gameType)),ymtApp.audioMgr.isPlayMusic()||ymtApp.audioMgr.playMusic(ymtApp.main.audio.gameBgm),this.initGame(),this.doOpenAct(function(){e.initView(),e.startGame()})},e.prototype.doOpenAct=function(t,e){var i=this;void 0===e&&(e=!0);var o=function(){cc.Tween.stopAllByTarget(i.nodeTop),cc.Tween.stopAllByTarget(i.layoutBtn),i.nodeTop.y=200,i.layoutBtn.y=-200;var e=.02;1==m.default.I.gameBannerVisible&&(e=m.default.I.botHeightRate||.1);var o=e*i.node.height+i.nodeBot.y,n=o+55;i.tipsPosY=o+110+i.sprTips.height/2+30,i.sprTips.y=i.tipsPosY,i.progTimer.node.y=o+110+30,i.scheduleOnce(function(){cc.tween(i.nodeTop).to(.4,{y:0},cc.easeCubicActionOut()).start(),cc.tween(i.layoutBtn).to(.4,{y:n},cc.easeCubicActionOut()).call(function(){i.checkGuideAct()}).start()},.5),t&&t()};this.scheduleOnce(function(){o()})},e.prototype.initView=function(){var t=this;this.propList=m.default.I.propSorList,this.propList&&0!=this.propList.length||(this.propList=[p.ITEM_ID.ELIMINATE,p.ITEM_ID.REFRESH,p.ITEM_ID.FROZEN,p.ITEM_ID.FIRELOCK]),ymtApp.nodeMgr.addListItem(4,this.btnItemList,this.btnItem,this.layoutBtn,function(e,i){var o=t.propList[i];e.getComponent(u.default).setData(o,{gameType:t.gameType,level:t.curLevel},function(e){t.onClickClose(),t.onClickUseItem(o,e)},function(){return t.checkClickItem(o)},!0)}),this.guideTips.active=!1,this.nodeWait.active=!1,this.sprFrozen.active=!1,this.progLevel.node.active=this.gameType==p.GAME_TYPE.DAILY,this.nodeTimeOut.active=!1,this.nodeFirelock.active=!1,this.sprFirelock.active=!1,this.updateNight()},e.prototype.startGame=function(t){return a(this,void 0,void 0,function(){var e,i=this;return r(this,function(o){switch(o.label){case 0:return this.gameType==p.GAME_TYPE.COMMON?(ymtApp.gameController.dotGameStr(p.DOT_TYPE.SUM_PLAY_LEVEL),ymtApp.gameController.dotComLevel(this.curLevel+1,p.DOT_LEVEL_TYPE.PLAY)):this.gameType==p.GAME_TYPE.CHALLENGE||this.gameType==p.GAME_TYPE.DAILY&&(this.progLevel.progress=this.curLevel,this.sprLevel.active=1==this.curLevel),this.initGame(),[4,ymtApp.gameController.getGameRes(this.gameType,this.curLevel)];case 1:return(e=o.sent())?[4,this.updateLevel(e)]:[3,3];case 2:return o.sent(),t&&t(),[3,4];case 3:ymtApp.gameController.preloadNext(this.gameType,this.curLevel,function(e){return a(i,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,this.updateLevel(e)];case 1:return i.sent(),t&&t(),[2]}})})}),o.label=4;case 4:return this.gameType==p.GAME_TYPE.COMMON&&ymtApp.gameController.preloadNext(this.gameType,this.curLevel+1),[2]}})})},e.prototype.initGame=function(){this.clear(),ymtApp.gameController.initStart(),this.onClickClose()},e.prototype.initTipsTime=function(){this.isCheckmate?this.tipsTime=.1:this.tipsTime=m.default.I.gameTipsTime||5,this.goodsTipsTime=ymtApp.gameController.getTipsTime(this.goodsTipsTimes)},e.prototype.showGuide=function(t,e,i){if(void 0===e&&(e=cc.v2()),void 0===i&&(i=cc.v2()),this.sprFinger.active=t,cc.Tween.stopAllByTarget(this.sprFinger),t){var o=ymtApp.tweenMgr.getMoveTime(e,i,300);this.sprFinger.zIndex=999,cc.tween(this.sprFinger).to(0,{position:cc.v3(e)}).to(o,{position:cc.v3(i)}).delay(.3).union().repeatForever().start()}},e.prototype.updateTop=function(t){this.starScore=0,this.countStar=0,this.goodsTipsTimes=1;var e=ymtApp.gameController.getTimeData(this.gameType,this.curLevel);if(this.doubleRate=t.doubleRate||.4,this.comboNum=t.comboNum,this.gameType==p.GAME_TYPE.CHALLENGE){var i=ymtApp.gameController.getDateByDay(this.curLevel);this.labLv.string=i.month+"."+i.day}else this.labLv.string=s.LocalizeMgr.inst.toLocalize("\u7b2c{0}\u5173",[String(this.curLevel+1)]);this.labStar.string="0",t.time?this.curTime=t.time:this.curTime=e.time,ymtApp.gameController.useItem(p.ITEM_ID.ADD_TIME)&&(this.curTime+=60),this.initTime=this.curTime,this.doTimerAct(!0),this.labTime.string=""+ymtApp.utils.formatSecToStr(Math.ceil(this.curTime)),this.labStar.string=""+this.starScore,ymtApp.gameController.useItem(p.ITEM_ID.ADD_STAR)?this.starMult=2:this.starMult=1},e.prototype.updateLevel=function(t){return a(this,void 0,void 0,function(){var e,i,o,n,a,s,c,l,u,h,f,g,_,y,v,I,A,T,E,S,w,C,M,b,D,R,N,L,G,O,P,k,B,U,V,F,x,Y,H,W,K,z,j,X,Z,q,J,Q,$,tt,et,it,ot,nt,at,rt,st,ct,lt,dt,ut,pt,ht,ft,mt,gt,_t,yt,vt,It,At,Tt,Et,St,wt,Ct,Mt,bt,Dt,Rt,Nt,Lt,Gt,Ot,Pt,kt,Bt,Ut,Vt,Ft,xt,Yt,Ht;return r(this,function(r){switch(r.label){case 0:if(this.updateTop(t),this.initTipsTime(),e=ymtApp.gameController.getShelvesCfg(this.gameType),i=t.shelves,(!t.shelves||0==t.shelves.length)&&0==(i=Object.keys(e)).length)return[2];if(t.exclude&&t.exclude.length>0)for(Gt=0;Gt<t.exclude.length;Gt++)for(Bt=0;Bt<i.length;Bt++)if(t.exclude[Gt]==i[Bt]){i.splice(Bt,1);break}if(o=ymtApp.utils.randByList(i,!1),this.curShelvesCfg=ymtApp.utils.clone(e[o]),this.curLevel<m.default.I.videoCabinetLevel-1)for(Gt=0;Gt<this.curShelvesCfg.length;Gt++)for(n=this.curShelvesCfg[Gt]||[],Bt=0;Bt<n.length;Bt++)n[Bt]==p.GAME_SHELVES_TYPE.LOCK&&(this.curShelvesCfg[Gt][Bt]=p.GAME_SHELVES_TYPE.BOX);if(a=this.curShelvesCfg.length,console.warn("shelvesLen",a),s=0,c=4,(l=t.lockType||0)!=p.GAME_LOCK_STATUS.FREE&&(t.lockArea&&t.lockArea.length>1&&(s=ymtApp.utils.randByArea([t.lockArea[0],t.lockArea[1]+1],!0)),t.lockNum&&t.lockNum.length>1&&(c=ymtApp.utils.randByArea([t.lockNum[0],t.lockNum[1]+1],!0))),u={},null==(h=ymtApp.utils.clone(t.goods||[]))||0==h.length){if(h=[],null==(f=t.goodsTypes)||f.length<=0){if(!(Ft=t.goodsNum)){for(g=t.layer[1]||5,_=0,y=0;y<this.curShelvesCfg.length;y++)for(v=0;v<this.curShelvesCfg[y].length;v++)(xt=this.curShelvesCfg[y][v])==p.GAME_SHELVES_TYPE.TOP_GRID?_+=3:xt==p.GAME_SHELVES_TYPE.BOX&&(_+=3*g);Ft=Math.floor(_/3-1)}for(I=m.default.I.priorRandGoods||[20,50],A=0,T=ymtApp.cons.comCfg.GOODS_TOP_NUM,E=0;E<I.length;E++){if(Ft<I[E]){T=I[E],null!=I[E-1]&&(A=I[E-1]);break}A=I[E],T=ymtApp.cons.comCfg.GOODS_NUM}S=T-A,w=Ft-A,C=Array.from({length:A},function(t,e){return e+1}),M=Array.from({length:S},function(t,e){return A+e+1}),Ot=ymtApp.utils.randList(M,w),f=C.concat(Ot)}for(b=[],D=[],R={},N=t.layer||[1,2],L=N[1],G=0,O=t.freeSeats||[],G=O&&O.length>0?3*O.length:3*L,(P=t.empty||0)>3&&(G+=P-3),k=this.randLayer(N,R,t.goodsCount,G),B=k.max,U=k.min,V=k.count,Gt=0;Gt<10&&!(V<=B);Gt++)k=this.randLayer(N,R,t.goodsCount,G),B=k.max,U=k.min,(V=k.count)>B&&9==Gt&&(V=B);for(F=-1,Gt=0;Gt<this.curShelvesCfg.length;Gt++)for(Bt=0;Bt<this.curShelvesCfg[Gt].length;Bt++)if(null!=(Ut=this.curShelvesCfg[Gt][Bt])&&Ut!=p.GAME_SHELVES_TYPE.EMPTY&&Ut!=p.GAME_SHELVES_TYPE.PALLET)for(F++,Ut==p.GAME_SHELVES_TYPE.BOX&&(u[F]=1),R[Gt]=R[Gt]||{},Ft=R[Gt][Bt]||0,Tt=0;Tt<Ft;Tt++)if(D[Tt]=D[Tt]||[],b[Tt]=b[Tt]||[],Ut==p.GAME_SHELVES_TYPE.TOP_GRID)D[Tt].push({seat:F,pos:2});else for(x=Math.floor(3*Math.random())+1,Y=1;Y<=3;Y++)x==Y?D[Tt].push({seat:F,pos:Y}):b[Tt].push({seat:F,pos:Y});if(0==s)u={};else for(H=Object.keys(u),Ot=ymtApp.utils.randList(H,s),u={},Gt=0;Gt<Ot.length;Gt++)u[Ot[Gt]]=1;for(W=[],K=Math.floor(V/3/f.length),Gt=0;Gt<f.length;Gt++)for(Bt=0;Bt<3*K;Bt++)W.push(f[Gt]);for((z=f.slice(0,(V-W.length)/3)).sort(function(){return Math.random()-.5}),Gt=0;Gt<z.length;Gt++)for(Bt=0;Bt<3;Bt++)W.push(z[Gt]);for(j=[],Z=(X=V-U)/(B-U),Tt=0;Tt<D.length;Tt++)if(ct=D[Tt]||[],j[Tt]=ct.length,ut=b[Tt]||[],q=ut.length,Tt==D.length-1)if(X>q)for(X-=q,j[Tt]+=q,J=Math.ceil(X/Tt),Q=0,P&&(J=Math.ceil(X/(Tt-1)),Q=1),Gt=Q;Gt<Tt&&!(X<=0);Gt++)X<J?j[Gt]+=X:(X-=J,j[Gt]+=J);else j[Tt]+=X;else{if(q<=0)continue;Ft=Math.floor(q*Z),0==Tt&&P&&(Ft=Math.max(q-P,0)),X-=Ft,j[Tt]+=Ft}for($=[],Array.isArray(t.layerDiff)?this.layerDiff=t.layerDiff||[2]:this.layerDiff=[t.layerDiff||2],tt=0,Gt=0;Gt<this.layerDiff.length;Gt++)tt+=this.layerDiff[Gt];for(;tt<j.length;)et=this.layerDiff.length,it=Math.min(this.layerDiff[et-1],j.length-tt),this.layerDiff[et]=it,tt+=it;for(ot=0,Gt=0;Gt<j.length;){for(nt=this.layerDiff[ot],at=0,st=0;st<nt;st++)at+=j[Gt+st]||0;for(rt=W.splice(0,at).sort(function(){return Math.random()-.5}),st=0;st<nt;st++)j[Gt+st]&&($[Gt+st]=rt.splice(0,j[Gt+st]));Gt+=nt,ot++}for(Tt=0;Tt<D.length;Tt++)if(ct=D[Tt],!((lt=$[Tt]||[]).length<=0)){for(Gt=0;Gt<ct.length;Gt++)dt=ct[Gt],(ht=lt.splice(0,1))[0]&&(h[dt.seat]=h[dt.seat]||[],h[dt.seat][Tt]=((Yt={})[""+dt.pos]=ht[0],Yt));if(!(lt.length<=0))for(ut=b[Tt]||[],Ot=ymtApp.utils.randList(ut,lt.length),Gt=0;Gt<Ot.length;Gt++)pt=Ot[Gt],(ht=lt.splice(0,1))[0]&&(h[pt.seat]=h[pt.seat]||[],h[pt.seat][Tt]?h[pt.seat][Tt][""+pt.pos]=ht[0]:h[pt.seat][Tt]=((Ht={})[""+pt.pos]=ht[0],Ht))}}for(It in this.updateGoods(h),this.setDoubleNum(h),this.setComboNum(h,this.comboNum),ft={},mt=t.skewer,gt={},_t=[],yt=[],vt=[],this.totalProg=0,h)for(At=Number(It),Ot=h[At]||[],ft[At]=[],Tt=0;Tt<Ot.length;Tt++)for(Et in ft[At][Tt]=p.SKEWER_TYPE.COM,0==Tt?_t.push({x:At,y:Tt}):1==Tt?yt.push({x:At,y:Tt}):vt.push({x:At,y:Tt}),Ot[Tt])this.totalProg++,gt[Ot[Tt][Et]]=1;if(mt){for(St=mt[p.SKEWER_TYPE.FROZEN]||0,wt=mt[p.SKEWER_TYPE.UNKNOWN]||0,yt.length+vt.length<wt&&(wt=yt.length+vt.length),_t.length+yt.length<2*St+2&&(St=Math.floor((_t.length+yt.length)/2-2),yt.length<=3&&(St=0)),Ct=0,Mt=Math.floor((_t.length-1)/2),Gt=0;Gt<St;Gt++)bt=_t.length,Ct>=Mt&&(bt=0),Dt=Math.floor(Math.random()*(bt+yt.length)),Nt=[],Dt>=bt?(Dt-=bt,Nt=yt.splice(Dt,1)):(Ct++,Nt=_t.splice(Dt,1)),Nt&&Nt[0]&&(ft[Nt[0].x][Nt[0].y]=p.SKEWER_TYPE.FROZEN);for(Gt=0;Gt<wt;Gt++)Rt=Math.floor(Math.random()*(yt.length+vt.length)),Nt=[],Rt>=yt.length?(Rt-=yt.length,Nt=vt.splice(Rt,1)):Nt=yt.splice(Rt,1),Nt&&Nt[0]&&(ft[Nt[0].x][Nt[0].y]=p.SKEWER_TYPE.UNKNOWN)}for(this.curProg=0,this.maxLayerCount=0,this.progCombo.progress=this.curProg/this.totalProg,this.labProg.string=this.curProg+"/"+this.totalProg,Lt=0,Gt=0;Gt<this.layerLocks.length;Gt++)this.layerLocks[Gt].active=!0;Gt=0,r.label=1;case 1:if(!(Gt<a))return[3,6];Ot=[],this.layerLocks[Gt]&&(this.layerLocks[Gt].active=!1),Pt=0,this.layers[Gt]?(kt=ymtApp.nodeMgr.getNodeInNodePos(this.layers[Gt],this.nodeCen),Pt=kt.y):(kt=ymtApp.nodeMgr.getNodeInNodePos(this.layers[2],this.nodeCen),Pt=kt.y+213*(Gt-3)),Bt=0,r.label=2;case 2:return Bt<this.curShelvesCfg[Gt].length?(Ut=this.curShelvesCfg[Gt][Bt],Ot.push(Ut),Ut==p.GAME_SHELVES_TYPE.EMPTY||Ut==p.GAME_SHELVES_TYPE.PALLET?[3,4]:[4,this.addShelves(Ut,h[Lt],ft[Lt],Lt,Gt)]):[3,5];case 3:Vt=r.sent(),Ft=0,xt=p.GAME_LOCK_STATUS.FREE,1==u[Lt]&&(Ft=c,xt=l),Vt.getComponent(d.default).setLock(Ft,xt),Vt.setPosition(230*(Bt-1),Pt),this.shelvesList.push(Vt),Lt++,r.label=4;case 4:return Bt++,[3,2];case 5:return Gt++,[3,1];case 6:return this.checkWand(),this.checkGuideAct(),[2]}})})},e.prototype.randLayer=function(t,e,i,o){void 0===o&&(o=3);for(var n=0,a=0,r=0;r<this.curShelvesCfg.length;r++)for(var s=this.curShelvesCfg[r]||[],c=0;c<s.length;c++){var l=s[c];if(null!=l&&l!=p.GAME_SHELVES_TYPE.EMPTY&&l!=p.GAME_SHELVES_TYPE.PALLET&&l!=p.GAME_SHELVES_TYPE.LOCK){e[r]=e[r]||{};var d=3;if(l==p.GAME_SHELVES_TYPE.TOP_GRID)n+=3;else if(l==p.GAME_SHELVES_TYPE.BOX){var u=e[r][c]||0,h=t[0]||1;u&&u<t[1]&&(h=u+Math.floor(2*Math.random())),n+=3*(d=u&&u==t[1]?t[1]:ymtApp.utils.randByArea([h,(t[1]||1)+1],!0))}e[r][c]=d,a+=d}}n-=o,i||(i=a+Math.floor((n-a)*(1+Math.random())/2));var f=i%3;return f>0&&(i+=3-f),{max:n,min:a,count:i}},e.prototype.addShelves=function(t,e,i,o,n){var a=this;return t==p.GAME_SHELVES_TYPE.LOCK&&this.lockSeatList.push(o),new Promise(function(r){var s=ymtApp.poolMgr.get(p.POOL_NAME.SHELVES,a.grillItem);s.setParent(a.nodeCen),s.getComponent(d.default).setData({gameType:a.gameType,level:a.curLevel,type:t,skewers:i,goods:e,seat:o},a.checkMove.bind(a),function(t){var e=m.default.I.videoAddTime||15;a.curTime+=e,a.labTime.string=""+ymtApp.utils.formatSecToStr(Math.ceil(a.curTime));for(var i=0;i<a.lockSeatList.length;i++)if(a.lockSeatList[i]==t){a.lockSeatList.splice(i,1);break}a.isCheckmate=!1},function(t,e){return a.moveToSeat(t,e)}),t==p.GAME_SHELVES_TYPE.TOP_GRID?a.maxLayerCount++:a.maxLayerCount+=3,t==p.GAME_SHELVES_TYPE.PALLET||t==p.GAME_SHELVES_TYPE.TOP_GRID?s.zIndex=500-5*n:s.zIndex=500-5*n-o%3-1,r(s)})},e.prototype.moveToSeat=function(t,e){var i=this,o=ymtApp.gameController.getSeleGoods(),n=!1;if(o){var a=this.shelvesList[o.seatId].getComponent(d.default).removeGoods(o.posId);a&&(this.moveCount++,this.shelvesList[t].getComponent(d.default).addGoods(e,a,function(){i.shelvesList[o.seatId].getComponent(d.default).checkNext(),i.moveCount--,i.checkGameFinish(!1)}),n=!0)}return ymtApp.gameController.setSeleGoods(null),n},e.prototype.doGoodsAct=function(){for(var t=0;t<this.shelvesList.length;t++)this.shelvesList[t]&&this.shelvesList[t].active&&this.shelvesList[t].getComponent(d.default).doGoodsAct()},e.prototype.checkGuideAct=function(){this.waitNum++,2==this.waitNum&&(this.checkGuide(),this.checkItemGuide(),this.doGoodsAct(),this.waitNum=0)},e.prototype.checkGuide=function(){var t=!1,e=cc.v2(0,0),i=cc.v2(0,0);if(this.gameType==p.GAME_TYPE.COMMON&&0==this.curLevel){var o=ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,n=this.shelvesList[3].getComponent(d.default).getCurGoods()||{},a=Object.keys(n)||[];a.length>0?(e=this.shelvesList[3].getPosition().add(cc.v2(0,-60)),i=this.shelvesList[0].getPosition().add(cc.v2(-o,-60)),t=!0):(n=this.shelvesList[1].getComponent(d.default).getCurGoods()||{},(a=Object.keys(n)||[]).length>0&&(e=this.shelvesList[1].getPosition().add(cc.v2(-o,-60)),i=this.shelvesList[2].getPosition().add(cc.v2(-o,-60)),t=!0))}this.showGuide(t,e,i)},e.prototype.checkItemGuide=function(){for(var t=0;t<this.propList.length;t++)if(ymtApp.gameController.isItemGuide(this.propList[t])){this.guideTips.active=!0;var e="\u6709\u4e00\u4e2a\u9053\u5177\u89e3\u9501\uff0c\u70b9\u51fb\u5b83\u8bd5\u4e00\u4e0b\u5427\uff01".toLocalize();if(this.propList[t]==p.ITEM_ID.ELIMINATE)e="\u6d88\u9664\u4e09\u4e2a\u4e00\u6837\u7684\u70e4\u4e32".toLocalize();else if(this.propList[t]==p.ITEM_ID.REFRESH)e="\u91cd\u65b0\u8c03\u6574\u4e32\u4e32\u4f4d\u7f6e".toLocalize();else if(this.propList[t]==p.ITEM_ID.FROZEN){var i=m.default.I.gamefrozenTime||30;e=s.LocalizeMgr.inst.toLocalize("\u65f6\u95f4\u6682\u505c{0}\u79d2",[String(i)])}else this.propList[t]==p.ITEM_ID.FIRELOCK&&(e="\u5feb\u901f\u878d\u5316\u51b0\u5757".toLocalize());this.labGuide.string=e;var o=ymtApp.nodeMgr.getNodeInNodePos(this.btnItemList[t],this.guideTips);this.guideBlock.setPosition(.75*o.x,o.y+170),this.guideMask.setPosition(o.x,o.y+10),this.guideFinger.setPosition(o.x+15,o.y-32);break}},e.prototype.checkWand=function(){var t=this;ymtApp.gameController.useItem(p.ITEM_ID.WAND)&&(this.showWait(3.5),this.sprMFZ.active=!0,this.sprMFZ.y=-100,cc.tween(this.sprMFZ).to(.5,{y:50}).repeat(4,cc.tween().call(function(){t.useItem(p.ITEM_ID.ELIMINATE,!1)}).to(.15,{angle:40}).to(.15,{angle:-30}).delay(.35)).to(.07,{angle:0}).call(function(){t.sprMFZ.active=!1}).start())},e.prototype.checkMove=function(t,e,i,o,n){var a=this;if(ymtApp.gameController.isPaused())return!1;for(var r=function(e){var r=s.shelvesList[e];if(!r||!r.active)return"continue";var c=r.getComponent(d.default);if(c.isLock()||c.getType()==p.GAME_SHELVES_TYPE.TOP_GRID&&e==i)return"continue";var l=c.checkMoveGoods(n,i,o);if(1==t);else if(l>0){if(null!=i&&null!=o&&s.shelvesList[i]){var u=s.shelvesList[i].getComponent(d.default).removeGoods(o);s.moveCount++,c.addGoods(l,u,function(){a.moveCount--,a.shelvesList[i].getComponent(d.default).checkNext(),e!=i&&a.checkGameFinish(!1)})}return e!=i&&!s.isTips&&s.goodsTipsTime<=0&&s.clearGoodsTips(),s.showGuide(!1),{value:!0}}},s=this,c=0;c<this.shelvesList.length;c++){var l=r(c);if("object"==typeof l)return l.value}return!1},e.prototype.checkUnlock=function(){for(var t=0;t<this.shelvesList.length;t++){var e=this.shelvesList[t],i=e.getComponent(d.default);if(e&&e.active&&i.isLock()&&(i.getType()==p.GAME_SHELVES_TYPE.BOX||i.getType()==p.GAME_SHELVES_TYPE.PALLET))return void i.delLock()}},e.prototype.getShelvesStatus=function(){for(var t=!0,e=!0,i=0,o=0,n={},a=null,r=0;r<this.shelvesList.length;r++)if(this.shelvesList[r]&&this.shelvesList[r].active){var s=this.shelvesList[r].getComponent(d.default),c=s.isLock()&&s.getType()==p.GAME_SHELVES_TYPE.LOCK;s.isEmpty()||(t=!1),s.isFull()||(e=!1);var l=s.getGoodsData(),u=[1,2,3];s.getType()==p.GAME_SHELVES_TYPE.TOP_GRID?u=[2]:c&&(u=[]);for(var h=0;h<u.length;h++){var f=l[u[h]];null==f?o++:f.type==p.SKEWER_TYPE.FROZEN?((a=a||{})[y=f.id]=a[y]||[],a[y].push(r)):(n[y=f.id]=n[y]||0,n[y]++,n[y]>=3&&(i++,n[y]-=3))}}var m=p.SHELVES_STATUS.COM,g=null;if(t?m=p.SHELVES_STATUS.EMPTY:e?m=p.SHELVES_STATUS.FULL:o<3&&0==i&&(m=p.SHELVES_STATUS.FAIL),a&&0==i&&m!=p.SHELVES_STATUS.COM&&m!=p.SHELVES_STATUS.EMPTY)for(var _ in a){var y;if(a[y=Number(_)]&&a[y].length+n[y]>=3){g=a[y][0];break}}return{status:m,seat:g}},e.prototype.checkGameFinish=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=0),a(this,void 0,void 0,function(){var i,o,n=this;return r(this,function(s){switch(s.label){case 0:return this.isFinish||this.isCheckmate?[2]:(i=this.getShelvesStatus()).status==p.SHELVES_STATUS.EMPTY&&t?(this.isCheckmate=!1,this.isFinish=!0,this.showWait(e),[4,ymtApp.utils.wait(e)]):[3,3];case 1:return s.sent(),ymtApp.gameController.isAdInter(p.FORCE_VIDEO_TYPE.WIN)&&f.default.showInterstitial(),(o=ymtApp.gameController.getForceReward(p.FORCE_VIDEO_TYPE.WIN))&&o.length>0&&f.default.showVideo(function(){ymtApp.gameController.dotGameVideo(n.gameType,n.curLevel+1),ymtApp.gameController.addItemList(o)}),this.showWait(1),[4,ymtApp.utils.wait(.5)];case 2:return s.sent(),this.gameType==p.GAME_TYPE.DAILY?this.scheduleOnce(function(){return a(n,void 0,void 0,function(){return r(this,function(){return this.crossDailyGame(),[2]})})},.3):(ymtApp.viewMgr.showView(h.UI.WIN,{gameType:this.gameType,level:this.curLevel,star:this.starScore}),this.gameType==p.GAME_TYPE.COMMON?ymtApp.gameController.dotComLevel(this.curLevel+1,p.DOT_LEVEL_TYPE.WIN):(this.gameType,p.GAME_TYPE.CHALLENGE),ymtApp.gameController.crossGame(this.gameType,this.curLevel)),[2];case 3:return 0==this.moveCount&&this.isTimeOut&&this.showFail(2),this.checkTips(i),[2]}})})},e.prototype.checkTips=function(t){t||(t=this.getShelvesStatus()),this.isCheckmate=!1,t.status!=p.SHELVES_STATUS.FULL&&t.status!=p.SHELVES_STATUS.FAIL||(this.isCheckmate=!0,null!=t.seat?this.showTips(p.ITEM_ID.FIRELOCK):this.showTips())},e.prototype.crossDailyGame=function(){return a(this,void 0,void 0,function(){var t,e,i=this;return r(this,function(o){switch(o.label){case 0:return 0!=this.curLevel?[3,2]:(t=this.starScore,this.curLevel=1,[4,ymtApp.viewMgr.showView(h.UI.TRANSITION)]);case 1:return(e=o.sent()).getComponent(y.default).showAct(function(){e.getComponent(y.default).closeAct(),i.doOpenAct(function(){i.initView(),i.startGame(function(){i.starScore=t,i.countStar=t,i.labStar.string=""+i.starScore})},!1)}),[3,3];case 2:this.showDailyResut(!0,this.starScore),o.label=3;case 3:return ymtApp.gameController.addTaskProg(p.TASK_TYPE.CROSS),[2]}})})},e.prototype.showFail=function(){this.isTimeOut=!0,this.showFailResut()},e.prototype.showFailResut=function(){var t=this;this.gameType==p.GAME_TYPE.DAILY?this.showDailyResut(!1,0):ymtApp.viewMgr.showView(h.UI.LOST,{callback:function(e){1==e?ymtApp.gameController.startGame(t.gameType,t.curLevel,!0):ymtApp.gameController.exitGame()}})},e.prototype.showDailyResut=function(t,e){var i=this;ymtApp.viewMgr.showView(h.UI.DAILY_RESULT,{isWin:t,level:this.curLevel,star:e,callback:function(e){i.curLevel=t?e:0,i.startGame()}})},e.prototype.showTimeOut=function(t,e){var i=this;this.nodeTimeOut.active=!0,this.sprTimeOut.active=1==t,cc.Tween.stopAllByTarget(this.sprTimeOut),this.sprTimeOut.scale=0;var o=this.sprTimeOut;ymtApp.gameController.addPause(),cc.tween(o).to(.3,{scale:1},cc.easeBackOut()).delay(.8).to(.3,{scale:0},cc.easeBackIn()).call(function(){i.nodeTimeOut.active=!1,ymtApp.gameController.delPause(),e&&e()}).start()},e.prototype.getNight=function(){return 1==_.default.getExptInfoSync()?ymtApp.gameController.getRecordInfo(p.RECORD_KEY.DAYTIME_NIGHT,1):ymtApp.gameController.getRecordInfo(p.RECORD_KEY.DAYTIME_NIGHT,0)},e.prototype.updateNight=function(){},e.prototype.onClickNight=function(){var t=this.getNight();ymtApp.gameController.setRecordInfo(p.RECORD_KEY.DAYTIME_NIGHT,1-t),this.updateNight()},e.prototype.onClickSetting=function(){var t=this;ymtApp.gameController.dotGameStr(p.DOT_TYPE.SUM_GAME_ST),ymtApp.viewMgr.showView(h.UI.SETTING,{gameType:this.gameType,level:this.curLevel,isGame:!0,callback:function(e){e?t.gameType==p.GAME_TYPE.DAILY?t.showDailyResut(!1,0):ymtApp.viewMgr.showView(h.UI.EXIT):ymtApp.gameController.startGame(t.gameType,t.curLevel,!0)}}),this.onClickClose()},e.prototype.onClickAddTime=function(){this.curTime+=3e3,this.labTime.string=""+ymtApp.utils.formatSecToStr(Math.ceil(this.curTime))},e.prototype.onClickClose=function(){this.isCheckmate||(this.stopTips(),this.initTipsTime(),ymtApp.viewMgr.hideView(h.UI.OBTAIN))},e.prototype.checkClickItem=function(t,e){if(void 0===e&&(e=!0),t==p.ITEM_ID.FROZEN&&this.frozenTime>0)return e&&ymtApp.viewMgr.showToast("\u65f6\u505c\u9053\u5177\u6b63\u5728\u4f7f\u7528\u4e2d\uff01".toLocalize()),!1;if(t==p.ITEM_ID.FIRELOCK){for(var i=!1,o=0;o<this.shelvesList.length;o++)if(this.shelvesList[o]&&this.shelvesList[o].active&&this.shelvesList[o].getComponent(d.default).getFrozenGoods()){i=!0;break}return!i&&e&&(ymtApp.viewMgr.showToast("\u6ca1\u6709\u53ef\u89e3\u51bb\u7684\u51b0\u5757".toLocalize()),this.guideTips.active&&(this.guideTips.active=!1,ymtApp.gameController.setItemGuide(t))),i}return!0},e.prototype.onClickUseItem=function(t){var e=this;return ymtApp.gameController.getItemNum(t)>0?(ymtApp.gameController.addItem(t,-1),this.useItem(t),this.guideTips.active=!1,void ymtApp.gameController.setItemGuide(t)):1==m.default.I.useItemType?(this.initTipsTime(),void ymtApp.viewMgr.showView(h.UI.OBTAIN,{itemId:t,inGame:!0,level:this.curLevel,succFunc:function(i){1==i&&(ymtApp.gameController.dotGameVideo(e.gameType,e.curLevel+1),ymtApp.gameController.dotUseItem(t,e.curLevel+1)),1==m.default.I.obtainUseType?(e.useItem(t),e.guideTips.active=!1,ymtApp.gameController.setItemGuide(t)):ymtApp.gameController.addItem(t,1)}})):(v.showXDAD(),void f.default.showVideo(function(){ymtApp.gameController.dotGameVideo(e.gameType,e.curLevel+1),ymtApp.gameController.dotUseItem(t,e.curLevel+1),e.useItem(t),e.guideTips.active=!1,ymtApp.gameController.setItemGuide(t)}))},e.prototype.useItem=function(t,e){var i=this;if(void 0===e&&(e=!0),ymtApp.eventTarget.emit(ymtApp.eventName.ITEM_USE,t),t!=p.ITEM_ID.ELIMINATE&&t!=p.ITEM_ID.FIRELOCK&&t!=p.ITEM_ID.REFRESH||(this.isCheckmate=!1),t==p.ITEM_ID.ELIMINATE){for(var o={cur:{},next:{},waits:{}},n={cur:[],next:[],waits:[]},a=0;a<this.shelvesList.length;a++)if(this.shelvesList[a]&&this.shelvesList[a].active){var r=(Y=this.shelvesList[a].getComponent(d.default)).getAllGoods(),s=Y.getSpecialGoods();n.cur.push(s.cur),n.next.push(s.next),n.waits.push(s.waits);var c=r.cur||{};for(var u in c){var h=c[u];o.cur[h]=o.cur[h]||[],o.cur[h].push({seat:a,pos:Number(u)})}var f=r.next||{};for(var u in f){var g=f[u];o.next[g]=o.next[g]||[],o.next[g].push({seat:a,pos:Number(u)})}for(var _=0;_<r.waits.length;_++){var y=r.waits[_];for(var u in y){var v=y[u];o.waits[v]=o.waits[v]||[],o.waits[v].push({seat:a,pos:Number(u)})}}}for(var I={cur:{},next:{},waits:{}},A=ymtApp.utils.clone(o),T=0;T<n.cur.length;T++)for(var E=0;E<n.cur[T].length;E++){var S=n.cur[T][E],w=A.cur[S.id]||[];for(a=w.length-1;a>=0;a--)if(w[a].seat==T&&w[a].pos==S.pos){A.cur[S.id].splice(a,1);break}}for(T=0;T<n.next.length;T++)for(E=0;E<n.next[T].length;E++){S=n.next[T][E];var C=A.next[S.id]||[];for(a=C.length-1;a>=0;a--)if(C[a].seat==T&&C[a].pos==S.pos){A.next[S.id].splice(a,1);break}}for(var M in A.cur)A.cur[M].length>=3&&(I.cur[M]=1,A.cur[M].splice(0,3));for(var M in A.next){var b=A.cur[M]||[];if(b.length+A.next[M].length>=3)if(I.next[M]=1,b.length>=3)A.cur[M].splice(0,3);else{var D=b.length;D>0&&A.cur[M].splice(0,D),A.next[M].splice(0,3-D)}}for(var M in A.waits){var R=A.cur[M]||[],N=A.next[M]||[];R.length+N.length+A.waits[M].length>=3&&(I.waits[M]=1)}e&&ymtApp.gameController.addTaskProg(p.TASK_TYPE.ELIMINATE);var L=Object.keys(I.cur);if(L&&0!=L.length||(L=Object.keys(I.next))&&0!=L.length||(L=Object.keys(I.waits)),!L||0==L.length)return void console.error("GameUI eliminate 1",I,o);var G=ymtApp.utils.randByList(L),O=o.cur[G]||[],P=o.next[G]||[],k=o.waits[G]||[],B=[],U=!1,V=[];for(a=1;a<=3;a++){var F=null,x=1;if(O.length>0?F=O.splice(0,1)[0]:P.length>0?(x=2,F=P.splice(0,1)[0]):k.length>0&&(x=3,F=k.splice(0,1)[0]),null==F)return void console.error("GameUI eliminate 2",G,o);y=this.shelvesList[F.seat].getComponent(d.default).eliminate(Number(G),x,F.pos),U=U||y.getComponent(l.default).getTipsStatus(),B.push(y),V.push({seat:F.seat,pos:F.pos,type:x})}for(this.onGoodsEliminate(Number(G),B,U,.8),a=0;a<V.length;a++)F=V[a],this.shelvesList[F.seat].getComponent(d.default).updateEliminate(F.type);this.moveCount++,this.showWait(.5,function(){i.moveCount--,i.checkGameFinish(!1)})}else if(t==p.ITEM_ID.FIRELOCK)for(this.hasFire=!1,this.sprFirelock.active=!1,this.nodeFirelock.active=!0,this.grillMap={},a=0;a<this.shelvesList.length;a++){var Y;if(this.shelvesList[a]&&this.shelvesList[a].active&&(y=(Y=this.shelvesList[a].getComponent(d.default)).getFrozenGoods())){u=y.getPosition(),this.grillMap[a]={tsCom:Y,goods:y,parent:y.getParent(),pos:u};var H=ymtApp.nodeMgr.getNodeInNodePos(y,this.nodeFirelock);y.setParent(this.nodeFirelock),y.setPosition(H)}}else t==p.ITEM_ID.REFRESH?(ymtApp.gameController.addTaskProg(p.TASK_TYPE.REFRESH),this.showGuide(!1),this.doRefresh(),this.showWait(.8,function(){i.checkTips()})):t==p.ITEM_ID.FROZEN?(ymtApp.gameController.addTaskProg(p.TASK_TYPE.FROZEN),this.frozenTime=m.default.I.gamefrozenTime,this.sprFrozen.active=!0,cc.Tween.stopAllByTarget(this.sprFrozen),this.sprFrozen.opacity=0,cc.tween(this.sprFrozen).to(.5,{opacity:255}).start(),ymtApp.audioMgr.playSound(ymtApp.main.audio.frozen)):t==p.ITEM_ID.ADD_TIME&&(this.curTime<0?this.curTime=ymtApp.gameController.getReviveTime(this.reviveTimes):this.curTime+=ymtApp.gameController.getReviveTime(this.reviveTimes),this.sprWarn.active=this.curTime<m.default.I.cutTimeAct,this.doTimerAct());this.onClickClose()},e.prototype.doRefresh=function(){for(var t={},e=[],i=[],o=0;o<this.shelvesList.length;o++)if(this.shelvesList[o]&&this.shelvesList[o].active){var n=this.shelvesList[o].getComponent(d.default);t[o]=[];for(var a=n.getComGoods(),r=0;r<a.length;r++){i[r]=i[r]||0;var s=a[r]||{},c=null;for(var l in s)s[l]&&(i[r]++,(c=c||{})[Number(l)]=0,e.push(s[l]));c&&t[o].push(c)}}for(var u=0;u<e.length;u+=3)for(var p=e[u],h=1;h<=2;h++)if(e[u+h]!=p)for(var f=u+3;f<e.length;f++)if(e[f]==p){e[f]=e[u+h],e[u+h]=p;break}var g=0,_=[];for(u=0;u<i.length;){for(var y=this.layerDiff[g],v=0,I=0;I<y;I++)v+=i[u+I]||0;var A=e.splice(0,v).sort(function(){return Math.random()-.5});for(I=0;I<y;I++)i[u+I]&&(_=_.concat(A.splice(0,i[u+I])));u+=y,g++}_=_.concat(e.sort(function(){return Math.random()-.5}));var T={};for(var o in t)for(a=t[o]||[],T[o]=[],r=0;r<a.length;r++){s=a[r]||{};var E={};for(var l in s)E[l]=_.shift();T[o].push(E)}for(T=this.checkGoods(T),this.setDoubleNum(T,m.default.I.freshDoubleRate||.6),this.updateGoods(T),u=0;u<this.shelvesList.length;u++)this.shelvesList[u]&&this.shelvesList[u].active&&T[u]&&(n=this.shelvesList[u].getComponent(d.default)).updateGoods(T[u]);ymtApp.audioMgr.playSound(ymtApp.main.audio.putItem),this.clearGoodsTips()},e.prototype.onTouchStart=function(t){var e=this;if(!this.hasFire){var i=t.getLocation(),o=this.nodeFirelock.convertToNodeSpaceAR(i),n=function(t){var i=a.grillMap[t],n=i.goods,r=n.getPosition();if(Math.abs(o.x-r.x)<n.width/2&&Math.abs(o.y-r.y)<n.height/2){a.hasFire=!0,a.sprFirelock.active=!0,a.sprFirelock.zIndex=999;var s=r.x<0?-1:1;return a.sprFirelock.scaleX=1.5*s,a.sprFirelock.setPosition(r.x-50*s,r.y+10),cc.Tween.stopAllByTarget(a.sprFirelock),a.sprFirelock.opacity=0,cc.tween(a.sprFirelock).to(.5,{opacity:255}).delay(.5).call(function(){for(var t in n.getComponent(l.default).delTimes(3),e.grillMap)e.grillMap[t].goods.setParent(e.grillMap[t].parent),e.grillMap[t].goods.setPosition(e.grillMap[t].pos);e.grillMap={},e.nodeFirelock.active=!1,e.hasFire=!1,i.tsCom&&i.tsCom.checkCombo(),e.checkTips()}).start(),"break"}},a=this;for(var r in this.grillMap)if("break"===n(r))break}},e.prototype.checkGoods=function(t){var e={};for(var i in t){e[i]=[];for(var o=t[i]||[],n=0;n<o.length;n++)o[n]&&e[i].push(o[n])}return e},e.prototype.updateGoods=function(t){var e=function(e,i){for(var o in t){var n=t[o]||[];n[e]||console.error("GameUI updateGoods",n);for(var a=n[e]||{},r=0,s=-1,c=1;c<=3;c++)null!=a[c]&&(a[c]==i?r++:s=c);if(r<=1&&s>0)return{seat:Number(o),pos:s}}};for(var i in t)for(var o=t[i]||[],n=0;n<o.length;n++){var a=o[n]||{};if(null!=a[1]&&a[1]==a[2]&&a[2]==a[3]){var r=e(n,a[1]);if(r){var s=Math.floor(3*Math.random()+1),c=t[i][n][s];t[i][n][s]=t[r.seat][n][r.pos],t[r.seat][n][r.pos]=c}else console.error("GameUI updateGoods")}}},e.prototype.setDoubleNum=function(t,e){var i=0;for(var o in t){var n=t[Number(o)]||[];i=Math.max(i,n.length)}null==e&&(e=this.doubleRate);for(var a=0;a<i;a++)this.setLayerDoubleNum(t,e,a);return t},e.prototype.setLayerDoubleNum=function(t,e,i){void 0===i&&(i=0);var o={},n={},a=0;for(var r in t){var s=Number(r),c=(t[s]||[])[i];if(c){a++;for(var l=1;l<=3;l++){var d=c[l];null!=d&&(o[d]=o[d]||[],o[d].push({seat:Number(s),pos:l}))}}}var u=Math.floor(e*a);if(u<=0)return t;var p=function(e,o,n){for(var a={},r=t[n.seat][i]||{},s=1;s<=3;s++)a[r[s]]=a[r[s]]||0,a[r[s]]++;var c=t[o.seat][i]||{};for(s=1;s<=3;s++){var l=c[s];if(s!=o.pos&&null!=l&&l!=e&&(null==a[l]||a[l]<2))return t[o.seat][i][s]=e,t[n.seat][i][n.pos]=l,{id:l,pos:s}}},h=function(){for(var t in o){var e=o[t]||[],i=Number(t);if(e.length>=2)for(var a=0;a<e.length;a++){var r=e[a].seat;if(!n[r]){for(var s=0;s<e.length;s++)if(a!=s&&e[s].seat==r)return n[r]=i,!0;for(s=0;s<e.length;s++)if(a!=s&&n[e[s].seat]!=i){var c=p(i,e[a],e[s]);if(c){for(var l=o[c.id]||[],d=0;d<l.length;d++)if(l[d].seat==r&&l[d].pos==c.pos){o[c.id][d]={seat:e[s].seat,pos:e[s].pos};break}return o[i][s]={seat:r,pos:c.pos},n[r]=i,!0}}}}}return!1};for(function(t){for(var e in void 0===t&&(t=!1),n={},o){var i=o[e]||[];if(i.length>=2)for(var a={},r=0;r<i.length;r++)if(a[i[r].seat]=a[i[r].seat]||0,a[i[r].seat]++,a[i[r].seat]>=2){n[i[r].seat]=Number(e),t&&u--;break}}}(!0),l=0;l<u;l++)h();return t},e.prototype.checkNoCombo=function(t){for(var e in t){var i=t[e]||{};if(null!=i[1]&&i[1]==i[2]&&i[2]==i[3]){var o=Math.floor(3*Math.random())+1,n=i[o];for(var a in t){var r=t[a]||{},s=null;if(null!=r[1]&&r[1]!=n&&r[1]!=r[2]&&r[1]!=r[3]?s=1:null!=r[2]&&r[2]!=n&&r[2]!=r[1]&&r[2]!=r[3]?s=2:null!=r[3]&&r[3]!=n&&r[3]!=r[1]&&r[3]!=r[2]&&(s=3),null!=s){t[e][o]=t[a][s],t[a][s]=n;break}}}}},e.prototype.setComboNum=function(t,e){if(e){var i=this.layerDiff[0],o={},n=0,a={};for(var r in t)for(var s=t[r]||[],c=0;c<i;c++){a[c]=a[c]||{};for(var l=s[c],d=1;d<=3;d++)null!=(f=l[d])&&(a[c][f]=a[c][f]||[],a[c][f].push({seat:Number(r),pos:d}),3==a[c][f].length&&0==c&&(delete a[c][f],o[f]=1,n++))}if(e<=n)return;var u=e-n,p=function(t,e){for(var i in t)if(1==t[i].length&&t[i][0].seat!=e)return Number(i)},h=a[0];for(d=0;d<u;d++)for(var f in h){var m=!1;if(2==h[f].length){for(c=1;c<i;c++)if(a[c][f]&&a[c][f].length>0){var g=p(h,h[f][0].seat);if(g){s=a[c][f].splice(0,1),a[c][g]=(a[c][g]||[]).concat(s),h[f].push(h[g][0]);var _=h[g][0],y=s[0];t[_.seat][0][_.pos]=Number(f),t[y.seat][c][y.pos]=Number(g),delete h[g],m=!0;break}}if(m)break}}}},e.prototype.showWait=function(t,e){var i=this;void 0===t&&(t=.5),cc.Tween.stopAllByTarget(this.node),this.nodeWait.active=!0,cc.tween(this.node).delay(t+.1).call(function(){e&&e(),i.nodeWait.active=!1}).start()},e.prototype.onGoodsEliminate=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=.55),ymtApp.eventTarget.emit(ymtApp.eventName.GOODS_COMBO),this.showCombo(t,e,o),this.checkUnlock(),i&&this.clearGoodsTips()},e.prototype.getComboCfg=function(t){for(var e=m.default.I.comboCfg||[],i=0;i<e.length;i++)if(e[i]&&e[i].combo[0]<=t&&(e[i].combo[1]>=t||-1==e[i].combo[1]))return e[i];return{combo:[1,-1],star:1,time:10}},e.prototype.showCombo=function(t,e,i){var o=this;void 0===i&&(i=.55),ymtApp.gameController.addTaskProg(p.TASK_TYPE.COMBO),this.comboTimes++,this.curProg+=3,this.isStart=!0,cc.Tween.stopAllByTarget(this.progCombo);var n=this.curProg/this.totalProg;cc.tween(this.progCombo).to(.1,{progress:n}).start(),this.labProg.string=this.curProg+"/"+this.totalProg;var a=this.getComboCfg(this.comboTimes);this.comboTime=a.time,this.comboCutTime=this.comboTime,this.labCombo.string="x"+this.comboTimes,this.progTimer.node.active=!0,this.progTimer.progress=this.comboCutTime/this.comboTime;var r=ymtApp.nodeMgr.getNodeInNodePos(this.sprStar,this.root),s=ymtApp.nodeMgr.getNodeInNodePos(this.spPlate.node,this.node),c=ymtApp.tweenMgr.getMoveTime(s,r,1500);cc.Tween.stopAllByTarget(this.sprCombo),cc.tween(this.sprCombo).to(.2,{scale:1.3}).to(.2,{scale:1}).start();var l=a.star;this.starScore+=l,this.checkGuide(),this.checkItemGuide(),!this.isTips&&this.goodsTipsTime<=0&&this.clearGoodsTips();var d=this.spPlate.node.position,u=cc.instantiate(this.sprPlate);u.setParent(this.layerMain),u.active=!0,u.zIndex=666,u.setPosition(this.layerMain.width/2+100,d.y);for(var h=function(t){var i=ymtApp.nodeMgr.getNodeInNodePos(e[t],f.layerMain);e[t].setParent(f.layerMain),e[t].setPosition(i),e[t].zIndex=777-Math.abs(t-1),cc.tween(e[t]).to(.15,{scale:1.5,angle:0}).to(.6,{position:d,angle:-20,scale:.8}).delay(.05).call(function(){e[t].setParent(u),e[t].setPosition(10*(t-1),3*(1-t))}).start()},f=this,m=0;m<e.length;m++)h(m);cc.tween(u).to(.8,{position:d}).to(.1,{x:d.x-10}).call(function(){var t;t=(o.comboTimes-1)%10+1,ymtApp.audioMgr.playSound("audio/combo"+t,!1,p.SETTING_TYPE.EFFECT,1,p.BUNDLENAME.RES)}).delay(.3).call(function(){var t;o.spPlate.node.zIndex=888,o.spPlate.node.active=!0,ymtApp.spineMgr.playSpineAnimation(o.spPlate,"sx",!1,function(){o.spPlate.node.active=!1}),(t=ymtApp.poolMgr.get(p.POOL_NAME.STAR,o.sprStar)).parent=o.node,t.setPosition(s),t.opacity=0,cc.tween(t).call(function(){t.opacity=255}).to(c,{position:cc.v3(r)}).call(function(){o.countStar+=l,o.labStar.string=""+o.countStar,ymtApp.poolMgr.put(p.POOL_NAME.STAR,t)}).start()}).delay(.5).to(.1,{x:this.layerMain.width/2+100}).call(function(){u.destroy();for(var t=0;t<e.length;t++)ymtApp.poolMgr.put(p.POOL_NAME.GOODS,e[t])}).start(),this.checkTimes++,this.moveCount++,this.scheduleOnce(function(){o.checkTimes--,o.moveCount--,0==o.checkTimes&&o.checkGameFinish(!0,1.2+c)},.2)},e.prototype.showTips=function(t){var e,i=this,o=[],n=[];if(this.isCheckmate){if(this.lockSeatList.length>0&&Math.random()>.75){var a=this.lockSeatList.pop();return this.shelvesList[a]&&this.shelvesList[a].getComponent(d.default).showLockTips(),void(this.tipsTime=0)}n=[p.ITEM_ID.REFRESH,p.ITEM_ID.ELIMINATE,p.ITEM_ID.FIRELOCK]}for(var r=0;r<this.btnItemList.length;r++){var c=this.btnItemList[r].getComponent(u.default),l=c.getItemId();if(!c.isLock()&&this.checkClickItem(l,!1))if(0==n.length)o.push({idx:r,id:l});else for(var f=0;f<n.length;f++)if(l==n[f]){o.push({idx:r,id:l});break}t==l&&(c.isLock()&&c.showIcon(),e=r)}if(0!=o.length)if(this.tipsTime=0,0==m.default.I.tipsItemType){if(null==t){var g=ymtApp.utils.randByList(o);e=g.idx,t=g.id}var _="\u4f7f\u7528\u9053\u5177".toLocalize();if(this.sprBubble.x=0,this.isCheckmate)_="\u6ca1\u6709\u53ef\u6d88\u9664\uff0c\u4f7f\u7528\u9053\u5177\u8bd5\u4e0b\u5427".toLocalize(),0==e?this.sprBubble.x=100:3==e&&(this.sprBubble.x=-100);else if(t==p.ITEM_ID.ELIMINATE)_="\u6d88\u96643\u4e2a\u7269\u54c1".toLocalize();else if(t==p.ITEM_ID.FIRELOCK)_="\u5feb\u901f\u878d\u5316\u51b0\u5757".toLocalize();else if(t==p.ITEM_ID.FROZEN){var y=m.default.I.gamefrozenTime||30;_=s.LocalizeMgr.inst.toLocalize("\u51bb\u7ed3\u65f6\u95f4{0}\u79d2",[String(y)])}else t==p.ITEM_ID.REFRESH&&(_="\u5237\u65b0\u6240\u6709\u7269\u54c1".toLocalize());this.stopTips(),this.sprTips.active=!0,this.btnClose.active=!0,this.labTips.string=_,this.sprTips.x=this.btnItemList[e].x,cc.Tween.stopAllByTarget(this.sprTips),cc.tween(this.sprTips).delay(.8).to(.4,{scale:1.05}).to(.4,{scale:1}).union().repeatForever().start(),this.btnItemList[e].getComponent(u.default).showTips(!0)}else{var v,I=[];if(I=m.default.I.comItemTips||[],v=this.curTime/this.initTime*100,0==(I=I.filter(function(t){if(null!=t.rate)return v<t.rate;for(var e=!1,i=0;i<o.length;i++)if(o[i].id==t.itemId){e=!0;break}return e})).length)return;this.initTipsTime();var A=I[ymtApp.utils.getIndexByWeight(I)].itemId;ymtApp.viewMgr.showView(h.UI.OBTAIN,{itemId:A,inGame:!0,level:this.curLevel,succFunc:function(t){ymtApp.gameController.addItem(A,1),1==t&&(ymtApp.gameController.dotGameVideo(i.gameType,i.curLevel+1),ymtApp.gameController.dotUseItem(A,i.curLevel+1))}})}},e.prototype.stopTips=function(){this.sprTips.active=!1,this.btnClose.active=!1;for(var t=0;t<this.btnItemList.length;t++)cc.Tween.stopAllByTarget(this.btnItemList[t]),this.btnItemList[t].getComponent(u.default).showTips(!1)},e.prototype.onGoodsTips=function(){if(!this.isTips)for(var t={},e=0;e<this.shelvesList.length;e++)if(this.shelvesList[e]&&this.shelvesList[e].active){var i=this.shelvesList[e].getComponent(d.default).getCurGoods(!0);for(var o in i){var n=i[o];if(t[n]=t[n]||{count:0,map:{}},t[n].map[e]=t[n].map[e]||{},t[n].map[e][o]=1,t[n].count++,t[n].count>=3)return void this.tipsOutline(t[n])}}},e.prototype.tipsOutline=function(t){var e=t.map||{};for(var i in e){var o=e[i]||{},n=this.shelvesList[i].getComponent(d.default);for(var a in o){var r=n.getGoodsItem(Number(a));r&&r.showTipsAct(!0)}}this.goodsTipsTimes++,this.isTips=!0},e.prototype.doTimerAct=function(t){var e=this;void 0===t&&(t=!1);var i=m.default.I.gameTimeWarn||[60,30,15],o=function(){cc.Tween.stopAllByTarget(e.sprClock),cc.Tween.stopAllByTarget(e.labTime.node),e.sprClock.scale=1};this.curTime>i[0]?1!=this.timeIdx&&(this.timeIdx=1,o(),this.labTime.node.color=cc.Color.WHITE):this.curTime>i[1]?2!=this.timeIdx&&(this.timeIdx=2,o(),this.labTime.node.color=cc.color(253,216,46)):this.curTime>i[2]||this.curTime<=0?3!=this.timeIdx&&(this.timeIdx=3,o(),this.labTime.node.color=cc.Color.RED):this.curTime>0&&4!=this.timeIdx&&(this.timeIdx=4,o(),cc.tween(this.sprClock).to(.2,{scale:.9}).to(.2,{scale:1}).delay(.1).union().repeatForever().start(),cc.tween(this.labTime.node).to(.2,{color:cc.Color.RED}).to(.2,{color:cc.Color.WHITE}).union().repeatForever().start())},e.prototype.updateTime=function(t){var e=this;if(!this.isFinish&&!ymtApp.gameController.isPaused()&&this.isStart){if(this.goodsTipsTime>0&&(this.goodsTipsTime-=t,this.goodsTipsTime<=0&&this.onGoodsTips()),this.tipsTime>0&&(this.tipsTime-=t,this.tipsTime<=0&&this.showTips()),this.frozenTime>0)return this.frozenTime-=t,this.frozenTime<=0&&(cc.Tween.stopAllByTarget(this.sprFrozen),cc.tween(this.sprFrozen).to(.5,{opacity:0}).call(function(){e.sprFrozen.active=!1}).start()),void this.doTimerAct(!0);this.comboCutTime>0&&(this.comboCutTime-=t,this.progTimer.progress=this.comboCutTime/this.comboTime,this.comboCutTime<=0&&(this.progTimer.node.active=!1,this.comboTimes=0)),this.curTime>0&&(this.countTime+=t,this.countTime>=1&&(this.countTime-=1,this.curTime-=1,this.curTime<=m.default.I.cutTimeAct&&(this.sprWarn.active=!0,ymtApp.audioMgr.playSound(ymtApp.main.audio.clock)),this.doTimerAct(),this.labTime.string=""+ymtApp.utils.formatSecToStr(Math.ceil(this.curTime)),this.curTime<=0&&(this.reviveTimes++,this.showFail(2))))}},e.prototype.onGameTouch=function(){this.isStart=!0,this.onClickClose()},e.prototype.onGameReset=function(){this.startGame()},e.prototype.onItemTimeout=function(t){var e=this;t!=p.ITEM_ID.FROZEN||this.isStart||(cc.Tween.stopAllByTarget(this.sprFrozen),cc.tween(this.sprFrozen).to(.5,{opacity:0}).call(function(){e.sprFrozen.active=!1}).start())},e.prototype.clearGoodsTips=function(){this.isTips=!1,this.goodsTipsTime=ymtApp.gameController.getTipsTime(this.goodsTipsTimes);for(var t=0;t<this.shelvesList.length;t++)this.shelvesList[t].getComponent(d.default).clearGoodsTips()},e.prototype.onGameReborn=function(t){this.isStart=!1,this.useItem(t),this.labTime.string=""+ymtApp.utils.formatSecToStr(Math.ceil(this.curTime))},e.prototype.clearShelves=function(){for(var t=0;t<this.shelvesList.length;t++)this.shelvesList[t].getComponent(d.default).clear(),ymtApp.poolMgr.put(p.POOL_NAME.SHELVES,this.shelvesList[t]);this.shelvesList=[]},e.prototype.clear=function(){this.clearShelves(),this.starMult=1,this.starScore=0,this.comboTime=0,this.comboCutTime=0,this.comboTimes=0,this.waitNum=0,this.frozenStep=0,this.frozenTime=0,this.maxLayerCount=0,this.isFinish=!1,this.isTimeOut=!1,this.isCheckmate=!1,this.isStart=!1,this.checkTimes=0,this.moveCount=0,this.timeIdx=-1,this.layerDiff=[2],this.progTimer.node.active=!1,this.nodeWait.active=!1,this.sprFrozen.active=!1,this.sprMFZ.active=!1,this.sprFinger.active=!1,this.sprWarn.active=!1,this.progCombo.progress=0,this.totalProg=0,this.curProg=0,this.reviveTimes=0,this.hasFire=!1,this.lockSeatList=[]},e.prototype.close=function(){g.default.setBtnRedPacket(!1),1==m.default.I.gameBannerVisible&&f.default.bannerVisible(!1);var e=ymtApp.gameController.getForceReward(p.FORCE_VIDEO_TYPE.HOME),i=this.curLevel+1,o=this.gameType;e&&e.length>0&&f.default.showVideo(function(){ymtApp.gameController.dotGameVideo(o,i),ymtApp.gameController.addItemList(e)}),this.clear(),t.prototype.close.call(this)},n([T(cc.Node)],e.prototype,"sprMFZ",void 0),n([T(cc.Node)],e.prototype,"sprBg",void 0),n([T(cc.Node)],e.prototype,"layerTop",void 0),n([T(cc.Node)],e.prototype,"nodeTop",void 0),n([T(cc.Node)],e.prototype,"btnSetting",void 0),n([T(cc.Node)],e.prototype,"btnNext",void 0),n([T(cc.Node)],e.prototype,"btnAddTime",void 0),n([T(cc.ProgressBar)],e.prototype,"progCombo",void 0),n([T(cc.Label)],e.prototype,"labProg",void 0),n([T(cc.Label)],e.prototype,"labLv",void 0),n([T(cc.Node)],e.prototype,"sprStar",void 0),n([T(cc.Label)],e.prototype,"labStar",void 0),n([T(cc.Node)],e.prototype,"sprClock",void 0),n([T(cc.Label)],e.prototype,"labTime",void 0),n([T(cc.ProgressBar)],e.prototype,"progLevel",void 0),n([T(cc.Node)],e.prototype,"sprLevel",void 0),n([T(cc.Node)],e.prototype,"btnRemove",void 0),n([T(cc.Node)],e.prototype,"btnLog",void 0),n([T(cc.Node)],e.prototype,"layerMain",void 0),n([T([cc.Node])],e.prototype,"layers",void 0),n([T([cc.Node])],e.prototype,"layerLocks",void 0),n([T(cc.Node)],e.prototype,"nodeCen",void 0),n([T(cc.Node)],e.prototype,"sprPlate",void 0),n([T(sp.Skeleton)],e.prototype,"spPlate",void 0),n([T(cc.Node)],e.prototype,"layoutBtn",void 0),n([T(cc.Node)],e.prototype,"nodeBot",void 0),n([T(cc.Node)],e.prototype,"sprTips",void 0),n([T(cc.Node)],e.prototype,"sprBubble",void 0),n([T(cc.Node)],e.prototype,"btnClose",void 0),n([T(cc.Label)],e.prototype,"labTips",void 0),n([T(cc.ProgressBar)],e.prototype,"progTimer",void 0),n([T(cc.Node)],e.prototype,"sprCombo",void 0),n([T(cc.Label)],e.prototype,"labCombo",void 0),n([T(cc.Node)],e.prototype,"sprFinger",void 0),n([T(cc.Node)],e.prototype,"nodeFirelock",void 0),n([T(cc.Node)],e.prototype,"sprFirelock",void 0),n([T(cc.Node)],e.prototype,"sprFrozen",void 0),n([T(cc.Node)],e.prototype,"sprWarn",void 0),n([T(cc.Node)],e.prototype,"nodeWait",void 0),n([T(cc.Node)],e.prototype,"nodeTimeOut",void 0),n([T(cc.Node)],e.prototype,"sprTimeOut",void 0),n([T(cc.Node)],e.prototype,"guideTips",void 0),n([T(cc.Node)],e.prototype,"guideMask",void 0),n([T(cc.Node)],e.prototype,"guideBlock",void 0),n([T(cc.Label)],e.prototype,"labGuide",void 0),n([T(cc.Node)],e.prototype,"guideFinger",void 0),n([T(cc.Prefab)],e.prototype,"grillItem",void 0),n([T(cc.Prefab)],e.prototype,"btnItem",void 0),n([A],e)}(c.default);i.default=E,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseUI:"BaseUI",GameEnums:"GameEnums",GameServerConf:"GameServerConf",GoodsItem:"GoodsItem",GrillItem:"GrillItem",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig",ReadyBtn:"ReadyBtn",SDKMgr:"SDKMgr",TransitionUI:"TransitionUI",UIMgr:"UIMgr",WxMgr:"WxMgr"}],GlobalExtentions:[function(t,e,i){"use strict";cc._RF.push(e,"84cc3enFSxCGIRqZw37Zc8T","GlobalExtentions"),Object.defineProperty(i,"__esModule",{value:!0}),i.globalExtentions=void 0;var o=t("LocalizeMgr");String.prototype.toLocalize=function(){var t=String(this);return o.LocalizeMgr.inst.toLocalize(t)},Number.prototype.timeFormat=function(){var t=Math.floor(this/1e3)%60,e=Math.floor(this/1e3/60)%60,i=Math.floor(this/1e3/60/60);return String(i).padStart(2,"0")+":"+String(e).padStart(2,"0")+":"+String(t).padStart(2,"0")},i.globalExtentions=function(){},cc._RF.pop()},{LocalizeMgr:"LocalizeMgr"}],GoodsItem:[function(t,e,i){"use strict";cc._RF.push(e,"4cd04R+u4lGELspsyMcsQXl","GoodsItem");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseComponent"),c=t("GameEnums"),l=t("WxMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.root=null,e.nodeCen=null,e.sprShadow=null,e.sprOutline=null,e.sprIcon=null,e.sprUnknown=null,e.sprFrozen=null,e.sprFrozen1=null,e.sprFrozen2=null,e.sprFrozen3=null,e.labTime=null,e.spChange=null,e.primePos=cc.v2(),e.iconScale=1,e.isChangeAct=!1,e.skewerType=c.SKEWER_TYPE.COM,e.skewerTimes=0,e.isTipsAct=!1,e.hasChange=!1,e.isAct=!1,e}return o(e,t),e.prototype.init=function(){},e.prototype.setData=function(t,e,i,o,n,a,r){this.changeId(t,!1),this.node.angle=0,this.sprIcon.active=!0,this.skewerTimes=0,this.updateSkewerType(e),this.curIdx=o,this.curSeat=i,this.parentNode=n,this.seatParent=a,this.checkFunc=r,this.primePos=this.node.getPosition(),this.showOutline(!1),this.isChangeAct=!1,this.updateStr()},e.prototype.changeId=function(t,e){return void 0===e&&(e=!0),a(this,void 0,void 0,function(){var i,o,n,a;return r(this,function(r){switch(r.label){case 0:return this.goodsId=t,this.sprOutline.active=!1,i={height:ymtApp.cons.comCfg.FLOWER_HEIGHT,isAdaptMax:!0},this.sprShadow.getComponent(cc.Sprite).spriteFrame=null,this.sprIcon.getComponent(cc.Sprite).spriteFrame=null,this.sprOutline.getComponent(cc.Sprite).spriteFrame=null,e&&(this.spChange.node.active=!0,this.spChange.setAnimation(0,"animation",!1),this.goodsScale().start()),[4,ymtApp.gameController.getGoodsIdRes(t,!0)];case 1:return o=r.sent(),[4,ymtApp.gameController.getGoodsIdRes(t,!1)];case 2:return n=r.sent(),this.sprShadow.getComponent(cc.Sprite).spriteFrame=n,this.sprIcon.getComponent(cc.Sprite).spriteFrame=n,this.sprOutline.getComponent(cc.Sprite).spriteFrame=o,ymtApp.spriteMgr.adaptSpriteSize(this.sprShadow,i),ymtApp.spriteMgr.adaptSpriteSize(this.sprIcon,i),a=n.getRect(),this.iconScale=i.height/a.height,this.setOutlineAct(this.iconScale),this.updateStr(),[2]}})})},e.prototype.updateSkewerType=function(t,e){this.skewerType=t,this.sprUnknown.active=!1,this.sprFrozen.active=!1,this.skewerType==c.SKEWER_TYPE.UNKNOWN?(this.sprUnknown.opacity=255,this.skewerTimes=e||1,this.sprUnknown.active=this.skewerTimes>0,this.sprIcon.active=this.skewerTimes<=0):this.skewerType==c.SKEWER_TYPE.FROZEN&&(this.skewerTimes=e||3,this.sprFrozen.active=this.skewerTimes>0,this.labTime.string=""+this.skewerTimes,this.sprFrozen1.active=3==this.skewerTimes,this.sprFrozen2.active=2==this.skewerTimes,this.sprFrozen3.active=1==this.skewerTimes)},e.prototype.getSkewerType=function(){return this.skewerType},e.prototype.delTimes=function(t){var e=this;void 0===t&&(t=1),this.skewerTimes>0&&(this.skewerTimes-=t,this.skewerTimes<0&&(this.skewerTimes=0),this.skewerType==c.SKEWER_TYPE.UNKNOWN?(this.sprIcon.active=!0,cc.tween(this.sprUnknown).to(.3,{opacity:0}).call(function(){e.sprUnknown.active=!1}).start()):this.skewerType==c.SKEWER_TYPE.FROZEN&&(this.sprFrozen.active=this.skewerTimes>0,this.labTime.string=""+this.skewerTimes,this.sprFrozen1.active=3==this.skewerTimes,this.sprFrozen2.active=2==this.skewerTimes,this.sprFrozen3.active=1==this.skewerTimes))},e.prototype.hasTimes=function(){return this.skewerTimes>0},e.prototype.getTimes=function(){return this.skewerTimes||0},e.prototype.changeParent=function(t,e,i,o){var n=this;if(e!=this.curSeat||i!=this.curIdx){this.curIdx=i,this.curSeat=e,this.seatParent=t;var a=this.node.getPosition();this.node.parent.uuid!=this.parentNode.uuid&&(this.node.zIndex=888,a=ymtApp.nodeMgr.getNodeInNodePos(this.node,this.parentNode),this.node.setParent(this.parentNode),this.node.setPosition(a));var r=Number(i)-2;this.primePos=cc.v2(r*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0);var s=this.seatParent.convertToWorldSpaceAR(this.primePos),c=this.node.parent.convertToNodeSpaceAR(s),l=Math.max(.05,ymtApp.tweenMgr.getMoveTime(a,cc.v2(c.x,c.y+50),4800));this.isChangeAct=!0,cc.tween(this.node).to(l,{position:cc.v3(c.x,c.y+50)}).to(.1,{y:c.y}).call(function(){n.node.setParent(n.seatParent),n.node.setPosition(n.primePos),n.showOutline(!1),n.updateTipsAct(),o&&o(),n.isChangeAct=!1}).start(),this.updateStr()}else this.doBack(function(){o&&o()})},e.prototype.getGoodsId=function(){return this.goodsId},e.prototype.setOutlineAct=function(t){this.sprOutline.setScale(t),cc.Tween.stopAllByTarget(this.sprOutline)},e.prototype.showOutline=function(t){if(this.sprOutline.active=t,this.root.scale=t?1.2:1,t&&1==this.sprOutline.scale){var e=this.sprIcon.getComponent(cc.Sprite).spriteFrame;if(e){var i=e.getRect();this.sprOutline.scale=ymtApp.cons.comCfg.FLOWER_HEIGHT/i.height}}this.tipsAct&&this.tipsAct.stop()},e.prototype.showTipsAct=function(t){this.tipsAct&&this.tipsAct.stop(),this.nodeCen.setScale(1,1),this.nodeCen.y=0,this.isTipsAct=t,t&&(this.tipsAct=cc.tween(this.nodeCen).to(.15,{scaleY:1.1,y:10}).to(.1,{scaleX:1,scaleY:1,y:0}).union().repeat(2).delay(1).union().repeatForever().start())},e.prototype.goodsScale=function(t,e,i){return void 0===t&&(t=.2),null==e&&(e=5*(1-Math.abs(this.curIdx-2))),this.goodScaleAct&&this.goodScaleAct.stop(),Math.random()>.5?this.goodScaleAct=cc.tween(this.nodeCen).to(t,{scaleY:.85}).to(t,{scaleY:1.15}).to(t,{scaleY:1}).call(function(){i&&i()}):this.goodScaleAct=cc.tween(this.nodeCen).to(t,{scaleY:1.15}).to(t,{scaleY:.85}).to(t,{scaleY:1}).call(function(){i&&i()}),this.goodScaleAct},e.prototype.getTipsStatus=function(){return this.isTipsAct},e.prototype.updateTipsAct=function(){this.showTipsAct(this.isTipsAct)},e.prototype.isOutline=function(){return this.sprOutline.active},e.prototype.clearOutline=function(){this.sprOutline.active&&(this.sprOutline.active=!1)},e.prototype.setColorGray=function(t,e){void 0===e&&(e=!1);var i=t?cc.color(85,85,85):cc.Color.WHITE;e?cc.tween(this.sprIcon).to(.3,{color:i}).start():this.sprIcon.color=i,this.sprUnknown.color=i,this.sprFrozen1.color=i,this.sprFrozen2.color=i,this.sprFrozen3.color=i},e.prototype.canSele=function(){return!this.isAct&&!this.isChangeAct},e.prototype.touchSele=function(){this.hasTimes()||(this.hasChange=!1,this.lastZIndex=this.node.zIndex,cc.Tween.stopAllByTarget(this.node),this.showOutline(!0),this.isTipsAct&&ymtApp.eventTarget.emit(ymtApp.eventName.CLEAR_GOODS_TIPS))},e.prototype.touchMove=function(t){if(!this.hasTimes()){var e=ymtApp.gameController.getSeleGoods();!e||e.seatId==this.curSeat&&e.posId==this.curIdx||this.clearGoodSele(),this.hasChange||(this.node.setParent(this.parentNode),this.showOutline(!0),this.hasChange=!0);var i=this.parentNode.convertToNodeSpaceAR(t);this.node.zIndex=999,this.node.setPosition(i.x,i.y),this.checkFunc&&this.checkFunc(1,this.goodsId,this.curSeat,this.curIdx,t)}},e.prototype.touchEnd=function(t){this.hasTimes()||(this.checkFunc&&this.checkFunc(2,this.goodsId,this.curSeat,this.curIdx,t)||(this.doBack(),ymtApp.audioMgr.playSound(ymtApp.main.audio.putItem)),l.default.vibrate(),this.updateTipsAct())},e.prototype.doBack=function(t){var e=this,i=Number(this.curIdx)-2,o=cc.v2(i*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0),n=this.seatParent.convertToWorldSpaceAR(o),a=this.node.parent.convertToNodeSpaceAR(n);cc.Tween.stopAllByTarget(this.node),this.showOutline(!1),this.isAct=!0,this.node.zIndex=999,cc.tween(this.node).to(.05,{position:cc.v3(a.x,a.y+50)}).to(.05,{y:a.y}).call(function(){e.node.setParent(e.seatParent),e.node.setPosition(o.x,0),e.node.zIndex=e.lastZIndex,e.clearGoodSele(),e.isAct=!1,t&&t()}).start()},e.prototype.onGoodsSele=function(){this.clearGoodSele(),this.showOutline(!0);var t={seatId:this.curSeat,posId:this.curIdx};ymtApp.gameController.setSeleGoods(t),this.isTipsAct&&ymtApp.eventTarget.emit(ymtApp.eventName.CLEAR_GOODS_TIPS)},e.prototype.clearGoodSele=function(){var t=ymtApp.gameController.getSeleGoods();return ymtApp.gameController.setSeleGoods(null),t},e.prototype.updateStr=function(){},e.prototype.clear=function(){this.showTipsAct(!1)},n([p(cc.Node)],e.prototype,"root",void 0),n([p(cc.Node)],e.prototype,"nodeCen",void 0),n([p(cc.Node)],e.prototype,"sprShadow",void 0),n([p(cc.Node)],e.prototype,"sprOutline",void 0),n([p(cc.Node)],e.prototype,"sprIcon",void 0),n([p(cc.Node)],e.prototype,"sprUnknown",void 0),n([p(cc.Node)],e.prototype,"sprFrozen",void 0),n([p(cc.Node)],e.prototype,"sprFrozen1",void 0),n([p(cc.Node)],e.prototype,"sprFrozen2",void 0),n([p(cc.Node)],e.prototype,"sprFrozen3",void 0),n([p(cc.Label)],e.prototype,"labTime",void 0),n([p(sp.Skeleton)],e.prototype,"spChange",void 0),n([u],e)}(s.default);i.default=h,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",WxMgr:"WxMgr"}],GooglePlayAd:[function(t,e,i){"use strict";cc._RF.push(e,"c004cGmOWhBY5RxPDsDrPGP","GooglePlayAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=2e4,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){window.GooglePlay&&(n.default.i("game-showbanner\uff08\u663e\u793abanner\uff09"),window.android.showBanner())},e.prototype.hideBanner=function(){window.GooglePlay&&(n.default.i("game-closeBannerAd\uff08\u5173\u95edbanner\uff09"),window.android.hideBanner())},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){var t=this;window.showRewardVideoComplement=function(e){n.default.i("showRewardVideoComplement callback======================="),null!=t.videocallback?(1==e.ret?t.videocallback&&t.videocallback(!0):t.videocallback&&t.videocallback(!1),t.videocallback=null,cc.audioEngine.resumeAll()):n.default.e("game - showRewardVideoComplement \u8c03\u7528\u9519\u8bef\uff0c\u6ca1\u6709\u8c03\u7528\u8fc7\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a")},window.showInticalAdComplement=function(){n.default.i("showInticalAdComplement callback=======================")}},e.prototype.showVideo=function(t,e){window.GooglePlay&&(this.videocallback=t,window.android.showRewardedVideo(e),cc.audioEngine.pauseAll())},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){var t=this;0!=this.canShowInterstitialAd?(window.GooglePlay&&window.android.showInsertAd(),this.canShowInterstitialAd=!1,setTimeout(function(){console.log("[YMT_AD]\u53ef\u4ee5\u64ad\u653e\u63d2\u5c4f\u4e86!!!!!!!!!!!!!!!======"),t.canShowInterstitialAd=!0},this.interstitialAdDelay)):console.log("[YMT_AD]30\u79d2\u5185\u4e0d\u80fd\u64ad\u653e\u63d2\u5c4f======")},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,i){void 0===i&&(i=0),this.showInterstitial(t,e)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],GridRecommendView:[function(t,e,i){"use strict";cc._RF.push(e,"477789KJGVB0o+VYmIIeZQT","GridRecommendView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("SDKMgr"),s=t("UIMgr"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.btnContinue=null,e.countTimes=0,e.gridwidth=360,e.gridheight=272,e.gridIndex=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnContinue,this.onClickContinue,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.GAME_SHOW,this.onGameShow,this)},e.prototype.open=function(){this.countTimes=0,this.bg.color=r.default.getBgColor(),this.showGirdAd(),r.default.bannerVisible(!1);var t=r.default.getBottomAdShowSec();console.log("GridRecommendView",t),this.bannerTween=cc.tween(this.node).repeatForever(cc.tween().delay(t[0]).call(function(){r.default.bannerVisible(!0,r.default.getRecBottomAdType())}).delay(t[1]).call(function(){r.default.bannerVisible(!1,r.default.getRecBottomAdType())})).start()},e.prototype.showGirdAd=function(){if(window.wx&&null!=r.default.confData.rec_gridad&&!(r.default.confData.rec_gridad.length<=0)){if(!this.mBannerInfo){var t=window.wx.getSystemInfoSync();this.mBannerInfo=t}var e=this.mBannerInfo.windowWidth;this.mBannerInfo.windowHeight;var i={left:(e-this.gridwidth)/2,top:100,width:this.gridwidth};r.default.showGrid(r.default.confData.rec_gridad[this.gridIndex],i),this.gridIndex=(this.gridIndex+1)%r.default.confData.rec_gridad.length}},e.prototype.onClickContinue=function(){var t=this;this.countTimes++,this.countTimes==r.default.recNextBtnClickNum&&(this.delayTween&&this.delayTween.stop(),this.delayTween=cc.tween(this.node).delay(r.default.recNextBtnDelaySec).call(function(){t.onBack()}).start())},e.prototype.onGameShow=function(){this.onBack()},e.prototype.onBack=function(){this.bannerTween&&this.bannerTween.stop(),this.delayTween&&this.delayTween.stop(),this.removeAllListener(),r.default.bannerVisible(!1,r.default.getRecBottomAdType()),r.default.hideGrid(),s.default.nextProcess()},n([d(cc.Node)],e.prototype,"bg",void 0),n([d(cc.Node)],e.prototype,"btnContinue",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseUI:"BaseUI",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],GrillItem:[function(t,e,i){"use strict";cc._RF.push(e,"a83caoOaxhHN4/Vj4XyW1Zg","GrillItem");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("LocalizeMgr"),c=t("BaseComponent"),l=t("GameEnums"),d=t("GameServerConf"),u=t("SDKMgr"),p=t("WxMgr"),h=t("GoodsItem"),f=t("./XDAD/XDADpublic").default,m=cc._decorator,g=m.ccclass,_=m.property,y=function(t){function e(){var e,i=null!==t&&t.apply(this,arguments)||this;return i.nodeGrill=null,i.touch=null,i.seat=null,i.sprIcon=null,i.sprSmoke1=null,i.sprSmoke2=null,i.nodeLock=null,i.labLock=null,i.sprFrozen1=null,i.sprFrozen2=null,i.sprChain1=null,i.sprChain2=null,i.sprChain3=null,i.spLock=null,i.lock=null,i.video=null,i.labAdd=null,i.goodsItem=null,i.goods=[],i.curGoods=null,i.nextGoods=null,i.lockNum=0,i.lockType=l.GAME_LOCK_STATUS.FREE,i.isFree=!0,i.isShowAct=!1,i.skewerList=[],i.smokeTime=0,i.seatMap=((e={})[1]={x:-85,y:0,width:90,height:260},e[2]={x:0,y:0,width:80,height:260},e[3]={x:85,y:0,width:90,height:260},e),i.startPosList=[],i.moveDistances=[],i.seleItems=[],i.moveItem=null,i.touchStatus=[],i.posIdMap={},i}return o(e,t),e.prototype.init=function(){this.onClick(this.nodeLock,this.onClickUnlock,this),this.onClick(this.lock,this.onClickFree,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.SKIN_CHANGE,this.onSkinChange,this),this.eventOn(ymtApp.eventName.SELE_SEAT_DATA,this.updateSeleSeat,this),this.eventOn(ymtApp.eventName.GOODS_COMBO,this.onGoodsCombo,this)},e.prototype.setData=function(t,e,i,o){this.smokeTime=Math.random()*d.default.I.grillSmokeInterval,this.skewerList=t.skewers||[],this.shelvesType=t.type,this.isFree=this.shelvesType!=l.GAME_SHELVES_TYPE.LOCK,this.curSeat=t.seat,this.gameType=t.gameType,this.curLevel=t.level,this.checkMove=e,this.videoFunc=i,this.seleSeatFunc=o,this.lock.active=this.shelvesType==l.GAME_SHELVES_TYPE.LOCK,this.sprIcon.active=!1,this.sprSmoke1.active=!1,this.sprSmoke2.active=!1,this.isShowAct=!1,this.onSkinChange(),this.updateData(t.goods),this.upadteFree(),ymtApp.nodeMgr.addTouch(this.touch,{touchStart:this.onTouchStart,touchMove:this.onTouchMove,touchEnd:this.onTouchEnd,touchCancel:this.onTouchEnd,target:this})},e.prototype.doGoodsAct=function(){if(null!=this.curGoods)for(var t in this.curGoods)this.curGoods[t]&&this.curGoods[t].getComponent(h.default).goodsScale(.15).start();if(null!=this.nextGoods)for(var t in this.nextGoods)this.nextGoods[t]&&this.nextGoods[t].getComponent(h.default).goodsScale(.15).start()},e.prototype.updateData=function(t){return a(this,void 0,void 0,function(){var e=this;return r(this,function(){return this.clearGoods(),this.goods=t||[],this.curGoods=this.getGoodsList(this.seat,!0),this.nextGoods=this.getGoodsList(this.seat),this.doGoodsAct(),null!=this.curGoods&&this.updateTop(),this.scheduleOnce(function(){e.checkCombo()},.6),[2]})})},e.prototype.updateGoods=function(t){var e=function(t,e){if(t&&e)for(var i=1;i<=3;i++)t[i]&&e[i]?e[i].getComponent(h.default).changeId(t[i]):(t[i]||e[i])&&console.error("GrillItem updateGoods",1)};e(t.shift(),this.curGoods),e(t.shift(),this.nextGoods),this.goods=t||[],this.doGoodsAct(),null!=this.curGoods&&this.updateTop()},e.prototype.setLock=function(t,e){this.lockNum=t,this.lockType=e,this.upadteLock()},e.prototype.getLockNum=function(){return this.lockNum},e.prototype.delLock=function(){this.lockNum<=0?console.error("ShelvesItem delLock:",this.lockNum):(this.lockNum--,this.upadteLock())},e.prototype.isLock=function(){return this.shelvesType==l.GAME_SHELVES_TYPE.LOCK?!this.isFree:this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID?!(!this.curGoods||!this.curGoods[2]):this.lockNum>0},e.prototype.isFull=function(){if(this.shelvesType==l.GAME_SHELVES_TYPE.LOCK&&!this.isFree)return!0;if(null==this.curGoods)return!1;if(this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID)return null!=this.curGoods[2];for(var t=1;t<=3;t++)if(null==this.curGoods[t])return!1;return!0},e.prototype.isEmpty=function(){if(null==this.curGoods)return!0;if(this.shelvesType==l.GAME_SHELVES_TYPE.LOCK&&!this.isFree)return!0;if(this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID)return null==this.curGoods[2];for(var t=1;t<=3;t++)if(null!=this.curGoods[t])return!1;return!0},e.prototype.onTouchStart=function(t){if(!this.isShowAct){this.moveItem=null;var e=t.touch.getID();this.startPosList[e]=t.getLocation(),this.moveDistances[e]=0,ymtApp.eventTarget.emit(ymtApp.eventName.GAME_TOUCH,1)}},e.prototype.onTouchMove=function(t){if(!this.isShowAct){var e=t.touch.getID(),i=t.getDelta(),o=t.getLocation();if(this.moveDistances[e]+=i.mag(),!(this.moveDistances[e]<10)){if(!this.seleItems[e]&&this.curGoods){var n=this.touch.convertToNodeSpaceAR(o),a=this.getNearPosId(n);if(!this.posIdMap[a]&&this.curGoods[a]&&this.curGoods[a].getComponent(h.default).canSele()){var r=(s=this.curGoods[a].getComponent(h.default)).getGoodsId();if(this.seleItems[e]=this.curGoods[a],s.hasTimes())return;this.moveItem=this.curGoods[a],this.posIdMap[a]=e,this.showGoods(a,r)}}if(this.seleItems[e]){var s;if((s=this.seleItems[e].getComponent(h.default)).hasTimes())return;1!=this.touchStatus[e]&&(s.touchSele(),this.touchStatus[e]=1),s.touchMove(o)}}}},e.prototype.onTouchEnd=function(t){if(!this.isShowAct){var e=t.touch.getID();if(this.seleItems[e]&&this.seleItems[e].getComponent(h.default).hasTimes())return void(this.seleItems[e]=null);var i=t.getLocation();if(this.touchStatus[e]=0,this.showGoods(),this.moveDistances[e]<10){var o=this.touch.convertToNodeSpaceAR(i),n=ymtApp.gameController.getSeleGoods(),a=this.checkPosId(o);if(this.curGoods&&this.curGoods[a]&&this.curGoods[a].getComponent(h.default).hasTimes())return;if(!n||this.curGoods&&this.curGoods[a])this.onSele(o);else{if(this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID&&2!=a&&this.goods&&this.goods.length>0)return void this.onSele(o);this.seleSeatFunc&&this.seleSeatFunc(this.curSeat,a)}}else this.seleItems[e]&&(this.seleItems[e].getComponent(h.default).touchEnd(i),this.seleItems[e]=null);for(var a in this.posIdMap)this.posIdMap[a]==e&&(this.posIdMap[a]=null,delete this.posIdMap[a]);ymtApp.eventTarget.emit(ymtApp.eventName.GAME_TOUCH,3)}},e.prototype.onSele=function(t){var e=this.getNearPosId(t);this.curGoods&&this.curGoods[e]&&(this.curGoods[e].getComponent(h.default).onGoodsSele(),ymtApp.audioMgr.playSound(ymtApp.main.audio.sele),p.default.vibrate())},e.prototype.getNearPosId=function(t){var e=this.checkPosId(t);return this.curGoods&&!this.curGoods[e]&&(1==e?this.curGoods[2]?e=2:this.curGoods[3]&&(e=3):3==e?this.curGoods[2]?e=2:this.curGoods[1]&&(e=1):t.x>0?this.curGoods[1]?e=1:this.curGoods[3]&&(e=3):this.curGoods[3]?e=3:this.curGoods[1]&&(e=1)),e},e.prototype.checkPosId=function(t){return t.x>30?3:t.x<-30?1:2},e.prototype.upadteFree=function(){this.lock.active=!this.isFree,this.nodeGrill.active=this.isFree;var t=d.default.I.videoAddTime||15;this.labAdd.string=s.LocalizeMgr.inst.toLocalize("<b>\u89e3\u9501\u70e4\u7089<br/>\uff08\u589e\u52a0<color=#F95A67 >{0}</color>\u79d2\uff09<b/>",[String(t)])},e.prototype.upadteLock=function(){var t=this;this.nodeGrill.active=!0,this.nodeLock.active=this.lockNum>0,this.lockNum<=0||(this.labLock.string=""+this.lockNum,this.sprFrozen1.active=1==this.lockNum,this.sprFrozen2.active=this.lockNum>1,this.sprChain2.active&&this.lockNum<=2?(this.spLock.node.active=!0,ymtApp.audioMgr.playSound(ymtApp.main.audio.unlock),ymtApp.spineMgr.playSpineAnimation(this.spLock,"tielian",!1,function(){t.spLock.node.active=!1})):this.spLock.node.active=!1,this.sprChain1.active=this.lockNum>3,this.sprChain2.active=3==this.lockNum,this.sprChain3.active=this.lockNum<=2)},e.prototype.getGoodsList=function(t,e){void 0===e&&(e=!1);var i=null;if(this.goods&&this.goods.length>0){i={};for(var o=0;o<this.goods.length;o++){var n=this.goods.shift(),a=this.skewerList.shift();if(n&&Object.keys(n).length>0){var r=0;if(a&&a!=l.SKEWER_TYPE.COM){var s=Object.keys(n);r=Number(ymtApp.utils.randByList(s))}for(var c in n){var d=Number(c),u=ymtApp.poolMgr.get(l.POOL_NAME.GOODS,this.goodsItem);u.opacity=255;var p=Number(c);this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID&&(p=2);var f=200;e?(u.scale=1,u.zIndex=10):(u.scale=.8,f=130,u.zIndex=-1),u.setParent(t),u.setPosition((p-2)*f/3,0);var m=u.getComponent(h.default);n[d]||console.error("ShelvesItem getGoodsList",this.curSeat,n,this.goods);var g=l.SKEWER_TYPE.COM;r==d&&(g=a),m.setData(n[d],g,this.curSeat,p,this.node.parent,this.seat,this.checkMove),m.setColorGray(!e),i[p]=u}break}}}return i},e.prototype.getType=function(){return this.shelvesType},e.prototype.checkMoveGoods=function(t,e,i){var o=this.node.convertToNodeSpaceAR(t),n=cc.rect(0,0,260,270);if(ymtApp.utils.checkPointInBox(o,n)){if(this.shelvesType!=l.GAME_SHELVES_TYPE.TOP_GRID){for(var a=1;a<=3;a++){var r=cc.rect(this.seatMap[a].x,this.seatMap[a].y,this.seatMap[a].width,n.height);if(ymtApp.utils.checkPointInBox(o,r)){if(null==this.curGoods||null==this.curGoods[a])return a;if(this.curSeat==e&&i==a)return i}}var s={idx:0,dist:-1};for(a=1;a<=3;a++)if(null==this.curGoods||null==this.curGoods[a]){var c=ymtApp.utils.getTwoPosLen(o,cc.v2(this.seatMap[a].x,this.seatMap[a].y));(-1==s.dist||s.dist>c)&&(s={idx:a,dist:c})}return s.idx}if(null==this.curGoods||null==this.curGoods[2])return 2}return 0},e.prototype.showGoods=function(t,e){void 0===t&&(t=0),this.sprIcon.active=t>0,t>0&&(ymtApp.spriteMgr.loadImg(this.sprIcon,"sprite/flower/"+e,l.BUNDLENAME.RES,{height:ymtApp.cons.comCfg.FLOWER_HEIGHT,isAdaptMax:!0}),this.sprIcon.setPosition((t-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,this.seat.y))},e.prototype.showLockTips=function(){},e.prototype.addGoods=function(t,e,i){var o=this;null!=e?(this.stopShowAct(),this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID?(this.curGoods={2:e},t=2):null!=this.curGoods&&null!=this.curGoods[t]||(this.curGoods=this.curGoods||{},this.curGoods[t]=e),e.getComponent(h.default).changeParent(this.seat,this.curSeat,t,function(){o.shelvesType!=l.GAME_SHELVES_TYPE.TOP_GRID&&o.checkCombo(),ymtApp.audioMgr.playSound(ymtApp.main.audio.putItem),o.updateTop(),i&&i()})):i&&i()},e.prototype.updateTop=function(){if(null!=this.curGoods)for(var t=0;t<=3;t++)this.curGoods[t]&&(this.curGoods[t].opacity=255)},e.prototype.getRemoveItem=function(t,e,i){var o,n=null;if(1==e){if(!this.curGoods||!this.curGoods[i])return void console.error("ShelvesItem getRemoveItem pos1:",i,this.curSeat);t!=this.curGoods[i].getComponent(h.default).getGoodsId()&&console.warn("ShelvesItem getRemoveItem 1:",t,this.curGoods[i].getComponent(h.default).getGoodsId(),this.curSeat),n=this.curGoods[i],this.curGoods[i]=null}else if(2==e){if(!this.nextGoods||!this.nextGoods[i])return void console.error("ShelvesItem getRemoveItem pos2:",i,this.nextGoods,this.curSeat);t!=this.nextGoods[i].getComponent(h.default).getGoodsId()&&console.warn("ShelvesItem getRemoveItem 2:",t,this.nextGoods[i].getComponent(h.default).getGoodsId(),this.curSeat),n=this.nextGoods[i],this.nextGoods[i]=null}else{if(3!=e)return console.error("ShelvesItem eliminate type:",e,this.curSeat),{};for(var a=!1,r=0;r<this.goods.length;r++)if(this.goods[r][i]==t){delete this.goods[r][i],o=r,a=!0;break}if(!a)return console.error("ShelvesItem getRemoveItem find:",this.curSeat,t,JSON.stringify(this.goods)),{};(n=ymtApp.poolMgr.get(l.POOL_NAME.GOODS,this.goodsItem)).parent=this.seat,n.opacity=255,n.zIndex=20;var s=i;this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID&&(s=2),n.setPosition((s-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0),n.getComponent(h.default).setData(t,l.SKEWER_TYPE.COM,this.curSeat,s,this.node.parent,this.seat,this.checkMove)}return{goods:n,idx:o}},e.prototype.eliminate=function(t,e,i){var o=this.getRemoveItem(t,e,i).goods;if(o){cc.Tween.stopAllByTarget(o);var n=o.getComponent(h.default);return n.setColorGray(!1),n.clearOutline(),n.clear(),o}console.error("ShelvesItem doEliminate",this.curSeat)},e.prototype.updateEliminate=function(t){if(1==t)this.checkNext();else if(2==t)this.checkGoodsEmpty(this.nextGoods)&&this.addNext();else if(3==t)for(var e=this.goods.length-1;e>=0;e--)null!=this.goods[e]&&0!=Object.keys(this.goods[e]).length||(this.goods.splice(e,1),this.skewerList.splice(e,1))},e.prototype.changeGoods=function(t,e,i,o,n){var a=this;if(t!=e){var r=this.getRemoveItem(e,i,o),s=r.goods,c=r.idx;if(s){var d=ymtApp.nodeMgr.getNodeInNodePos(s,this.node.parent),u=s.getComponent(h.default);s.setParent(this.node.parent),s.color=cc.Color.WHITE,s.zIndex=600-10*i,s.setPosition(d),cc.tween(s).to(.15,{y:d.y-5}).call(function(){u.changeId(t,!0)}).delay(.45).to(.1,{y:d.y}).call(function(){var e=o;if(a.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID&&(e=2),1==i)a.curGoods||(a.curGoods={}),a.curGoods[o]=s,s.zIndex=10,a.updateTop(),a.scheduleOnce(function(){a.checkCombo()},.05),s.setParent(a.seat),s.setPosition((e-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0);else if(2==i)a.nextGoods||(a.nextGoods={}),a.nextGoods[o]=s,s.zIndex=5,s.setParent(a.seat),s.setPosition((e-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0);else if(3==i)return null!=c?(a.goods[c]||(a.goods[c]={}),a.goods[c][o]=t):console.error("ShelvesItem changeGoods idx",a.curSeat),u.clear(),void ymtApp.poolMgr.put(l.POOL_NAME.GOODS,s)}).call(function(){n&&n(u.getTipsStatus())}).start()}else console.error("ShelvesItem doEliminate",this.curSeat)}},e.prototype.removeGoods=function(t){if(this.moveItem){if(this.curGoods)for(var e in this.curGoods)if(this.curGoods[e]&&this.curGoods[e].uuid==this.moveItem.uuid){var i=this.curGoods[e];return this.curGoods[e]=null,i}if(this.nextGoods)for(var e in this.nextGoods)if(this.nextGoods[e]&&this.nextGoods[e].uuid==this.moveItem.uuid)return i=this.nextGoods[e],this.nextGoods[e]=null,i}if(this.curGoods&&this.curGoods[t])return i=this.curGoods[t],this.curGoods[t]=null,i},e.prototype.showSmoke=function(){var t=Math.random()>.5?this.sprSmoke1:this.sprSmoke2;if(t.active=!0,cc.Tween.stopAllByTarget(t),this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID)t.x=0;else{var e=Math.floor(3*Math.random())+1;t.x=ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3*(2-e)}t.setScale(1,0),t.opacity=255,cc.tween(t).parallel(cc.tween(t).to(1.5,{scaleY:1.5}),cc.tween(t).delay(1).to(.5,{opacity:0})).call(function(){t.active=!1}).start()},e.prototype.checkGoodsEmpty=function(t){if(t)for(var e in t)if(null!=t[e])return!1;return!0},e.prototype.getShelvesProg=function(){var t=0;return this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID&&(t=this.goods.length,this.curGoods&&this.curGoods[2]&&t++,this.nextGoods&&this.nextGoods[2]&&t++),t},e.prototype.onGoodsCombo=function(){var t=this;if(this.curGoods){var e=!1;for(var i in this.curGoods)if(this.curGoods[i]){var o=this.curGoods[i].getComponent(h.default);o.hasTimes()&&o.getSkewerType()==l.SKEWER_TYPE.FROZEN&&(o.delTimes(),e=!0)}e&&this.scheduleOnce(function(){t.checkCombo()},.2)}},e.prototype.checkCombo=function(){var t=this;if(null==this.curGoods)return this.checkNext(),!1;for(var e=1;e<3;e++){if(!this.curGoods[e]||!this.curGoods[e+1])return!1;var i=this.curGoods[e].getComponent(h.default),o=this.curGoods[e+1].getComponent(h.default);if(i.hasTimes()||o.hasTimes()||i.getGoodsId()!=o.getGoodsId())return!1}var n=.016666666666666666,s=null,c=!1,l=[];for(var d in this.curGoods)if(this.curGoods[d]){n=.15;var u=this.curGoods[d];cc.Tween.stopAllByTarget(u);var p=u.getComponent(h.default);p.getTipsStatus()&&(c=!0),s||(s=p.getGoodsId()),l.push(u)}return this.curGoods=null,ymtApp.eventTarget.emit(ymtApp.eventName.GOODS_ELIMINATE,s,l,c),this.scheduleOnce(function(){return a(t,void 0,void 0,function(){return r(this,function(){return this.checkNext(),[2]})})},n),!0},e.prototype.stopShowAct=function(){if(this.isShowAct){for(var t in this.curGoods)if(this.curGoods[t]){var e=Number(t);cc.Tween.stopAllByTarget(this.curGoods[t]),this.curGoods[t].zIndex=5,this.curGoods[t].setPosition((e-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0),this.curGoods[t].scale=1,this.curGoods[t].height=ymtApp.cons.comCfg.SHELVES_BOT_HEIGHT-20}this.isShowAct=!1}},e.prototype.checkNext=function(){this.checkGoodsEmpty(this.curGoods)&&(this.checkGoodsEmpty(this.nextGoods)&&this.addNext(),this.changeToCur(),this.addNext())},e.prototype.changeToCur=function(){var t=this;if(!this.checkGoodsEmpty(this.nextGoods)){this.curGoods=this.nextGoods;var e=!1;this.isShowAct=!0;var i=function(i){var n=Number(i),a=o.curGoods[n];if(a){var r=ymtApp.nodeMgr.getNodeInNodePos(a,o.seat);a.setParent(o.seat),a.setPosition(r),a.zIndex=10;var s=a.getComponent(h.default),c=0;s.hasTimes()&&s.getSkewerType()==l.SKEWER_TYPE.UNKNOWN&&(c=.5),s.setColorGray(!1),cc.tween(a).to(.3,{x:(n-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,y:0,scale:1}).call(function(){c>0&&s.delTimes()}).delay(c).call(function(){e||(t.checkCombo(),t.isShowAct=!1),e=!0}).start()}},o=this;for(var n in this.curGoods)i(n)}},e.prototype.addNext=function(){this.nextGoods=this.getGoodsList(this.seat),this.checkGoodsEmpty(this.nextGoods)},e.prototype.onClickUnlock=function(){var t=this;f.showXDAD(),u.default.showVideo(function(){t.lockNum=0,ymtApp.gameController.dotGameVideo(t.gameType,t.curLevel+1),ymtApp.gameController.dotComLevel(t.curLevel+1,l.DOT_LEVEL_TYPE.UNLOCK),t.upadteLock()})},e.prototype.onClickFree=function(){var t=this;f.showXDAD(),u.default.showVideo(function(){ymtApp.gameController.dotGameVideo(t.gameType,t.curLevel+1),t.videoFunc&&t.videoFunc(t.curSeat),t.isFree=!0,t.upadteFree()})},e.prototype.onSeleSeat=function(t){if(null==this.curGoods)t=t||3;else if(null==t){for(var e=3;e>=1;e--)if(null==this.curGoods[e]){t=e;break}}else this.shelvesType==l.GAME_SHELVES_TYPE.TOP_GRID?(this.getShelvesProg()>=3||2!=t)&&(t=null):null!=this.curGoods[t]&&(t=null);t&&this.seleSeatFunc&&this.seleSeatFunc(this.curSeat,t)&&p.default.vibrate()},e.prototype.getGoodsMap=function(t){var e=null;if(t)for(var i in t)if(t[i]){var o=t[i].getComponent(h.default);(e=e||{})[i]=o.getGoodsId()}return e},e.prototype.getAllGoods=function(){return{cur:this.getGoodsMap(this.curGoods),next:this.getGoodsMap(this.nextGoods),waits:(this.goods||[]).slice()}},e.prototype.getComGoods=function(){var t=[],e=this.getGoodsMap(this.curGoods);e&&t.push(e);var i=this.getGoodsMap(this.nextGoods);i&&t.push(i);var o=(this.goods||[]).slice();return o&&o.length>0&&(t=t.concat(o)),t},e.prototype.getSpecialGoods=function(){var t={cur:[],next:[],waits:this.skewerList},e=function(t){var e=[];if(t)for(var i in t)if(t[i]){var o=t[i].getComponent(h.default);if(o.hasTimes()){var n=o.getSkewerType();e.push({id:o.getGoodsId(),pos:Number(i),type:n,times:o.getTimes()})}}return e};return t.cur=e(this.curGoods),t.next=e(this.nextGoods),t},e.prototype.getFrozenGoods=function(){if(this.curGoods)for(var t in this.curGoods)if(this.curGoods[t]){var e=this.curGoods[t].getComponent(h.default);if(e.getSkewerType()==l.SKEWER_TYPE.FROZEN&&e.hasTimes())return this.curGoods[t]}},e.prototype.getCurGoods=function(t){void 0===t&&(t=!1);var e={};if(this.curGoods)for(var i in this.curGoods)if(this.curGoods[i]){var o=this.curGoods[i].getComponent(h.default);t&&o.hasTimes()||(e[i]=o.getGoodsId())}return e},e.prototype.getGoodsData=function(){var t={};if(this.curGoods)for(var e in this.curGoods)if(this.curGoods[e]){var i=this.curGoods[e].getComponent(h.default);t[e]={id:i.getGoodsId(),type:i.getSkewerType(),times:i.getTimes()}}return t},e.prototype.getGoodsItem=function(t){if(this.curGoods[t])return this.curGoods[t].getComponent(h.default)},e.prototype.onSkinChange=function(){},e.prototype.updateSeleSeat=function(t){var e,i;if(t&&(null===(e=t.last)||void 0===e?void 0:e.seatId)==this.curSeat&&this.curGoods&&this.curGoods[null===(i=t.last)||void 0===i?void 0:i.posId]){var o=t.last.posId;this.curGoods[o].getComponent(h.default).showOutline(!1),this.curGoods[o].getComponent(h.default).updateTipsAct(),this.curGoods[o].setParent(this.seat),this.curGoods[o].setPosition((o-2)*ymtApp.cons.comCfg.GRILL_SEAT_WIDTH/3,0)}},e.prototype.clearGoodsTips=function(){for(var t in this.curGoods)this.curGoods[t]&&this.curGoods[t].getComponent(h.default).showTipsAct(!1)},e.prototype.clearGoods=function(){if(this.curGoods){for(var t in this.curGoods)this.curGoods[t]&&(this.curGoods[t].getComponent(h.default).clear(),ymtApp.poolMgr.put(l.POOL_NAME.GOODS,this.curGoods[t]));this.curGoods=null}if(this.nextGoods){for(var t in this.nextGoods)this.nextGoods[t]&&(this.nextGoods[t].getComponent(h.default).clear(),ymtApp.poolMgr.put(l.POOL_NAME.GOODS,this.nextGoods[t]));this.nextGoods=null}this.goods=[];for(var e=this.seat.children||[],i=0;i<e.length;i++)e[i].getComponent(h.default).clear(),ymtApp.poolMgr.put(l.POOL_NAME.GOODS,e[i]);this.seat.removeAllChildren()},e.prototype.clear=function(){this.clearGoods(),this.shelvesType=null,this.skewerList=[],this.curSeat=null,this.checkMove=null,this.lockNum=0,this.lockType=l.GAME_LOCK_STATUS.FREE,ymtApp.nodeMgr.removeTouch(this.touch,{touchStart:this.onTouchStart,touchMove:this.onTouchMove,touchEnd:this.onTouchEnd,touchCancel:this.onTouchEnd,target:this})},e.prototype.updateTime=function(t){this.smokeTime>0&&!this.isLock()&&(this.smokeTime-=t,this.smokeTime<=0&&(this.smokeTime=d.default.I.grillSmokeInterval,this.showSmoke()))},n([_(cc.Node)],e.prototype,"nodeGrill",void 0),n([_(cc.Node)],e.prototype,"touch",void 0),n([_(cc.Node)],e.prototype,"seat",void 0),n([_(cc.Node)],e.prototype,"sprIcon",void 0),n([_(cc.Node)],e.prototype,"sprSmoke1",void 0),n([_(cc.Node)],e.prototype,"sprSmoke2",void 0),n([_(cc.Node)],e.prototype,"nodeLock",void 0),n([_(cc.Label)],e.prototype,"labLock",void 0),n([_(cc.Node)],e.prototype,"sprFrozen1",void 0),n([_(cc.Node)],e.prototype,"sprFrozen2",void 0),n([_(cc.Node)],e.prototype,"sprChain1",void 0),n([_(cc.Node)],e.prototype,"sprChain2",void 0),n([_(cc.Node)],e.prototype,"sprChain3",void 0),n([_(sp.Skeleton)],e.prototype,"spLock",void 0),n([_(cc.Node)],e.prototype,"lock",void 0),n([_(cc.Node)],e.prototype,"video",void 0),n([_(cc.RichText)],e.prototype,"labAdd",void 0),n([_(cc.Prefab)],e.prototype,"goodsItem",void 0),n([g],e)}(c.default);i.default=y,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseComponent:"BaseComponent",GameEnums:"GameEnums",GameServerConf:"GameServerConf",GoodsItem:"GoodsItem",LocalizeMgr:"LocalizeMgr",SDKMgr:"SDKMgr",WxMgr:"WxMgr"}],HgAd:[function(t,e,i){"use strict";cc._RF.push(e,"ff023pgyw5PRZaBPngpn++p","HgAd");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("TJ"),s=t("YmtLog"),c=t("Enum"),l=t("GameSys"),d=t("HttpManager"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.baseURL="https://api.yomitoo.com",e.appId="shouhujiayuan",e.canShowRewardAd=!0,e.rewardAdDelay=1e4,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.hasPaySys=function(){return!1},e.prototype.hasRankSys=function(){return!0},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.login=function(t){var e=this;0==this.isServer?hg.getUserInfo({success:function(e){t&&t(e)}}):hg.login({success:function(i){return n(e,void 0,void 0,function(){var e,o,r,l,u,p=this;return a(this,function(h){switch(h.label){case 0:return e=hg.getSystemInfoSync(),o=encodeURIComponent(e.countryCode),console.error("\u83b7\u53d6\u7cfb\u7edf\u56fd\u5bb6:",o),r=this.baseURL+"/open/login/loginByCode",l=i.code,u="appId="+this.appId+"&countryCode="+o+"&code="+encodeURIComponent(l)+'&openid=""',[4,d.default.send(r,u,c.HTTP_TYPE.POST).then(function(e){hg.getUserInfo({success:function(i){return n(p,void 0,void 0,function(){return a(this,function(){return i.token=e.data.token,i.userId=e.data.userId,t&&t(i),cc.game.on(cc.game.EVENT_HIDE,function(){},this),[2]})})}})}).catch(function(t){s.default.e("login err:",t)})];case 1:return h.sent(),[2]}})})}})},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){hg.showBannerAd&&hg.showBannerAd({adUnitId:11478,callback:function(t){console.log("res",JSON.stringify(t))}})},e.prototype.hideBanner=function(){hg.hideBannerAd&&hg.hideBannerAd({adUnitId:11478})},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){var t=this;this.videoAd=hg.createRewardedVideoAd({adUnitId:11476}),this.videoAd.onClose=function(e){e&&e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6210"),t.videocallback&&t.videocallback(!0)):t.videocallback&&t.videocallback(!1)},this.videoAd.onError=function(){console.log("hg.rewardedVideoAd.onError"),t.canShowRewardAd=!0,t.videocallback&&t.videocallback(!1)}},e.prototype.showVideo=function(t){null==this.videoAd&&this.initVideo(),null!=this.videoAd&&0!=this.canShowRewardAd&&(this.videocallback=t,this.videoAd.show().then(function(){var t=this;console.log("Success hg.rewardedVideoAd.show"),this.canShowRewardAd=!1,cc.director.getScheduler().schedule(function(){t.canShowRewardAd=!0},this,this.rewardAdDelay)}).catch(function(){}))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(t,e,i){var o=this;void 0===i&&(i=!1),0!=this.canShowInterstitialAd||0!=i?(hg.interstitialAdShow&&hg.interstitialAdShow({adUnitId:11477,callback:function(t){console.log("res",JSON.stringify(t))}}),this.canShowInterstitialAd=!1,setTimeout(function(){console.log("\u53ef\u4ee5\u64ad\u653e\u63d2\u5c4f\u4e86!!!!!!!!!!!!!!!======"),o.canShowInterstitialAd=!0},this.interstitialAdDelay)):console.log("30\u79d2\u5185\u4e0d\u80fd\u64ad\u653e\u63d2\u5c4f======")},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,i,o,n,a){void 0===i&&(i=0),void 0===a&&(a=!1),this.showInterstitial(t,e,a)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.setRank=function(t){var e=!t.bigFirst||t.bigFirst,i=t.rankName?t.rankName:"\u4e16\u754c\u6392\u884c";hg.setRank({score:t.score,bigFirst:e,type:t.type?t.type:0,name:i,success:function(){console.log("hg.reportRank success"),t.success&&t.success()},fail:function(){console.log("hg.reportRank fail")}})},e.prototype.getRank=function(t){return n(this,void 0,Promise,function(){return a(this,function(){return[2,new Promise(function(e){var i=t.rankName?t.rankName:"\u4e16\u754c\u6392\u884c",o=t.type?t.type:0;console.log("\u83b7\u5f97\u6392\u884c:",i),hg.getRank?hg.getRank({type:o,page:1,size:100,name:i,success:function(t){t.name=i,console.log("hg.reportRank success",t),e(t)},fail:function(){console.log("hg.reportRank fail"),t.fail&&t.fail(),e(null)}}):e(null)})]})})},e.prototype.getAIUser=function(t){return void 0===t&&(t=10),n(this,void 0,Promise,function(){return a(this,function(){return[2,new Promise(function(e){hg.getAIUser({num:t,success:function(t){e(t)},fail:function(){console.log("fail"),e({})}})})]})})},e.prototype.setUserCloudStorage=function(){return n(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.getUserCloudStorage=function(t){return n(this,void 0,Promise,function(){return a(this,function(){return[2,new Promise(function(e){hg.getUserCloudStorage({keyList:[t],success:function(t){t.length>0?e(t[0].value):e(null)},fail:function(){e(null)}})})]})})},e.prototype.saveRemoteData=function(t){return n(this,void 0,void 0,function(){var e,i,o;return a(this,function(n){switch(n.label){case 0:return e=this.baseURL+"/app/updateUserData/updateUserData",i=r.TJ.PlayerPrefs.GetInt(this.appId+"_remoteSaveVer_"+l.default.userInfo.openid,0),i++,r.TJ.PlayerPrefs.SetInt(this.appId+"_remoteSaveVer_"+l.default.userInfo.openid,i),o="gameId="+this.appId+"&gameData="+t+"&version="+i,[4,d.default.send(e,o,c.HTTP_TYPE.POST).then(function(){}).catch(function(t){console.error("\u4fdd\u5b58\u6570\u636e\u9519\u8bef!!!",t)})];case 1:return n.sent(),[2]}})})},e.prototype.loadRemoteData=function(){return n(this,void 0,Promise,function(){var t,e,i,o=this;return a(this,function(n){switch(n.label){case 0:return t=r.TJ.PlayerPrefs.GetInt("maomimeishijie_remoteSaveVer_"+l.default.userInfo.openid,0),console.error("\u6570\u636e\u7248\u672c\u53f7\uff1a",t),0!=t?[3,2]:(e=this.baseURL+"/app/updateUserData/getUserData",i="gameId="+this.appId,[4,d.default.send(e,i,c.HTTP_TYPE.POST).then(function(t){return JSON.parse(t.data.gameData),r.TJ.PlayerPrefs.SetInt(o.appId+"_remoteSaveVer_"+l.default.userInfo.openid,t.data.version),Promise.resolve(!0)}).catch(function(t){return s.default.i("\u8fdc\u7a0b\u6570\u636e\u9519\u8bef!!!",t),Promise.resolve(!1)})]);case 1:return n.sent(),[3,3];case 2:return[2,Promise.resolve(!1)];case 3:return[2]}})})},e.prototype.payItem=function(t){return n(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){s.default.w("\u8d2d\u4e70\u7269\u54c1",t),e.showGameLoading();var o=e.baseURL+"/app/order/createOrder",r={itemId:t.itemId,subject:""+encodeURIComponent(t.subject)},l={itemId:t.itemId};e.sendEvent("pay_createorder",JSON.stringify(l)),d.default.send(o,r,c.HTTP_TYPE.POST,15e3,"application/json; charset=utf-8").then(function(o){hg.requestPayment({item_id:t.itemId,transaction_id:o.data.orderNo,subject:t.subject,success:function(){return n(e,void 0,void 0,function(){var e;return a(this,function(){return s.default.w("\u652f\u4ed8\u6210\u529f!!!! \u4fdd\u5b58\u6570\u636e"),e={itemId:t.itemId,orderNo:o.data.orderNo},this.sendEvent("pay_complete",JSON.stringify(e)),this.hideGameLoading(),i(0),setTimeout(function(){},2e3),[2]})})},fail:function(n){s.default.w("\u652f\u4ed8\u53d6\u6d88-\u5931\u8d25",n.errMsg,n.errCode);var a={itemId:t.itemId,orderNo:o.data.orderNo,errmsg:n.errMsg,errCode:n.errCode};e.sendEvent("pay_cancelOrfail",JSON.stringify(a)),e.hideGameLoading(),i(n.errCode)}})}).catch(function(o){s.default.e("\u521b\u5efa\u8ba2\u5355\u8fd4\u56de\u9519\u8bef!!!",o);var n={itemId:t.itemId,errmsg:o};e.sendEvent("pay_createorder_err",JSON.stringify(n)),e.hideGameLoading(),i(1e3)})})]})})},e.prototype.getPayResult=function(){return n(this,void 0,void 0,function(){return a(this,function(){return this.baseURL,this.hideGameLoading(),[2]})})},e.prototype.sendEvent=function(t,e){if(0!=this.isServer){var i={uid:l.default.userInfo.uid,openId:l.default.userInfo.openid,data:e};s.default.w("sendEvent:",t,JSON.stringify(i))}},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=u,cc._RF.pop()},{Enum:"Enum",GameSys:"GameSys",HttpManager:"HttpManager",TJ:"TJ",YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],HippooboxAd:[function(t,e,i){"use strict";cc._RF.push(e,"01f99KV5epMVrmIkI9RWqi7","HippooboxAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){window.hippoobox&&(window.showBanner(),this.willShowBanner=!0)},e.prototype.hideBanner=function(){window.hippoobox&&(window.hideBanner(),this.willShowBanner=!1)},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){},e.prototype.showVideo=function(t,e){var i=this,o=window;if(window.hippoobox){var a=!1;this.videocallback=t,n.default.w("==\u70b9\u51fb\u64ad\u653e\u89c6\u9891==",e),o.h5sdk.adBreak({type:"reward",name:e,beforeAd:function(){cc.audioEngine.pauseAll()},afterAd:function(){n.default.l("\u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u7ed3\u675f"),a&&i.videocallback&&i.videocallback(!0)},beforeReward:function(t){t&&t()},adDismissed:function(){n.default.e("\u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),i.videocallback&&i.videocallback(!1)},adViewed:function(){n.default.l("\u73a9\u5bb6\u5b8c\u6574\u770b\u5b8c\u5e7f\u544a"),a=!0},adBreakDone:function(t){n.default.e("\u89c6\u9891\u5e7f\u544a\u5c55\u793a\u9519\u8bef:",t),cc.audioEngine.resumeAll(),"viewed"!=t.breakStatus&&i.videocallback&&i.videocallback(!1)}})}},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(t,e,i,o){var a=this;n.default.w("==\u64ad\u653e\u63d2\u5c4f==",i,o);var r=window;window.hippoobox&&r.h5sdk.adBreak({type:"browse",name:o,beforeAd:function(){a.canShowInterstitialAd=!1,cc.audioEngine.pauseAll(),setTimeout(function(){a.tmpShow=a.willShowBanner,a.hideBanner(),a.willShowBanner=a.tmpShow,console.error("\u63d2\u5c4f beforeAd",a.willShowBanner)},200)},afterAd:function(){setTimeout(function(){a.canShowInterstitialAd=!0},a.interstitialAdDelay),cc.audioEngine.resumeAll(),console.error("\u63d2\u5c4f afterAd",a.willShowBanner),a.willShowBanner&&a.showBanner()}})},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.e("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],HomeView:[function(t,e,i){"use strict";cc._RF.push(e,"7cdfe7UedlPwrmygoCcAyTf","HomeView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("UIMgr"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnStart=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.init()},e.prototype.init=function(){this.onClick(this.btnStart,this.onClickStart,this)},e.prototype.open=function(){t.prototype.open.call(this)},e.prototype.onClickStart=function(){r.default.nextProcess()},n([l(cc.Node)],e.prototype,"btnStart",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseUI:"BaseUI",UIMgr:"UIMgr"}],HttpManager:[function(t,e,i){"use strict";cc._RF.push(e,"8696cvAMehEi7BHmzcGCufX","HttpManager"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("Enum"),n=t("GameSys"),a=function(){function t(){}return t.send=function(t,e,i,a,r){return void 0===e&&(e=null),void 0===i&&(i=o.HTTP_TYPE.GET),void 0===a&&(a=4e4),void 0===r&&(r="application/x-www-form-urlencoded; charset=utf-8"),new Promise(function(s,c){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4==l.readyState){if(l.status>=200&&l.status<400)try{s(JSON.parse(l.responseText))}catch(t){c(l)}else c(l);l&&l.abort&&l.abort()}},l.onerror=function(t){console.log("request error",t)},l.ontimeout=function(){c(o.HTTP_ERROR.TIME_OUT),l&&l.abort&&l.abort()},!e||"object"!=typeof e||e.length||Array.isArray(e)||(e=JSON.stringify(e)),i==o.HTTP_TYPE.GET&&e&&(t+="?"+e,e=null),l.open(i,t,!0),l.timeout=a,o.HTTP_TYPE.POST,l.setRequestHeader("Content-Type",r),n.default.userInfo.token&&l.setRequestHeader("Authorization","Bearer "+n.default.userInfo.token),l.send(e),console.log("[YMT_GAME]Request URL:"+t)})},t}();i.default=a,cc._RF.pop()},{Enum:"Enum",GameSys:"GameSys"}],InitMgr:[function(t,e,i){"use strict";cc._RF.push(e,"45a99OZkbpK6a/HgVpUxrPO","InitMgr");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("Singleton"),a=t("GameEvents"),r=t("MainConfig"),s=t("GameConst"),c=t("GameCtrl"),l=t("GameData"),d=t("Utils"),u=t("AudioManager"),p=t("NodeMgr"),h=t("PoolMgr"),f=t("RemindMgr"),m=t("ResMgr"),g=t("SpineMgr"),_=t("SpriteMgr"),y=t("TimeMgr"),v=t("TweenMgr"),I=t("ViewMgr"),A=function(t){function e(){var e=t.call(this)||this;return window.ymtApp=window.ymtApp||{data:null,gameController:null,eventTarget:null,resMgr:null,nodeMgr:null,viewMgr:null,poolMgr:null,tweenMgr:null,audioMgr:null,spineMgr:null,eventName:null,spriteMgr:null,remindMgr:null,timeMgr:null,utils:null,main:null,cons:null},ymtApp.utils=d.default,ymtApp.data=l.default.getInstance(),ymtApp.gameController=c.default.getInstance(),ymtApp.eventTarget=new cc.EventTarget,ymtApp.resMgr=m.default.getInstance(),ymtApp.nodeMgr=p.default.getInstance(),ymtApp.viewMgr=I.default.getInstance(),ymtApp.poolMgr=h.default.getInstance(),ymtApp.tweenMgr=v.default.getInstance(),ymtApp.audioMgr=u.default.getInstance(),ymtApp.spineMgr=g.default.getInstance(),ymtApp.spriteMgr=_.default.getInstance(),ymtApp.remindMgr=f.default.getInstance(),ymtApp.timeMgr=y.default.getInstance(),ymtApp.cons=new s.default,ymtApp.main=r.Main,ymtApp.eventName=a.default,e}return o(e,t),e}(n.default);i.default=A,cc._RF.pop()},{AudioManager:"AudioManager",GameConst:"GameConst",GameCtrl:"GameCtrl",GameData:"GameData",GameEvents:"GameEvents",MainConfig:"MainConfig",NodeMgr:"NodeMgr",PoolMgr:"PoolMgr",RemindMgr:"RemindMgr",ResMgr:"ResMgr",Singleton:"Singleton",SpineMgr:"SpineMgr",SpriteMgr:"SpriteMgr",TimeMgr:"TimeMgr",TweenMgr:"TweenMgr",Utils:"Utils",ViewMgr:"ViewMgr"}],Interface:[function(t,e,i){"use strict";cc._RF.push(e,"5c0215fQhRCSopIoPT4iflu","Interface"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],JoliboxAd:[function(t,e,i){"use strict";cc._RF.push(e,"6773dOdq8RCH7wVeEI8AY7c","JoliboxAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.isGetReward=!1,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),console.log("Jolibox sdk = ================"),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){},e.prototype.showVideo=function(t){var e=this;this.videocallback=t,this.isGetReward=!1,cc.director.pause(),cc.audioEngine.pauseAll(),window.joliboxSdk.ads.adBreak({type:"reward",beforeReward:function(t){e.isGetReward=!1,t()},adDismissed:function(){e.isGetReward=!1,console.log("adDismissed",e.isGetReward)},adViewed:function(){e.isGetReward=!0,console.log("adViewed",e.isGetReward)},adBreakDone:function(t){cc.director.resume(),cc.audioEngine.resumeAll(),console.log("adBreakDone",t),"viewed"==t.breakStatus?e.videocallback&&e.videocallback(!0):e.videocallback&&e.videocallback(!1),e.isGetReward=!1}})},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){var t=this;window.joliboxSdk.ads.adBreak({type:"browse",beforeAd:function(){console.log("beforeAd"),cc.director.pause(),cc.audioEngine.pauseAll()},afterAd:function(){console.log("afterAd"),cc.director.resume(),cc.audioEngine.resumeAll(),t.canShowInterstitialAd=!1,setTimeout(function(){t.canShowInterstitialAd=!0},t.interstitialAdDelay)},adBreakDone:function(t){cc.director.resume(),console.log("adBreakDone",t),cc.audioEngine.resumeAll()}})},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.e("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],KSAd:[function(t,e,i){"use strict";cc._RF.push(e,"e94a0azvxpNQobd5un1pq0C","KSAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("GameSys"),a=t("YmtAdManager"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.initVideo(),this.initRecorder()},e.prototype.initVideo=function(){var t=this;null!=n.default.adInfo.adunit_video&&(this.destroyVideo(),this.videoAd=ks.createRewardedVideoAd({adUnitId:n.default.adInfo.adunit_video}),console.log(this.videoAd),this.videoAd.onError&&this.videoAd.onError(function(t){console.log("%c[YMT_GAME]video error: "+JSON.stringify(t),"color: red")}),this.videoAd.onClose(function(e){console.log(e),t.recorderResume(),(e&&e.isEnded||void 0===e)&&t.videocallback&&t.videocallback(!0)}))},e.prototype.showVideo=function(t){var e=this;null==this.videoAd&&this.initVideo(),null!=this.videoAd?(this.videocallback=t,this.videoAd.show().then(function(){e.recorderPause(),console.log("\u89c6\u9891\u5c55\u793a\u6210\u529f")}).catch(function(){e.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})):t&&t(!0)},e.prototype.destroyVideo=function(){this.videoAd&&this.videoAd.destroy(),this.videoAd=null},e.prototype.initRecorder=function(){var t=this;this.gameRecorder=ks.getGameRecorder(),this.gameRecorder.on("start",function(){console.log("\u5f55\u5236\u5f00\u59cb"),t.gameRecorderState=a.RECORDER_STATE.START}),this.gameRecorder.on("error",function(e){console.log("\u5f55\u5236\u51fa\u9519",JSON.stringify(e)),t.gameRecorderState=a.RECORDER_STATE.NO}),this.gameRecorder.on("stop",function(e){t.gameRecorderState=a.RECORDER_STATE.STOP,t.videoPath=null,e&&e.videoID?(t.videoPath=e.videoID,console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u6210\u529f\u3002videoID is "+e.videoID)):console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u5931\u8d25"),t.onRecoderStop&&t.onRecoderStop(null!=t.videoPath)}),this.gameRecorder.on("pause",function(){console.log("\u6682\u505c\u5f55\u5236"),t.gameRecorderState=a.RECORDER_STATE.PAUSE}),this.gameRecorder.on("resume",function(){console.log("\u7ee7\u7eed\u5f55\u5236"),t.gameRecorderState=a.RECORDER_STATE.RESUME}),this.gameRecorder.on("abort",function(){console.log("\u5e9f\u5f03\u5df2\u5f55\u5236\u89c6\u9891")})},e.prototype.recorderPause=function(){this.gameRecorder&&this.gameRecorderState!=a.RECORDER_STATE.NO&&this.gameRecorder.pause()},e.prototype.recorderResume=function(){this.gameRecorder&&this.gameRecorderState!=a.RECORDER_STATE.NO&&this.gameRecorder.resume()},e.prototype.recorderStart=function(){this.gameRecorder&&this.gameRecorder.start()},e.prototype.recorderStop=function(t){this.onRecoderStop=t,this.gameRecorder&&this.gameRecorder.stop()},e.prototype.shareRecorder=function(t,e){null!=this.gameRecorder&&null!=this.videoPath&&this.gameRecorder.publishVideo({video:this.videoPath,callback:function(i){if(null!=i&&null!=i)return console.log("\u5206\u4eab\u5f55\u5c4f\u5931\u8d25: "+JSON.stringify(i)),void(e&&e());console.log("\u5206\u4eab\u5f55\u5c4f\u6210\u529f"),t&&t()}})},e.prototype.hasAddDesktop=function(t,e,i){ks.getAPKShortcutInstallStatus(function(o){console.log("hasAddDesktop",JSON.stringify(o)),1===o.code?o.installed?e&&e():t&&t():i&&i()})},e.prototype.addDesktop=function(t,e){ks.saveAPKShortcut(function(i){console.log("addDesktop",JSON.stringify(i)),1===i.code?t&&t():e&&e()})},e}(a.default);i.default=r,cc._RF.pop()},{GameSys:"GameSys",YmtAdManager:"YmtAdManager"}],LevelUI:[function(t,e,i){"use strict";cc._RF.push(e,"24c88FeQpFPULe6c4Pe5OR4","LevelUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("LocalizeMgr"),c=t("BaseUI"),l=t("List"),d=t("GameEnums"),u=t("MainConfig"),p=t("GameServerConf"),h=cc._decorator,f=h.ccclass,m=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.levelList=null,e.item=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),this.initView()},e.prototype.initView=function(){return a(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return[4,ymtApp.gameController.getMaxLevel(d.GAME_TYPE.COMMON)];case 1:return t=e.sent(),this.levelList.numItems=t,[2]}})})},e.prototype.onListRander=function(t,e){var i=this,o=t.getChildByName("labLevel"),n=t.getChildByName("labNum");o.getComponent(cc.Label).string=s.LocalizeMgr.inst.toLocalize("\u7b2c{0}\u5173",[String(e+1)]);var c=ymtApp.gameController.getShelvesCfg(d.GAME_TYPE.COMMON);ymtApp.gameController.preloadNext(d.GAME_TYPE.COMMON,e,function(t){return a(i,void 0,void 0,function(){var i,o,a,s,l,u,h;return r(this,function(){for(i=c[t.shelves[0]]||[],o=t.layer[0],a=t.layer[1],s=0,l=0,u=0;u<i.length;u++)for(h=0;h<i[u].length;h++)i[u][h]==d.GAME_SHELVES_TYPE.TOP_GRID?(s+=3,l+=3):(i[u][h]==d.GAME_SHELVES_TYPE.BOX||e<p.default.I.videoCabinetLevel-1&&i[u][h]==d.GAME_SHELVES_TYPE.LOCK)&&(s+=o,l+=3*a);return t.empty&&t.empty>3?l-=t.empty:l-=3,l-=l%3,s+=3-s%3,n&&cc.isValid(n)&&(n.getComponent(cc.Label).string="min:"+s+" max:"+(l-3)),[2]})})}),this.onClick(t,function(){ymtApp.gameController.startGame(d.GAME_TYPE.COMMON,e),ymtApp.viewMgr.hideView(u.UI.LEVEL)})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(u.UI.LEVEL)},n([m(cc.Node)],e.prototype,"btnClose",void 0),n([m(l.default)],e.prototype,"levelList",void 0),n([m(cc.Node)],e.prototype,"item",void 0),n([f],e)}(c.default);i.default=g,cc._RF.pop()},{BaseUI:"BaseUI",GameEnums:"GameEnums",GameServerConf:"GameServerConf",List:"List",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig"}],ListItem:[function(t,e,i){"use strict";cc._RF.push(e,"fa771ja9HBNQ4FjBOAK98uP","ListItem");var o,n=__extends,a=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var r,s=cc._decorator,c=s.ccclass,l=s.property,d=s.disallowMultiple,u=s.menu,p=s.executionOrder;(r=o||(o={}))[r.NONE=0]="NONE",r[r.TOGGLE=1]="TOGGLE",r[r.SWITCH=2]="SWITCH";var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=o.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return n(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case o.TOGGLE:this.selectedFlag.active=t;break;case o.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==o.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,i){if(void 0===i&&(i=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=i||t.node,o.component=t.comName,o.handler=e,o}},e.prototype.showAni=function(t,e,i){var o,n=this;switch(t){case 0:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{y:2*n.node.height});break;case 1:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{x:2*n.node.width});break;case 2:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{y:-2*n.node.height});break;case 3:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{x:-2*n.node.width});break;default:o=cc.tween(n.node).to(.3,{scale:.1})}(e||i)&&o.call(function(){if(i){n.list._delSingleItem(n.node);for(var t=n.list.displayData.length-1;t>=0;t--)if(n.list.displayData[t].id==n.listId){n.list.displayData.splice(t,1);break}}e()}),o.start()},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},a([l({type:cc.Sprite})],e.prototype,"icon",void 0),a([l({type:cc.Node})],e.prototype,"title",void 0),a([l({type:cc.Enum(o)})],e.prototype,"selectedMode",void 0),a([l({type:cc.Node,visible:function(){return this.selectedMode>o.NONE}})],e.prototype,"selectedFlag",void 0),a([l({type:cc.SpriteFrame,visible:function(){return this.selectedMode==o.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),a([l({})],e.prototype,"adaptiveSize",void 0),a([c,d(),u("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),p(-5001)],e)}(cc.Component);i.default=h,cc._RF.pop()},{}],List:[function(t,e,i){"use strict";cc._RF.push(e,"979b4UE1VRN/aSaQoDlQIuR","List");var o,n,a,r=__extends,s=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var c,l=cc._decorator,d=l.ccclass,u=l.property,p=l.disallowMultiple,h=l.menu,f=l.executionOrder,m=l.requireComponent,g=t("ListItem");(c=o||(o={}))[c.NODE=1]="NODE",c[c.PREFAB=2]="PREFAB",function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(n||(n={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(a||(a={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=o.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=n.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=a.NONE,e.repeatEventSingle=!1,e.selectedEvent=new cc.Component.EventHandler,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return r(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e;switch(this.selectedMode){case a.SINGLE:if(!this.repeatEventSingle&&t==this._selectedId)return;e=this.getItemByListId(t);var i=void 0;if(this._selectedId>=0?this._lastSelectedId=this._selectedId:this._lastSelectedId=null,this._selectedId=t,e&&((i=e.getComponent(g.default)).selected=!0),this._lastSelectedId>=0&&this._lastSelectedId!=this._selectedId){var o=this.getItemByListId(this._lastSelectedId);o&&(o.getComponent(g.default).selected=!1)}this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],e,t%this._actualNumItems,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems);break;case a.MULT:if(!(e=this.getItemByListId(t)))return;i=e.getComponent(g.default),this._selectedId>=0&&(this._lastSelectedId=this._selectedId),this._selectedId=t;var n=!i.selected;i.selected=n;var r=this.multSelected.indexOf(t);n&&r<0?this.multSelected.push(t):!n&&r>=0&&this.multSelected.splice(r,1),this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],e,t%this._actualNumItems,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems,n)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){if(this.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(this._actualNumItems=this._numItems=t,this._forceUpdate=!0,this._virtual)this._resizeContent(),this.cyclic&&(this._numItems=this._cyclicNum*this._numItems),this._onScrolling(),this.frameByFrameRenderNum||this.slideMode!=n.PAGE||(this.curPageNum=this.nearestListId);else{this.cyclic&&(this._resizeContent(),this._numItems=this._cyclicNum*this._numItems);var e=this.content.getComponent(cc.Layout);if(e&&(e.enabled=!0),this._delRedundantItem(),this.firstListId=0,this.frameByFrameRenderNum>0){for(var i=this.frameByFrameRenderNum>this._numItems?this._numItems:this.frameByFrameRenderNum,o=0;o<i;o++)this._createOrUpdateItem2(o);this.frameByFrameRenderNum<this._numItems&&(this._updateCounter=this.frameByFrameRenderNum,this._updateDone=!1)}else{for(o=0;o<this._numItems;o++)this._createOrUpdateItem2(o);this.displayItemNum=this._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){cc.isValid(this._itemTmp)&&this._itemTmp.destroy(),cc.isValid(this.tmpNode)&&this.tmpNode.destroy(),this._pool&&this._pool.clear()},e.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.on("touch-up",this._onTouchUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on("scroll-began",this._onScrollBegan,this,!0),this.node.on("scroll-ended",this._onScrollEnded,this,!0),this.node.on("scrolling",this._onScrolling,this,!0),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},e.prototype._unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.off("touch-up",this._onTouchUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off("scroll-began",this._onScrollBegan,this,!0),this.node.off("scroll-ended",this._onScrollEnded,this,!0),this.node.off("scrolling",this._onScrolling,this,!0),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},e.prototype._init=function(){if(!this._inited)if(this._scrollView=this.node.getComponent(cc.ScrollView),this.content=this._scrollView.content,this.content){switch(this._layout=this.content.getComponent(cc.Layout),this._align=this._layout.type,this._resizeMode=this._layout.resizeMode,this._startAxis=this._layout.startAxis,this._topGap=this._layout.paddingTop,this._rightGap=this._layout.paddingRight,this._bottomGap=this._layout.paddingBottom,this._leftGap=this._layout.paddingLeft,this._columnGap=this._layout.spacingX,this._lineGap=this._layout.spacingY,this._colLineNum,this._verticalDir=this._layout.verticalDirection,this._horizontalDir=this._layout.horizontalDirection,this.setTemplateItem(cc.instantiate(this.templateType==o.PREFAB?this.tmpPrefab:this.tmpNode)),this._slideMode!=n.ADHERING&&this._slideMode!=n.PAGE||(this._scrollView.inertia=!1,this._scrollView._onMouseWheel=function(){}),this.virtual||(this.lackCenter=!1),this._lastDisplayData=[],this.displayData=[],this._pool=new cc.NodePool,this._forceUpdate=!1,this._updateCounter=0,this._updateDone=!0,this.curPageNum=0,this.cyclic&&(this._scrollView._processAutoScrolling=this._processAutoScrolling.bind(this),this._scrollView._startBounceBackIfNeeded=function(){return!1}),this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}}}this.content.removeAllChildren(),this._inited=!0}else cc.error(this.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=e-1;e=i*i*i*i*i+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),n=this._scrollView.getScrollEndedEventTiming(),a=Math.abs(e-1)<=n;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),a&&(this._scrollView._autoScrolling=!1);var r=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),a),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){this._itemTmp=t,this._resizeMode==cc.Layout.ResizeMode.CHILDREN?this._itemSize=this._layout.cellSize:this._itemSize=cc.size(t.width,t.height);var e=t.getComponent(g.default),i=!1;switch(e||(i=!0),i&&(this.selectedMode=a.NONE),(e=t.getComponent(cc.Widget))&&e.enabled&&(this._needUpdateWidget=!0),this.selectedMode==a.MULT&&(this.multSelected=[]),this._align){case cc.Layout.Type.HORIZONTAL:this._colLineNum=1,this._sizeType=!1;break;case cc.Layout.Type.VERTICAL:this._colLineNum=1,this._sizeType=!0;break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=this.content.width-this._leftGap-this._rightGap;this._colLineNum=Math.floor((o+this._columnGap)/(this._itemSize.width+this._columnGap)),this._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var n=this.content.height-this._topGap-this._bottomGap;this._colLineNum=Math.floor((n+this._lineGap)/(this._itemSize.height+this._lineGap)),this._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t;switch(this._align){case cc.Layout.Type.HORIZONTAL:if(this._customSize){var e=this._getFixedSize(null);t=this._leftGap+e.val+this._itemSize.width*(this._numItems-e.count)+this._columnGap*(this._numItems-1)+this._rightGap}else t=this._leftGap+this._itemSize.width*this._numItems+this._columnGap*(this._numItems-1)+this._rightGap;break;case cc.Layout.Type.VERTICAL:this._customSize?(e=this._getFixedSize(null),t=this._topGap+e.val+this._itemSize.height*(this._numItems-e.count)+this._lineGap*(this._numItems-1)+this._bottomGap):t=this._topGap+this._itemSize.height*this._numItems+this._lineGap*(this._numItems-1)+this._bottomGap;break;case cc.Layout.Type.GRID:switch(this.lackCenter&&(this.lackCenter=!1),this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=Math.ceil(this._numItems/this._colLineNum);t=this._topGap+this._itemSize.height*i+this._lineGap*(i-1)+this._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var o=Math.ceil(this._numItems/this._colLineNum);t=this._leftGap+this._itemSize.width*o+this._columnGap*(o-1)+this._rightGap}}var n=this.content.getComponent(cc.Layout);if(n&&(n.enabled=!1),this._allItemSize=t,this._allItemSizeNoEdge=this._allItemSize-(this._sizeType?this._topGap+this._bottomGap:this._leftGap+this._rightGap),this.cyclic){var a=this._sizeType?this.node.height:this.node.width;this._cyclicPos1=0,a-=this._cyclicPos1,this._cyclicNum=Math.ceil(a/this._allItemSizeNoEdge)+1;var r=this._sizeType?this._lineGap:this._columnGap;this._cyclicPos2=this._cyclicPos1+this._allItemSizeNoEdge+r,this._cyclicAllItemSize=this._allItemSize+this._allItemSizeNoEdge*(this._cyclicNum-1)+r*(this._cyclicNum-1),this._cycilcAllItemSizeNoEdge=this._allItemSizeNoEdge*this._cyclicNum,this._cycilcAllItemSizeNoEdge+=r*(this._cyclicNum-1)}this._lack=!this.cyclic&&this._allItemSize<(this._sizeType?this.node.height:this.node.width);var s=this._lack&&this.lackCenter||!this.lackSlide?.1:0,c=this._lack?(this._sizeType?this.node.height:this.node.width)-s:this.cyclic?this._cyclicAllItemSize:this._allItemSize;c<0&&(c=0),this._sizeType?this.content.height=c:this.content.width=c},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}var n,a,r,s;if(this._calcViewPos(),this._sizeType?(n=this.viewTop,r=this.viewBottom):(a=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,d=this._numItems-1;if(this._customSize)for(var u=!1;l<=d&&!u;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=n&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=n&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0)}}else{var p=this._itemSize.width+this._columnGap,h=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s-this._leftGap)/p,d=(a-this._leftGap)/p;break;case 2:l=(-a-this._rightGap)/p,d=(-s-this._rightGap)/p;break;case 3:l=(-n-this._topGap)/h,d=(-r-this._topGap)/h;break;case 4:l=(r-this._bottomGap)/h,d=(n-this._bottomGap)/h}for(l=Math.floor(l)*this._colLineNum,d=Math.ceil(d)*this._colLineNum,l<0&&(l=0),--d>=this._numItems&&(d=this._numItems-1);l<=d;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,m=this.displayItemNum!=f;if(m&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),m=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||m)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var g=0;g<this.displayItemNum;g++)this._createOrUpdateItem(this.displayData[g]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,i,o,n,a,r,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);a=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(d=this._customSize[t])>0?d:this._itemSize.width}else a=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return this.lackCenter&&(a-=this._leftGap,a+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:a,right:r=a+e,x:a+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),r=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(d=this._customSize[t])>0?d:this._itemSize.width):(r=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),this.lackCenter&&(r+=this._rightGap,r-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:r,left:a=r-e,x:a+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),o=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),i=(d=this._customSize[t])>0?d:this._itemSize.height):(o=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height),this.lackCenter&&(o+=this._topGap,o-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:o,bottom:n=o-i,x:this._itemTmp.x,y:n+this._itemTmp.anchorY*i};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var d;return this._customSize?(l=this._getFixedSize(t),n=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),i=(d=this._customSize[t])>0?d:this._itemSize.height):(n=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height),this.lackCenter&&(n-=this._bottomGap,n+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:o=n+i,bottom:n,x:this._itemTmp.x,y:n+this._itemTmp.anchorY*i}}case cc.Layout.Type.GRID:var u=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(n=(o=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(n=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,c=n+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:t,top:o,bottom:n,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(a=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,s=a+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(a=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:a,right:r,x:s,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.x,y:e.y};return this._sizeType?(i.top=e.y+e.height*(1-e.anchorY),i.bottom=e.y-e.height*e.anchorY):(i.left=e.x-e.width*e.anchorX,i.right=e.x+e.width*(1-e.anchorX)),i},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var o in this._customSize)parseInt(o)<t&&(e+=this._customSize[o],i++);return{val:e,count:i}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){if(this.curScrollIsTouch=!1,null!=this.scrollToListId){var t=this.getItemByListId(this.scrollToListId);this.scrollToListId=null,t&&cc.tween(t).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}this._onScrolling(),this._slideMode!=n.ADHERING||this.adhering?this._slideMode==n.PAGE&&(null!=this._beganPos&&this.curScrollIsTouch?this._pageAdhere():this.adhere()):this.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(this.curScrollIsTouch=!0,t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},e.prototype._onTouchUp=function(){this._scrollPos=null,this._slideMode==n.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode==n.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){this._scrollView.hasNestedViewGroup(t,e)||t.simulate||(this._scrollPos=null,this._slideMode==n.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode==n.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){if(this.cyclic||!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){var t=this._sizeType?this.viewTop:this.viewLeft,e=(this._sizeType?this.node.height:this.node.width)*this.pageDistance;if(Math.abs(this._beganPos-t)>e)switch(this._alignCalcType){case 1:case 4:this._beganPos>t?this.prePage(.5):this.nextPage(.5);break;case 2:case 3:this._beganPos<t?this.prePage(.5):this.nextPage(.5)}else this.elasticTop<=0&&this.elasticRight<=0&&this.elasticBottom<=0&&this.elasticLeft<=0&&this.adhere();this._beganPos=null}},e.prototype.adhere=function(){if(this.checkInited()&&!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){this.adhering=!0,this._calcNearestItem();var t=(this._sizeType?this._topGap:this._leftGap)/(this._sizeType?this.node.height:this.node.width);this.scrollTo(this.nearestListId,.7,t)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==n.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==n.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if(e=i?this._pool.get():cc.instantiate(this._itemTmp),i&&cc.isValid(e)||(e=cc.instantiate(this._itemTmp),i=!1),e._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var o=e.getComponent(cc.Widget);o&&o.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var n=e.getComponent(g.default);e.listItem=n,n&&(n.listId=t.id,n.list=this,n._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t%this._actualNumItems)):((i=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(i),e=i.getComponent(g.default),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>a.NONE){var e=t.node;switch(this.selectedMode){case a.SINGLE:t.selected=this.selectedId==e._listId;break;case a.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},e.prototype.setMultSelected=function(t,e){if(this.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)this.multSelected=t;else{var i=void 0,o=void 0;if(e)for(var n=t.length-1;n>=0;n--)i=t[n],(o=this.multSelected.indexOf(i))<0&&this.multSelected.push(i);else for(n=t.length-1;n>=0;n--)i=t[n],(o=this.multSelected.indexOf(i))>=0&&this.multSelected.splice(o,1)}this._forceUpdate=!0,this._onScrolling()}},e.prototype.getMultSelected=function(){return this.multSelected},e.prototype.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=t[e],n=this.getItemByListId(o);n&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,o%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--){var i=this.content.children[e];if(i._listId==t)return i}},e.prototype._getOutsideItem=function(){for(var t,e=[],i=this.content.childrenCount-1;i>=0;i--)t=this.content.children[i],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]==i._listId){this._lastDisplayData.splice(o,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,i){var o,n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var r=n.getItemByListId(t);if(r){o=r.getComponent(g.default),n._aniDelRuning=!0,n._aniDelCB=e,n._aniDelItem=r,n._aniDelBeforePos=r.position,n._aniDelBeforeScale=r.scale;var s=n.displayData[n.displayData.length-1].id,c=o.selected;o.showAni(i,function(){var i,o,l;if(s<n._numItems-2&&(i=s+1),null!=i){var d=n._calcItemPos(i);n.displayData.push(d),n._virtual?n._createOrUpdateItem(d):n._createOrUpdateItem2(i)}else n._numItems--;if(n.selectedMode==a.SINGLE)c?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==a.MULT&&n.multSelected.length){var u=n.multSelected.indexOf(t);u>=0&&n.multSelected.splice(u,1);for(var p=n.multSelected.length-1;p>=0;p--)(m=n.multSelected[p])>=t&&n.multSelected[p]--}if(n._customSize){n._customSize[t]&&delete n._customSize[t];var h={},f=void 0;for(var m in n._customSize){f=n._customSize[m];var g=parseInt(m);h[g-(g>=t?1:0)]=f}n._customSize=h}for(p=null!=i?i:s;p>=t+1;p--)if(r=n.getItemByListId(p)){var _=n._calcItemPos(p-1);o=cc.tween(r).to(.2333,{position:cc.v2(_.x,_.y)}),p<=t+1&&(l=!0,o.call(function(){n._aniDelRuning=!1,e(t),delete n._aniDelCB})),o.start()}l||(n._aniDelRuning=!1,e(t),n._aniDelCB=null)},!0)}else e(t)},e.prototype.scrollTo=function(t,e,i,o){void 0===e&&(e=.5),void 0===i&&(i=null),void 0===o&&(o=!1);var n=this;if(n.checkInited(!1)){var a,r;null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=n._numItems&&(t=n._numItems-1),!n._virtual&&n._layout&&n._layout.enabled&&n._layout.updateLayout();var s=n.getItemPos(t);if(!s)return!1;switch(n._alignCalcType){case 1:a=s.left,a-=null!=i?n.node.width*i:n._leftGap,s=cc.v2(a,0);break;case 2:a=s.right-n.node.width,a+=null!=i?n.node.width*i:n._rightGap,s=cc.v2(a+n.content.width,0);break;case 3:r=s.top,r+=null!=i?n.node.height*i:n._topGap,s=cc.v2(0,-r);break;case 4:r=s.bottom+n.node.height,r-=null!=i?n.node.height*i:n._bottomGap,s=cc.v2(0,-r+n.content.height)}var c=n.content.getPosition();c=Math.abs(n._sizeType?c.y:c.x);var l=n._sizeType?s.y:s.x;Math.abs((null!=n._scrollPos?n._scrollPos:c)-l)>.5&&(n._scrollView.scrollToOffset(s,e),n._scrollToListId=t,n._scrollToEndTime=(new Date).getTime()/1e3+e,n._scrollToSo=n.scheduleOnce(function(){if(n._adheringBarrier||(n.adhering=n._adheringBarrier=!1),n._scrollPos=n._scrollToListId=n._scrollToEndTime=n._scrollToSo=null,o){var e=n.getItemByListId(t);e&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},e+.1),e<=0&&n._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,i,o,n,a;this.nearestListId=null,this._virtual&&this._calcViewPos(),i=this.viewTop,o=this.viewRight,n=this.viewBottom,a=this.viewLeft;for(var r=!1,s=0;s<this.content.childrenCount&&!r;s+=this._colLineNum)if(t=this._virtual?this.displayData[s]:this._calcExistItemPos(s))switch(e=this._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,this._alignCalcType){case 1:t.right>=a&&(this.nearestListId=t.id,a>e&&(this.nearestListId+=this._colLineNum),r=!0);break;case 2:t.left<=o&&(this.nearestListId=t.id,o<e&&(this.nearestListId+=this._colLineNum),r=!0);break;case 3:t.bottom<=i&&(this.nearestListId=t.id,i<e&&(this.nearestListId+=this._colLineNum),r=!0);break;case 4:t.top>=n&&(this.nearestListId=t.id,n>e&&(this.nearestListId+=this._colLineNum),r=!0)}if((t=this._virtual?this.displayData[this.displayItemNum-1]:this._calcExistItemPos(this._numItems-1))&&t.id==this._numItems-1)switch(e=this._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,this._alignCalcType){case 1:o>e&&(this.nearestListId=t.id);break;case 2:a<e&&(this.nearestListId=t.id);break;case 3:n<e&&(this.nearestListId=t.id);break;case 4:i>e&&(this.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){if(this.checkInited())return this._slideMode!=n.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=this._numItems||this.curPageNum!=t&&(this.curPageNum=t,this.pageChangeEvent&&cc.Component.EventHandler.emitEvents([this.pageChangeEvent],t),this.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){if(this.checkInited()){if(!this._itemTmp)return cc.error("Unset template item!");if(!this.renderEvent)return cc.error("Unset Render-Event!");this._customSize={};var e=cc.instantiate(this._itemTmp);this.content.addChild(e);for(var i=0;i<t;i++)cc.Component.EventHandler.emitEvents([this.renderEvent],e,i),e.height==this._itemSize.height&&e.width==this._itemSize.width||(this._customSize[i]=this._sizeType?e.height:e.width);return Object.keys(this._customSize).length||(this._customSize=null),e.removeFromParent(),e.destroy&&e.destroy(),this._customSize}},s([u({type:cc.Enum(o)})],e.prototype,"templateType",void 0),s([u({type:cc.Node,visible:function(){return this.templateType==o.NODE}})],e.prototype,"tmpNode",void 0),s([u({type:cc.Prefab,visible:function(){return this.templateType==o.PREFAB}})],e.prototype,"tmpPrefab",void 0),s([u()],e.prototype,"_slideMode",void 0),s([u({type:cc.Enum(n)})],e.prototype,"slideMode",null),s([u({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode==n.PAGE}})],e.prototype,"pageDistance",void 0),s([u({type:cc.Component.EventHandler,visible:function(){return this._slideMode==n.PAGE}})],e.prototype,"pageChangeEvent",void 0),s([u()],e.prototype,"_virtual",void 0),s([u({type:cc.Boolean})],e.prototype,"virtual",null),s([u({visible:function(){var t=this.slideMode==n.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),s([u({visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),s([u({visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),s([u({type:cc.Integer})],e.prototype,"_updateRate",void 0),s([u({type:cc.Integer,range:[0,6,1],slide:!0})],e.prototype,"updateRate",null),s([u({type:cc.Integer,range:[0,12,1],slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),s([u({type:cc.Component.EventHandler})],e.prototype,"renderEvent",void 0),s([u({type:cc.Enum(a)})],e.prototype,"selectedMode",void 0),s([u({visible:function(){return this.selectedMode==a.SINGLE}})],e.prototype,"repeatEventSingle",void 0),s([u({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>a.NONE}})],e.prototype,"selectedEvent",void 0),s([u({serializable:!1})],e.prototype,"_numItems",void 0),s([d,p(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),m(cc.ScrollView),f(-5e3)],e)}(cc.Component);i.default=_,cc._RF.pop()},{ListItem:"ListItem"}],LoadSubpackage:[function(t,e,i){"use strict";cc._RF.push(e,"495b2xfsRdKeIvcYFCBDWJN","LoadSubpackage"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("YmtConstant"),n=function(){function t(){this.packageList=[],this.loadedList=[],this.loadTotalCount=0,this.mustLoadedCount=0}return t.init=function(e,i){return null!=this.ins?this.ins:(this.ins=new t,this.ins.on_progress=e,this.ins.on_complete=i,o.default.subpackage.length<=0||o.default.IS_WEB_GAME||o.default.IS_ANDROID||o.default.IS_IOS?(this.ins.on_progress&&this.ins.on_progress(1),this.ins.on_complete&&this.ins.on_complete()):this.ins.sortByPriority(),this.ins)},t.prototype.sortByPriority=function(){for(var t=0,e=o.default.subpackage;t<e.length;t++){var i=e[t];i.priority>=5||++this.loadTotalCount,this.packageList.push(i)}this.packageList.sort(function(t,e){return t.priority-e.priority}),this.loadSubpackage()},t.prototype.loadSubpackage=function(){var t=this,e=this.packageList[0],i=function(t){console.log("["+e.name+"]\u5b50\u5305\u52a0\u8f7d\u5931\u8d25\uff1a"+JSON.stringify(t))};cc.assetManager.loadBundle(e.name,function(o){if(o)return i(o);console.log("["+e.name+"]\u5b50\u5305\u52a0\u8f7d\u6210\u529f"),t.loadedList.push(e.name),e.priority<5&&(++t.mustLoadedCount,t.on_progress&&t.on_progress(Math.min(t.mustLoadedCount/t.loadTotalCount,1)),t.mustLoadedCount>=t.loadTotalCount&&t.on_complete&&t.on_complete()),t.packageList.splice(0,1),t.packageList.length>0&&t.loadSubpackage()})},t.prototype.isLoaded=function(t){return this.loadedList.indexOf(t||"")>-1},t}();i.default=n,cc._RF.pop()},{YmtConstant:"YmtConstant"}],LoadingUI:[function(t,e,i){"use strict";cc._RF.push(e,"97c4fu8o9JHL7Niyr7HXAQN","LoadingUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("GameEnums"),s=t("SDKConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.loadingBar=null,e.sprJar=null,e.sprPaprika=null,e.progress=.2,e}return o(e,t),e.prototype.init=function(){console.log("version :",s.default.getVersion(),s.default.gameId),this.loadingBar.progress=0,this.schedule(this.updateTime,.001);var t=ymtApp.utils.getItem(r.STORAGE.LOGIN_DATA,{first:0,login:0});ymtApp.gameController.dotGameStr(r.DOT_TYPE.SUM_LOGIN,null,0==t.first||t.first==t.login)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.LOAD_PROGERSS,this.onLoadRes,this)},e.prototype.onLoadRes=function(t){this.progress!=this.loadingBar.progress&&(this.lastProg=this.progress+.2),this.progress=.8*t+.2},e.prototype.updateTime=function(){if(this.loadingBar.progress<this.progress){var t=.02;this.loadingBar.progress<this.lastProg&&(t=.04),this.loadingBar.progress+=t}},n([d(cc.Node)],e.prototype,"sprBg",void 0),n([d(cc.ProgressBar)],e.prototype,"loadingBar",void 0),n([d(cc.Node)],e.prototype,"sprJar",void 0),n([d(cc.Node)],e.prototype,"sprPaprika",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseUI:"BaseUI",GameEnums:"GameEnums",SDKConfig:"SDKConfig"}],LocalizeImage:[function(t,e,i){"use strict";cc._RF.push(e,"ca1029ZuEFOvojaNdOETJZ5","LocalizeImage");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=cc._decorator,s=r.ccclass;r.property;var c=r.menu,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){var t=this.getComponent(cc.Sprite),e=t.spriteFrame.name,i="localizeImage/"+a.LocalizeMgr.inst.languageType+"/"+e;t.node.active=!1,cc.resources.load(i,cc.SpriteFrame,function(e,i){t&&t.node&&(t.spriteFrame=i,t.node.active=!0)})},e.prototype.onDestroy=function(){var t=this.getComponent(cc.Sprite);cc.assetManager.releaseAsset(t.spriteFrame)},n([s,c("yomitoo/tools/LocalizeImage")],e)}(cc.Component);i.default=l,cc._RF.pop()},{LocalizeMgr:"LocalizeMgr"}],LocalizeLabel:[function(t,e,i){"use strict";cc._RF.push(e,"9951a4tdEpD85R7m+pHyxW9","LocalizeLabel");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repaceStr="",e}return o(e,t),e.prototype.onLoad=function(){var t=this.getComponent(cc.Label);null==t&&(t=this.getComponent(cc.RichText)),null!=t&&(t.node.active=!1,t&&(""!=this.repaceStr?t.string=a.LocalizeMgr.inst.toLocalize(t.string,[this.repaceStr]):t.string=a.LocalizeMgr.inst.toLocalize(t.string),t.node.active=!0))},n([c(String)],e.prototype,"repaceStr",void 0),n([s,l("yomitoo/tools/LocalizeLabel")],e)}(cc.Component);i.default=d,cc._RF.pop()},{LocalizeMgr:"LocalizeMgr"}],LocalizeMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3314dDlQptLCZk/rSGVotZ7","LocalizeMgr");var o,n,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0}),i.LocalizeMgr=i.LanguageType=i.LanguageData=void 0,i.LanguageData=function(){this._id="",this.key="",this.en_us="",this.id="",this.th="",this.pt_br="",this.es="",this.ar=""},(n=o=i.LanguageType||(i.LanguageType={})).cn="cn",n.hi="hi",n.en_us="en_us",n.id="id",n.th="th",n.vi="vi",n.pt_br="pt_br",n.es="es",n.ar="ar",n.ru="ru";var s=function(){function t(){this.languageType=o.cn,this.m_data=new Array,this.dataMap=new Map}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.m_data},set:function(t){this.m_data=t;for(var e=0;e<this.m_data.length;e++){var i=this.m_data[e];this.dataMap.set(i.key,i)}},enumerable:!1,configurable:!0}),t.prototype.loadDatas=function(t){return a(this,void 0,void 0,function(){var e=this;return r(this,function(){return[2,new Promise(function(i){cc.resources.load(t,function(o,n){o&&(console.log("\u52a0\u8f7d\u5931\u8d25:",t),i(!1)),n instanceof cc.JsonAsset?(e.data=n.json.MutiLanguageConfigs,i(!0)):i(!1)})})]})})},t.prototype.toLocalizeImage=function(e,i){var o=e.node.active,n=e.spriteFrame.name,a="localizeImage/"+t.inst.languageType+"/"+n;cc.assetManager.resources.load(a,function(t,n){e.spriteFrame=new cc.SpriteFrame(n),e.node.active=o,i&&i()})},t.prototype.toLocalize=function(t,e,i){var n=t;if(""==n)return n;if(0==this.hasChinese(n))return n;if(0==this.dataMap.has(t))return console.warn("\u6ca1\u627e\u5230\u5339\u914d\u7684\u7ffb\u8bd1\u6570\u636e,\u8bf7\u68c0\u67e5:",n),n;var a=this.dataMap.get(t);switch(this.languageType){case o.key:n=a.key;break;case o.pt_br:n=a.pt_br;break;case o.es:n=a.es;break;case o.id:n=a.id;break;default:n=a.es,console.warn("\u672a\u5b9e\u73b0\u7684\u8bed\u79cd")}if(e&&e.length>0)for(var r=0;r<e.length;r++){var s=e[r];n=n.replace("{"+r+"}",s)}return i&&i(!0),n},t.prototype.hasChinese=function(t){return/[\u4E00-\u9FA5]+/g.test(t)},t.onChangeLanguageEvent="onChangeLanguageEvent",t}();i.LocalizeMgr=s,cc._RF.pop()},{}],LoginRewardUI:[function(t,e,i){"use strict";cc._RF.push(e,"055dcQaUsFF550M86qp0/Lh","LoginRewardUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnLogin=null,e.labLogin=null,e.btnFC=null,e.labFC=null,e.btnZM=null,e.labZM=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnLogin,this.onClickLogin,this),this.onClick(this.btnFC,this.onClickFC,this),this.onClick(this.btnZM,this.onClickZM,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.FREE_REWARD_CHANGE,this.onFreeRewardChange,this)},e.prototype.open=function(){t.prototype.open.call(this),this.updateView()},e.prototype.updateView=function(){var t=ymtApp.gameController.isFreeCanGet(r.FREE_FUNC_ID.LOGIN);this.btnLogin.interactable=t;var e=ymtApp.gameController.isFreeCanGet(r.FREE_FUNC_ID.FU_CHUANG);this.btnFC.interactable=e;var i,o=ymtApp.gameController.isFreeCanGet(r.FREE_FUNC_ID.ZHUO_MIAN);this.btnZM.interactable=o,i=t||e||o?"\u53bb\u9886\u53d6".toLocalize():"\u5df2\u9886\u53d6".toLocalize(),this.labLogin.getComponent(cc.Label).string=i,this.labFC.getComponent(cc.Label).string=i,this.labZM.getComponent(cc.Label).string=i,this.labLogin.getComponent(cc.LabelOutline).color=t?cc.color(38,148,10,255):cc.color(100,100,100,255),this.labFC.getComponent(cc.LabelOutline).color=e?cc.color(38,148,10,255):cc.color(100,100,100,255),this.labZM.getComponent(cc.LabelOutline).color=o?cc.color(38,148,10,255):cc.color(100,100,100,255)},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(s.UI.LOGIN_REWARD)},e.prototype.onClickLogin=function(){},e.prototype.onClickFC=function(){},e.prototype.onClickZM=function(){},e.prototype.onFreeRewardChange=function(){this.updateView()},n([d(cc.Button)],e.prototype,"btnLogin",void 0),n([d(cc.Node)],e.prototype,"labLogin",void 0),n([d(cc.Button)],e.prototype,"btnFC",void 0),n([d(cc.Node)],e.prototype,"labFC",void 0),n([d(cc.Button)],e.prototype,"btnZM",void 0),n([d(cc.Node)],e.prototype,"labZM",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",MainConfig:"MainConfig"}],LostUI:[function(t,e,i){"use strict";cc._RF.push(e,"eec78lXSGJKt5iMTptSix9P","LostUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("GameEnums"),s=t("MainConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprLost=null,e.sprRole=null,e.btnReplay=null,e.btnBack=null,e.isWait=!1,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnReplay,this.onClickReplay,this),this.onClick(this.btnBack,this.onClickBack,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:r.ITEM_ID.COIN},{itemId:r.ITEM_ID.STRENGTH},{itemId:r.ITEM_ID.STAR,isHideAdd:!0}]),this.closeFunc=this.arg.callback,ymtApp.gameController.addPause(),this.showOpen()},e.prototype.showOpen=function(){cc.Tween.stopAllByTarget(this.sprLost),cc.Tween.stopAllByTarget(this.sprRole),cc.Tween.stopAllByTarget(this.btnReplay),this.sprLost.scale=.5,this.sprRole.scale=0,this.btnReplay.scale=0,cc.tween(this.sprLost).to(.3,{scale:1},cc.easeBackOut()).start(),cc.tween(this.sprRole).delay(.2).to(.3,{scale:1},cc.easeBackOut()).start(),cc.tween(this.btnReplay).delay(.8).to(.3,{scale:1},cc.easeBackOut()).start(),ymtApp.audioMgr.playSound(ymtApp.main.audio.lost)},e.prototype.onClickReplay=function(){ymtApp.gameController.isStrengthEnough()?(this.closeFunc&&this.closeFunc(1),ymtApp.viewMgr.hideView(s.UI.LOST)):ymtApp.viewMgr.showView(s.UI.STRENGTH)},e.prototype.onClickBack=function(){this.closeFunc&&this.closeFunc(2),ymtApp.viewMgr.hideView(s.UI.LOST)},e.prototype.close=function(){t.prototype.close.call(this),ymtApp.gameController.delPause()},n([d(cc.Node)],e.prototype,"sprLost",void 0),n([d(cc.Node)],e.prototype,"sprRole",void 0),n([d(cc.Node)],e.prototype,"btnReplay",void 0),n([d(cc.Node)],e.prototype,"btnBack",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseUI:"BaseUI",GameEnums:"GameEnums",MainConfig:"MainConfig"}],LuckyGiftUI:[function(t,e,i){"use strict";cc._RF.push(e,"cb7eeNM7MpCkYqLuE51k0m2","LuckyGiftUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=t("GameServerConf"),l=t("SDKMgr"),d=t("./XDAD/XDADpublic").default,u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.labTime=null,e.btnClear=null,e.btnClose=null,e.btnGet=null,e.giftTime=0,e.itemList=[],e.posList=[cc.v2(-162,31),cc.v2(0,31),cc.v2(162,31),cc.v2(-87,-127),cc.v2(87,-127)],e.timeCount=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnClear,this.onClickClear,this),this.onClick(this.btnGet,this.onClickGet,this),this.onClick(this.btnClose,this.onClickBack,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.GIFT_CHANGE,this.onGiftChange,this)},e.prototype.open=function(){t.prototype.open.call(this),this.updateView()},e.prototype.updateView=function(){var t=this,e=ymtApp.gameController.getGiftData();this.giftTime=e.time;var i=c.default.I.luckyGiftCfg,o=i.reward||[];0==e.times&&(o=i.firstReward||[]),ymtApp.nodeMgr.addListItemSelf(o.length,this.itemList,this.item,this.content,function(e,i){e.setPosition(t.posList[i]);var n=ymtApp.gameController.getItemIcon(o[i].itemId),a=e.getComponentInChildren(cc.Sprite),r=e.getComponentInChildren(cc.Label);ymtApp.spriteMgr.loadImg(a,n),r.string="x"+(o[i].amount||1)}),this.timeCount=0,this.updateGiftTime()},e.prototype.onClickClear=function(){d.showXDAD(),l.default.showVideo(function(){ymtApp.gameController.clearGiftTime(),ymtApp.gameController.dotGameStr(r.DOT_TYPE.SUM_LUCKY_UNLOCK)})},e.prototype.onClickGet=function(){var t=this;l.default.showVideo(function(){ymtApp.gameController.dotGameStr(r.DOT_TYPE.SUM_LUCKY_FREE);var e=ymtApp.gameController.getGiftRward();ymtApp.viewMgr.showReward(e),t.onClickBack()})},e.prototype.onClickBack=function(){ymtApp.viewMgr.hideView(s.UI.LUCKY_GIFT)},e.prototype.onGiftChange=function(){this.updateView()},e.prototype.updateGiftTime=function(){this.btnClear.active=this.giftTime>0,this.btnGet.active=this.giftTime<=0,this.labTime.string=""+ymtApp.utils.formatTime(this.giftTime,"HH:mm:ss")},e.prototype.updateTime=function(t){this.timeCount+=t,this.timeCount>=1&&this.giftTime>0&&(this.giftTime-=1,this.updateGiftTime(),this.timeCount-=1)},n([h(cc.Node)],e.prototype,"content",void 0),n([h(cc.Node)],e.prototype,"item",void 0),n([h(cc.Label)],e.prototype,"labTime",void 0),n([h(cc.Node)],e.prototype,"btnClear",void 0),n([h(cc.Node)],e.prototype,"btnClose",void 0),n([h(cc.Node)],e.prototype,"btnGet",void 0),n([p],e)}(a.default);i.default=f,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],MZAd:[function(t,e,i){"use strict";cc._RF.push(e,"dcaa9EnfshNDZaaj8gbjMSV","MZAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("GameSys"),a=t("mTimer"),r=t("YmtUtils"),s=t("YmtAdManager"),c=t("ymt_enum"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isSecond=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,console.log("MZAd initad"),t.prototype.initAd.call(this),this.initBanner(),this.initNormalBanner(),this.initVideo(),this.initNativeAd())},e.prototype.initNormalBanner=function(){if(qg.createBannerAd&&!(n.default.adInfo.adunit_banner.length<=0)){var t=Math.min(n.default.screenWidth,n.default.screenHeight);this.bannerAd=qg.createBannerAd({adUnitId:n.default.adInfo.adunit_banner[0],style:{left:(n.default.screenWidth-t)/2,top:n.default.screenHeight-200,width:t,height:200},adIntervals:Math.min(n.default.adInfo.bannerUpdateTime,30)}),this.bannerAd.onError(function(t){console.log("%c[YMT_GAME]normal banner error: "+JSON.stringify(t),"color: red")}.bind(this))}},e.prototype.showNormalBanner=function(){null==this.bannerAd&&this.initNormalBanner(),null!=this.bannerAd&&(this.bannerAd.show(),this.bannerTimer&&this.bannerTimer.stop())},e.prototype.hideNormalBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyNormalBanner=function(){this.bannerAd&&this.bannerAd.destroy&&this.bannerAd.destroy()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;this.hideBanner();var e=this.getLocalNativeData(c.ad_native_type.banner);if(n.default.adInfo.bannerUpdateTime>0&&(null==this.bannerTimer&&(this.bannerTimer=new a.default),this.bannerTimer&&this.bannerTimer.once(function(){t.showBanner()},1e3*n.default.adInfo.bannerUpdateTime)),null==e||void 0===e)this.showNormalBanner();else{var i=cc.instantiate(r.default.getRes("hs_ui/ui_banner",cc.Prefab));this.bannerNode=i.getComponent("hs_ui_banner"),this.bannerNode.show(e,function(){},function(){t.bannerTimer&&t.bannerTimer.clear()}),this.hideNormalBanner()}},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.hideNormalBanner()},e.prototype.initVideo=function(){qg.createRewardedVideoAd&&null!=n.default.adInfo.adunit_video&&(this.destroyVideo(),this.videoAd=qg.createRewardedVideoAd({adUnitId:n.default.adInfo.adunit_video}),this.videoAd.onError(function(t){console.log("%c[YMT_GAME]video error: "+JSON.stringify(t),"color: red"),1004==t.errCode&&this.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}.bind(this)),this.videoAd.onClose(function(t){console.log(t),t&&t.isEnded||void 0===t?(console.log("%c[YMT_GAME]video close succ","color: #33ccff"),this.videocallback&&this.videocallback(!0),this.isSecond=!1):(console.log("%c[YMT_GAME]video closed: "+(this.isSecond?"second":"first"),"color: blue"),n.default.isShenHe||this.isSecond?(this.isSecond=!1,this.videocallback&&this.videocallback(!1)):(this.isSecond=!0,this.showVideo(this.videocallback))),this.videoAd.load&&this.videoAd.load()}.bind(this)),this.videoAd.onLoad(function(t){console.log("%c[YMT_GAME]video onLoad: "+JSON.stringify(t),"color: #33ccff")}),this.videoAd.load&&this.videoAd.load())},e.prototype.showVideo=function(t){var e=this;null==this.videoAd&&this.initVideo(),null!=this.videoAd?(this.videocallback=t,this.videoAd.load&&this.videoAd.load(),setTimeout(function(){e.videoAd.show()},500)):t&&t(!0)},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose(),this.videoAd.destroy&&this.videoAd.destroy()),this.videoAd=null},e.prototype.showInterstitial=function(t,e){return qg.createInterstitialAd&&null!=n.default.adInfo.adunit_intestital?r.default.randomInt(1,100)>n.default.adInfo.showInteNormalRto?e&&e():(this.destroyNormalInter(),this.interAd=qg.createInterstitialAd({adUnitId:n.default.adInfo.adunit_intestital}),this.interAd.onError(function(t){console.log("show inter err"+JSON.stringify(t))}.bind(this)),this.interAd.onClose(function(){console.log("inter closed"),e&&e()}.bind(this)),this.interAd.onLoad(function(e){console.log("inter onLoad",e),this.hideBanner(),t&&t()}.bind(this)),this.interAd.load&&this.interAd.load(),void setTimeout(function(){this.interAd.show(),this.interShowTime=this.get_time()}.bind(this),500)):e&&e()},e.prototype.destroyNormalInter=function(){this.interAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.interAd.destroy&&this.interAd.destroy()),this.interAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(i){var o=n.default.adInfo.adunit_native[t];if(console.log(t,"posId = ",o),void 0===o||null==o||e.is_limit_native_length(t)||!qg.createNativeAd)return i(null);setTimeout(function(){i(null)},1e3);var a=qg.createNativeAd({adUnitId:o});a.onLoad(function e(i){if(console.log("%c[YMT_GAME]native data load:","color: #33ccff"),i&&i.adList){var o=i.adList.pop();o.ad=a,o.type=t,this.add_native_data(o),console.log("%c[YMT_GAME]native data load succ:"+JSON.stringify(o),"color: #33ccff"),a.offLoad(e)}}.bind(e)),a.onError(function t(e){console.log("%c[YMT_GAME]native data error: "+JSON.stringify(e),"color: red"),a.offError(t)}.bind(e)),a.load()})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(c.ad_native_type.banner).then(function(){return t.create_ad(c.ad_native_type.native_icon)}).then(function(){return t.create_ad(c.ad_native_type.inner_interstitial)}).then(function(){return t.create_ad(c.ad_native_type.interstitial)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,i,o){var n=this;this.hideInterstitialNative();var a=this.getLocalNativeData(c.ad_native_type.inner_interstitial);if(null==a||void 0===a)this.showBanner(),o&&o();else{var s=cc.instantiate(r.default.getRes("hs_ui/ui_inner_interstitial",cc.Prefab));this.innerInter=s.getComponent("hs_ui_inner_interstitial"),this.innerInter&&this.innerInter.show(t,a,e,function(){n.hideBanner(),i&&i()},o)}},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e){var i=this;if(this.get_time()-this.interShowTime<=1e3*n.default.adInfo.interTick)return e&&e();setTimeout(function(){i.hideNativeInterstitial();var o=i.getLocalNativeData(c.ad_native_type.interstitial);if(null==o||void 0===o)i.showInterstitial(t,e);else{if(r.default.randomInt(1,100)>n.default.adInfo.showInterRto)return e&&e();var a=cc.instantiate(r.default.getRes("hs_ui/ui_interstitial",cc.Prefab));i.nativeInter=a.getComponent("hs_ui_interstitial"),i.nativeInter&&i.nativeInter.show(o,function(){i.interShowTime=i.get_time(),i.hideBanner(),t&&t()},e)}},n.default.isShenHe||n.default.isShieldArea?0:1e3)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.showNativeIcon=function(t){this.hideNativeIcon();var e=c.ad_native_type.native_icon,i=n.default.adInfo.adunit_native[e];i==n.default.adInfo.adunit_native[c.ad_native_type.inner_interstitial]?e=c.ad_native_type.inner_interstitial:i==n.default.adInfo.adunit_native[c.ad_native_type.banner]&&(e=c.ad_native_type.banner);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return console.log("%c[YMT_GAME]showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e","color: #33ccff");var a=cc.instantiate(r.default.getRes("hs_ui/ui_native_icon",cc.Prefab));this.nativeIcon=a.getComponent("hs_ui_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*r.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.showAddDesktop=function(t){if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node,!0)){var e=cc.instantiate(r.default.getRes("hs_ui/ui_add_icon",cc.Prefab));this.addIconNode=e.getComponent("hs_ui_add_icon"),this.addIconNode&&this.addIconNode.show(t)}},e.prototype.hasAddDesktop=function(t,e,i){qg.hasShortcutInstalled?qg.hasShortcutInstalled({success:function(i){i?e&&e():t&&t()}.bind(this),fail:function(){i&&i()}.bind(this)}):(console.log("\u4e0d\u652f\u6301\u6dfb\u52a0\u684c\u9762"),i&&i())},e.prototype.addDesktop=function(t,e){qg.installShortcut?qg.installShortcut({success:function(){setTimeout(function(){this.hasAddDesktop(function(){e&&e()}.bind(this),function(){t&&t()}.bind(this))}.bind(this),1e3)}.bind(this),fail:function(){e&&e()}.bind(this)}):e&&e()},e}(s.default);i.default=l,cc._RF.pop()},{GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],MainConfig:[function(t,e,i){"use strict";cc._RF.push(e,"18754FJesJJs6GK4O/EDIAS","MainConfig"),Object.defineProperty(i,"__esModule",{value:!0}),i.UI_RES=i.UI=i.Main=void 0;var o,n=t("GameEnums"),a={bgm:"audio/bgm",gameBgm:"audio/gameBgm",click:"audio/click",bank:"audio/bank",clickItem:"audio/clickItem",frozen:"audio/frozen",fresh:"audio/fresh",unlock:"audio/unlock",openBox:"audio/openBox",putItem:"audio/putItem",turntable:"audio/turntable",win:"audio/win",obtain:"audio/obtain",magicStick:"audio/magicStick",combo:"audio/combo",sele:"audio/sele",star:"audio/star",clock:"audio/clock",timeOut:"audio/timeOut",lost:"audio/lost"},r={GameUI:"prefab/view/GameUI",MainUI:"prefab/view/MainUI",WaitUI:"prefab/view/WaitUI",ReadyUI:"prefab/view/ReadyUI",ObtainUI:"prefab/view/ObtainUI",SettingUI:"prefab/view/SettingUI",FailUI:"prefab/view/FailUI",ResultUI:"prefab/view/ResultUI",BoxUI:"prefab/view/BoxUI",LoginRewardUI:"prefab/view/LoginRewardUI",FreePropUI:"prefab/view/FreePropUI",TurntableUI:"prefab/view/TurntableUI",PiggyBankUI:"prefab/view/PiggyBankUI",RewardUI:"prefab/view/RewardUI",DailyTZUI:"prefab/view/DailyTZUI",CoinSupplyUI:"prefab/view/CoinSupplyUI",ChestUI:"prefab/view/ChestUI",SkinUI:"prefab/view/SkinUI",SkinRewardUI:"prefab/view/SkinRewardUI",ChallengeUI:"prefab/view/ChallengeUI",WinUI:"prefab/view/WinUI",RankUI:"prefab/view/RankUI",TransitionUI:"prefab/view/TransitionUI",DailyResultUI:"prefab/view/DailyResultUI",ExitUI:"prefab/view/ExitUI",LevelUI:"prefab/view/LevelUI",StrengthUI:"prefab/view/StrengthUI",PropRewardUI:"prefab/view/PropRewardUI",LuckyGiftUI:"prefab/view/LuckyGiftUI",LostUI:"prefab/view/LostUI",TaskUI:"prefab/view/TaskUI",TakeoutUI:"prefab/view/TakeoutUI",QRCodeUI:"prefab/view/QRCodeUI",FirstTipsUI:"prefab/view/FirstTipsUI",Tips:"prefab/com/Tips",ComCurrency:"prefab/com/ComCurrency",ComScrollSele:"prefab/com/ComScrollSele",ComDialog:"prefab/com/ComDialog",ComOutline:"prefab/com/ComOutline",HomeView:"prefab/view/HomeView",GameView:"prefab/view/GameView",GridRecommendView:"prefab/view/GridRecommendView",VideoRecommendView:"prefab/view/VideoRecommendView",VideoView:"prefab/view/VideoView",BoxView:"prefab/view/BoxView",SignView:"prefab/view/SignView",RedpacketView:"prefab/view/RedPacketView",AdInterstitialView:"prefab/view/AdInterstitialView",MoreGameView:"prefab/view/MoreGameView",BtnRed:"prefab/com/BtnRed",AdBanner:"prefab/com/AdBanner",BtnMore:"prefab/com/BtnMore"};i.Main={json:{sdkData:"config/data"},atlas:{},spine:{spXC:"spine/xc/skeleton"},sprite:{},font:{},audio:a,prefab:r,preload:[{url:a.bgm,type:cc.AudioClip},{url:a.gameBgm,type:cc.AudioClip},{url:a.click,type:cc.AudioClip},{url:r.GameUI,type:cc.Prefab},{url:r.MainUI,type:cc.Prefab},{url:r.WaitUI,type:cc.Prefab},{url:r.ReadyUI,type:cc.Prefab},{url:r.TransitionUI,type:cc.Prefab},{url:r.StrengthUI,type:cc.Prefab},{url:r.ComDialog,type:cc.Prefab},{url:r.ComCurrency,type:cc.Prefab},{url:"sprite/flower/1",type:cc.SpriteFrame,bundleName:n.BUNDLENAME.RES},{url:"sprite/flower/5",type:cc.SpriteFrame,bundleName:n.BUNDLENAME.RES}],preloadLate:[{url:"audio",type:cc.AudioClip,isDir:!0},{url:"sprite/icon",type:cc.SpriteFrame,isDir:!0},{url:"prefab/view",type:cc.Prefab,isDir:!0},{url:"prefab/view",type:cc.Prefab,isDir:!0,bundleName:n.BUNDLENAME.RES}]},(o=i.UI||(i.UI={})).GAME="GAME",o.MAIN="MAIN",o.WAIT="WAIT",o.READY="READY",o.OBTAIN="OBTAIN",o.SETTING="SETTING",o.FAIL="FAIL",o.RESULT="RESULT",o.BOX="BOX",o.LOGIN_REWARD="LOGIN_REWARD",o.TURNTABLE="TURNTABLE",o.PIGGY_BANK="PIGGY_BANK",o.REWARD="REWARD",o.DAILY_TZ="DAILY_TZ",o.COIN_SUPPLY="COIN_SUPPLY",o.CHEST="CHEST",o.SKIN="SKIN",o.SKIN_REWARD="SKIN_REWARD",o.CHALLENGE="CHALLENGE",o.WIN="WIN",o.RANK="RANK",o.TRANSITION="TRANSITION",o.DAILY_RESULT="DAILY_RESULT",o.LEVEL="LEVEL",o.EXIT="EXIT",o.STRENGTH="STRENGTH",o.PROP_REWARD="PROP_REWARD",o.LUCKY_GIFT="LUCKY_GIFT",o.LOST="LOST",o.TASK="TASK",o.TAKEOUT="TAKEOUT",o.QR_CODE="QR_CODE",o.FIRST_TIPS="FIRST_TIPS",o.HOME_VIEW="HOME_VIEW",o.GAME_VIEW="GAME_VIEW",o.GRID_REC_VIEW="GRID_REC_VIEW",o.VIDEO_REC_VIEW="VIDEO_REC_VIEW",o.VIDEO_VIEW="VIDEO_VIEW",o.BOX_VIEW="BOX_VIEW",o.SIGN_VIEW="SIGN_VIEW",o.REDPACKET_VIEW="REDPACKET_VIEW",o.AD_INTERSTITIAL_VIEW="AD_INTERSTITIAL_VIEW",o.MORE_GAME_VIEW="MORE_GAME_VIEW",i.UI_RES={MAIN:{url:r.MainUI,tsName:"MainUI",type:cc.Prefab,viewType:n.VIEW_TYPE.UI},GAME:{url:r.GameUI,tsName:"GameUI",type:cc.Prefab,viewType:n.VIEW_TYPE.UI},WAIT:{url:r.WaitUI,tsName:"WaitUI",type:cc.Prefab,viewType:n.VIEW_TYPE.TIPS},TRANSITION:{url:r.TransitionUI,tsName:"TransitionUI",type:cc.Prefab,viewType:n.VIEW_TYPE.TIPS},READY:{url:r.ReadyUI,tsName:"ReadyUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0},DAILY_TZ:{url:r.DailyTZUI,tsName:"DailyTZUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0},COIN_SUPPLY:{url:r.CoinSupplyUI,tsName:"CoinSupplyUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0},CHEST:{url:r.ChestUI,tsName:"ChestUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0},CHALLENGE:{url:r.ChallengeUI,tsName:"ChallengeUI",type:cc.Prefab,viewType:n.VIEW_TYPE.UI,isDestroy:!0,bundleName:n.BUNDLENAME.RES},TAKEOUT:{url:r.TakeoutUI,tsName:"TakeoutUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},QR_CODE:{url:r.QRCodeUI,tsName:"QRCodeUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},SETTING:{url:r.SettingUI,tsName:"SettingUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},FIRST_TIPS:{url:r.FirstTipsUI,tsName:"FirstTipsUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},RANK:{url:r.RankUI,tsName:"RankUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},TASK:{url:r.TaskUI,tsName:"TaskUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},LOST:{url:r.LostUI,tsName:"LostUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},FAIL:{url:r.FailUI,tsName:"FailUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},OBTAIN:{url:r.ObtainUI,tsName:"ObtainUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},RESULT:{url:r.ResultUI,tsName:"ResultUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},DAILY_RESULT:{url:r.DailyResultUI,tsName:"DailyResultUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},LOGIN_REWARD:{url:r.LoginRewardUI,tsName:"LoginRewardUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},EXIT:{url:r.ExitUI,tsName:"ExitUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},STRENGTH:{url:r.StrengthUI,tsName:"StrengthUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0},PROP_REWARD:{url:r.PropRewardUI,tsName:"PropRewardUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},LUCKY_GIFT:{url:r.LuckyGiftUI,tsName:"LuckyGiftUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},WIN:{url:r.WinUI,tsName:"WinUI",type:cc.Prefab,viewType:n.VIEW_TYPE.UI,isDestroy:!0,bundleName:n.BUNDLENAME.RES},BOX:{url:r.BoxUI,tsName:"BoxUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},PIGGY_BANK:{url:r.PiggyBankUI,tsName:"PiggyBankUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},REWARD:{url:r.RewardUI,tsName:"RewardUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},SKIN:{url:r.SkinUI,tsName:"SkinUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},SKIN_REWARD:{url:r.SkinRewardUI,tsName:"SkinRewardUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},TURNTABLE:{url:r.TurntableUI,tsName:"TurntableUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0,bundleName:n.BUNDLENAME.RES},HOME_VIEW:{url:r.HomeView,tsName:"HomeView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},GAME_VIEW:{url:r.GameView,tsName:"GameView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},GRID_REC_VIEW:{url:r.GridRecommendView,tsName:"GridRecommendView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},VIDEO_REC_VIEW:{url:r.VideoRecommendView,tsName:"VideoRecommendView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},VIDEO_VIEW:{url:r.VideoView,tsName:"VideoView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},BOX_VIEW:{url:r.BoxView,tsName:"BoxView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},SIGN_VIEW:{url:r.SignView,tsName:"SignView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},REDPACKET_VIEW:{url:r.RedpacketView,tsName:"RedpacketView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},AD_INTERSTITIAL_VIEW:{url:r.AdInterstitialView,tsName:"AdInterstitialView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},MORE_GAME_VIEW:{url:r.MoreGameView,tsName:"MoreGameView",type:cc.Prefab,viewType:n.VIEW_TYPE.SDK,bundleName:n.BUNDLENAME.SDK},LEVEL:{url:r.LevelUI,tsName:"LevelUI",type:cc.Prefab,viewType:n.VIEW_TYPE.DIALOG,isDestroy:!0}},cc._RF.pop()},{GameEnums:"GameEnums"}],MainUI:[function(t,e,i){"use strict";cc._RF.push(e,"8f81dQinD5KnYOwSoXi7NoR","MainUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("LocalizeMgr"),c=t("BaseUI"),l=t("GameEnums"),d=t("MainConfig"),u=t("GameServerConf"),p=t("WxMgr"),h=cc._decorator,f=h.ccclass,m=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.layoutCurrency=null,e.btnSetting=null,e.btnPig=null,e.btnQuan=null,e.btnRank=null,e.btnDaily=null,e.btnTask=null,e.btnStar=null,e.progStar=null,e.labProg=null,e.sprLight=null,e.starBox=null,e.starBubble=null,e.starLayout=null,e.starReward=null,e.btnBox=null,e.sprBoxRed=null,e.progBox=null,e.labBox=null,e.btnLogin=null,e.btnGift=null,e.labGift=null,e.btnSkin=null,e.sprBubble=null,e.labBubble=null,e.btnChallenge=null,e.tzLayout=null,e.labChallenge=null,e.labLock=null,e.btnStart=null,e.labLevel=null,e.rewardList=[],e.starRewardList=[],e.isEnd=!1,e.isBubbleAct=!1,e.timeCount=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnSetting,this.onClickSetting,this),this.onClick(this.btnRank,this.onClickRank,this),this.onClick(this.btnDaily,this.onClickDaily,this),this.onClick(this.btnBox,this.onClickBox,this),this.onClick(this.btnLogin,this.onClickLogin,this),this.onClick(this.btnChallenge,this.onClickChallenge,this),this.onClick(this.btnStart,this.onClickStart,this),this.onClick(this.btnGift,this.onClickGift,this),this.onClick(this.btnPig,this.onClickPig,this),this.onClick(this.btnSkin,this.onClickSkin,this),this.onClick(this.btnTask,this.onClickTask,this),this.onClick(this.btnStar,this.onClickStar,this),this.addCurrency()},e.prototype.addCurrency=function(){return a(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,l.ITEM_ID.COIN)];case 1:return t.sent(),[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,l.ITEM_ID.STRENGTH)];case 2:return t.sent(),[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,l.ITEM_ID.STAR,!0)];case 3:return t.sent(),[2]}})})},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.LEVEL_CHANGE,this.updateBox,this),this.eventOn(ymtApp.eventName.UPDATE_REWARD_LEVEL,this.updateBox,this),this.eventOn(ymtApp.eventName.GIFT_CHANGE,this.updateGift,this),this.eventOn(ymtApp.eventName.ITEM_CHANGE,this.onItemChange,this)},e.prototype.open=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_PLAY),this.sprBg.height<this.node.height&&(this.sprBg.scale=this.node.height/this.sprBg.height),this.doBoxAct(!1),this.initView(),ymtApp.audioMgr.playMusic(ymtApp.main.audio.bgm)},e.prototype.onShow=function(){this.updateStar(),ymtApp.remindMgr.doRemind(l.REMIND_NAME.REMIND_SKIN)},e.prototype.doBoxAct=function(t){void 0===t&&(t=!0),cc.Tween.stopAllByTarget(this.btnBox),cc.Tween.stopAllByTarget(this.sprBoxRed),this.btnBox.scale=1,this.sprBoxRed.angle=0,t&&(ymtApp.tweenMgr.doBoxAct(this.btnBox),ymtApp.tweenMgr.doRockAct(this.sprBoxRed))},e.prototype.initView=function(){this.updateBox(),this.updateGift(),this.updateChallenge(),this.updateStar()},e.prototype.updateBox=function(){var t,e=(null===(t=u.default.I.rewardLevelCfg)||void 0===t?void 0:t.interval)||10,i=ymtApp.gameController.getLevelByType(l.GAME_TYPE.COMMON),o=ymtApp.gameController.getRewardLevel(),n=i;i-o>e&&(n=o+e),this.labBox.string=n+"/"+(o+e),this.progBox.progress=n/(o+e),this.sprBoxRed.active=this.progBox.progress>=1,this.doBoxAct(this.progBox.progress>=1),this.labLevel.string=s.LocalizeMgr.inst.toLocalize("\u7b2c{0}\u5173",[String(i+1)]),this.updateChallenge()},e.prototype.updateGift=function(){cc.Tween.stopAllByTarget(this.btnGift),this.btnGift.scale=1,this.updateGiftTime()},e.prototype.onItemChange=function(t){t==l.ITEM_ID.STAR&&this.updateStar()},e.prototype.updateGiftTime=function(){var t=ymtApp.gameController.getGiftData();t.time<=0?this.isEnd||(this.isEnd=!0,this.labGift.string="\u9886\u53d6".toLocalize(),ymtApp.tweenMgr.doBoxAct(this.btnGift)):(this.isEnd=!1,this.labGift.string=""+ymtApp.utils.formatTime(t.time,"HH:mm:ss"))},e.prototype.updateChallenge=function(){var t=u.default.I.commonUnlockLevel||25;ymtApp.gameController.getLevelByType(l.GAME_TYPE.COMMON)<t?(this.labLock.string=s.LocalizeMgr.inst.toLocalize("\u901a\u8fc7\u5173\u5361{0}\u53ef\u89e3\u9501",[String(t)]),this.labChallenge.string="\u672a\u89e3\u9501".toLocalize(),this.tzLayout.y=28):(this.labChallenge.string="\u6311\u6218\u4e00\u4e0b".toLocalize(),this.labLock.string="",this.tzLayout.y=0)},e.prototype.updateStar=function(){var t=this,e=ymtApp.gameController.getRecordInfo(l.RECORD_KEY.STAR_REWARD,0),i=u.default.I.starBoxReward||{},o=ymtApp.gameController.getItemNum(l.ITEM_ID.STAR),n=i.cost||1e3,a=o-e*n;a<0?a=0:a>n&&(a=n),this.starRewardList=(i.com||[{itemId:l.ITEM_ID.COIN,amount:50}]).slice();var r=i.circle||[{itemId:l.ITEM_ID.ELIMINATE,amount:1},{itemId:l.ITEM_ID.REFRESH,amount:1}],s=r[e%r.length];this.starRewardList.push(s),ymtApp.nodeMgr.addListItemSelf(this.starRewardList.length,this.rewardList,this.starReward,this.starLayout,function(e,i){var o=e.getChildByName("icon"),n=e.getChildByName("labNum");ymtApp.spriteMgr.loadImg(o,ymtApp.gameController.getItemIcon(t.starRewardList[i].itemId),null,{height:38,isScale:!0}),n.getComponent(cc.Label).string=""+t.starRewardList[i].amount}),this.labProg.string=a+"/"+n,this.progStar.progress=a/n,cc.Tween.stopAllByTarget(this.starBox),this.starBox.scale=1;var c=ymtApp.gameController.getStarRemind();this.sprLight.active=c>0,c&&ymtApp.tweenMgr.doBreathAct(this.starBox),cc.Tween.stopAllByTarget(this.starBubble),this.starBubble.active=!1,this.starBubble.scale=0,ymtApp.remindMgr.doRemind(l.REMIND_NAME.REMIND_STAR)},e.prototype.showStarBubble=function(){var t=this;this.isBubbleAct||(this.isBubbleAct=!0,this.starBubble.active=!0,cc.Tween.stopAllByTarget(this.starBubble),this.starBubble.scale=0,cc.tween(this.starBubble).to(.3,{scale:1},cc.easeBackOut()).delay(1).to(.3,{scale:0},cc.easeBackIn()).call(function(){t.isBubbleAct=!1,t.starBubble.active=!1}).start())},e.prototype.onClickSetting=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_HOME_ST),ymtApp.viewMgr.showView(d.UI.SETTING)},e.prototype.onClickRank=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_PHB),p.default.loginUserInfo(function(){ymtApp.viewMgr.showView(d.UI.RANK)})},e.prototype.onClickDaily=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_DAILY),ymtApp.viewMgr.showView(d.UI.DAILY_TZ)},e.prototype.onClickBox=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_LEVELCHEST),ymtApp.viewMgr.showView(d.UI.CHEST)},e.prototype.onClickShop=function(){ymtApp.viewMgr.showView(d.UI.SKIN)},e.prototype.onClickLogin=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_LOGINGET),ymtApp.viewMgr.showView(d.UI.LOGIN_REWARD)},e.prototype.onClickChallenge=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_CHALLENGE);var t=u.default.I.commonUnlockLevel||25;ymtApp.gameController.getLevelByType(l.GAME_TYPE.COMMON)<t?ymtApp.viewMgr.showToast(s.LocalizeMgr.inst.toLocalize("\u901a\u8fc7{0}\u5173\u89e3\u9501",[String(t)])):ymtApp.viewMgr.showView(d.UI.CHALLENGE)},e.prototype.onClickStart=function(){ymtApp.gameController.startGame(l.GAME_TYPE.COMMON)},e.prototype.onClickLevel=function(){ymtApp.viewMgr.showView(d.UI.LEVEL)},e.prototype.onClickGift=function(){ymtApp.viewMgr.showView(d.UI.LUCKY_GIFT)},e.prototype.onClickPig=function(){ymtApp.viewMgr.showView(d.UI.PIGGY_BANK)},e.prototype.onClickSkin=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.CLICK_PIFU),ymtApp.viewMgr.showView(d.UI.SKIN)},e.prototype.onClickTask=function(){ymtApp.viewMgr.showView(d.UI.TASK)},e.prototype.onClickStar=function(){if(ymtApp.gameController.dotGameStr(l.DOT_TYPE.CLICK_STAR),this.progStar.progress>=1){var t=ymtApp.gameController.getRecordInfo(l.RECORD_KEY.STAR_REWARD,0);t++,ymtApp.gameController.setRecordInfo(l.RECORD_KEY.STAR_REWARD,t),ymtApp.gameController.addItemList(this.starRewardList,!0),ymtApp.viewMgr.showReward(this.starRewardList),ymtApp.gameController.dotGameStr(l.DOT_TYPE.GET_STAR),this.updateStar()}else this.showStarBubble()},e.prototype.updateTime=function(t){this.timeCount+=t,this.timeCount>=1&&(this.updateGiftTime(),this.timeCount-=1)},e.prototype.close=function(){t.prototype.close.call(this),ymtApp.audioMgr.playMusic(ymtApp.main.audio.gameBgm)},n([m(cc.Node)],e.prototype,"sprBg",void 0),n([m(cc.Node)],e.prototype,"layoutCurrency",void 0),n([m(cc.Node)],e.prototype,"btnSetting",void 0),n([m(cc.Node)],e.prototype,"btnPig",void 0),n([m(cc.Node)],e.prototype,"btnQuan",void 0),n([m(cc.Node)],e.prototype,"btnRank",void 0),n([m(cc.Node)],e.prototype,"btnDaily",void 0),n([m(cc.Node)],e.prototype,"btnTask",void 0),n([m(cc.Node)],e.prototype,"btnStar",void 0),n([m(cc.ProgressBar)],e.prototype,"progStar",void 0),n([m(cc.Label)],e.prototype,"labProg",void 0),n([m(cc.Node)],e.prototype,"sprLight",void 0),n([m(cc.Node)],e.prototype,"starBox",void 0),n([m(cc.Node)],e.prototype,"starBubble",void 0),n([m(cc.Node)],e.prototype,"starLayout",void 0),n([m(cc.Node)],e.prototype,"starReward",void 0),n([m(cc.Node)],e.prototype,"btnBox",void 0),n([m(cc.Node)],e.prototype,"sprBoxRed",void 0),n([m(cc.ProgressBar)],e.prototype,"progBox",void 0),n([m(cc.Label)],e.prototype,"labBox",void 0),n([m(cc.Node)],e.prototype,"btnLogin",void 0),n([m(cc.Node)],e.prototype,"btnGift",void 0),n([m(cc.Label)],e.prototype,"labGift",void 0),n([m(cc.Node)],e.prototype,"btnSkin",void 0),n([m(cc.Node)],e.prototype,"sprBubble",void 0),n([m(cc.Label)],e.prototype,"labBubble",void 0),n([m(cc.Node)],e.prototype,"btnChallenge",void 0),n([m(cc.Node)],e.prototype,"tzLayout",void 0),n([m(cc.Label)],e.prototype,"labChallenge",void 0),n([m(cc.Label)],e.prototype,"labLock",void 0),n([m(cc.Node)],e.prototype,"btnStart",void 0),n([m(cc.Label)],e.prototype,"labLevel",void 0),n([f],e)}(c.default);i.default=g,cc._RF.pop()},{BaseUI:"BaseUI",GameEnums:"GameEnums",GameServerConf:"GameServerConf",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig",WxMgr:"WxMgr"}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"b212d9bpIxOyKPOXUK35Atm","Main");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("GameSys"),c=t("BaseComponent"),l=t("GameEnums"),d=t("MainConfig"),u=t("InitMgr"),p=t("SDKConfig"),h=t("SDKEnum"),f=t("GameServerConf"),m=t("UIMgr"),g=t("WxMgr"),_=cc._decorator,y=_.ccclass,v=_.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameLayer=null,e.uiLayer=null,e.dialogLayer=null,e.sdkLayer=null,e.currencyLayer=null,e.tipsLayer=null,e.maskVideo=null,e.loading=null,e.isInitSdk=!1,e.isLoad=!1,e.isReqFinsh=!1,e.musicIdx=-1,e.isTime=!1,e.count=0,e}return o(e,t),e.prototype.init=function(){u.default.getInstance(),ymtApp.viewMgr.initLayer(this.gameLayer,this.uiLayer,this.dialogLayer,this.sdkLayer,this.currencyLayer,this.tipsLayer,this.maskVideo),this.maskVideo.active=!1,this.loading.active=!0,this.initSDK(),this.preload()},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.GAME_SHOW,this.onGameShow,this),this.eventOn(ymtApp.eventName.GAME_HIDE,this.onGameHide,this)},e.prototype.preload=function(){var t=this;console.time("load");var e=0,i=ymtApp.main.preload.length,o={},n=0,a=function(t){void 0===t&&(t=!1);var a=0;for(var r in o)t&&o[r]>=1&&(o[r]=0),a+=o[r];var s=(e+a)/i;s-n>=.02&&(n=s,ymtApp.eventTarget.emit(ymtApp.eventName.LOAD_PROGERSS,s))};ymtApp.resMgr.loadBundlePre(ymtApp.main.preload,function(){ymtApp.resMgr.preload(ymtApp.main.preload,!1,function(o){if(o)t.preload();else if(e++,a(!0),e==i)return console.timeEnd("load"),t.initJson(),t.isLoad=!0,void t.loadFinish()},function(t,e,i){o[t]=o[t]||0,o[t]=Math.max(o[t],e/i),a()})})},e.prototype.preloadLate=function(){var t=this;ymtApp.resMgr.loadBundlePre(ymtApp.main.preloadLate,function(){ymtApp.resMgr.preload(ymtApp.main.preloadLate,!1,function(e){e&&t.preloadLate()})})},e.prototype.initSDK=function(){var t=this;m.default.loadSDK(this.sdkLayer,function(e){t.isInitSdk=!0,t.loadcfg(e),t.loadFinish()}),m.default.setUIMap(h.PROCESS_TYPE.HOME,d.UI.MAIN),m.default.setUIMap(h.PROCESS_TYPE.GAME,d.UI.GAME),m.default.setViewShow(this.showView.bind(this)),m.default.setViewHide(this.hideView.bind(this))},e.prototype.showView=function(t,e){return ymtApp.viewMgr.showView(e.view),!0},e.prototype.hideView=function(t,e){return ymtApp.viewMgr.hideView(e.view),!0},e.prototype.onGameHide=function(){ymtApp.audioMgr.pauseMusic(),ymtApp.gameController.addPause()},e.prototype.onGameShow=function(){ymtApp.audioMgr.resumeMusic(),ymtApp.gameController.delPause()},e.prototype.loadcfg=function(t){f.default.I.parse(t),this.initData()},e.prototype.initData=function(){var t,e;ymtApp.data.loginData=ymtApp.utils.getItem(l.STORAGE.LOGIN_DATA,{first:0,login:0}),ymtApp.data.level=ymtApp.utils.getItem(l.STORAGE.LEVEL,0),ymtApp.data.lastIds=ymtApp.utils.getItem(l.STORAGE.LAST_IDS,{}),ymtApp.data.rewardLevel=ymtApp.utils.getItem(l.STORAGE.REWARD_LEVEL,0),ymtApp.data.itemData=ymtApp.utils.getItem(l.STORAGE.ITEM_DATA,((t={})[l.ITEM_ID.STRENGTH]=0,t[l.ITEM_ID.STAR]=0,t[l.ITEM_ID.COIN]=0,t[l.ITEM_ID.ELIMINATE]=1,t[l.ITEM_ID.FIRELOCK]=1,t[l.ITEM_ID.FROZEN]=1,t[l.ITEM_ID.REFRESH]=1,t[l.ITEM_ID.WAND]=1,t[l.ITEM_ID.ADD_TIME]=1,t[l.ITEM_ID.ADD_STAR]=1,t)),ymtApp.data.recordData=ymtApp.utils.getItem(l.STORAGE.RECORD_DATA,{}),ymtApp.data.challengeData=ymtApp.utils.getItem(l.STORAGE.CHALLENGE_DATA,{reward:{},cross:0,dates:[]}),ymtApp.data.dailyData=ymtApp.utils.getItem(l.STORAGE.DAILY_DATA,{time:0,status:0}),ymtApp.data.skinData=ymtApp.utils.getItem(l.STORAGE.SKIN_DATA,((e={})[l.SKIN_TYPE.GRILL]={use:1,free:[1]},e[l.SKIN_TYPE.PLATE]={use:1,free:[1]},e)),ymtApp.data.settingData=ymtApp.utils.getItem(l.STORAGE.SETTING_DATA,{music:1,effect:1,vibrate:1,teXiao:1}),ymtApp.data.taskData=ymtApp.utils.getItem(l.STORAGE.TASK_DATA,{}),ymtApp.data.exchangeData=ymtApp.utils.getItem(l.STORAGE.EXCHANGE_DATA,{}),ymtApp.data.freeData=ymtApp.utils.getItem(l.STORAGE.FREE_DATA,{});var i=ymtApp.utils.getItem(l.STORAGE.ROLE_DATA,{});ymtApp.data.roleData=i;var o=f.default.I.luckyGiftCfg||{};ymtApp.data.giftData=ymtApp.utils.getItem(l.STORAGE.GIFT_DATA,{time:o.time||900,times:0}),g.default.setUserRankCloudStorage(ymtApp.gameController.getLevelByType(l.GAME_TYPE.COMMON)),1!=ymtApp.gameController.getRecordInfo(l.RECORD_KEY.UP_ROLE_INFO,0)&&i.name&&""!=i.name&&i.url&&null!=i.url&&g.default.setUserInfo(i.name,i.url);for(var n=f.default.I.userCodes||[],a=ymtApp.gameController.getRecordInfo(l.RECORD_KEY.USE_CODE,{}),r=0;r<n.length;r++)n[r]&&n[r].openId==p.default.openId&&1!=a[n[r].id]&&(a[n[r].id]=1,ymtApp.gameController.addItemList(n[r].rewards));ymtApp.gameController.setRecordInfo(l.RECORD_KEY.USE_CODE,a)},e.prototype.initJson=function(){return a(this,void 0,void 0,function(){return r(this,function(){return this.requestGameJson(),[2]})})},e.prototype.requestGameJson=function(){ymtApp.gameController.loadGameJson(l.GAME_TYPE.COMMON,null,!1),ymtApp.gameController.loadGameJson(l.GAME_TYPE.DAILY,null,!1)},e.prototype.loadFinish=function(){var t=this;if(this.isInitSdk&&this.isLoad){this.preloadLate();var e=!1;0==ymtApp.gameController.getLevelByType(l.GAME_TYPE.COMMON)&&1==f.default.I.enterStartGame&&ymtApp.gameController.checkEnoughStrength(!1)&&(e=!0),m.default.login(e),this.loading.active=!1,this.scheduleOnce(function(){t.loading.destroy(),t.loading=null,s.default.loadGameComplete()}),ymtApp.viewMgr.initCurrency(),ymtApp.gameController.login(),ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_LOADING),this.isTime=!0}},e.prototype.update=function(t){ymtApp.timeMgr.doUpdate(t),this.isTime&&(this.count+=t,this.count>=1&&(ymtApp.gameController.checkNewDay(1),this.count-=1))},n([v(cc.Node)],e.prototype,"gameLayer",void 0),n([v(cc.Node)],e.prototype,"uiLayer",void 0),n([v(cc.Node)],e.prototype,"dialogLayer",void 0),n([v(cc.Node)],e.prototype,"sdkLayer",void 0),n([v(cc.Node)],e.prototype,"currencyLayer",void 0),n([v(cc.Node)],e.prototype,"tipsLayer",void 0),n([v(cc.Node)],e.prototype,"maskVideo",void 0),n([v(cc.Node)],e.prototype,"loading",void 0),n([y],e)}(c.default);i.default=I,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",GameServerConf:"GameServerConf",GameSys:"GameSys",InitMgr:"InitMgr",MainConfig:"MainConfig",SDKConfig:"SDKConfig",SDKEnum:"SDKEnum",UIMgr:"UIMgr",WxMgr:"WxMgr"}],MiApkAd:[function(t,e,i){"use strict";cc._RF.push(e,"f5a72po0yhFxKa147yP0zFm","MiApkAd");var o,n=__extends;Object.defineProperty(i,"__esModule",{value:!0});var a,r=t("AudioUtil"),s=t("GameSys"),c=t("mTimer"),l=t("YmtUtils"),d=t("YmtAdManager"),u=t("ymt_enum");(a=o||(o={}))[a.ERROR=-1]="ERROR",a[a.SUCC=1]="SUCC",a[a.SHOW=2]="SHOW",a[a.CLOSE=3]="CLOSE";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeInterTime=0,e.closeNativeTime=0,e.closeBannerTime=0,e.showLimmitTime=0,e.showVideoTime=0,e}return n(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,(s.default.isShenHe||s.default.isShieldArea)&&(s.default.adInfo.bannerDelay=30,s.default.adInfo.miAdGapLimt=30,this.closeBannerTime=this.closeInterTime=this.get_time()),this.isGameCd=s.default.adInfo.bannerDelay>0,t.prototype.initAd.call(this),this._gameCd(),this.showLimmitTime=1e3*s.default.adInfo.miAdGapLimt,this.initBanner(),this.initNativeAd())},e.prototype._gameCd=function(){var t=this;(new c.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner()},1e3*s.default.adInfo.bannerDelay)},e.prototype.getNativePlatfom=function(){return l.default.callMethod("getNativePlatfom")},e.prototype.showNormalBanner=function(){var t=this;this.hideBanner(),l.default.callMethod("showNormalBanner",null,function(e){e==o.SHOW?console.log("[YMT_GAME]\u666e\u901abanner\u5c55\u793a\u6210\u529f"):e==o.CLOSE?(console.log("[YMT_GAME]\u666e\u901abanner\u5173\u95ed"),t.closeBannerTime=t.get_time()):e==o.ERROR&&console.log("[YMT_GAME]\u666e\u901abanner\u5f02\u5e38\uff0c\u5c55\u793a\u539f\u751f")})},e.prototype.hideNormalBanner=function(){l.default.callMethod("hideNormalBanner")},e.prototype.destroyNormalBanner=function(){this.hideNormalBanner()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;return this.isGameCd?(this.isNeedShowBanner=!0,console.log("%c[YMT_GAME]showBanner \u5e7f\u544aCD\u4e2d","color: #33ccff")):this.get_time()-this.closeBannerTime<this.showLimmitTime?console.log("%c[YMT_GAME]showBanner \u5e7f\u544aCD\u4e2d","color: #33ccff"):(this.hideBanner(),void(this.bannerDelayTimer=c.default.once(function(){if(null==t.bannerTimer&&(t.bannerTimer=new c.default),s.default.adInfo.bannerUpdateTime>0){var e=t;t.bannerTimer.once(function(){console.log("[YMT_GAME]this.bannerTimer.once"),e.showBanner()},1e3*s.default.adInfo.bannerUpdateTime)}var i=t.getLocalNativeData(u.ad_native_type.banner);if(null==i||void 0===i)t.showNormalBanner();else{var o=cc.instantiate(l.default.getRes("hs_ui/ui_banner",cc.Prefab));t.bannerNode=o.getComponent("hs_ui_banner"),t.bannerNode.show(i,function(){},function(){t.closeBannerTime=t.get_time()})}},1e3)))},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.hideNormalBanner()},e.prototype.showVideo=function(t){var e=this;this.get_time()-this.showVideoTime<500||(this.showVideoTime=this.get_time(),l.default.callMethod("showVideo",null,function(i){i==o.ERROR?e.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):i==o.CLOSE?(r.default.setMusicVolume(1),r.default.setSoundVolume(1)):i==o.SHOW&&(r.default.setMusicVolume(0),r.default.setSoundVolume(0)),t&&t(i==o.SUCC)}))},e.prototype.destroyVideo=function(){l.default.callMethod("destroyVideo")},e.prototype.showInterstitial=function(t,e){var i=this;this.hideBanner();var n=l.default.randomInt(1,100)<=s.default.adInfo.showInteNormalRto;l.default.callMethod("showInter",n,function(n){console.log("[YMT_GAME] showInter ret = ",n),n==o.SHOW?t&&t():n==o.CLOSE?(i.closeInterTime=i.get_time(),i.isNeedShowBanner=!0,e&&e()):n==o.ERROR&&(e&&e(),i.isNeedShowBanner=!0)})},e.prototype.destroyNormalInter=function(){l.default.callMethod("destroyInter")},e.prototype.showInterVideo=function(t,e){var i=this;if(this.isGameCd)return e&&e(),console.log("%c[YMT_GAME]showInterVideo \u5e7f\u544aCD\u4e2d","color: #33ccff");if(this.get_time()-this.closeInterTime<this.showLimmitTime)return e&&e();var n=l.default.randomInt(1,100)<=s.default.adInfo.showInteNormalRto;l.default.callMethod("showInterVideo",n,function(n){n==o.SHOW?(i.hideNormalBanner(),t&&t(),r.default.setMusicVolume(0),r.default.setSoundVolume(0)):(n==o.CLOSE&&(i.closeInterTime=i.get_time()),e&&e(),r.default.setMusicVolume(1),r.default.setSoundVolume(1))})},e.prototype.destroyInterVideo=function(){l.default.callMethod("destroyInterVideo")},e.prototype.create_ad=function(t){var e=this;return new Promise(function(i){l.default.callMethod("createNativeAd",t.toString(),function(t){if(console.log("%c[YMT_GAME]native data load succ:"+JSON.stringify(t),"color: #33ccff"),t==o.ERROR);else try{e.add_native_data(t)}catch(i){console.log(i)}}),setTimeout(i,100)})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.native_icon)}).then(function(){return t.create_ad(u.ad_native_type.interstitial)}).then(function(){return t.create_ad(u.ad_native_type.inner_interstitial)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,i,o){var n=this;if(this.isGameCd||s.default.isShieldArea)return o&&o(),console.log("%c[YMT_GAME]showInterstitialNative \u5e7f\u544aCD\u4e2d","color: #33ccff");if(this.get_time()-this.closeBannerTime<this.showLimmitTime)return o&&o();this.hideInterstitialNative();var a=this.getLocalNativeData(u.ad_native_type.inner_interstitial);if(null==a||void 0===a)o&&o();else{this.isNeedShowBanner=!1;var r=cc.instantiate(l.default.getRes("hs_ui/ui_inner_interstitial",cc.Prefab));this.innerInter=r.getComponent("hs_ui_inner_interstitial"),this.innerInter.show(t,a,e,function(){n.hideBanner(),i&&i()},function(){n.closeBannerTime=n.get_time(),o&&o()})}},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,i){var o=this;if(void 0===i&&(i=1),this.get_time()-this.closeInterTime<this.showLimmitTime||this.get_time()-this.interShowTime<=1e3*s.default.adInfo.interTick||this.isGameCd)return e&&e(),console.log("%c[YMT_GAME]showNativeInterstitial \u5e7f\u544aCD\u4e2d","color: #33ccff");this.hideNativeInterstitial(),this.nativeInterTimer||(this.nativeInterTimer=new c.default),this.nativeInterTimer.once(function(){o.isNeedShowBanner=!1;var i=o.getLocalNativeData(u.ad_native_type.interstitial);if(null==i||void 0===i)console.log("[YMT_GAME] \u666e\u901a\u63d2\u5c4f"),o.showInterstitial(t,e);else{if(console.log("[YMT_GAME] \u63d2\u5c4f\u6982\u7387",s.default.adInfo.showInterRto),l.default.randomInt(1,100)>s.default.adInfo.showInterRto)return e&&e();var n=cc.instantiate(l.default.getRes("hs_ui/ui_interstitial",cc.Prefab));o.nativeInter=n.getComponent("hs_ui_interstitial"),console.log("[YMT_GAME] \u63d2\u5c4f\u5c55\u793a",JSON.stringify(i)),o.nativeInter.show(i,function(){o.interShowTime=o.get_time(),o.hideBanner(),t&&t()},function(){o.closeInterTime=o.get_time(),o.isNeedShowBanner=!0,e&&e()})}},s.default.isShenHe||s.default.isShieldArea?0:1e3*i)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.showNativeIcon=function(t){if(this.isGameCd)return console.log("%c[YMT_GAME]showNativeIcon \u5e7f\u544aCD\u4e2d","color: #33ccff");var e=u.ad_native_type.native_icon,i=s.default.adInfo.adunit_native[e];i==s.default.adInfo.adunit_native[u.ad_native_type.inner_interstitial]?e=u.ad_native_type.inner_interstitial:i==s.default.adInfo.adunit_native[u.ad_native_type.banner]&&(e=u.ad_native_type.banner);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return console.log("%c[YMT_GAME]showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e","color: #33ccff");var n=cc.instantiate(l.default.getRes("hs_ui/ui_native_icon",cc.Prefab));this.nativeIcon=n.getComponent("hs_ui_native_icon"),this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*l.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.reportAdClick=function(t){console.log("reportAdClick native_data =",t),t&&void 0!==t&&(console.log("reportAdClick native_data.adId =",t.adId),l.default.callMethod("reportAdClick",t.adId),this.remove_native_data(t))},e.prototype.showFeedAd=function(t,e){if(this.isGameCd)return console.log("%c[YMT_GAME]showFeedAd \u5e7f\u544aCD\u4e2d","color: #33ccff");l.default.callMethod("showFeedAd",null,function(i){i==o.SHOW?t&&t():e&&e()})},e.prototype.destroyFeedAd=function(){l.default.callMethod("destroyFeedAd")},e.prototype.openUrl=function(t){l.default.callMethod("openUrl",t)},e.prototype.showPrivacy=function(t){l.default.callMethod("showPrivacy",t)},e}(d.default);i.default=p,cc._RF.pop()},{AudioUtil:"AudioUtil",GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],MoreGameView:[function(t,e,i){"use strict";cc._RF.push(e,"f7326Htn1hAuats9uw6pDUa","MoreGameView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("MainConfig"),s=t("SDKMgr"),c=t("ExportItem"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.btnClose=null,e.exportItem=null,e.itemList=[],e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.init()},e.prototype.init=function(){this.onClick(this.btnClose,this.onBack,this)},e.prototype.open=function(){var e=this;t.prototype.open.call(this),this.btnClose.active=!1,s.default.delayShowCloseBtn(function(){e.btnClose.active=!0},this),this.showInterstitial(),this.freshList()},e.prototype.freshList=function(){for(var t=this,e=s.default.getExportData(),i=0;i<e.length;i++){var o=this.itemList[i];o||((o=cc.instantiate(this.exportItem)).parent=this.content,this.itemList[i]=o),o.getComponent(c.default).setData(e[i])}var n=function(i){a.itemList[i].active=i<e.length,i<e.length&&(a.itemList[i].getComponent(cc.Button).interactable=!1,a.itemList[i].scale=0,cc.tween(a.itemList[i]).delay(.06*i).to(.2,{scale:1},cc.easeBackOut()).call(function(){t.itemList[i].getComponent(cc.Button).interactable=!0}).start())},a=this;for(i=0;i<this.itemList.length;i++)n(i)},e.prototype.onBack=function(){this.doCloseAct(function(){ymtApp.viewMgr.hideView(r.UI.MORE_GAME_VIEW)})},n([u(cc.Node)],e.prototype,"content",void 0),n([u(cc.Node)],e.prototype,"btnClose",void 0),n([u(cc.Prefab)],e.prototype,"exportItem",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{BaseDialog:"BaseDialog",ExportItem:"ExportItem",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],NodeMgr:[function(t,e,i){"use strict";cc._RF.push(e,"5dd9dDPQTJJWaljTqGQsYqD","NodeMgr");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("Singleton"),s=t("ComCurrency"),c=t("ComScrollSele"),l=t("GameEnums"),d=t("SDKMgr"),u=t("WxMgr"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.addCurrencyNode=function(t,e,i){return void 0===i&&(i=!1),n(this,void 0,void 0,function(){var o,n;return a(this,function(a){switch(a.label){case 0:return e!=l.ITEM_ID.STRENGTH||d.default.isPowerOpen()?[4,ymtApp.resMgr.getPrefab(ymtApp.main.prefab.ComCurrency)]:[2];case 1:return o=a.sent(),(n=cc.instantiate(o)).parent=t,n.getComponent(s.default).setData(e,i),[2,n]}})})},e.prototype.addScrollWheel=function(t,e){return n(this,void 0,void 0,function(){var i,o;return a(this,function(n){switch(n.label){case 0:return[4,ymtApp.resMgr.getPrefab(ymtApp.main.prefab.ComScrollSele,l.BUNDLENAME.RES)];case 1:return i=n.sent(),(o=cc.instantiate(i)).parent=t,o.getComponent(c.default).setData(e),[2,o]}})})},e.prototype.addTouch=function(t,e){t.on(cc.Node.EventType.TOUCH_START,e.touchStart,e.target),t.on(cc.Node.EventType.TOUCH_MOVE,e.touchMove,e.target),t.on(cc.Node.EventType.TOUCH_END,e.touchEnd,e.target),t.on(cc.Node.EventType.TOUCH_CANCEL,e.touchCancel,e.target)},e.prototype.removeTouch=function(t,e){cc.isValid(t)&&(t.off(cc.Node.EventType.TOUCH_START,e.touchStart,e.target),t.off(cc.Node.EventType.TOUCH_MOVE,e.touchMove,e.target),t.off(cc.Node.EventType.TOUCH_END,e.touchEnd,e.target),t.off(cc.Node.EventType.TOUCH_CANCEL,e.touchCancel,e.target))},e.prototype.setLabStr=function(t,e,i){if(ymtApp.cons.isDebug()&&t){var o=t.getChildByName("testLabel");i=i||{},o||((o=new cc.Node("testLabel")).setParent(t),o.setPosition(i.pos||cc.v2()),o.color=i.color||cc.Color.BLACK);var n=o.getComponent(cc.Label);return n||((n=o.addComponent(cc.Label)).fontSize=i.fontSize||45,n.lineHeight=i.fontSize||45,n.enableBold=!0),(null==e||""==e)&&(e=t.uuid.split(".")[1]),n.string=""+e,n}},e.prototype.showCombo=function(t,e,i,o,r,s){return void 0===o&&(o=cc.v2()),void 0===r&&(r=.55),void 0===s&&(s=!1),n(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.getNodeInNodePos=function(t,e){var i=t.convertToWorldSpaceAR(cc.v2());return e.convertToNodeSpaceAR(i)},e.prototype.addListItem=function(t,e,i,o,n){this.addListItemFunc(t,e,o,function(){return cc.instantiate(i)},n)},e.prototype.addListItemSelf=function(t,e,i,o,n){this.addListItemFunc(t,e,o,function(t){return 0==t?i:cc.instantiate(i)},n)},e.prototype.addListItemFunc=function(t,e,i,o,n){if(null!=i){e=e||[];for(var a=0;a<t;a++){var r=e[a],s=!1;r||((r=o?o(a):new cc.Node("item"+a)).parent=i,e[a]=r,s=!0),r.active=!0,n&&n(r,a,s)}for(a=t;a<e.length;a++)e[a].active=!1}},e.prototype.adaptNode2MinScreen=function(t,e){if(void 0===e&&(e=!1),t){var i=1,o=cc.winSize.width/cc.winSize.height,n=!1;o>t.width/t.height?i=cc.winSize.height/t.height:(i=cc.winSize.width/t.width,n=!0),t.scale=i,e&&(n?t.height=t.width/o:t.width=t.height*o)}else console.warn("adaptNode2MinScreen node == null")},e.prototype.getAdaptMinScale=function(t,e,i){void 0===e&&(e=750),void 0===i&&(i=1334);var o=1;return t&&(e=t.width,i=t.height),e&&i&&(o=cc.winSize.width/cc.winSize.height>e/i?cc.winSize.height/i:cc.winSize.width/e),o},e.prototype.adaptSize2Winsize=function(t){t?(t.height=cc.winSize.height,t.width=cc.winSize.width):console.warn("adaptSize2Winsize 15 node == null")},e.prototype.onClick=function(t,e,i,o){if(null!=t){var n=null;t instanceof cc.Button?n=t.node:t instanceof cc.Node&&(n=t);var a=!0;this.offClick(t),null!=n&&(n.targetOff(this),n.on("click",function(t){if(a){a=!1;var n=null==(o=o||{}).clickTime?.1:o.clickTime;t.scheduleOnce(function(){a=!0},n),o&&o.noSound||(o&&o.effect?ymtApp.audioMgr.playSound(o.effect,!1,l.SETTING_TYPE.EFFECT,1,o.boundle||l.BUNDLENAME.RESOURCES):ymtApp.audioMgr.playSound(ymtApp.main.audio.click)),o&&o.noVibrate||u.default.vibrate(),e.call(i)}},this))}else console.error("\u6ca1\u6709\u8fd9\u8282\u70b9")},e.prototype.offClick=function(t,e,i){var o=null;t instanceof cc.Button?o=t.node:t instanceof cc.Node&&(o=t),o.off(ymtApp.eventName.CLICK,e,i)},e}(r.default);i.default=p,cc._RF.pop()},{ComCurrency:"ComCurrency",ComScrollSele:"ComScrollSele",GameEnums:"GameEnums",SDKMgr:"SDKMgr",Singleton:"Singleton",WxMgr:"WxMgr"}],ObtainUI:[function(t,e,i){"use strict";cc._RF.push(e,"8e8ecHoVMZPcJ7AM0WCk7/G","ObtainUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("BaseDialog"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=t("SDKMgr"),u=t("./XDAD/XDADpublic").default,p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.labNum=null,e.labDesc=null,e.btnCost=null,e.labCost=null,e.btnObtain=null,e.btnClose=null,e.labTitle=null,e.inGame=!1,e.coinCost=100,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnCost,this.onClickCost,this),this.onClick(this.btnObtain,this.onClickObtain,this),this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.ITEM_CHANGE,this.onItemChange,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:s.ITEM_ID.COIN}]),this.itemId=this.arg.itemId||s.ITEM_ID.WAND,this.succFunc=this.arg.succFunc,this.inGame=this.arg.inGame;var e=ymtApp.cons.getItemCfg(this.itemId);if(this.itemId==s.ITEM_ID.FROZEN){var i=l.default.I.gamefrozenTime||30;this.labDesc.string=a.LocalizeMgr.inst.toLocalize("\u65f6\u95f4\u6682\u505c{0}\u79d2",[String(i)])}else this.labDesc.string=e.desc.toLocalize()||"";ymtApp.spriteMgr.loadImg(this.sprIcon,ymtApp.gameController.getItemIcon(this.itemId),null,{height:135,isScale:!0}),this.labTitle.string=e.name.toLocalize(),this.coinCost=100;for(var o=l.default.I.shopList||[],n=0;n<o.length;n++)if(o[n].reward&&o[n].reward.itemId==this.itemId){this.coinCost=o[n].cost||100;break}this.labCost.string=""+this.coinCost,this.inGame&&ymtApp.gameController.getItemNum(this.itemId)},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(c.UI.OBTAIN)},e.prototype.onClickCost=function(){if(this.coinCost){if(ymtApp.gameController.getItemNum(s.ITEM_ID.COIN)<this.coinCost)return void ymtApp.viewMgr.showToast("\u91d1\u5e01\u4e0d\u8db3".toLocalize());ymtApp.gameController.addItem(s.ITEM_ID.COIN,-this.coinCost),this.succFunc&&this.succFunc(2),ymtApp.audioMgr.playSound(ymtApp.main.audio.obtain),this.onClickClose()}},e.prototype.onClickObtain=function(){var t=this;u.showXDAD(),d.default.showVideo(function(){t.succFunc&&t.succFunc(1),ymtApp.audioMgr.playSound(ymtApp.main.audio.obtain),t.onClickClose()})},e.prototype.onClickUse=function(){this.succFunc&&this.succFunc(0),this.onClickClose()},e.prototype.onItemChange=function(t){this.itemId==t&&this.inGame&&ymtApp.gameController.getItemNum(this.itemId)},n([f(cc.Node)],e.prototype,"sprIcon",void 0),n([f(cc.Label)],e.prototype,"labNum",void 0),n([f(cc.Label)],e.prototype,"labDesc",void 0),n([f(cc.Node)],e.prototype,"btnCost",void 0),n([f(cc.Label)],e.prototype,"labCost",void 0),n([f(cc.Node)],e.prototype,"btnObtain",void 0),n([f(cc.Node)],e.prototype,"btnClose",void 0),n([f(cc.Label)],e.prototype,"labTitle",void 0),n([h],e)}(r.default);i.default=m,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],OppoAd:[function(t,e,i){"use strict";cc._RF.push(e,"a64bfV4haVPs4ylnk6qJLd6","OppoAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("GameSys"),a=t("YmtLog"),r=t("mTimer"),s=t("YmtUserData"),c=t("YmtUtils"),l=t("YmtAdManager"),d=t("ymt_enum"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.customBanner=null,e.customInter=null,e.customeInterMask=null,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this.getDeviceId(),this.getGameInfo(),n.default.isShenHe&&(n.default.adInfo.bannerDelay=60),this.isGameCd=n.default.adInfo.bannerDelay>0,t.prototype.initAd.call(this),this._gameCd(),this.initBanner(),this.initNormalBanner(),this.initVideo(),this.initNativeAd(),this.initGamePortal(),r.default.loop(function(){n.default.uploadOcpx("gtime")},6e4))},e.prototype.getDeviceId=function(){qg.getDeviceId&&qg.getDeviceId({success:function(t){console.log("handling success: "+t),t&&t.deviceId&&s.default.deviceid!=t.deviceId&&(s.default.deviceid=t.deviceId),console.log(s.default.deviceid)},fail:function(t,e){console.log("handling fail, code = "+e)}})},e.prototype.getGameInfo=function(){qg.getManifestInfo&&qg.getManifestInfo({success:function(t){var e=JSON.parse(t.manifest);n.default.gameInfo={package:e.package,name:e.name,versionName:e.versionName,versionCode:e.versionCode},a.default.i(JSON.stringify(n.default.gameInfo))}})},e.prototype._gameCd=function(){var t=this;(new r.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner()},1e3*n.default.adInfo.bannerDelay)},e.prototype.initNormalBanner=function(){this.platformVersion()<1051||n.default.adInfo.adunit_banner.length<=0||(this.destroyNormalBanner(),this.bannerAd=qg.createBannerAd({adUnitId:n.default.adInfo.adunit_banner[0],style:{}}),this.bannerAd.onError(function(t){console.log("[YMT_GAME]normal banner error: ",JSON.stringify(t))}))},e.prototype.showNormalBanner=function(){var t=this;null==this.bannerAd&&this.initNormalBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){console.log("%c[YMT_GAME]normal banner show success","color: #33ccff"),t.bannerTimer&&t.bannerTimer.stop()})},e.prototype.hideNormalBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyNormalBanner=function(){this.bannerAd&&this.bannerAd.destroy()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(t){var e=this;if(void 0===t&&(t=null),this.isGameCd)return this.isNeedShowBanner=!0,console.log("%c[YMT_GAME]showBanner \u5e7f\u544aCD\u4e2d","color: #33ccff");if(0!=n.default.canShowBanner)if(this.hideBanner(),n.default.adInfo.bannerUpdateTime>0&&(null==this.bannerTimer&&(this.bannerTimer=new r.default),this.bannerTimer&&this.bannerTimer.once(function(){e.showBanner(t)},1e3*n.default.adInfo.bannerUpdateTime)),n.default.isShenHe||n.default.isShieldArea||n.default.adInfo.showCustomBanner)this.showCustomBanner(t);else{var i=this.getLocalNativeData(d.ad_native_type.banner);if(null==i||void 0===i)this.showCustomBanner(t);else{var o=cc.instantiate(c.default.getRes("hs_ui/ui_banner",cc.Prefab));this.bannerNode=o.getComponent("hs_ui_banner"),this.bannerNode.show(i,function(){},function(){e.bannerTimer&&e.bannerTimer.clear()}),this.hideNormalBanner()}}},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.destroyCustomBanner(),this.hideNormalBanner()},e.prototype.initVideo=function(){var t=this;null!=n.default.adInfo.adunit_video&&(this.destroyVideo(),this.videoAd=qg.createRewardedVideoAd({posId:n.default.adInfo.adunit_video}),this.videoAd.onLoad(function(){console.log("%c[YMT_GAME]video load succ","color: #33ccff")}),this.videoAd.onError(function(t){console.log("%c[YMT_GAME]video error: "+JSON.stringify(t),"color: red")}),this.videoAd.onClose(function(e){e&&e.isEnded?t.videocallback&&t.videocallback(!0):t.videocallback&&t.videocallback(!1),t.videoAd.load()}),this.videoAd.load())},e.prototype.showVideo=function(t){var e=this;null==this.videoAd&&this.initVideo(),null!=this.videoAd?(this.videocallback=t,this.videoAd.show().then(function(){}).catch(function(){e.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})):t&&t(!0)},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(i){var o=n.default.adInfo.adunit_native[t];if(console.log(t,"posId = ",o),""==o||void 0===o||null==o||e.is_limit_native_length(t)||e.platformVersion()<1051)return i(null);if(n.default.isShenHe||n.default.isShieldArea||n.default.adInfo.showCustomBanner&&t==d.ad_native_type.banner||n.default.adInfo.showCustomInner&&t==d.ad_native_type.inner_interstitial)return i(null);var a=qg.createNativeAd({posId:o});a.onLoad(function i(o){if(console.log("%c[YMT_GAME]native data load:","color: #33ccff"),o&&o.adList){var n=o.adList.pop();n.ad=a,n.type=t,e.add_native_data(n),console.log("%c[YMT_GAME]native data load succ:"+JSON.stringify(n),"color: #33ccff"),a.offLoad(i)}}),a.onError(function t(e){console.log("%c[YMT_GAME]native data error: "+JSON.stringify(e),"color: red"),a.offError(t)}),a.load(),setTimeout(i,500)})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(d.ad_native_type.banner).then(function(){return t.create_ad(d.ad_native_type.native_icon)}).then(function(){return t.create_ad(d.ad_native_type.inner_interstitial)}).then(function(){return t.create_ad(d.ad_native_type.interstitial)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,i,o){var a=this;if(0!=n.default.canShowInter){if(this.isGameCd)return o&&o(),console.log("%c[YMT_GAME]\u5e7f\u544aCD\u4e2d","color: #33ccff");this.hideInterstitialNative();var r=this.getLocalNativeData(d.ad_native_type.inner_interstitial);if(null==r||void 0===r)o&&o();else{this.isNeedShowBanner=!1;var s=cc.instantiate(c.default.getRes("hs_ui/ui_inner_interstitial",cc.Prefab));this.innerInter=s.getComponent("hs_ui_inner_interstitial"),this.innerInter&&this.innerInter.show(t,r,e,function(){a.hideBanner(),i&&i()},o)}}},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,i){var o=this;if(void 0===i&&(i=1),this.get_time()-this.interShowTime<=1e3*n.default.adInfo.interTick||c.default.randomInt(1,100)>n.default.adInfo.showInterRto||n.default.isShenHe||n.default.isShieldArea||!n.default.adInfo.cpzs)return e&&e();this.nativeInterTimer=r.default.once(function(){o.hideNativeInterstitial(),o.hideBanner();var i=n.default.adInfo.adunit_custom_inter;if(null==i||void 0===i||""==i){var a=o.getLocalNativeData(d.ad_native_type.interstitial);if(null==a||void 0===a)e&&e();else{var r=cc.instantiate(c.default.getRes("hs_ui/ui_interstitial",cc.Prefab));o.nativeInter=r.getComponent("hs_ui_interstitial"),o.nativeInter&&o.nativeInter.show(a,function(){o.interShowTime=o.get_time(),o.hideBanner(),t&&t()},e)}}else o.showCustomInter(t,e)},n.default.isShenHe||n.default.isShieldArea?0:1e3*i)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyCustomInter()},e.prototype.showNativeIcon=function(t){if(this.isGameCd)return console.log("%c[YMT_GAME]showNativeIcon \u5e7f\u544aCD\u4e2d","color: #33ccff");var e=d.ad_native_type.native_icon,i=n.default.adInfo.adunit_native[e];i==n.default.adInfo.adunit_native[d.ad_native_type.inner_interstitial]?e=d.ad_native_type.inner_interstitial:i==n.default.adInfo.adunit_native[d.ad_native_type.banner]&&(e=d.ad_native_type.banner);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return console.log("%c[YMT_GAME]showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e","color: #33ccff");var a=cc.instantiate(c.default.getRes("hs_ui/ui_native_icon",cc.Prefab));this.nativeIcon=a.getComponent("hs_ui_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*c.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.initGamePortal=function(){var t=this;this.supportGameBox()&&n.default.adInfo.adunit_portal&&qg.createGamePortalAd&&(this.destroyGamePortal(),this.portalAd=qg.createGamePortalAd({adUnitId:n.default.adInfo.adunit_portal}),this.portalAd.onLoad(function(){console.log("%c[YMT_GAME]game portal ad load succ","color: #33ccff")}),this.portalAd.onClose(function(){t._game_portal_hide&&t._game_portal_hide()}),this.portalAd.onError(function(t){console.log("%c[YMT_GAME]game portal ad error: "+JSON.stringify(t),"color: red")}))},e.prototype.showGamePortal=function(t,e,i){var o=this;return void 0===i&&(i=!0),this.supportGameBox()?(this.portalAd||this.initGamePortal(),this.portalAd?(this._game_portal_hide=e,void this.portalAd.load().then(function(){o.portalAd.show().then(function(){console.log("show success"),o.hideBanner(),t&&t()}).catch(function(t){console.log("showGamePortal show error:",t),e&&e(),i&&o.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})}).catch(function(t){console.log("showGamePortal load error:",t),e&&e(),i&&o.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})):(e&&e(),void(i&&this.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")))):e&&e()},e.prototype.destroyGamePortal=function(){this.portalAd&&(this.portalAd.destroy(),this.portalAd=null)},e.prototype.initGameBanner=function(){qg.getSystemInfoSync().platformVersion>=1076&&n.default.adInfo.adunit_game_banner&&qg.createGameBannerAd&&(this.destroyGameBanner(),this.gameBannerAd=qg.createGameBannerAd({adUnitId:n.default.adInfo.adunit_game_banner}),this.gameBannerAd.onLoad(function(){console.log("\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.gameBannerAd.onError(function(t){console.log(t)}))},e.prototype.showGameBanner=function(){this.gameBannerAd||this.initGameBanner(),this.gameBannerAd&&this.gameBannerAd.show().then(function(){console.log("show success")}).catch(function(t){console.log("show fail with:"+t.errCode+","+t.errMsg)})},e.prototype.hideGameBanner=function(){this.gameBannerAd&&this.gameBannerAd.hide()},e.prototype.destroyGameBanner=function(){this.gameBannerAd&&(this.gameBannerAd.destroy(),this.gameBannerAd=null)},e.prototype.showAddDesktop=function(t,e){if(cc.winSize.width>=cc.winSize.height)this.addDesktop(e,t);else if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node)){var i=cc.instantiate(c.default.getRes("hs_ui/ui_add_icon",cc.Prefab));this.addIconNode=i.getComponent("hs_ui_add_icon"),this.addIconNode&&this.addIconNode.show(t,e)}},e.prototype.hasAddDesktop=function(t,e,i){this.platformVersion()>=1044&&qg.hasShortcutInstalled?qg.hasShortcutInstalled({success:function(i){console.log("%c[YMT_GAME] hasShortcutInstalled "+(i?"has add":"can add"),"color: #33ccff"),0==i?t&&t():e&&e()},fail:function(t){n.default.Ad().createToast("\u64cd\u4f5c\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~~"),console.log("[YMT_GAME] hasShortcutInstalled error: "+JSON.stringify(t)),i&&i()},complete:function(){}}):i&&i()},e.prototype.addDesktop=function(t,e){var i=this;this.platformVersion()>=1040&&qg.installShortcut?qg.installShortcut({success:function(){setTimeout(function(){i.hasAddDesktop(function(){e&&e()},function(){t&&t()})},1e3)},fail:function(t){n.default.Ad().createToast("\u64cd\u4f5c\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~~"),console.log("[YMT_GAME] installShortcut error: "+JSON.stringify(t)),e&&e()}}):e&&e()},e.prototype.login=function(t,e){this.platformVersion()>=1040&&qg.login&&qg.login({success:function(e){t&&t(e)},fail:function(t){e&&e(t)}})},e.prototype.reportAdClick=function(e){t.prototype.reportAdClick.call(this,e),n.default.uploadOcpx("gads")},e.prototype.openGameAd=function(){var t=this;!n.default.isShenHe&&!n.default.isShieldArea&&n.default.adInfo.showBanner>0&&r.default.once(function(){t.clickNative()},1e3*n.default.adInfo.showBanner)},e.prototype.showCustomBanner=function(t){var e=this,i=n.default.adInfo.adunit_custom_banner;if(null==i||void 0===i||""==i||0==i.length||!qg.createCustomAd)return this.showNormalBanner();var o={};null!=t&&(o.top=t*n.default.scale);var r=qg.getSystemInfoSync(),s=r.screenWidth,c=r.screenHeight-o.top;if(a.default.i("screenHeight - top = ",c),c<318?(i=i[0],o={}):(i=i[1]||n.default.adInfo.adunit_custom_inter,o.width=.6*s),a.default.i("showCustomBanner = ",i),null==i||void 0===i||""==i)return this.showNormalBanner();this.destroyCustomBanner(),this.customBanner=qg.createCustomAd({adUnitId:i,style:o}),this.customBanner.show().then(function(){a.default.i("showCustomBanner succ ")}).catch(function(t){a.default.e("custom banner show error: "+JSON.stringify(t)),e.destroyCustomBanner(),e.showNormalBanner()}),this.customBanner.onHide(function t(){e.customBanner.offHide(t),e.destroyCustomBanner()})},e.prototype.destroyCustomBanner=function(){this.customBanner&&this.customBanner.destroy(),this.customBanner=null},e.prototype.showCustomInter=function(t,e){var i=this,o=n.default.adInfo.adunit_custom_inter;if(null==o||void 0===o||""==o||!qg.createCustomAd)return e&&e();this.destroyCustomInter();var r=qg.getSystemInfoSync(),s=r.screenWidth,c=r.screenHeight;a.default.i(s,c);var l=.9*Math.min(s,720);this.customInter=qg.createCustomAd({adUnitId:o,style:{top:(c-.8*l)/2,left:(s-l)/2,width:l}}),this.customInter.show().then(function(){cc.resources.load("hs_ui/hs_ui_inter_mask",cc.Prefab,function(t,e){t||(i.customeInterMask=cc.instantiate(e),i.customeInterMask.zIndex=cc.macro.MAX_ZINDEX,i.customeInterMask.parent=cc.director.getScene())}),i.hideBanner(),t&&t()}),this.customInter.onHide(function t(){a.default.i("custom inter hide "),e&&e(),i.customInter.offHide(t),i.destroyCustomInter()}),this.customInter.onError(function t(o){return console.log("[YMT_GAME] custom inter error: "+JSON.stringify(o)),i.customInter.offError(t),i.destroyCustomInter(),e&&e()})},e.prototype.destroyCustomInter=function(){this.customInter&&this.customInter.destroy(),this.customInter=null,this.customeInterMask&&this.customeInterMask.destroy(),this.customeInterMask=null},e}(l.default);i.default=u,cc._RF.pop()},{GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtLog:"YmtLog",YmtUserData:"YmtUserData",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],PiggyBankUI:[function(t,e,i){"use strict";cc._RF.push(e,"8336ey89rNAepWdO4D2wWKY","PiggyBankUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("LocalizeMgr"),c=t("BaseDialog"),l=t("ComCurrency"),d=t("GameEnums"),u=t("MainConfig"),p=t("GameServerConf"),h=t("SDKMgr"),f=t("./XDAD/XDADpublic").default,m=cc._decorator,g=m.ccclass,_=m.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutCurrency=null,e.btnClose=null,e.progCoin=null,e.sprPig=null,e.labCur=null,e.btnGet=null,e.curCoin=0,e}return o(e,t),e.prototype.init=function(){return a(this,void 0,Promise,function(){return r(this,function(){return this.onClick(this.btnClose,this.onClickClose,this),this.onClick(this.btnGet,this.onClickObtain,this),this.addCurrency(),[2]})})},e.prototype.addCurrency=function(){return a(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return t=this,[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,d.ITEM_ID.COIN)];case 1:return t.coinCurrency=e.sent(),[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,d.ITEM_ID.STRENGTH)];case 2:return e.sent(),[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,d.ITEM_ID.STAR,!0)];case 3:return e.sent(),[2]}})})},e.prototype.open=function(){t.prototype.open.call(this),this.updateView()},e.prototype.updateView=function(){this.curCoin=ymtApp.gameController.getRecordInfo(d.RECORD_KEY.PIG_GOLD,0);var t=(p.default.I.piggyBankCfg||{add:20,coin:300,max:600}).max||600;this.labCur.string=""+this.curCoin,this.progCoin.progress=this.curCoin/t},e.prototype.doCoinAct=function(){var t=this,e=ymtApp.nodeMgr.getNodeInNodePos(this.sprPig,this.root),i=this.coinCurrency.getComponent(l.default).getIconWPos(),o=this.root.convertToNodeSpaceAR(i);ymtApp.tweenMgr.doCoinAct({start:e,end:o,parent:this.root},function(e){9==e&&ymtApp.gameController.addItem(d.ITEM_ID.COIN,0),t.coinCurrency.getComponent(l.default).doIconAct()})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(u.UI.PIGGY_BANK)},e.prototype.onClickObtain=function(){var t=this,e=p.default.I.piggyBankCfg||{add:20,coin:300,max:600};this.curCoin<(e.coin||300)?ymtApp.viewMgr.showToast(s.LocalizeMgr.inst.toLocalize("\u91d1\u5e01\u4e0d\u8db3{0},\u901a\u5173\u5173\u5361\u83b7\u5f97\u91d1\u5e01",[String(e.coin||300)])):(f.showXDAD(),ymtApp.gameController.dotGameStr("sum_saving"),h.default.showVideo(function(){ymtApp.gameController.getPiggyBankCoin(),ymtApp.gameController.dotGameStr("sum_saving_suc"),t.updateView(),t.doCoinAct()}))},n([_(cc.Node)],e.prototype,"layoutCurrency",void 0),n([_(cc.Node)],e.prototype,"btnClose",void 0),n([_(cc.ProgressBar)],e.prototype,"progCoin",void 0),n([_(cc.Node)],e.prototype,"sprPig",void 0),n([_(cc.Label)],e.prototype,"labCur",void 0),n([_(cc.Node)],e.prototype,"btnGet",void 0),n([g],e)}(c.default);i.default=y,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseDialog:"BaseDialog",ComCurrency:"ComCurrency",GameEnums:"GameEnums",GameServerConf:"GameServerConf",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],PlatformAdManager:[function(t,e,i){"use strict";cc._RF.push(e,"e6ae2PXUJpMBLioVTB7cJyr","PlatformAdManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.PlatformAdManager=void 0;var o=t("GameSys"),n=t("LocalizeMgr"),a=function(){function t(){this.showInsertAdCount=0}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.showBanner=function(t,e){void 0===t&&(t=!1),void 0===e&&(e="\u666e\u901aBanner"),console.warn("[YMT_GAME]showBanner"),o.default.Ad().showBanner()},t.prototype.destroyBanner=function(){o.default.Ad().hideBanner()},t.prototype.hideBanner=function(){console.warn("[YMT_GAME]hideBanner"),o.default.Ad().hideBanner()},t.prototype.showNativeAd=function(){},t.prototype.destroyNativeAd=function(){},t.prototype.showNativeOrInsertAd=function(t,e,i){void 0===t&&(t="browse"),void 0===e&&(e="normal"),void 0===i&&(i=!1),console.warn("[YMT_GAME]showNativeOrInsertAd"),o.default.Ad().showNativeInterstitial(function(){},function(){},1,t,e,i)},t.prototype.destroyNativeIconAd=function(){},t.prototype.sendEvent=function(){},t.prototype.share=function(){},t.prototype.showRewardedVideo=function(t,e,i,a){var r=this;void 0===e&&(e="\u666e\u901a\u89c6\u9891"),void 0===i&&(i="\u83b7\u53d6\u5956\u52b1\u6210\u529f"),void 0===a&&(a=!0),console.warn("[YMT_GAME]showRewardedVideo"),o.default.Ad().showVideo(function(e){e?t&&t(!0):(console.log("\u89c2\u770b\u89c6\u9891\u5931\u8d25================"),r.showToast(n.LocalizeMgr.inst.toLocalize("\u672a\u89c2\u770b\u5b8c\u5e7f\u544a\u65e0\u6cd5\u83b7\u53d6\u5956\u52b1")),t&&t(!1))},e)},t.prototype.showToast=function(){},t}();i.PlatformAdManager=a,cc._RF.pop()},{GameSys:"GameSys",LocalizeMgr:"LocalizeMgr"}],PoolMgr:[function(t,e,i){"use strict";cc._RF.push(e,"578aewbvu5Igosu9UPRI/ch","PoolMgr");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gamePool={},e.prefabCaches={},e}return o(e,t),e.prototype.initPool=function(t,e,i){return n(this,void 0,void 0,function(){var o,n;return a(this,function(a){switch(a.label){case 0:return this.gamePool[t]?[2]:(this.gamePool[t]=new cc.NodePool,i?(this.prefabCaches[t]=i,[3,3]):[3,1]);case 1:return e?(o=this.prefabCaches,n=t,[4,ymtApp.resMgr.getPrefab(e)]):[3,3];case 2:o[n]=a.sent(),a.label=3;case 3:return[2]}})})},e.prototype.get=function(t,e,i){return null==this.gamePool[t]&&this.initPool(t),this.gamePool[t].size()>0?this.gamePool[t].get():this.prefabCaches[t]?cc.instantiate(this.prefabCaches[t]):e?(e instanceof cc.Prefab&&(this.prefabCaches[t]=e),cc.instantiate(e)):i&&i()},e.prototype.put=function(t,e){null==this.gamePool[t]&&this.initPool(t),this.gamePool[t].put(e)},e}(t("Singleton").default);i.default=r,cc._RF.pop()},{Singleton:"Singleton"}],PropRewardUI:[function(t,e,i){"use strict";cc._RF.push(e,"7de41suh1VBz6kmORiXnveO","PropRewardUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootLayout=null,e.topLayout=null,e.botLayout=null,e.rewardItem=null,e.btnSure=null,e.itemList=[],e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnSure,this.onClickSure,this)},e.prototype.open=function(){t.prototype.open.call(this),this.rewards=this.arg||[],ymtApp.audioMgr.playSound(ymtApp.main.audio.openBox);var e=1,i=this.rewards.length;2==i?e=.8:i>2&&(e=.7),this.rootLayout.scale=e,this.botLayout.active=i>3;for(var o=0;o<this.rewards.length;o++){var n=this.itemList[o];n||(n=cc.instantiate(this.rewardItem)),o<3?n.setParent(this.topLayout):n.setParent(this.botLayout),n.y=0;var a=this.rewards[o].itemId,s=ymtApp.gameController.getItemIcon(a);a==r.ITEM_ID.COIN&&(s+="_big");var c=n.getComponentInChildren(cc.Sprite),l=n.getComponentInChildren(cc.Label);ymtApp.spriteMgr.loadImg(c,s,null,{height:150,width:150,isAdaptMax:!0,isScale:!0}),l.string="x"+(this.rewards[o].amount||1)}},e.prototype.onClickSure=function(){ymtApp.gameController.updateItemList(this.rewards),ymtApp.viewMgr.hideView(s.UI.PROP_REWARD),ymtApp.audioMgr.playSound(ymtApp.main.audio.obtain)},n([d(cc.Node)],e.prototype,"rootLayout",void 0),n([d(cc.Node)],e.prototype,"topLayout",void 0),n([d(cc.Node)],e.prototype,"botLayout",void 0),n([d(cc.Node)],e.prototype,"rewardItem",void 0),n([d(cc.Node)],e.prototype,"btnSure",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",MainConfig:"MainConfig"}],QRCodeUI:[function(t,e,i){"use strict";cc._RF.push(e,"8ba71xCmr9GbLFlR9vxXEDc","QRCodeUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseDialog"),c=t("MainConfig"),l=t("GameServerConf"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprQRCode=null,e.sprQRCodeFrame=null,e}return o(e,t),e.prototype.init=function(){},e.prototype.addCurrency=function(){return a(this,void 0,void 0,function(){return r(this,function(){return[2]})})},e.prototype.open=function(){t.prototype.open.call(this),this.addDialogBg({title:"",size:cc.size(650,780),pos:cc.v2(0,-20),closeCb:this.onClickClose.bind(this)}),this.initView()},e.prototype.initView=function(){var t=this,e=l.default.I.wxQRCodeUrl||"";-1!=e.indexOf("http")?ymtApp.resMgr.loadRemote(e,function(e,i){t.sprQRCode.spriteFrame=e?t.sprQRCodeFrame:new cc.SpriteFrame(i)}):this.sprQRCode.spriteFrame=this.sprQRCodeFrame},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(c.UI.QR_CODE)},n([p(cc.Sprite)],e.prototype,"sprQRCode",void 0),n([p(cc.SpriteFrame)],e.prototype,"sprQRCodeFrame",void 0),n([u],e)}(s.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",GameServerConf:"GameServerConf",MainConfig:"MainConfig"}],RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"b2032MW40pH5azjY6uBZ8dB","RankItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprRank=null,e.sprRankSF=[],e.sprHeadBg=null,e.sprHead=null,e.labNo=null,e.labRank=null,e.labName=null,e.labLevel=null,e.sprDefault=null,e}return o(e,t),e.prototype.setData=function(t){var e=this;this.sprRank.node.active=!1,this.labNo&&(this.labNo.active=t.ranking<=0),t.ranking<=0?(this.labRank.string="",this.sprHeadBg.active=!0,this.sprRank.node.active=!1):t.ranking<=3&&this.sprRankSF[t.ranking-1]?(this.sprHeadBg.active=!1,this.sprRank.node.active=!0,this.sprRank.spriteFrame=this.sprRankSF[t.ranking-1]):(this.labRank.string=""+t.ranking,this.sprHeadBg.active=!0,this.sprRank.node.active=!1),this.labLevel.string=""+t.val;var i=t.headimgurl,o=t.nickname||"\u6e38\u5ba2"+123456*t.ranking%1e5;this.labName.string=""+ymtApp.utils.cutStr(o),t.headimgurl&&""!=t.headimgurl&&(this.sprHead.spriteFrame=this.sprDefault,ymtApp.resMgr.loadRemoteWithSuffix(i,{ext:".jpg"},function(t,i){e.sprHead.spriteFrame=new cc.SpriteFrame(i)}))},n([c(cc.Sprite)],e.prototype,"sprRank",void 0),n([c(cc.SpriteFrame)],e.prototype,"sprRankSF",void 0),n([c(cc.Node)],e.prototype,"sprHeadBg",void 0),n([c(cc.Sprite)],e.prototype,"sprHead",void 0),n([c(cc.Node)],e.prototype,"labNo",void 0),n([c(cc.Label)],e.prototype,"labRank",void 0),n([c(cc.Label)],e.prototype,"labName",void 0),n([c(cc.Label)],e.prototype,"labLevel",void 0),n([c(cc.SpriteFrame)],e.prototype,"sprDefault",void 0),n([s],e)}(a.default);i.default=l,cc._RF.pop()},{BaseComponent:"BaseComponent"}],RankUI:[function(t,e,i){"use strict";cc._RF.push(e,"562e2sFV+5ALJuFmVd3nxFt","RankUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("List"),s=t("RankItem"),c=t("GameEnums"),l=t("MainConfig"),d=t("SDKConfig"),u=t("WxMgr"),p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.toggleWord=null,e.toggleFriend=null,e.nodeWord=null,e.rankList=null,e.mineItem=null,e.wxSubContextView=null,e.curType=c.RANK_TYPE.WORD,e.curList=[],e.times=0,e.delayTime=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnBack,this.onClickBack,this)},e.prototype.open=function(){t.prototype.open.call(this),this.delayTime=.2,this.times=0,this.initView()},e.prototype.initView=function(){var t=this;this.nodeWord.active=this.curType!=c.RANK_TYPE.FRIEND,this.curType==c.RANK_TYPE.FRIEND?(this.scheduleOnce(function(){t.wxSubContextView.active=!0,t.wxSubContextView.getComponent(cc.SubContextView).reset(),u.default.postMessage({key:"rank",value:d.default.openId}),0==t.times&&t.scheduleOnce(function(){u.default.postMessage({key:"rank",value:d.default.openId})},.1),t.times++},this.delayTime),this.delayTime=0):(this.wxSubContextView.active=!1,this.curList=ymtApp.gameController.getRankList(this.curType),this.curList&&0!=this.curList.length?(this.rankList.numItems=this.curList.length,this.updateMine()):(ymtApp.viewMgr.addWait("reqRank"),u.default.getRankList(c.RANK_TYPE.WORD,function(){ymtApp.viewMgr.delWait("reqRank"),t.curList=ymtApp.gameController.getRankList(t.curType),t.curList&&0!=t.curList.length||(t.curList=[{ranking:1,openid:d.default.openId,nickname:ymtApp.data.roleData.name||"\u6211".toLocalize(),headimgurl:ymtApp.data.roleData.url,val:ymtApp.data.level}]),t.rankList.numItems=t.curList.length,t.updateMine()})))},e.prototype.updateMine=function(){for(var t=ymtApp.gameController.getLevelByType(c.GAME_TYPE.COMMON),e=-1,i=0;i<this.curList.length;i++)if(this.curList[i].openid==d.default.openId){e=i+1,t=this.curList[i].val;break}var o=ymtApp.gameController.getRoleInfo();this.mineItem.setData({nickname:o.name||"\u6211".toLocalize(),headimgurl:o.url,ranking:e,val:t})},e.prototype.onListRander=function(t,e){t.getComponent(s.default).setData(this.curList[e])},e.prototype.onSeleRank=function(t){this.curType!=t&&(ymtApp.audioMgr.playSound(ymtApp.main.audio.click),this.curType=t,this.initView())},e.prototype.onToggleFriend=function(){this.onSeleRank(c.RANK_TYPE.FRIEND)},e.prototype.onToggleWord=function(){this.onSeleRank(c.RANK_TYPE.WORD)},e.prototype.onClickBack=function(){ymtApp.viewMgr.hideView(l.UI.RANK)},n([f(cc.Button)],e.prototype,"btnBack",void 0),n([f(cc.Toggle)],e.prototype,"toggleWord",void 0),n([f(cc.Toggle)],e.prototype,"toggleFriend",void 0),n([f(cc.Node)],e.prototype,"nodeWord",void 0),n([f(r.default)],e.prototype,"rankList",void 0),n([f(s.default)],e.prototype,"mineItem",void 0),n([f(cc.Node)],e.prototype,"wxSubContextView",void 0),n([h],e)}(a.default);i.default=m,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",List:"List",MainConfig:"MainConfig",RankItem:"RankItem",SDKConfig:"SDKConfig",WxMgr:"WxMgr"}],ReadyBtn:[function(t,e,i){"use strict";cc._RF.push(e,"17e06mVV8hJBpNvypiJYsoq","ReadyBtn");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("BaseComponent"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.sprProg=null,e.sprNum=null,e.labNum=null,e.sprAdd=null,e.sprSele=null,e.sprVideo=null,e.labName=null,e.itemStatus=0,e.isGame=!1,e.countTime=0,e.totalTime=1,e.gameType=s.GAME_TYPE.COMMON,e.curLevel=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.node,this.onClickSele,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.ITEM_CHANGE,this.onItemChange,this),this.eventOn(ymtApp.eventName.ITEM_USE,this.onItemUse,this)},e.prototype.setData=function(t,e,i,o,n){void 0===n&&(n=!1),this.itemId=t,this.isGame=n,this.countTime=0,this.totalTime=1,this.gameType=e.gameType||s.GAME_TYPE.COMMON,this.curLevel=e.level||0,this.clickCb=i,this.canClick=o,this.sprProg.node.active=!1,this.itemStatus=0,this.updateView(),this.updateIcon()},e.prototype.updateView=function(){var t=ymtApp.gameController.getItemNum(this.itemId);this.labNum.string=""+t,cc.Tween.stopAllByTarget(this.sprAdd),this.sprAdd.scale=1;var e=ymtApp.gameController.isPropUnlock(this.itemId);this.labName.node.y=this.isGame?-40:-75,e?this.isGame?(this.sprAdd.active=!1,this.sprSele.active=!1,this.sprNum.active=t>0,this.sprVideo.active=0==t&&0==l.default.I.useItemType,this.sprAdd.active=0==t&&0!=l.default.I.useItemType):(this.updateStatus(),this.sprVideo.active=!1,this.sprAdd.active=0==this.itemStatus,this.sprNum.active=1==this.itemStatus,this.sprSele.active=2==this.itemStatus):(this.sprAdd.active=!1,this.sprSele.active=!1,this.sprNum.active=!1)},e.prototype.updateIcon=function(){var t="sprite/icon/icon_lock";if(ymtApp.gameController.isPropUnlock(this.itemId)){var e=ymtApp.cons.getItemCfg(this.itemId);t="sprite/icon/"+e.icon,this.labName.string=String(e.name).toLocalize()}else{var i=l.default.I.propUnlockCfg[this.itemId]||0;this.labName.string=a.LocalizeMgr.inst.toLocalize("\u7b2c{0}\u5173\u89e3\u9501",[String(i)])}ymtApp.spriteMgr.loadImg(this.sprIcon,t,null,{width:95,height:95,isAdaptMin:!0,isScale:!1}),ymtApp.spriteMgr.loadImg(this.sprProg,t,null,{width:95,height:95,isAdaptMin:!0,isScale:!1})},e.prototype.updateStatus=function(){0==this.itemStatus&&ymtApp.gameController.getItemNum(this.itemId)>0&&(this.itemStatus=1)},e.prototype.showTips=function(t){cc.Tween.stopAllByTarget(this.sprIcon),this.sprIcon.scale=1,t&&cc.tween(this.sprIcon).to(.5,{scale:1.15}).to(.5,{scale:.9}).union().repeatForever().start()},e.prototype.getStatus=function(){return this.itemStatus},e.prototype.getItemId=function(){return this.itemId},e.prototype.showIcon=function(){var t=ymtApp.gameController.getItemIcon(this.itemId);ymtApp.spriteMgr.loadImg(this.sprIcon,t)},e.prototype.isLock=function(){return!ymtApp.gameController.isPropUnlock(this.itemId)},e.prototype.onClickSele=function(){var t=this;if(this.isLock()){var e=l.default.I.propUnlockCfg[this.itemId]||0;ymtApp.viewMgr.showToast(a.LocalizeMgr.inst.toLocalize("\u7b2c{0}\u5173\u65f6\u89e3\u9501",[String(e)]))}else if(!this.canClick||this.canClick()){var i=!1;this.isGame?i=ymtApp.gameController.getItemNum(this.itemId)<=0:(1==this.itemStatus?(this.itemStatus=2,this.updateView()):2==this.itemStatus?(this.itemStatus=1,this.updateView()):ymtApp.viewMgr.showView(c.UI.OBTAIN,{itemId:this.itemId,succFunc:function(e){t.gameType==s.GAME_TYPE.COMMON&&e>0&&ymtApp.gameController.dotUseItem(t.itemId,t.curLevel+1),ymtApp.gameController.addItem(t.itemId,1),t.itemStatus=2,t.updateView(),ymtApp.gameController.setUseItem(t.itemId,2==t.itemStatus)}}),ymtApp.gameController.setUseItem(this.itemId,2==this.itemStatus)),this.clickCb&&this.clickCb(i)}},e.prototype.onItemChange=function(t){this.itemId==t&&this.updateView()},e.prototype.onItemUse=function(t){this.itemId==t&&this.isGame&&(this.totalTime=.5,t==s.ITEM_ID.FROZEN&&(this.totalTime=l.default.I.gamefrozenTime||30),this.countTime=this.totalTime,this.sprProg.node.active=!0,this.sprProg.fillRange=1)},e.prototype.updateTime=function(t){ymtApp.gameController.isPaused()||this.countTime>0&&(this.countTime-=t,this.countTime<=0&&(this.sprProg.node.active=!1,ymtApp.eventTarget.emit(ymtApp.eventName.ITEM_TIMEOUT,this.itemId)),this.sprProg.fillRange=this.countTime/this.totalTime)},n([p(cc.Node)],e.prototype,"sprIcon",void 0),n([p(cc.Sprite)],e.prototype,"sprProg",void 0),n([p(cc.Node)],e.prototype,"sprNum",void 0),n([p(cc.Label)],e.prototype,"labNum",void 0),n([p(cc.Node)],e.prototype,"sprAdd",void 0),n([p(cc.Node)],e.prototype,"sprSele",void 0),n([p(cc.Node)],e.prototype,"sprVideo",void 0),n([p(cc.Label)],e.prototype,"labName",void 0),n([u],e)}(r.default);i.default=h,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",GameServerConf:"GameServerConf",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig"}],ReadyUI:[function(t,e,i){"use strict";cc._RF.push(e,"25637yEBKNA54Uf9jJbWAgH","ReadyUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("BaseDialog"),s=t("ReadyBtn"),c=t("GameEnums"),l=t("MainConfig"),d=t("SDKMgr"),u=t("UIMgr"),p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.btnStart=null,e.btnGift=null,e.tips=null,e.mask=null,e.labTips=null,e.sprFinger=null,e.comReadyBtn=null,e.gameType=c.GAME_TYPE.COMMON,e.enterLevel=0,e.guideIdx=0,e.itemList=[],e.winItemList=[],e.propItemList=[],e.isGame=!1,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnStart,this.onClickStart,this),this.onClick(this.btnGift,this.onClickGift,this)},e.prototype.open=function(){var e=this;this.openCallback=function(){e.checkGuide()},t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:c.ITEM_ID.COIN},{itemId:c.ITEM_ID.STRENGTH},{itemId:c.ITEM_ID.STAR,isHideAdd:!0}]),this.arg=this.arg||{},this.source=this.arg.source||"UNKNOWN",this.isGame=this.arg.isGame,this.gameType=this.arg.gameType||c.GAME_TYPE.COMMON,this.enterLevel=this.arg.level,null==this.enterLevel&&(this.enterLevel=ymtApp.gameController.getLevelByType(this.gameType));var i="\u5f00\u59cb\u6e38\u620f".toLocalize();this.gameType==c.GAME_TYPE.COMMON&&(i=a.LocalizeMgr.inst.toLocalize("\u7b2c{0}\u5173",[String(this.enterLevel+1)]),ymtApp.gameController.checkPropUnlock(this.enterLevel+1)),this.addDialogBg({title:i,size:cc.size(650,622),pos:cc.v2(0,52),closeCb:this.onClickClose.bind(this)}),this.tips.active=!1,ymtApp.gameController.initUseItem(),this.updateItemList(),ymtApp.gameController.preloadRes(this.gameType,this.enterLevel)},e.prototype.checkGuide=function(){for(var t=0;t<this.itemList.length;t++)if(ymtApp.gameController.isItemGuide(this.itemList[t])){this.tips.active=!0;var e=ymtApp.nodeMgr.getNodeInNodePos(this.propItemList[t],this.tips);this.mask.setPosition(e.x,e.y+10),this.sprFinger.setPosition(e.x+15,e.y-32);var i=ymtApp.cons.getItemCfg(this.itemList[t]);this.labTips.string=i.tips.toLocalize()||a.LocalizeMgr.inst.toLocalize("\u70b9\u51fb\u4f7f\u7528{0}\u9053\u5177",[String(i.name)]);break}},e.prototype.updateItemList=function(){var t=this;this.itemList=[c.ITEM_ID.WAND,c.ITEM_ID.ADD_TIME,c.ITEM_ID.ADD_STAR];var e=ymtApp.gameController.getLevelByType(c.GAME_TYPE.COMMON),i=ymtApp.gameController.getLockLevel(this.itemList,!0);this.btnGift.active=i<=e,ymtApp.nodeMgr.addListItem(this.itemList.length,this.propItemList,this.comReadyBtn,this.layout,function(e,i){e.getComponent(s.default).setData(t.itemList[i],{gameType:t.gameType,level:t.enterLevel},function(){t.tips.active&&(t.tips.active=!1,ymtApp.gameController.setItemGuide(t.itemList[i]))})})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(l.UI.READY),this.isGame&&ymtApp.gameController.exitGame()},e.prototype.onClickStart=function(){u.default.setPocessIdx(0),ymtApp.gameController.enterGame(this.gameType,this.enterLevel,function(){ymtApp.viewMgr.hideView(l.UI.READY),ymtApp.viewMgr.hideView(l.UI.CHALLENGE)})},e.prototype.onClickGift=function(){var t=this;d.default.showVideo(function(){t.gameType==c.GAME_TYPE.COMMON&&ymtApp.gameController.dotComLevel(t.enterLevel,c.DOT_LEVEL_TYPE.READY_MFLW);for(var e=0;e<t.itemList.length;e++)ymtApp.gameController.addItem(t.itemList[e],1),ymtApp.gameController.setUseItem(t.itemList[e],!0);t.onClickStart()})},n([f(cc.Node)],e.prototype,"layout",void 0),n([f(cc.Node)],e.prototype,"btnStart",void 0),n([f(cc.Node)],e.prototype,"btnGift",void 0),n([f(cc.Node)],e.prototype,"tips",void 0),n([f(cc.Node)],e.prototype,"mask",void 0),n([f(cc.Label)],e.prototype,"labTips",void 0),n([f(cc.Node)],e.prototype,"sprFinger",void 0),n([f(cc.Prefab)],e.prototype,"comReadyBtn",void 0),n([h],e)}(r.default);i.default=m,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",LocalizeMgr:"LocalizeMgr",MainConfig:"MainConfig",ReadyBtn:"ReadyBtn",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],RedPacketView:[function(t,e,i){"use strict";cc._RF.push(e,"d5559AQlQ9HZaHPzYIFZzW5","RedPacketView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("MainConfig"),s=t("SDKEnum"),c=t("SDKMgr"),l=t("UIMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.finger=null,e.btnOpen=null,e.sprVideo=null,e.toggleVideo=null,e.fingerAct=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.init()},e.prototype.init=function(){this.onClick(this.btnClose,this.onBack,this),this.onClick(this.btnOpen,this.onClickOpen,this)},e.prototype.open=function(){var e=this;t.prototype.open.call(this),l.default.sdkData.redToastLimit++,this.toggleVideo.isChecked=!0,this.onClickVideo(),this.showInterstitial(),this.btnClose.node.active=!1,c.default.delayShowCloseBtn(function(){e.btnClose.node.active=!0},this),this.finger.active=!1,c.default.confData.finger_guide&&1==c.default.confData.finger_guide&&this.scheduleOnce(function(){e.finger.active=!0},2)},e.prototype.onClickOpen=function(){var t=this;this.toggleVideo.isChecked?c.default.showVideo(function(){l.default.onClickType(s.CLICK_TYPE.RED_PACKET),t.onBack()},null,null,s.VIDEO_TYPE.LOGIN_RED):this.onBack()},e.prototype.onClickVideo=function(){this.sprVideo.active=this.toggleVideo.isChecked},e.prototype.onBack=function(){cc.tween(this.root).to(.2,{scale:0}).call(function(){ymtApp.viewMgr.hideView(r.UI.REDPACKET_VIEW)}).start()},n([p(cc.Button)],e.prototype,"btnClose",void 0),n([p(cc.Node)],e.prototype,"finger",void 0),n([p(cc.Button)],e.prototype,"btnOpen",void 0),n([p(cc.Node)],e.prototype,"sprVideo",void 0),n([p(cc.Toggle)],e.prototype,"toggleVideo",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",MainConfig:"MainConfig",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],RedPoint:[function(t,e,i){"use strict";cc._RF.push(e,"cddd0qNWM5MfIo4j8uX9+Qt","RedPoint");var o,n=__extends,a=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var r,s=t("BaseComponent"),c=t("GameEnums"),l=cc._decorator,d=l.ccclass,u=l.property,p=cc.Enum(Object.keys(c.REMIND_NAME).reduce(function(t,e,i){return isNaN(Number(e))&&(t[e]=i),t},{}));(r=o||(o={}))[r.DEFAULT=0]="DEFAULT",r[r.ROCK=1]="ROCK",r[r.BREATH=2]="BREATH";var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.redNode=null,e.remindTypes=[],e.delyTime=-1,e.actType=o.DEFAULT,e.redVisible=!0,e.countTime=0,e.remindList={},e}return n(e,t),e.prototype.init=function(){this.countTime=0,this.remindList={};for(var t=0;t<this.remindTypes.length;t++){var e=c.REMIND_NAME[p[this.remindTypes[t]]];this.remindList[e]=!0}switch(this.actType){case o.ROCK:ymtApp.tweenMgr.doRockAct(this.redNode);break;case o.BREATH:ymtApp.tweenMgr.doBreathAct(this.redNode)}this.updateData()},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.REMIND_CHANGE,this.onRemindChange,this)},e.prototype.setReminds=function(t){for(var e=0;e<t.length;e++)this.remindList[t[e]]=!0;this.updateData()},e.prototype.setRedVisble=function(t){this.redVisible=t,this.updateData()},e.prototype.isRedVisble=function(){return this.redNode.active},e.prototype.setRemindInterval=function(t){this.delyTime=t},e.prototype.updateData=function(){if(this.redNode){var t=0;for(var e in this.remindList)t+=ymtApp.remindMgr.getRemind(e);this.redNode.active=t>0&&this.redVisible}},e.prototype.onRemindChange=function(t){t&&!this.remindList[t]||this.updateData()},e.prototype.update=function(t){if(!(this.delyTime<0)&&(this.countTime+=t,this.countTime>=this.delyTime))for(var e in this.countTime=0,this.remindList)ymtApp.remindMgr.doRemind(e)},a([u({type:cc.Node})],e.prototype,"redNode",void 0),a([u({type:p})],e.prototype,"remindTypes",void 0),a([u({type:cc.Integer})],e.prototype,"delyTime",void 0),a([u({type:cc.Enum(o)})],e.prototype,"actType",void 0),a([d],e)}(s.default);i.default=h,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums"}],RemindMgr:[function(t,e,i){"use strict";cc._RF.push(e,"7ff6dnaTzZPWpBYcmVpOn3T","RemindMgr");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){var e=t.call(this)||this;return e.checkRemindFunc={},e.remindList={},e.initData(),e}return o(e,t),e.prototype.initData=function(){var t=this;this.checkRemindFunc={},this.remindList={},setTimeout(function(){t.updateTimes(1)},1e3)},e.prototype.registerCheckRemind=function(t,e,i,o){void 0===o&&(o=0),this.checkRemindFunc[t]={},this.checkRemindFunc[t].func=e,this.checkRemindFunc[t].interval=o,this.checkRemindFunc[t].time=0,this.checkRemindFunc[t].target=i,this.remindList[t]=e.call(i),this.doRemind(t)},e.prototype.getRemind=function(t){return this.remindList[t]||0},e.prototype.doRemind=function(t){if(this.checkRemindFunc[t]){var e=this.checkRemindFunc[t].func.call(this.checkRemindFunc[t].target);e!=this.getRemind(t)&&(this.remindList[t]=e,ymtApp.eventTarget.emit(ymtApp.eventName.REMIND_CHANGE,t))}else console.warn("RemindManager \u6ca1\u6709\u6ce8\u518c\u8be5\u7ea2\u70b9\u4e8b\u4ef6:"+t)},e.prototype.updateTimes=function(t){for(var e in void 0===t&&(t=1),this.checkRemindFunc)this.checkRemindFunc[e].time+=t,this.checkRemindFunc[e].time>=this.checkRemindFunc[e].interval&&(this.checkRemindFunc[e].time=0,this.doRemind(e))},e}(t("Singleton").default);i.default=n,cc._RF.pop()},{Singleton:"Singleton"}],ResMgr:[function(t,e,i){"use strict";cc._RF.push(e,"42be2S2m5NJfqjFzfqHDWQ9","ResMgr");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("Singleton"),s=t("GameEnums"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bundles={},e}return o(e,t),e.prototype.getAsset=function(t,e,i){var o=this;return new Promise(function(r){return n(o,void 0,void 0,function(){var o,n;return a(this,function(a){switch(a.label){case 0:return o=null,n=cc.resources,i&&""!=i?[4,this.getBundle(i,!0)]:[3,2];case 1:return n=a.sent(),[3,4];case 2:return null==this.bundles[t]?[3,4]:(i=this.bundles[t].bundleName,[4,this.getBundle(i,!0)]);case 3:n=a.sent(),a.label=4;case 4:return n&&(o=n.get(t,e)),null!=o?[3,6]:[4,this.loadAsset(t,e,i)];case 5:o=a.sent(),a.label=6;case 6:return r(o),[2]}})})})},e.prototype.loadAsset=function(t,e,i){var o=this;return new Promise(function(r){return n(o,void 0,void 0,function(){var o,s,c=this;return a(this,function(l){switch(l.label){case 0:return o=null,s=function(e,i){return new Promise(function(r){return n(c,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return"string"!=typeof e&&e.bundleName?[4,this.getBundle(e.bundleName,!0)]:[3,2];case 1:if(n=a.sent(),o=n.get(t,i))return r(o),[2];a.label=2;case 2:return this.loadRes(e,i,!1,function(t,e){r(e)}),[2]}})})})},i?[4,s({url:t,type:e,bundleName:i},e)]:[3,2];case 1:o=l.sent(),l.label=2;case 2:return o?[3,4]:[4,s(t,e)];case 3:o=l.sent(),l.label=4;case 4:return r(o),[2]}})})})},e.prototype.getSpriteAtlas=function(t,e){return this.getAsset(t,cc.SpriteAtlas,e)},e.prototype.getPrefab=function(t,e){return this.getAsset(t,cc.Prefab,e)},e.prototype.getJsonAsset=function(t,e){return this.getAsset(t,cc.JsonAsset,e)},e.prototype.getAudioClip=function(t,e){return this.getAsset(t,cc.AudioClip,e)},e.prototype.getSpriteFrame=function(t,e){return this.getAsset(t,cc.SpriteFrame,e)},e.prototype.getTexture2D=function(t,e){return this.getAsset(t,cc.Texture2D,e)},e.prototype.getFont=function(t,e){return this.getAsset(t,cc.Font,e)},e.prototype.getBitmapFont=function(t,e){return this.getAsset(t,cc.BitmapFont,e)},e.prototype.getSkeletonData=function(t,e){return this.getAsset(t,sp.SkeletonData,e)},e.prototype.getDirData=function(t,e,i){var o=this;return new Promise(function(n){o.loadDir(t,e,i,function(t,e){n(e)})})},e.prototype.getBundle=function(t,e){var i=this;return void 0===e&&(e=!1),new Promise(function(o){var n=cc.assetManager.getBundle(t);n?o(n):e?i.loadBundle(t,function(t,e){o(e)}):o(n)})},e.prototype.loadBundle=function(t,e){var i=this,o=cc.assetManager.getBundle(t);o?e(null,o):cc.assetManager.loadBundle(t,function(o,n){o?i.loadBundle(t,e):e(o,n)})},e.prototype.loadBundleInnerRes=function(t,e,i,o){t.load(e,i,function(t,e){o(t,e)})},e.prototype.loadResByBundleName=function(t,e,i,o){var n=this,a=cc.assetManager.getBundle(t);a?this.loadBundleInnerRes(a,e,i,o):this.loadBundle(t,function(a,r){a?n.loadResByBundleName(t,e,i,o):n.loadBundleInnerRes(r,e,i,o)})},e.prototype.loadRes=function(t,e,i,o,n){var a,r=this;void 0===i&&(i=!1);var s=null;if("string"==typeof t)a=t;else{if(a=t.url,t.isDir)return void this.loadDir(a,e,t.bundleName,function(t,e){o&&o(t,e)},n);s=t.bundleName}s&&""!=s?this.loadResByBundleName(s,a,e,function(e,i){r.bundles[a]=t,o&&o(e,i)}):cc.resources.load(a,e,function(t,e){o&&o(t,e)})},e.prototype.loadDir=function(t,e,i,o,n){var a=function(i){i.loadDir(t,e,function(e,i,o){n&&n(t,e,i,o)},function(t,e){t&&console.error("ResMgr loadDir",t),o&&o(t,e)})};i?this.loadBundle(i,function(t,e){a(e)}):a(cc.resources)},e.prototype.loadRemote=function(t,e){null!=t&&""!=t?cc.assetManager.loadRemote(t,function(i,o){i&&console.error("loadRemote url :",t),e&&e(i,o)}):e&&e(null,null)},e.prototype.loadRemoteWithSuffix=function(t,e,i){null!=t&&""!=t?cc.assetManager.loadRemote(t,e,function(e,o){e&&console.error("loadRemote url :",t),i(e,o)}):i(null,null)},e.prototype.getRemoteRes=function(t,e){return new Promise(function(i){cc.assetManager.loadRemote(t,e,function(t,e){i(e)})})},e.prototype.loadResArray=function(t,e,i,o,n){var a=this;void 0===e&&(e=!1),void 0===i&&(i=!1);var r=0,c=0,l=!1,d=t.length,u=t.length,p={},h=[];(function f(){if(!l)for(var m=function(){var m=t[r],g=m.url,_=m.type;l=++r==u;var y=g+":"+(m.bundleName||s.BUNDLENAME.RESOURCES);p[y]?(console.warn("\u91cd\u590d\u52a0\u8f7d\u8d44\u6e90["+r+"]\uff1a"+g,y),o(null,null)):(a.loadRes(m,_,void 0!==m.release?m.release:e,function(t,r){t?(console.error("\u52a0\u8f7d\u8d44\u6e90["+g+"]\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d...",m,t),a.loadRes(m,_,e,o,n)):(--d,--c,f(),i?o&&o(t,r):(h.push(r),0==d&&o&&o(null,h)))},n),++c,p[y]=!0)};r<u&&c<=5;)m()})()},e.prototype.preload=function(t,e,i,o){void 0===e&&(e=!1),this.loadResArray(t,e,!0,i,o)},e.prototype.preloadRes=function(t){var e=this;return new Promise(function(i){t.isDir?e.loadDir(t.url,t.type,t.bundleName,function(t,e){i(e)}):t.bundleName&&""!=t.bundleName?e.loadResByBundleName(t.bundleName,t.url,t.type,function(t,e){i(e)}):cc.resources.load(t.url,t.type,function(t,e){i(e)})})},e.prototype.loadBundlePre=function(t,e){for(var i={},o=0,n=0;n<t.length;n++){var a=t[n];null!=a.bundleName&&(i[a.bundleName]||(i[a.bundleName]=!0,o++))}if(0!=o)for(var r in i)this.loadBundle(r,function(){--o<=0&&(console.log("\u52a0\u8f7d\u9884\u8bbebundle\u5b8c\u6210"),e&&e())});else e&&e()},e.prototype.releaseAsset=function(t){t&&cc.assetManager.releaseAsset(t)},e}(r.default);i.default=c,cc._RF.pop()},{GameEnums:"GameEnums",Singleton:"Singleton"}],ResultUI:[function(t,e,i){"use strict";cc._RF.push(e,"d69c18e00tJXJtl0eu9uJJs","ResultUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseDialog"),c=t("ComCurrency"),l=t("ComScrollSele"),d=t("GameEnums"),u=t("MainConfig"),p=t("SDKMgr"),h=t("GameServerConf"),f=t("./XDAD/XDADpublic").default,m=cc._decorator,g=m.ccclass,_=m.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutCurrency=null,e.nodeBg=null,e.labStar=null,e.btnPig=null,e.sprPig=null,e.sprPigProg=null,e.sprPigAdd=null,e.sprPigRed=null,e.labPig=null,e.nodeLayer=null,e.nodeBox=null,e.progLevel=null,e.labProg=null,e.labChallenge=null,e.btnSure=null,e.sprCoin1=null,e.labStar1=null,e.btnVideo=null,e.sprCoin2=null,e.labMult=null,e.labStar2=null,e.spLight=null,e.mult=5,e.starScore=0,e.curLevel=0,e.isCoinAct=!1,e}return o(e,t),e.prototype.init=function(){return a(this,void 0,Promise,function(){var t;return r(this,function(e){switch(e.label){case 0:return this.onClick(this.btnPig,this.onClickPig,this),this.onClick(this.btnSure,this.onClickSure,this),this.onClick(this.btnVideo,this.onClickVideo,this),ymtApp.tweenMgr.doRockAct(this.sprPigRed),this.addCurrency(),t=this,[4,ymtApp.nodeMgr.addScrollWheel(this.nodeLayer,this.onScrollWheel.bind(this))];case 1:return t.scrollWheel=e.sent(),this.scrollWheel.y=-80,[2]}})})},e.prototype.addCurrency=function(){return a(this,void 0,void 0,function(){var t,e;return r(this,function(i){switch(i.label){case 0:return t=this,[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,d.ITEM_ID.COIN)];case 1:return t.coinCurrency=i.sent(),[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,d.ITEM_ID.STRENGTH)];case 2:return i.sent(),e=this,[4,ymtApp.nodeMgr.addCurrencyNode(this.layoutCurrency,d.ITEM_ID.STAR,!0)];case 3:return e.starCurrency=i.sent(),[2]}})})},e.prototype.open=function(){t.prototype.open.call(this),this.arg=this.arg||{},this.gameType=this.arg.gameType||d.GAME_TYPE.COMMON,this.starScore=this.arg.star||0,this.curLevel=this.arg.level||0,this.updateView(),this.updatePig()},e.prototype.doScaleAct=function(t,e,i){void 0===i&&(i=.5),cc.Tween.stopAllByTarget(t),t.scale=0,cc.tween(t).to(i,{scale:1},cc.easeBackOut()).call(function(){e&&e()}).start()},e.prototype.updateView=function(){var t=this;if(this.isCoinAct=!1,this.spLight.node.active=!1,this.labStar.string=""+this.starScore,this.progLevel.node.active=this.gameType==d.GAME_TYPE.COMMON,this.labChallenge.active=this.gameType==d.GAME_TYPE.CHALLENGE,this.doScaleAct(this.btnSure),this.doScaleAct(this.btnVideo),this.gameType==d.GAME_TYPE.COMMON){var e=ymtApp.gameController.getLevelByType(d.GAME_TYPE.COMMON),i=ymtApp.gameController.getRewardLevel(),o=(h.default.I.rewardLevelCfg||{}).interval||10,n=e-i;n>o&&(n=o),n<0&&(n+=Math.ceil(Math.abs(n)/o)*o);var a=n-1;a<0&&(a=0),this.labProg.string=a+"/"+o,this.progLevel.progress=a/o,cc.tween(this.progLevel).to(.3,{progress:n/o}).call(function(){t.progLevel.progress=n/o,t.labProg.string=n+"/"+o}).start()}this.labStar1.string=""+this.starScore,this.onScrollWheel(this.mult),this.scheduleOnce(function(){ymtApp.gameController.addItem(d.ITEM_ID.STAR,t.starScore,!0)},.1)},e.prototype.updatePig=function(){var t=this,e=h.default.I.piggyBankCfg||{add:20,coin:300,max:600},i=e.max||600,o=e.coin||300,n=e.add||20,a=ymtApp.gameController.getRecordInfo(d.RECORD_KEY.PIG_GOLD,0);cc.Tween.stopAllByTarget(this.sprPig),cc.Tween.stopAllByTarget(this.sprPigAdd),cc.Tween.stopAllByTarget(this.sprPigProg),cc.Tween.stopAllByTarget(this.labPig.node),ymtApp.gameController.addPiggyBankCoin(),this.sprPigProg.fillRange=a/i,this.sprPigRed.active=a>=o,this.labPig.string="+"+n,this.labPig.node.opacity=0,this.sprPigAdd.opacity=0,this.sprPigAdd.x=106,cc.tween(this.sprPigAdd).delay(.2).to(.4,{opacity:255}).delay(.5).to(.4,{x:0}).call(function(){t.sprPigRed.active=a+n>=o;var e=cc.tween(t.sprPig).to(.15,{scale:1.05}).to(.3,{scale:.95}).to(.15,{scale:1});a+n>=o?e.union().repeatForever().start():e.start()}).to(.3,{opacity:0}).call(function(){cc.tween(t.sprPigProg).to(.2,{fillRange:(a+n)/i}).start()}).start(),cc.tween(this.labPig.node).delay(.2).to(.4,{opacity:255}).delay(.5).to(.4,{opacity:0}).start()},e.prototype.onScrollWheel=function(t){this.mult=t,this.labMult.string="\u9886\u53d6".toLocalize()+"x"+t,this.labStar2.string=""+t*this.starScore},e.prototype.stopWheel=function(){this.scrollWheel&&this.scrollWheel.getComponent(l.default).stop()},e.prototype.onClickPig=function(){ymtApp.viewMgr.showView(u.UI.PIGGY_BANK)},e.prototype.onClickSure=function(){this.isCoinAct||(this.stopWheel(),this.doCoinAct(1,function(){ymtApp.gameController.addItem(d.ITEM_ID.STAR,0)}))},e.prototype.onClickVideo=function(){var t=this;this.isCoinAct||(this.stopWheel(),this.mult<=1||(f.showXDAD(),ymtApp.gameController.dotGameStr(d.DOT_TYPE.CLICK_STARDOUBLE),p.default.showVideo(function(){ymtApp.gameController.dotGameVideo(t.gameType,t.curLevel+1),ymtApp.gameController.dotGameStr(d.DOT_TYPE.GET_STARDOUBLE),t.doCoinAct(2,function(){ymtApp.gameController.addItem(d.ITEM_ID.STAR,t.starScore*(t.mult-1))})})))},e.prototype.doCoinAct=function(t,e){return a(this,void 0,void 0,function(){var i,o,n,a,s,l=this;return r(this,function(){return this.isCoinAct=!0,i=this.sprCoin1,2==t&&(i=this.sprCoin2),o=i.getComponent(cc.Sprite).spriteFrame,this.spLight.node.active=!0,n=ymtApp.nodeMgr.getNodeInNodePos(i,this.root),a=this.starCurrency.getComponent(c.default).getIconWPos(),s=this.root.convertToNodeSpaceAR(a),this.spLight.node.setPosition(s),ymtApp.tweenMgr.doCoinAct({start:n,end:s,frame:o,parent:this.root},function(t){ymtApp.audioMgr.playSound(ymtApp.main.audio.star),9==t?(l.isCoinAct=!1,e&&e(),l.scheduleOnce(function(){l.onClose()},.5)):0==t&&l.spLight.setAnimation(0,"animation",!1),l.starCurrency.getComponent(c.default).doIconAct()}),[2]})})},e.prototype.onClose=function(){ymtApp.viewMgr.hideView(u.UI.RESULT),ymtApp.viewMgr.hideView(u.UI.WIN),this.gameType==d.GAME_TYPE.COMMON?ymtApp.gameController.startGame(d.GAME_TYPE.COMMON,null,!0,function(t){t||ymtApp.gameController.exitGame()}):ymtApp.gameController.exitGame()},n([_(cc.Node)],e.prototype,"layoutCurrency",void 0),n([_(cc.Node)],e.prototype,"nodeBg",void 0),n([_(cc.Label)],e.prototype,"labStar",void 0),n([_(cc.Node)],e.prototype,"btnPig",void 0),n([_(cc.Node)],e.prototype,"sprPig",void 0),n([_(cc.Sprite)],e.prototype,"sprPigProg",void 0),n([_(cc.Node)],e.prototype,"sprPigAdd",void 0),n([_(cc.Node)],e.prototype,"sprPigRed",void 0),n([_(cc.Label)],e.prototype,"labPig",void 0),n([_(cc.Node)],e.prototype,"nodeLayer",void 0),n([_(cc.Node)],e.prototype,"nodeBox",void 0),n([_(cc.ProgressBar)],e.prototype,"progLevel",void 0),n([_(cc.Label)],e.prototype,"labProg",void 0),n([_(cc.Node)],e.prototype,"labChallenge",void 0),n([_(cc.Node)],e.prototype,"btnSure",void 0),n([_(cc.Node)],e.prototype,"sprCoin1",void 0),n([_(cc.Label)],e.prototype,"labStar1",void 0),n([_(cc.Node)],e.prototype,"btnVideo",void 0),n([_(cc.Node)],e.prototype,"sprCoin2",void 0),n([_(cc.Label)],e.prototype,"labMult",void 0),n([_(cc.Label)],e.prototype,"labStar2",void 0),n([_(sp.Skeleton)],e.prototype,"spLight",void 0),n([g],e)}(s.default);i.default=y,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseDialog:"BaseDialog",ComCurrency:"ComCurrency",ComScrollSele:"ComScrollSele",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],RewardUI:[function(t,e,i){"use strict";cc._RF.push(e,"9c76840E79OHKGb7dravVS/","RewardUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("GameEnums"),s=t("MainConfig"),c=t("SDKMgr"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTitle=null,e.spBox=null,e.rewardItem=null,e.btnDouble=null,e.btnGet=null,e.rewards=[],e.itemList=[],e.actTime=.3,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnDouble,this.onClickDouble,this),this.onClick(this.btnGet,this.onClickGet,this)},e.prototype.open=function(){t.prototype.open.call(this),this.arg=this.arg||{},this.curType=this.arg.type||r.REWARD_TYPE.SINGLE,this.closeFunc=this.arg.closeFunc,this.labTitle.string=this.arg.title.toLocalize()||"\u9886\u53d6\u5956\u52b1".toLocalize(),this.rewards=this.arg.rewards||[{itemId:r.ITEM_ID.COIN,amount:0}],this.updateView()},e.prototype.updateView=function(){var t=this;this.btnDouble.active=this.curType==r.REWARD_TYPE.DOUBLE||this.curType==r.REWARD_TYPE.DOUBLE_BOX,this.spBox.node.active=this.curType==r.REWARD_TYPE.DOUBLE_BOX||this.curType==r.REWARD_TYPE.SINGLE_BOX;var e=0;this.spBox.node.active&&(e=.3,ymtApp.audioMgr.playSound(ymtApp.main.audio.openBox),this.spBox.setAnimation(0,"lwh",!1)),ymtApp.nodeMgr.addListItemSelf(this.rewards.length,this.itemList,this.rewardItem,this.root,function(i,o){var n=i.getChildByName("sprIcon"),a=t.rewards[o].itemId,s=ymtApp.gameController.getItemIcon(a);a==r.ITEM_ID.COIN&&(s+="_big"),ymtApp.spriteMgr.loadImg(n,s,null,{width:150,height:150,isAdaptMax:!0,isScale:!0}),i.getComponentInChildren(cc.Label).string="x"+(t.rewards[o].amount||0),i.setPosition(0,-60);var c=250-260*Math.floor(o/2),l=350*(o%2-.5);t.rewards.length==o+1&&t.rewards.length%2==1&&(l=0),t.doMoveScale(i,e,1.5*t.actTime,cc.v2(l,c))}),this.doMoveScale(this.btnDouble,this.actTime+e),this.doMoveScale(this.btnGet,this.actTime+e),this.addItemMult(1,!0)},e.prototype.doMoveScale=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=this.actTime),t&&t.active&&(cc.Tween.stopAllByTarget(t),t.scale=0,null==o&&(o=t.getPosition()),cc.tween(t).delay(e).to(i,{scale:1,position:cc.v3(o)},cc.easeBackOut()).start())},e.prototype.onClickDouble=function(){var t=this;c.default.showVideo(function(){t.addItemMult(1),t.closeFunc&&t.closeFunc(),ymtApp.viewMgr.hideView(s.UI.REWARD)})},e.prototype.onClickGet=function(){this.addItemMult(0),this.closeFunc&&this.closeFunc(),ymtApp.viewMgr.hideView(s.UI.REWARD)},e.prototype.addItemMult=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1);for(var i=0;i<this.rewards.length;i++){var o=this.rewards[i]||{itemId:r.ITEM_ID.COIN,amount:0};ymtApp.gameController.addItem(o.itemId,o.amount*t,e)}},n([u(cc.Label)],e.prototype,"labTitle",void 0),n([u(sp.Skeleton)],e.prototype,"spBox",void 0),n([u(cc.Node)],e.prototype,"rewardItem",void 0),n([u(cc.Node)],e.prototype,"btnDouble",void 0),n([u(cc.Node)],e.prototype,"btnGet",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{BaseUI:"BaseUI",GameEnums:"GameEnums",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],RuStoreAndroidAd:[function(t,e,i){"use strict";cc._RF.push(e,"2d8dc1+UsxMH5aZBQLXhPWD","RuStoreAndroidAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=2e4,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){window.rustore&&(n.default.i("game-showbanner\uff08\u663e\u793abanner\uff09"),window.android.showBanner())},e.prototype.hideBanner=function(){window.rustore&&(n.default.i("game-closeBannerAd\uff08\u5173\u95edbanner\uff09"),window.android.hideBanner())},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){var t=this;window.showRewardVideoComplement=function(e){n.default.i("showRewardVideoComplement callback======================="),null!=t.videocallback?(1==e.ret?t.videocallback&&t.videocallback(!0):t.videocallback&&t.videocallback(!1),t.videocallback=null):n.default.e("game - showRewardVideoComplement \u8c03\u7528\u9519\u8bef\uff0c\u6ca1\u6709\u8c03\u7528\u8fc7\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a")}},e.prototype.showVideo=function(t,e){window.rustore&&(this.videocallback=t,window.android.showRewardedVideo(e))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){window.rustore&&window.android.showInsertAd()},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,i){void 0===i&&(i=0),this.showInterstitial(t,e)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],SDKConfig:[function(t,e,i){"use strict";var o,n;cc._RF.push(e,"ca72fm52kpOXq2P3sZMl/Cq","SDKConfig");var a=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var r=t("MainConfig"),s=t("SDKEnum"),c=cc._decorator.ccclass,l=function(){function t(){}return t.getGameCfg=function(){return this.gameCfg[this.gameId]||{gameAppId:this.gameAppId,sdkId:this.sdkId,version:this.version}},t.getVersion=function(){var t=this.getGameCfg();return t&&null!=t.version&&""!=t.version?t.version:this.version},t.gameAppId="wx360b6f1f3e677c6e",t.sdkId=3488,t.gameId=1,t.version="1.9.0",t.gameCfg=((o={})[1]={gameAppId:"wx6fba1579d256b21d",sdkId:3873,version:"1.0.11",wxVersion:"1.0.11"},o),t.isAddProgram=!1,t.isMaiUser=!1,t.clickCanCalIcon=0,t.id=0,t.openId="123456",t.nickname="",t.ipArea="",t.diffTime=0,t.processCfg=((n={})[s.PROCESS_TYPE.HOME]=r.UI.HOME_VIEW,n[s.PROCESS_TYPE.GAME]=r.UI.GAME_VIEW,n[s.PROCESS_TYPE.GRID_RECOMMEND]=r.UI.GRID_REC_VIEW,n[s.PROCESS_TYPE.VIDEO_RECOMMEND]=r.UI.VIDEO_REC_VIEW,n[s.PROCESS_TYPE.VIDEO]=r.UI.VIDEO_VIEW,n[s.PROCESS_TYPE.BOX]=r.UI.BOX_VIEW,n[s.PROCESS_TYPE.SIGN_VIEW]=r.UI.SIGN_VIEW,n[s.PROCESS_TYPE.REDPACKET_VIEW]=r.UI.REDPACKET_VIEW,n[s.PROCESS_TYPE.AD_INTERSTITIAL_VIEW]=r.UI.AD_INTERSTITIAL_VIEW,n[s.PROCESS_TYPE.MORE_GAME_VIEW]=r.UI.MORE_GAME_VIEW,n),a([c],t)}();i.default=l,cc._RF.pop()},{MainConfig:"MainConfig",SDKEnum:"SDKEnum"}],SDKEnum:[function(t,e,i){"use strict";var o;cc._RF.push(e,"a8f96+fqBhHarIW4M7Rw9lo","SDKEnum"),Object.defineProperty(i,"__esModule",{value:!0}),i.PROCESS_TYPE=i.CLICK_TYPE=i.VIDEO_STATE=i.VIDEO_TYPE=void 0,(o=i.VIDEO_TYPE||(i.VIDEO_TYPE={})).DEFAULT="default",o.LOGIN_REWARD="1001",o.FLOAT_RED="1002",o.LOGIN_RED="1003",o.BANNER_VIDEO="1004",o.INSERTAD_VIDEO="1005",function(t){t.CLICK="click",t.SUCCESS="success",t.FAIL="fail",t.NO_AD="no_ad"}(i.VIDEO_STATE||(i.VIDEO_STATE={})),function(t){t[t.SIGN=0]="SIGN",t[t.BANNER=1]="BANNER",t[t.AD_INTERSTITIAL=2]="AD_INTERSTITIAL",t[t.RED_PACKET=3]="RED_PACKET",t[t.BTN_RED_PACKET=4]="BTN_RED_PACKET",t[t.VIDEO_RECOMMOND=5]="VIDEO_RECOMMOND",t[t.VIDEO_FORCE=6]="VIDEO_FORCE",t[t.STRENGTH=7]="STRENGTH"}(i.CLICK_TYPE||(i.CLICK_TYPE={})),function(t){t[t.HOME=1]="HOME",t[t.GAME=2]="GAME",t[t.GRID_RECOMMEND=3]="GRID_RECOMMEND",t[t.VIDEO_RECOMMEND=4]="VIDEO_RECOMMEND",t[t.VIDEO=5]="VIDEO",t[t.BOX=6]="BOX",t[t.SIGN_VIEW=10]="SIGN_VIEW",t[t.REDPACKET_VIEW=11]="REDPACKET_VIEW",t[t.AD_INTERSTITIAL_VIEW=12]="AD_INTERSTITIAL_VIEW",t[t.FIRST_GIFT_VIEW=13]="FIRST_GIFT_VIEW",t[t.MORE_GAME_VIEW=14]="MORE_GAME_VIEW"}(i.PROCESS_TYPE||(i.PROCESS_TYPE={})),cc._RF.pop()},{}],SDKInterface:[function(t,e,i){"use strict";cc._RF.push(e,"dd257Ugl7dJjakkyeDyG/z1","SDKInterface"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],SDKMgr:[function(t,e,i){"use strict";cc._RF.push(e,"f7cc8qHT7lH4buRqzUX2LRE","SDKMgr");var o=__decorate,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("PlatformAdManager"),s=t("GameEnums"),c=t("SDKConfig"),l=t("SDKEnum"),d=t("GameServerConf"),u=t("UIMgr"),p=t("WxMgr"),h=t("WxNetMgr"),f=cc._decorator,m=f.ccclass;f.property;var g=function(){function t(){}var e;return e=t,t.initSDK=function(t){return n(this,void 0,void 0,function(){var e,i,o,n,r,s;return a(this,function(){return e=this,i=function(i){e.confData=i,e.initData(),e.addEventListener(),t&&t(i),null!=i.show_insertad_sec&&i.show_insertad_sec>=0&&setInterval(function(){e.showInterstitial()},1e3*i.show_insertad_sec)},cc.sys.platform===cc.sys.WECHAT_GAME?(o=p.default.launchObj.query,this.scene=p.default.launchObj.scene,n=p.default.launchObj.referrerInfo||{},r=n.appId,s=void 0===r?"":r,ymtApp.gameController.showGameSceme(this.scene),this.system=window.wx.getSystemInfoSync(),h.default.request({url:"setting/config",data:{channel_id:o.channel_id,source_id:s,scene_id:this.scene},method:"GET",header:{},success:function(t){i(t)}})):ymtApp.resMgr.loadRes(ymtApp.main.json.sdkData,cc.JsonAsset,!1,function(t,e){i(e.json),ymtApp.resMgr.releaseAsset(e)}),cc.game.on(cc.game.EVENT_SHOW,function(){ymtApp.eventTarget.emit(ymtApp.eventName.GAME_SHOW)}),cc.game.on(cc.game.EVENT_HIDE,function(){ymtApp.eventTarget.emit(ymtApp.eventName.GAME_HIDE)}),[2]})})},t.addEventListener=function(){ymtApp.eventTarget.on(ymtApp.eventName.GAME_SHOW,this.onGameShow,this)},t.initData=function(){this.banner_refresh_time=null==this.confData.banner_refresh_time?30:this.confData.banner_refresh_time,this.globalProcess=this.getGlobalProcess(),this.recNextBtnDelaySec=this.getRecNextBtnDelaySec(),this.recNextBtnClickNum=this.getRecNextBtnClickNum(),this.recBottomAdType=this.getRecBottomAdType(),this.startVideo=this.getStartVideo(),this.bxBottomAdType=this.getBxBottomAdType(),this.autoVideo=this.getAutoVideo(),this.bannerRecreateNum=this.confData.banner_recreate_num||1},t.initADViews=function(t){this.isSDKInit||(this.isSDKInit=!0,t())},t.onGameShow=function(){var t;if(this.shareTime>0){if(ymtApp.gameController.getServerTime()-this.shareTime>=1e3*d.default.I.shareTime)ymtApp.viewMgr.showToast("\u5206\u4eab\u6210\u529f\uff01"),this.shareData&&this.shareData.succ&&this.shareData.succ();else{var e=(null===(t=this.shareData)||void 0===t?void 0:t.id)||1,i=this.shareIds[e]||0,o=0;if(this.confData.share_success_per&&this.confData.share_success_per.length>0){var n=i%this.confData.share_success_per.length;o=this.confData.share_success_per[n]||0}100*Math.random()<o?this.shareData&&this.shareData.succ&&this.shareData.succ():(this.confData.share_fail_content&&this.confData.share_fail_content.length>0&&(n=i%this.confData.share_fail_content.length,p.default.floatingHint(this.confData.share_fail_content[n])),this.shareData&&this.shareData.fail&&this.shareData.fail()),this.shareIds[e]=i+1}this.shareTime=0,this.shareData=null}},t.isSeleVideo=function(){var t=0;return e.confData.guoguan_video&&e.confData.guoguan_video.length>0&&(t=e.confData.guoguan_video[this.seleIndx],this.seleIndx=(this.seleIndx+1)%e.confData.guoguan_video.length),1==t},t.is_banner_id=function(){return!(null==this.confData.bannerad_id||null==this.confData.bannerad_id||this.confData.bannerad_id.length<=0||""==this.confData.bannerad_id[0])},t.initBanner=function(t){var e=this;if(null!=window.wx&&this.is_banner_id()){this.curBanner=-1;for(var i=function(i){var n=o.createBanner(i,!1,function(){i==e.confData.bannerad_id.length-1&&t&&t()});o.bannerList.push(n)},o=this,n=0;n<this.confData.bannerad_id.length;n++)i(n)}},t.createBanner=function(t,i,o){if(void 0===i&&(i=!0),null!=window.wx&&(!this.bannerList[this.curBanner]||0==this.bannerList[this.curBanner].bannerCreateState)&&this.is_banner_id()){var n=this;if(!(null==t||t>=this.confData.bannerad_id.length)){var a=this.confData.bannerad_id[t];if(null==n.mBannerBottomLap){var r=window.wx.getSystemInfoSync();n.mBannerBottomLap=0,r.screenHeight/r.screenWidth>1.9&&(n.mBannerBottomLap=18),n.mBannerInfo=r}var s=window.wx.createBannerAd({adUnitId:a,adIntervals:e.banner_refresh_time,style:{left:0,top:0,width:200}}),c={banner:s,bannerRecreateNum:0,bannerCreateState:1,bannerShowState:0,resize:function(){s.style.top=n.mBannerInfo.screenHeight-s.style.realHeight,s.style.left=(n.mBannerInfo.screenWidth-s.style.realWidth)/2},error:function(e){cc.log("\u521b\u5efa\u5e7f\u544a\u5931\u8d25",e),n.destroyBanner(t)},loadend:function(){console.log("load success",i,t,n.curBanner),o&&o(),n.bannerList[t]&&(n.bannerList[t].bannerCreateState=2),i&&t==n.curBanner&&(n.bannerList[t]&&(n.bannerList[t].bannerShowState=1),n.showBanner(t))}};return s.onResize(c.resize),s.onError(c.error),s.onLoad(c.loadend),c}}},t.bannerVisible=function(t,e,i){if(void 0===i&&(i=!0),!cc.sys.isBrowser){var o=2;null!=e?o=e:this.confData.bottom_ad_type&&(o=this.confData.bottom_ad_type[this.scene]||this.confData.bottom_ad_type.default),0!=o&&(2!=o&&3!=o||u.default.showSelfBanner(t),null!=window.wx&&null!=this.confData.bannerad_id&&0!=this.confData.bannerad_id.length&&""!=this.confData.bannerad_id[0]&&2!=o&&this.setBannerVisible(t,i))}},t.setBannerVisible=function(t,e){if(void 0===e&&(e=!0),console.log("=\u5e7f\u544a=",t),this.isBannerShow=t,t){for(var i=0;i<this.bannerList.length;i++)this.bannerList[i]&&(this.bannerList[i].bannerShowState=0,this.bannerList[i].banner.hide());this.bannerShowTime=0,e&&(this.curBanner=(this.curBanner+1)%this.confData.bannerad_id.length);var o=this.bannerList[this.curBanner];if(null==o)this.bannerList[this.curBanner]=this.createBanner(this.curBanner);else if(2==o.bannerCreateState){if(0!=o.bannerShowState)return;this.showBanner(this.curBanner)}}else this.hideBanner()},t.showBanner=function(t){this.bannerList[t]?(this.bannerList[t].bannerRecreateNum+=1,this.bannerList[t].bannerShowState=1,this.bannerList[t].banner.show()):this.bannerList[t]=this.createBanner(t)},t.reCreateBanner=function(){var t=!1;this.bannerList[this.curBanner]&&(t=0!=this.bannerList[this.curBanner].bannerShowState,this.bannerList[this.curBanner].bannerRecreateNum=this.bannerRecreateNum),this.bannerShowTime=0,this.hideBanner(),t&&this.bannerVisible(!0,null,!1)},t.hideBanner=function(){this.bannerList[this.curBanner]&&(this.bannerList[this.curBanner].bannerRecreateNum>=this.bannerRecreateNum?this.destroyBanner(this.curBanner):(this.bannerList[this.curBanner].bannerShowState=0,this.bannerList[this.curBanner].banner.hide()));for(var t=0;t<this.bannerList.length;t++)this.bannerList[t]&&(this.bannerList[t].bannerShowState=0,this.bannerList[t].banner.hide())},t.destroyBanner=function(t){this.bannerList[t]&&(this.bannerList[t].bannerCreateState=0,this.bannerList[t].bannerShowState=0,this.bannerList[t].banner&&(this.bannerList[t].banner.offResize(this.bannerList[t].resize),this.bannerList[t].banner.offError(this.bannerList[t].error),this.bannerList[t].banner.offLoad(this.bannerList[t].loadend),this.bannerList[t].banner.destroy(),this.bannerList[t].banner=null),this.bannerList[t]=null)},t.setVideoSuccCB=function(t){this.videoSuccCB=t},t.showVideo=function(t,e,i,o){var n=this;if(void 0===o&&(o=l.VIDEO_TYPE.DEFAULT),ymtApp.cons.isDebug())return ymtApp.gameController.addTaskProg(s.TASK_TYPE.VIDEO),void(t&&t());this.isWaitVideo?p.default.floatingHint("Loding AD, Please wait"):(this.isWaitVideo=!0,ymtApp.viewMgr.showMask(!0),r.PlatformAdManager.inst.showRewardedVideo(function(i){n.isWaitVideo=!1,ymtApp.viewMgr.showMask(!1),i?(ymtApp.gameController.addTaskProg(s.TASK_TYPE.VIDEO),n.videoSuccCB&&n.videoSuccCB(),t&&t()):e&&e()}))},t.shareOrVideo=function(t){var e=this,i=t.videoType||l.VIDEO_TYPE.DEFAULT,o=[],n=0;if(e.confData.video_cfg&&(null!=(o=e.confData.video_cfg[i])&&0!=o.length||(o=e.confData.video_cfg[l.VIDEO_TYPE.DEFAULT])),console.log("shareOrVideo",i),e.umaTrackEvent(i,l.VIDEO_STATE.CLICK),null==window.wx||null==o||0==o.length||""==o[0])return t.success&&t.success(),void e.umaTrackEvent(i,l.VIDEO_STATE.SUCCESS);var a="video",r=function(){return e.cur_video_num<e.confData.video_count?(a="video",!0):(p.default.floatingHint("\u4eca\u5929\u5206\u4eab\u5df2\u8fbe\u4e0a\u9650!"),t.fail&&t.fail(),!1)};if(0==t.type){if(!r())return}else if(2==t.type){if(1!=e.confData.is_share)return void(t.fail&&t.fail());if(e.cur_share_num>e.confData.share_count)return void(t.fail&&t.fail());a="share"}else if(1==e.confData.is_share&&null!=e.confData.global_ctrl){if(2==parseInt(e.confData.global_ctrl[e.ctrl_index])){if(e.cur_video_num>=e.confData.video_count){if(!(e.cur_share_num<e.confData.share_count))return p.default.floatingHint("\u4eca\u5929\u89c6\u9891\u5df2\u8fbe\u4e0a\u9650!"),void(t.fail&&t.fail());a="share"}}else if(a="share",e.cur_share_num>e.confData.share_count&&!r())return;e.ctrl_index=(e.ctrl_index+1)%e.confData.global_ctrl.length}else if(!r())return;var s=function(){if(!(n>0)){if(n++,ymtApp.eventTarget.emit(ymtApp.eventName.GAME_SHOW),null!=e.confData.video_fail_to_share_per&&100*Math.random()<e.confData.video_fail_to_share_per)return void e.share(t);t.error&&t.error()}},c={video:null,videoClose:function(o){if(console.log("\u5173\u95ed\u4e86\u5e7f\u544a\u7ec4\u4ef6\u4e86"),o.isEnded)e.cur_video_num+=1,e.setLocalVal("cur_video_num",e.cur_video_num),t.success&&t.success(),e.umaTrackEvent(i,l.VIDEO_STATE.SUCCESS);else{var n=null;if(e.confData.video_toast&&null==(n=e.confData.video_toast[e.scene])&&(n=e.confData.video_toast.default),1==n){var a=1;if(e.confData.video_toast_btn_process&&e.confData.video_toast_btn_process.length>0){var r=e.show_video_num%e.confData.video_toast_btn_process.length;a=e.confData.video_toast_btn_process[r]}e.show_video_num++,e.setLocalVal("show_video_num",e.show_video_num),wx.showModal({title:"\u6682\u672a\u83b7\u5f97\u5956\u52b1\n\u662f\u5426\u7ee7\u7eed\u89c2\u770b\u89c6\u9891",confirmText:1==a?"\u7ee7\u7eed":"\u653e\u5f03",confirmColor:1==a?"#576B95":"#000000",cancelText:1==a?"\u653e\u5f03":"\u7ee7\u7eed",cancelColor:1==a?"#000000":"#576B95",success:function(o){o.confirm&&1==a||o.cancel&&1!=a?e.shareOrVideo(t):(ymtApp.viewMgr.showToast("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u53d6\u5956\u52b1\u54e6"),t.fail&&t.fail(),e.umaTrackEvent(i,l.VIDEO_STATE.FAIL))}})}else t.fail&&t.fail(),ymtApp.viewMgr.showToast("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u53d6\u5956\u52b1\u54e6"),e.umaTrackEvent(i,l.VIDEO_STATE.FAIL)}ymtApp.eventTarget.emit(ymtApp.eventName.GAME_SHOW)},videoError:function(e){console.error("\u83b7\u53d6\u89c6\u9891\u51fa\u9519\u4e86,\u4e0d\u77e5\u9053\u4ec0\u4e48\u539f\u56e0",JSON.stringify(e)),p.default.floatingHint("\u83b7\u53d6\u89c6\u9891\u51fa\u9519!"),t.fail&&t.fail(),s()}};if(console.log("\u5f53\u524d\u662f\u89c6\u9891\u8fd8\u662f\u5206\u4eab",a),"video"==a){this.videoNum>=o.length&&(this.videoNum=0);var d=o[this.videoNum++];c.video=wx.createRewardedVideoAd({adUnitId:d}),ymtApp.eventTarget.emit(ymtApp.eventName.GAME_HIDE),c.video.offClose(),c.video.offError(),c.video.onClose(c.videoClose),c.video.onError(c.videoError),c.video.load().then(function(){c.video.show()}).catch(function(t){console.error("\u83b7\u53d6\u89c6\u9891\u51fa\u9519,\u52a0\u8f7d\u51fa\u9519",JSON.stringify(t)),p.default.floatingHint("\u83b7\u53d6\u89c6\u9891\u51fa\u9519!"),s()})}else this.share(t)},t.share=function(t){if(t=t||{id:0},this.shareIds[t.id]=this.shareIds[t.id]||0,null==window.wx)return t.success&&t.success(),void p.default.floatingHint("\u5206\u4eab\u6210\u529f");console.log("\u8fdb\u6765\u4e86\u5206\u4eab\u91cc\u9762",t);var e=this.confData.share_info,i={};if(e.length>0){var o=Math.floor(Math.random()*e.length),n="share_id="+e[o].id+"&inviter_id="+c.default.openId;if(t){var a=0;for(var r in t)n+=0==a?r+"="+t[r]:"&"+r+"="+t[r],a+=1}i={title:e[o].title,imageUrl:e[o].images,query:n}}this.shareTime=ymtApp.gameController.getServerTime(),this.shareData={id:t.id,succ:t.success,fail:t.fail},window.wx.shareAppMessage(i)},t.initNewCustomAd=function(){window.wx&&(this._styleVerl={left:20,top:this.getWxMenuPos().top+200},this._styleVerR={left:this.system.windowWidth-80,top:this.getWxMenuPos().top+200},this._styleHor={left:(this.system.windowWidth-360)/2,top:this.getWxMenuPos().top+50},this._styleVerSL={left:1,top:this.getWxMenuPos().top+this.system.windowHeight/2-200},this.confData.couplet_gridad&&this.confData.couplet_gridad.length>0&&(this.createNewCustomAd(this.confData.couplet_gridad[0],this._styleVerl),this.createNewCustomAd(this.confData.couplet_gridad[1],this._styleVerR)),this.confData.one_gridad&&this.confData.one_gridad.length>0&&this.createNewCustomAd(this.confData.one_gridad[0],this._styleVerSL))},t.createNewCustomAd=function(t,e,i){var o=this;if(void 0===i&&(i=!1),window.wx&&t&&""!=t){var n=window.wx.createCustomAd({adUnitId:t,style:e}),a=function(){n.offLoad(),n.offError()};n.onError(function(e){console.error("createNewCustom error",t,e),a()}),n.onLoad(function(e){console.log("createNewCustom success",t,e),a(),o._newCustomAdMap[t]=n,i&&n.show()}),n.onClose(function(e){console.log("\u5173\u95ed\u4e86NewCustom",t,JSON.stringify(e)),a(),o._newCustomAdMap[t]=null})}},t.showNewCustomAd=function(t){if("v"==t){if(1==this.confData.open_couplet&&this.confData.couplet_gridad&&this.confData.couplet_gridad.length>0){var e=this.confData.couplet_gridad[0],i=this.confData.couplet_gridad[1],o=this._newCustomAdMap[e],n=this._newCustomAdMap[i];o?o.show():this.createNewCustomAd(e,this._styleVerl,!0),n?n.show():this.createNewCustomAd(i,this._styleVerR,!0)}}else if("s"==t&&this.confData.one_gridad&&this.confData.one_gridad.length>0){var a=this.confData.one_gridad[0],r=this._newCustomAdMap[a];r?r.show():this.createNewCustomAd(a,this._styleVerSL,!0)}},t.hideNewCustomAd=function(t){if("v"==t&&1==this.confData.open_couplet&&this.confData.couplet_gridad.length>0){var i=this._newCustomAdMap[e.confData.couplet_gridad[0]],o=this._newCustomAdMap[e.confData.couplet_gridad[1]];i&&i.hide(),o&&o.hide()}else if("s"==t&&this.confData.one_gridad.length>0){var n=this._newCustomAdMap[this.confData.one_gridad[0]];n&&n.hide()}},t.isShowCustom=function(t,i){i?e.showNewCustomAd("v"):e.hideNewCustomAd("v")},t.getWxMenuPos=function(){if(window.wx){var t=window.wx.getMenuButtonBoundingClientRect(),e=this.system.screenWidth,i=cc.view.getVisibleSize().width/e;return t.left*=i,t.bottom*=i,t}return{bottom:84,height:32,left:556,right:365,top:10,width:87}},t.delayShowCloseBtn=function(t,e){var i=function(){e&&cc.isValid(e)&&t&&t()};null!=this.confData.close_btn_show_sec&&this.confData.close_btn_show_sec>=0?setTimeout(function(){i()},1e3*this.confData.close_btn_show_sec):i()},t.setInterstitialJudge=function(t){this.interstitialJudge=t},t.showDialogInterstitial=function(t){var e=this;if(this.dialogInterstitialCount++,null!=this.confData.toast_insertad_sec&&this.confData.toast_insertad_sec>=0){if(null!=this.confData.toast_showad_num&&this.confData.toast_showad_num>0&&this.dialogInterstitialCount<this.confData.toast_showad_num)return;null!=this.confData.toast_insertad_cd&&this.confData.toast_insertad_cd>0&&this.dialogInterstitialCount%this.confData.toast_insertad_cd==0&&setTimeout(function(){t&&t.active&&e.showInterstitial()},1e3*this.confData.toast_insertad_sec)}},t.showInterstitial=function(){var t=this;if((!t.interstitialJudge||!t.interstitialJudge())&&!(t.getMinOnlineSec()>u.default.getOnlineTime())&&t.isInterstitialAdClose&&window.wx&&null!=t.confData.insertad_id&&!(t.confData.insertad_id.length<=0)){var e=t.confData.insertad_id[t.insertAdNum];t.insertAdNum=(t.insertAdNum+1)%t.confData.insertad_id.length,console.log("show interstitial");var i=function e(){t.isInterstitialAdClose=!1,u.default.setOwnInterstitial(!1),t.InterstitialAd.offLoad(e),t.InterstitialAd.show().catch(function(e){console.error("show",e),e&&(u.default.setOwnInterstitial(!0),t.isInterstitialAdClose=!0)})},o=function(){t.isInterstitialAdClose=!0},n=function(e){console.log("\u663e\u793a\u5931\u8d25e>>>",e),u.default.setOwnInterstitial(!0),t.isInterstitialAdClose=!0};t.InterstitialAd&&(t.InterstitialAd.offLoad(i),t.InterstitialAd.offClose(o),t.InterstitialAd.offError(n),t.InterstitialAd.destroy(),t.InterstitialAd=null),t.InterstitialAd=wx.createInterstitialAd({adUnitId:e}),t.InterstitialAd.onLoad(i),t.InterstitialAd.onClose(o),t.InterstitialAd.onError(n),t.InterstitialAd.load()}},t.initGrids=function(){if(window.wx){var t=this.system.windowWidth;if(this.confData.rec_gridad&&this.confData.rec_gridad.length>0){var e={left:(t-360)/2,top:100,width:360};this.createGrid(this.confData.rec_gridad[0],e)}}},t.createGrid=function(t,e,i,o){var n=this;if(void 0===o&&(o=!1),window.wx){var a=window.wx.createCustomAd({adUnitId:t,style:e}),r=function(){a.offLoad(),a.offError()};a.onError(function(e){console.error("createGrid error",t,e),r(),i&&i()}),a.onLoad(function(e){console.log("createGrid success",t,e),r(),n.gridAds[t]=a,o&&a.show().then(function(){console.log("gird\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(){console.log("gird\u5e7f\u544a\u663e\u793a\u5931\u8d25")}),i&&i()})}},t.showGrid=function(t,e,i){var o=this.gridAds[t];console.log("\u683c\u5b50\u5e7f\u544a",o),o?(o.show(),i&&i()):this.createGrid(t,e,i,!0)},t.hideGrid=function(){for(var t in this.gridAds)this.gridAds[t].hide()},t.checkDayDatas=function(){var t=this.getLocalVal("every_day");if(t){var e=(new Date).getDate()+1;t!=e&&(this.setLocalVal("cur_video_num",0),this.setLocalVal("cur_share_num",0),this.setLocalVal("every_day",e))}else t=(new Date).getDate()+1,this.setLocalVal("cur_video_num",0),this.setLocalVal("cur_share_num",0),this.setLocalVal("every_day",t);this.cur_share_num=this.getLocalVal("cur_share_num"),this.cur_video_num=this.getLocalVal("cur_video_num")},t.getLocalVal=function(t){return Number(wx.getStorageSync(t))},t.setLocalVal=function(t,e){wx.setStorageSync(t,e)},t.setUmaOpenid=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&window.wx.uma&&window.wx.uma.setOpenid&&window.wx.uma.setOpenid(t)},t.umaStart=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&window.wx.uma&&window.wx.uma.stage},t.umaTrackEvent=function(t,e){cc.sys.platform===cc.sys.WECHAT_GAME&&window.wx.uma&&window.wx.uma.trackEvent&&(e?window.wx.uma.trackEvent(t,{act:e}):window.wx.uma.trackEvent(t))},t.checkArea=function(t){var e=c.default.ipArea;if(null==e||""==e||null==t||0==t.length)return!1;for(var i=0;i<t.length;i++)if(""!=t[i]&&-1!=e.lastIndexOf(t[i]))return!0;return!1},t.isRedbagOpen=function(){return 1==this.getConfigByScene("open_redbag",0)},t.getFloatRedLimit=function(){return this.getConfigByScene("float_red_limit",0)},t.getFloatRedAppearTime=function(){return this.getServerValue("float_red_appear_time",0)},t.getFloatRedTotal=function(){return this.getServerValue("float_red_total",0)},t.getFloatRedReward=function(){return this.getServerValue("float_red_reward",[1,1])},t.getFloatUIType=function(){return this.getServerValue("float_ui_type",1)},t.isPowerOpen=function(){return this.isEqualsValue("open_power",1)},t.getPowerReward=function(){return this.getServerValue("power_video_reward",2)},t.getPowerLimit=function(){return this.getServerValue("power_limit",20)},t.getPowerPrime=function(){return this.getServerValue("power_prime",this.getPowerLimit())},t.getPowerCost=function(){return this.getServerValue("power_cost",1)},t.getRecoverTime=function(){var t=this.getServerValue("power_recover_spe",[1,1]);return t[1]?Math.ceil(60*t[0]/t[1]):2},t.getRedToastLimit=function(){return this.confData.red_toast_limit&&this.confData.red_toast_limit>0?this.confData.red_toast_limit:0},t.getGlobalProcess=function(){return this.getConfigByScene("global_process",[1,2])},t.getFirstStartGame=function(){return this.getServerValue("first_start_game",0)},t.getBgColor=function(){var t=cc.color(255,255,255,255);return this.confData.rec_bg_color&&(t=cc.color(Number(this.confData.rec_bg_color[0])||255,Number(this.confData.rec_bg_color[1])||255,Number(this.confData.rec_bg_color[2])||255,Number(this.confData.rec_bg_color[3])||255)),t},t.getRecNextBtnDelaySec=function(){return this.getConfigByScene("rec_next_btn_delay_sec",0)},t.getRecNextBtnClickNum=function(){return this.getConfigByScene("rec_next_btn_click_num",1)},t.getBottomAdShowSec=function(){var t=[1,1];return this.confData.bottom_ad_show_sec&&(t[0]=Number(this.confData.bottom_ad_show_sec[0])||1,t[1]=Number(this.confData.bottom_ad_show_sec[1])||1),t},t.getRecBottomAdType=function(){return this.getConfigByScene("rec_bottom_ad_type",0)},t.getStartVideo=function(){return this.getConfigByScene("start_video",0)},t.getStartVideoLimit=function(){return this.getConfigByScene("start_video_limit",0)},t.getBxBottomAdType=function(){return this.getConfigByScene("bx_bottom_ad_type",0)},t.getBxClickAddPer=function(){return this.getServerValue("bx_click_add_per",20)},t.getBxReduceValue=function(){return this.getServerValue("bx_reduce_value",20)},t.getBxShowAdPoint=function(){return this.getServerValue("bx_show_ad_point",[20,40])},t.getAutoVideo=function(){return this.getConfigByScene("auto_video",0)},t.getAutoVideoLimit=function(){return this.getConfigByScene("auto_video_limit",0)},t.getMinOnlineSec=function(){return this.getServerValue("min_online_sec",1)},t.isExportOpen=function(){return this.isEqualsValue("open_export",1)},t.getExchangeDesc=function(){return this.getServerValue("follow_desc","\u8f93\u5165\u5151\u6362\u7801\uff0c \u83b7\u5f97\u4e30\u539a\u5956\u52b1!")},t.getExportData=function(t){var e=[];null==t&&(t=function(){return!0});for(var i=this.confData.box_info||[],o=0;o<i.length;o++)t(i[o])&&(e[e.length]=i[o]);return e},t.isEqualsValue=function(t,e){return!(!this.confData||!this.confData[t])&&this.confData[t]==e},t.getServerValue=function(t,e){return this.confData&&this.confData[t]?this.confData[t]:e},t.getConfigByScene=function(t,e){var i=null;if(this.confData&&this.confData[t]){var o=this.confData[t];null==(i=o[this.scene])&&(i=o.default)}return null!=i?i:e},t.isSDKInit=!1,t.banner_refresh_time=30,t.isBannerShow=!1,t.bannerShowTime=0,t.insertAdNum=0,t.isInterstitialAdClose=!0,t.mBannerBottomLap=null,t.mBannerInfo=null,t.bannerList=[],t.curBanner=0,t.dialogInterstitialCount=0,t.scene=0,t.cur_share_num=0,t.cur_video_num=0,t.ctrl_index=0,t.show_video_num=0,t.videoNum=0,t.bannerRecreateNum=0,t.seleIndx=0,t.videoSuccCB=null,t.isWaitVideo=!1,t.shareTime=0,t.shareData=null,t.shareIds={},t._styleVerl=null,t._styleVerR=null,t._styleHor=null,t._styleVerSL=null,t._newCustomAdMap={},t.InterstitialAd=null,t.gridAds={},e=o([m("SDKMgr")],t)}();i.default=g,cc._RF.pop()},{GameEnums:"GameEnums",GameServerConf:"GameServerConf",PlatformAdManager:"PlatformAdManager",SDKConfig:"SDKConfig",SDKEnum:"SDKEnum",UIMgr:"UIMgr",WxMgr:"WxMgr",WxNetMgr:"WxNetMgr"}],SettingUI:[function(t,e,i){"use strict";cc._RF.push(e,"04ae1L4h7tN3r2W9xTLWMLC","SettingUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseDialog"),c=t("ComToggle"),l=t("GameEnums"),d=t("MainConfig"),u=t("SDKMgr"),p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toggleMusic=null,e.toggleSound=null,e.toggleVibrate=null,e.nodeGame=null,e.btnBack=null,e.btnClose=null,e.btnReplay=null,e.btnPrivacy=null,e.isGame=!1,e.gameType=l.GAME_TYPE.COMMON,e.curLevel=0,e}return o(e,t),e.prototype.init=function(){var t=this;this.onClick(this.btnBack,this.onClickHome,this),this.onClick(this.btnReplay,this.onClickReplay,this),this.onClick(this.btnClose,this.onClickClose,this),this.onClick(this.btnPrivacy,function(){console.log("\u70b9\u51fb\u4e86\u9690\u79c1\u653f\u7b56");var t=window.parent?window.parent:window,e=null==t?void 0:t.AndroidBridge;null==e||e.startWebView("\u9690\u79c1\u653f\u7b56")},this),this.toggleMusic.setData(function(e){t.setSettingStatus(l.SETTING_TYPE.MUSIC,e)}),this.toggleSound.setData(function(e){t.setSettingStatus(l.SETTING_TYPE.EFFECT,e)}),this.toggleVibrate.setData(function(e){t.setSettingStatus(l.SETTING_TYPE.VIBRATE,e)})},e.prototype.addCurrency=function(){return a(this,void 0,void 0,function(){return r(this,function(){return[2]})})},e.prototype.open=function(){t.prototype.open.call(this),this.isGame=this.arg.isGame||!1,this.gameType=this.arg.gameType||l.GAME_TYPE.COMMON,this.curLevel=this.arg.level||0,this.closeCb=this.arg.callback,this.isGame&&ymtApp.viewMgr.showCurrency(this.name,[{itemId:l.ITEM_ID.COIN},{itemId:l.ITEM_ID.STRENGTH}]),this.initView()},e.prototype.initView=function(){var t=this;if(this.setToggleStatus(l.SETTING_TYPE.MUSIC,this.toggleMusic),this.setToggleStatus(l.SETTING_TYPE.EFFECT,this.toggleSound),this.setToggleStatus(l.SETTING_TYPE.VIBRATE,this.toggleVibrate),this.nodeGame.active=this.isGame,this.isGame){ymtApp.gameController.isAdInter(l.FORCE_VIDEO_TYPE.SETTING)&&u.default.showInterstitial();var e=ymtApp.gameController.getForceReward(l.FORCE_VIDEO_TYPE.SETTING);e&&e.length>0&&u.default.showVideo(function(){ymtApp.gameController.dotGameVideo(t.gameType,t.curLevel+1),ymtApp.gameController.addItemList(e)})}},e.prototype.onClickHome=function(){ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_HOME),this.closeCb&&this.closeCb(!0),this.onClickClose()},e.prototype.onClickReplay=function(){var t=this;ymtApp.gameController.dotGameStr(l.DOT_TYPE.SUM_GAME_ST_AGAIN),ymtApp.gameController.isStrengthEnough()?(this.onClickClose(),this.closeCb&&this.closeCb(!1)):ymtApp.viewMgr.showView(d.UI.STRENGTH,{callback:function(e){return a(t,void 0,void 0,function(){return r(this,function(){return 0!=e&&(this.onClickClose(),this.closeCb&&this.closeCb(!1),ymtApp.viewMgr.hideView(d.UI.STRENGTH)),[2]})})}})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(d.UI.SETTING)},e.prototype.setSettingStatus=function(t,e){ymtApp.gameController.setSettingStatus(t,e?1:0)},e.prototype.setToggleStatus=function(t,e){var i=ymtApp.gameController.getSettingStatus(t);e.setToggleStatue(1==i,!1)},n([f(c.default)],e.prototype,"toggleMusic",void 0),n([f(c.default)],e.prototype,"toggleSound",void 0),n([f(c.default)],e.prototype,"toggleVibrate",void 0),n([f(cc.Node)],e.prototype,"nodeGame",void 0),n([f(cc.Node)],e.prototype,"btnBack",void 0),n([f(cc.Node)],e.prototype,"btnClose",void 0),n([f(cc.Node)],e.prototype,"btnReplay",void 0),n([f(cc.Node)],e.prototype,"btnPrivacy",void 0),n([h],e)}(s.default);i.default=m,cc._RF.pop()},{BaseDialog:"BaseDialog",ComToggle:"ComToggle",GameEnums:"GameEnums",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],ShopItem:[function(t,e,i){"use strict";cc._RF.push(e,"14973axDWVAAZO4CQFTsF05","ShopItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("GameEnums"),s=t("SDKMgr"),c=t("./XDAD/XDADpublic").default,l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labName=null,e.sprIcon=null,e.labNum=null,e.btnVideo=null,e.btnCost=null,e.labCost=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnVideo,this.onClickVideo,this),this.onClick(this.btnCost,this.onClickCost,this)},e.prototype.setData=function(t){var e;this.curData=t;var i=ymtApp.cons.getItemCfg(null===(e=t.reward)||void 0===e?void 0:e.itemId);this.labName.string=i.name.toLocalize(),ymtApp.spriteMgr.loadImg(this.sprIcon,"sprite/icon/"+i.icon,null,{height:80,width:80,isAdaptMin:!0}),this.btnVideo.active=t.video>0,this.btnCost.active=t.cost>0,this.labNum.string="x"+(this.curData.reward.amount||1),this.labCost.string=""+t.cost},e.prototype.onClickVideo=function(){var t=this;c.showXDAD(),s.default.showVideo(function(){ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_COINSHOP),t.showReward()})},e.prototype.onClickCost=function(){if(this.curData.cost){if(ymtApp.gameController.getItemNum(r.ITEM_ID.COIN)<this.curData.cost)return void ymtApp.viewMgr.showToast("\u91d1\u5e01\u4e0d\u8db3".toLocalize());ymtApp.gameController.addItem(r.ITEM_ID.COIN,-this.curData.cost),this.showReward()}},e.prototype.showReward=function(){ymtApp.gameController.addItem(this.curData.reward.itemId,this.curData.reward.amount||1,!0),ymtApp.viewMgr.showReward([this.curData.reward])},n([u(cc.Label)],e.prototype,"labName",void 0),n([u(cc.Node)],e.prototype,"sprIcon",void 0),n([u(cc.Label)],e.prototype,"labNum",void 0),n([u(cc.Node)],e.prototype,"btnVideo",void 0),n([u(cc.Node)],e.prototype,"btnCost",void 0),n([u(cc.Label)],e.prototype,"labCost",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseComponent:"BaseComponent",GameEnums:"GameEnums",SDKMgr:"SDKMgr"}],SignView:[function(t,e,i){"use strict";cc._RF.push(e,"f27cd240Q9NC4+dU8uGmKz0","SignView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("MainConfig"),s=t("SDKEnum"),c=t("SDKMgr"),l=t("UIMgr"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprLight=null,e.btnClose=null,e.btnGet=null,e.isWatchAd=!1,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.init()},e.prototype.init=function(){this.onClick(this.btnClose,this.onBack,this),this.onClick(this.btnGet,this.onClickCenter,this)},e.prototype.open=function(){var e=this;t.prototype.open.call(this),this.btnClose.active=!1,c.default.delayShowCloseBtn(function(){e.btnClose.active=!0},this),this.showInterstitial()},e.prototype.onClickCenter=function(){this.isWatchAd?this.onBack():c.default.showVideo(function(){l.default.onClickType(s.CLICK_TYPE.SIGN),ymtApp.viewMgr.hideView(r.UI.SIGN_VIEW)},null,null,s.VIDEO_TYPE.LOGIN_REWARD)},e.prototype.onBack=function(){this.doCloseAct(function(){ymtApp.viewMgr.hideView(r.UI.SIGN_VIEW)})},n([p(cc.Node)],e.prototype,"sprLight",void 0),n([p(cc.Node)],e.prototype,"btnClose",void 0),n([p(cc.Node)],e.prototype,"btnGet",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",MainConfig:"MainConfig",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],Singleton:[function(t,e,i){"use strict";cc._RF.push(e,"ba13dgh06lBLIHJk4jV2LHj","Singleton"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t.getInstance=function(){return this.__instance||(this.__instance=new this),this.__instance},t.destroyInstance=function(){this.__instance&&(this.__instance=null)},t}();i.default=o,cc._RF.pop()},{}],SkinItem:[function(t,e,i){"use strict";cc._RF.push(e,"73758ovsT5ICpvYRrbQ4ZCY","SkinItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("LocalizeMgr"),r=t("BaseComponent"),s=t("GameEnums"),c=t("SDKMgr"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprSele=null,e.sprIcon=null,e.nodeLock=null,e.video=null,e.labLevel=null,e.skinLockCfg=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.node,this.onClickSele,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.SKIN_CHANGE,this.updateStatus,this)},e.prototype.setData=function(t,e){this.skinType=t,this.skinId=e,this.updateSkin(),this.updateStatus()},e.prototype.updateSkin=function(){this.skinLockCfg=ymtApp.gameController.getSkinLockCfg(this.skinType,this.skinId),this.labLevel.string="\u5173\u5361".toLocalize()+""+(this.skinLockCfg.level||0);var t="";this.skinType==s.SKIN_TYPE.GRILL?t="sprite/skin/grill/grill_"+this.skinId+"_1":this.skinType==s.SKIN_TYPE.PLATE&&(t="sprite/skin/plate/plate_"+this.skinId+"_1"),ymtApp.spriteMgr.loadImg(this.sprIcon,t,s.BUNDLENAME.RES,{width:120,isScale:!0})},e.prototype.updateStatus=function(){var t=ymtApp.gameController.getSkinStatus(this.skinType,this.skinId);this.labLevel.node.active=t==s.SKIN_STATUS.LOCK,this.nodeLock.active=t==s.SKIN_STATUS.LOCK||t==s.SKIN_STATUS.VIDEO,this.video.active=t==s.SKIN_STATUS.VIDEO,this.sprSele.active=t==s.SKIN_STATUS.USING},e.prototype.onClickSele=function(){var t=this,e=ymtApp.gameController.getSkinStatus(this.skinType,this.skinId);e!=s.SKIN_STATUS.USING&&(e==s.SKIN_STATUS.VIDEO?(ymtApp.gameController.dotGameStr(s.DOT_TYPE.VID_SKIN),this.dotSkin(!1),c.default.showVideo(function(){ymtApp.gameController.changeSkinStatus(t.skinType,t.skinId,s.SKIN_STATUS.USING),ymtApp.gameController.dotGameStr(s.DOT_TYPE.VID_SKIN_SUC),t.dotSkin(!0)})):e==s.SKIN_STATUS.LOCK?ymtApp.viewMgr.showToast(a.LocalizeMgr.inst.toLocalize("\u901a\u5173{0}\u5173\u540e\u89e3\u9501",[String(this.skinLockCfg.level)])):ymtApp.gameController.changeSkinStatus(this.skinType,this.skinId,s.SKIN_STATUS.USING))},e.prototype.dotSkin=function(t){this.skinType==s.SKIN_TYPE.GRILL?t?ymtApp.gameController.dotGameStr("get_pifu"+this.skinId):ymtApp.gameController.dotGameStr("click_pifu"+this.skinId):this.skinType==s.SKIN_TYPE.PLATE&&(t?ymtApp.gameController.dotGameStr("get_panzi"+this.skinId):ymtApp.gameController.dotGameStr("click_panzi"+this.skinId))},n([u(cc.Node)],e.prototype,"sprSele",void 0),n([u(cc.Node)],e.prototype,"sprIcon",void 0),n([u(cc.Node)],e.prototype,"nodeLock",void 0),n([u(cc.Node)],e.prototype,"video",void 0),n([u(cc.Label)],e.prototype,"labLevel",void 0),n([d],e)}(r.default);i.default=p,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",LocalizeMgr:"LocalizeMgr",SDKMgr:"SDKMgr"}],SkinRewardUI:[function(t,e,i){"use strict";cc._RF.push(e,"ff819nUvhhFYLEeVbFolxOZ","SkinRewardUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("CenterLayout"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.skinItem=null,e.skinList=[],e.skins=[],e}return o(e,t),e.prototype.open=function(){var e=this;t.prototype.open.call(this),this.skins=this.arg.skins||[];var i=this.skins.length>4?.8:1.2;this.layout.getComponent(r.default).spacingX=this.skins.length>2?-10:-70,ymtApp.nodeMgr.addListItemSelf(this.skins.length,this.skinList,this.skinItem,this.layout,function(t,o){t.scale=i;var n=e.skins[o],a=e.seekChild(t,"sprIcon"),r="";n.type==s.SKIN_TYPE.GRILL?r="sprite/skin/grill/grill_"+n.id+"_1":n.type==s.SKIN_TYPE.PLATE&&(r="sprite/skin/plate/plate_"+n.id+"_1"),ymtApp.spriteMgr.loadImg(a,r,s.BUNDLENAME.RES,{width:200,isScale:!0})});var o=l.default.I.skinUnlockShowTime||3;this.scheduleOnce(function(){ymtApp.viewMgr.hideView(c.UI.SKIN_REWARD),e.arg.callback&&e.arg.callback()},o)},n([p(cc.Node)],e.prototype,"layout",void 0),n([p(cc.Node)],e.prototype,"skinItem",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",CenterLayout:"CenterLayout",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig"}],SkinUI:[function(t,e,i){"use strict";cc._RF.push(e,"35a21e4DP5Dq4sEZXIYFKEz","SkinUI");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseUI"),c=t("SkinItem"),l=t("GameEnums"),d=t("MainConfig"),u=t("GameServerConf"),p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprBg=null,e.btnBack=null,e.sprGrill1=null,e.sprPlate1=null,e.sprShadow1=null,e.sprGrill2=null,e.sprPlate2=null,e.sprShadow2=null,e.toggleGrill=null,e.togglePlate=null,e.scrollSkin=null,e.content=null,e.skinItem=null,e.curType=l.SKIN_TYPE.GRILL,e.skinList=[],e}return o(e,t),e.prototype.init=function(){return a(this,void 0,void 0,function(){return r(this,function(){return this.onClick(this.btnBack,this.onClickBack,this),[2]})})},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.SKIN_CHANGE,this.updateStatus,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:l.ITEM_ID.COIN}]),this.curType=l.SKIN_TYPE.GRILL,this.toggleGrill.check(),this.togglePlate.uncheck(),this.seleType()},e.prototype.seleType=function(){var t=this,e=u.default.I.skinUnlockCfg[this.curType]||[];ymtApp.nodeMgr.addListItemSelf(e.length,this.skinList,this.skinItem,this.content,function(i,o){i.getComponent(c.default).setData(t.curType,e[o].id)}),this.scrollSkin.scrollToTop(),this.updateGrill(),this.updatePlate()},e.prototype.updateGrill=function(){var t=ymtApp.gameController.getCurSkinId(l.SKIN_TYPE.GRILL);ymtApp.spriteMgr.loadImg(this.sprGrill1,"sprite/skin/grill/grill_"+t+"_1",l.BUNDLENAME.RES),ymtApp.spriteMgr.loadImg(this.sprGrill2,"sprite/skin/grill/grill_"+t+"_1",l.BUNDLENAME.RES)},e.prototype.updatePlate=function(){var t=ymtApp.gameController.getCurSkinId(l.SKIN_TYPE.PLATE);ymtApp.spriteMgr.loadImg(this.sprPlate1,"sprite/skin/plate/plate_"+t+"_1",l.BUNDLENAME.RES),ymtApp.spriteMgr.loadImg(this.sprPlate2,"sprite/skin/plate/plate_"+t+"_1",l.BUNDLENAME.RES),ymtApp.spriteMgr.loadImg(this.sprShadow1,"sprite/skin/plate/plate_"+t+"_1_shadow",l.BUNDLENAME.RES),ymtApp.spriteMgr.loadImg(this.sprShadow2,"sprite/skin/plate/plate_"+t+"_1_shadow",l.BUNDLENAME.RES)},e.prototype.updateStatus=function(t){(null==t?void 0:t.type)==l.SKIN_TYPE.GRILL?this.updateGrill():(null==t?void 0:t.type)==l.SKIN_TYPE.PLATE&&this.updatePlate()},e.prototype.onClickBack=function(){ymtApp.viewMgr.hideView(d.UI.SKIN)},e.prototype.onToggleGrill=function(){this.curType=l.SKIN_TYPE.GRILL,this.seleType()},e.prototype.onTogglePlate=function(){this.curType=l.SKIN_TYPE.PLATE,this.seleType()},n([f(cc.Sprite)],e.prototype,"sprBg",void 0),n([f(cc.Node)],e.prototype,"btnBack",void 0),n([f(cc.Node)],e.prototype,"sprGrill1",void 0),n([f(cc.Node)],e.prototype,"sprPlate1",void 0),n([f(cc.Node)],e.prototype,"sprShadow1",void 0),n([f(cc.Node)],e.prototype,"sprGrill2",void 0),n([f(cc.Node)],e.prototype,"sprPlate2",void 0),n([f(cc.Node)],e.prototype,"sprShadow2",void 0),n([f(cc.Toggle)],e.prototype,"toggleGrill",void 0),n([f(cc.Toggle)],e.prototype,"togglePlate",void 0),n([f(cc.ScrollView)],e.prototype,"scrollSkin",void 0),n([f(cc.Node)],e.prototype,"content",void 0),n([f(cc.Node)],e.prototype,"skinItem",void 0),n([h],e)}(s.default);i.default=m,cc._RF.pop()},{BaseUI:"BaseUI",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SkinItem:"SkinItem"}],SpineMgr:[function(t,e,i){"use strict";cc._RF.push(e,"562d6FPhOJF14tMmkbkIpR4","SpineMgr");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.playSpineAnimation=function(t,e,i,o){void 0===i&&(i=!1),t.setAnimation(0,e,i);var n=t.getCurrent(0);t.setTrackCompleteListener(n,function(){o&&o()})},e.prototype.getCloneSK=function(t){var e=new sp.SkeletonData;return e.skeletonJson=JSON.stringify(t.skeletonJson),e.atlasText=t.atlasText,e.textures=t.textures,e.textureNames=["4.png"],e},e.prototype.swapSpineSpr=function(t,e,i,o,n){void 0===n&&(n="default"),e.handleLoadedTexture(!0);var a=this.getAtt(t,i,o,n),r=this.createRegion(e);a.region=r,a.setRegion&&a.setRegion(r),a.updateOffset&&a.updateOffset()},e.prototype.getAtt=function(t,e,i,o){void 0===o&&(o="default");var n=o,a=t.skeletonData.getRuntimeData(),r=a.findSlotIndex(e);return a.findSkin(n).getAttachment(r,i)},e.prototype.createRegion=function(t){var e=new sp.SkeletonTexture;e.setRealTexture(t);var i=new sp.spine.TextureAtlasPage;i.name=t.name,i.uWrap=sp.spine.TextureWrap.ClampToEdge,i.vWrap=sp.spine.TextureWrap.ClampToEdge,i.texture=e,i.texture.setWraps(i.uWrap,i.vWrap),i.width=t.width,i.height=t.height;var o=new sp.spine.TextureAtlasRegion;return o.page=i,o.width=t.width,o.height=t.height,o.originalWidth=t.width,o.originalHeight=t.height,o.rotate=!1,o.u=0,o.v=0,o.u2=1,o.v2=1,o.texture=e,o},e}(t("Singleton").default);i.default=n,cc._RF.pop()},{Singleton:"Singleton"}],SpriteMgr:[function(t,e,i){"use strict";cc._RF.push(e,"32121N+FXtBb4HMze7G7N8o","SpriteMgr");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("Singleton"),c=cc._decorator,l=c.ccclass;c.property;var d={GRAY_SPRITE:null,SPRITE:null},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteCaches={},e}return o(e,t),e.prototype.addSpriteToCaches=function(t,e){t&&e&&(this.spriteCaches[t]=e)},e.prototype.getSpriteFromCaches=function(t){return this.spriteCaches[t]?this.spriteCaches[t]:null},e.prototype.loadAdImage=function(t,e){if(this.spriteCaches[e]){var i={width:t.node.width,height:t.node.height};t.spriteFrame=this.spriteCaches[e],t.node.width=i.width,t.node.height=i.height}else this.loadNetImage(t,e,!0)},e.prototype.loadNetImage=function(t,e,i){var o=this;if(void 0===i&&(i=!1),null!=e&&""!=e){var n={width:t.node.width,height:t.node.height};ymtApp.resMgr.loadRemoteWithSuffix(e,{ext:".png"},function(a,r){if(!a){var s=new cc.SpriteFrame(r);t.spriteFrame=s,t.node.width=n.width,t.node.height=n.height,i&&o.addSpriteToCaches(e,s)}})}},e.prototype.loadImg=function(t,e,i,o,n){return a(this,void 0,void 0,function(){var a,s,c,l,d=this;return r(this,function(r){switch(r.label){case 0:return a=null,(a=t instanceof cc.Node?t.getComponent(cc.Sprite):t)?(s=cc.v2(1,1),[4,ymtApp.resMgr.getSpriteFrame(e,i)]):[2];case 1:return(c=r.sent())&&a?(a.spriteFrame=c,o&&(s=this.adaptSpriteSize(a.node,o)),n&&n(s),[2]):(l=null!=i?{url:e,type:cc.SpriteFrame,bundleName:i}:e,ymtApp.resMgr.loadRes(l,cc.SpriteFrame,!0,function(t,e){t||null==a||null==a.node?console.error("loadImg url : ",l,t):(a.spriteFrame=e,o&&(s=d.adaptSpriteSize(a.node,o)),n&&n(s))}),[2])}})})},e.prototype.setSpriteGray=function(t,e){t?(d.SPRITE=d.SPRITE||cc.Material.getBuiltinMaterial(""+cc.Material.BUILTIN_NAME.SPRITE),d.GRAY_SPRITE=d.GRAY_SPRITE||cc.Material.getBuiltinMaterial(""+cc.Material.BUILTIN_NAME.GRAY_SPRITE),t.setMaterial(0,e?d.GRAY_SPRITE:d.SPRITE)):console.warn("[SpriteUtils] com == null")},e.prototype.setChildrenGray=function(t,e){if(t instanceof cc.Node){var i=t.getComponent(cc.RenderComponent);this.setSpriteGray(i,e)}for(var o=t.getComponentsInChildren(cc.RenderComponent),n=0;n<o.length;n++)this.setSpriteGray(o[n],e)},e.prototype.adaptNodeSize=function(t,e,i,o){var n,a,r;void 0===o&&(o=!0),t&&(e&&(r=n=e/t.width),i&&(r=a=i/t.height),null!=n&&null!=a?o?(t.scaleX=n,t.scaleY=a):(t.width=t.width*n,t.height=t.height*a):null!=r&&(o?t.scale=r:(t.width=t.width*r,t.height=t.height*r)))},e.prototype.adaptSpriteSize=function(t,e){if(t&&e){var i,o,n;null!=e.width&&(i=e.width/t.width),null!=e.height&&(o=e.height/t.height),null==i||null==o?n=i||o||1:e.isAdaptMax?n=Math.max(i,o):e.isAdaptMin&&(n=Math.min(i,o));var a=cc.v2(1,1);return e.isScale?null!=n?(t.scale=n,a=cc.v2(n,n)):(null!=i&&(t.scaleX=i,a.x=i),null!=o&&(t.scaleY=o,a.y=o)):null!=n?(t.width*=n,t.height*=n,a=cc.v2(n,n)):(null!=i&&(t.width*=i,a.x=i),null!=o&&(t.height*=o,a.y=o)),a}},n([l],e)}(s.default);i.default=u,cc._RF.pop()},{Singleton:"Singleton"}],StrengthUI:[function(t,e,i){"use strict";cc._RF.push(e,"26470c+rqFPL6yl7V0jFtKd","StrengthUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=t("GameServerConf"),l=t("UIMgr"),d=t("SDKMgr"),u=t("./XDAD/XDADpublic").default,p=cc._decorator,h=p.ccclass,f=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labNum=null,e.labTime=null,e.btnVideo=null,e.labNum1=null,e.btnCost=null,e.labNum2=null,e.labCost=null,e.btnClose=null,e.addCount=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnVideo,this.onClickVideo,this),this.onClick(this.btnCost,this.onClickCost,this),this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.STRENGTH_CHANGE,this.onStrengthChange,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:r.ITEM_ID.COIN},{itemId:r.ITEM_ID.STRENGTH,isHideAdd:!0}]),this.arg=this.arg||{},this.callback=this.arg.callback,ymtApp.gameController.dotGameStr(r.DOT_TYPE.OPEN_POWER);var e=c.default.I.strengthCfg||{};this.labNum1.string="+"+(e.video||1),this.labNum2.string="+"+(e.costAdd||3),this.onStrengthChange()},e.prototype.onClickVideo=function(){var t=this;u.showXDAD(),d.default.showVideo(function(){var e;ymtApp.gameController.addItem(r.ITEM_ID.STRENGTH,(null===(e=c.default.I.strengthCfg)||void 0===e?void 0:e.video)||3),ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_POWER),t.callback&&t.callback(2)})},e.prototype.onClickCost=function(){var t,e;ymtApp.gameController.getItemNum(r.ITEM_ID.COIN)<100?ymtApp.viewMgr.showToast("\u91d1\u5e01\u4e0d\u8db3".toLocalize()):(ymtApp.gameController.addItem(r.ITEM_ID.COIN,-(null===(t=c.default.I.strengthCfg)||void 0===t?void 0:t.costValue)||100),ymtApp.gameController.addItem(r.ITEM_ID.STRENGTH,(null===(e=c.default.I.strengthCfg)||void 0===e?void 0:e.costAdd)||1),this.callback&&this.callback(1))},e.prototype.onClickClose=function(){this.callback&&this.callback(0),ymtApp.viewMgr.hideView(s.UI.STRENGTH)},e.prototype.onStrengthChange=function(){var t=l.default.getRecoveryTime();this.labNum.string=""+l.default.getStrength();var e=ymtApp.gameController.getServerTime();if(0==t||t<e)this.labTime.string="Max";else{var i=Math.ceil((t-e)/1e3)%d.default.getRecoverTime();this.labTime.string=ymtApp.utils.formatTime(i,"HH:mm:ss")}},e.prototype.updateTime=function(t){l.default.getRecoveryTime()>0&&(this.addCount+=t,this.addCount>1&&(this.addCount-=1,this.onStrengthChange()))},n([f(cc.Label)],e.prototype,"labNum",void 0),n([f(cc.Label)],e.prototype,"labTime",void 0),n([f(cc.Node)],e.prototype,"btnVideo",void 0),n([f(cc.Label)],e.prototype,"labNum1",void 0),n([f(cc.Node)],e.prototype,"btnCost",void 0),n([f(cc.Label)],e.prototype,"labNum2",void 0),n([f(cc.Label)],e.prototype,"labCost",void 0),n([f(cc.Node)],e.prototype,"btnClose",void 0),n([h],e)}(a.default);i.default=m,cc._RF.pop()},{"./XDAD/XDADpublic":"XDADpublic",BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],SubContextView:[function(t,e,i){"use strict";cc._RF.push(e,"21b0aN6cNBAr6BbnVKg4Is6","SubContextView");var o,n=__extends,a=__decorate;Object.defineProperty(i,"__esModule",{value:!0}),i.SubRankType=void 0;var r,s=cc._decorator,c=s.ccclass,l=s.property,d=s.menu,u=s.requireComponent;(r=o=i.SubRankType||(i.SubRankType={}))[r.pass=0]="pass",r[r.friend=1]="friend",r[r.over=2]="over";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.friend,e.strongRender=!1,e}var i;return n(e,t),i=e,e.prototype.onLoad=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(this.openDataContext=wx.getOpenDataContext(),this.texture=new cc.Texture2D,this.sprite=this.node.getComponent(cc.Sprite),this.sprite.spriteFrame=new cc.SpriteFrame(this.texture),i.SubComponentArr.push(this),this.strongRender=this.type==o.friend)},e.prototype.onEnable=function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){for(var t=i.SubComponentArr.length-1;t>=0;t--){var e=i.SubComponentArr[t];e.type!==this.type&&(e.unscheduleAllCallbacks(),cc.isValid(e.node)?e.enabled=!1:i.SubComponentArr.splice(t,1))}this.updateSubContextViewport(),this.openDataContext.postMessage({key:o[this.type]}),this.strongRender||this.weakRender()}},e.prototype.onDestroy=function(){for(var t=i.SubComponentArr.length-1;t>=0;t--)if(i.SubComponentArr[t]==this){i.SubComponentArr.splice(t,1);break}},e.prototype.updateSubContextViewport=function(){this.openDataContext.canvas.width=this.node.width,this.openDataContext.canvas.height=this.node.height;var t=this.node.getBoundingBoxToWorld(),e=cc.view.getScaleX(),i=cc.view.getScaleY();this.openDataContext.postMessage({key:"viewport",value:{x:t.x*e+cc.view.getViewportRect().x,y:t.y*i+cc.view.getViewportRect().y,width:t.width*e,height:t.height*i}})},e.prototype.updatePassRank=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&(this.openDataContext.postMessage({key:"updatePass",value:t}),this.weakRender())},e.prototype.weakRender=function(){var t=this;this.unscheduleAllCallbacks(),this.schedule(function(){t.render()},.05,20)},e.prototype.render=function(){this.texture.initWithElement(this.openDataContext.canvas),this.sprite.spriteFrame.setTexture(this.texture)},e.prototype.update=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&this.strongRender&&this.render()},e.SubComponentArr=[],a([l({type:cc.Enum(o)})],e.prototype,"type",void 0),i=a([c,u(cc.Sprite),d("\u5b50\u57df\u7ec4\u4ef6")],e)}(cc.Component);i.default=p,cc._RF.pop()},{}],TJ:[function(t,e,i){"use strict";cc._RF.push(e,"d1f27z4KCJLOoK4cUpzZpdK","TJ");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0}),i.TJ=void 0;var r=t("YmtConstant"),s="TT_AppRt";(function(t){var e=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return""+this.value},t}();t.Num=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return Math.floor(this._value)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"javaSignature",{get:function(){return"I"},enumerable:!1,configurable:!0}),e}(e);t.Int=i;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"javaSignature",{get:function(){return"F"},enumerable:!1,configurable:!0}),e}(e);t.Float=c;var l=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return""+this.value},Object.defineProperty(t.prototype,"javaSignature",{get:function(){return"Z"},enumerable:!1,configurable:!0}),t}();t.Bool=l;var d=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return""+this.value},Object.defineProperty(t.prototype,"javaSignature",{get:function(){return"Ljava/lang/String;"},enumerable:!1,configurable:!0}),t}();t.Str=d;var u,p,h,f=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var i=this.rstr2binl(t);i.length>16&&(i=this.binl_md5(i,8*t.length));for(var o=Array(16),n=Array(16),a=0;a<16;a++)o[a]=909522486^i[a],n[a]=1549556828^i[a];var r=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(r),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(a){this.hexcase=0}for(var e,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",n=0;n<t.length;n++)e=t.charCodeAt(n),o+=i.charAt(e>>>4&15)+i.charAt(15&e);return o},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(r){this.b64pad=""}for(var e="",i=t.length,o=0;o<i;o+=3)for(var n=t.charCodeAt(o)<<16|(o+1<i?t.charCodeAt(o+1)<<8:0)|(o+2<i?t.charCodeAt(o+2):0),a=0;a<4;a++)8*o+6*a>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>>6*(3-a)&63);return e},t.prototype.rstr2any=function(t,e){var i,o,n,a,r,s=e.length,c=Array(Math.ceil(t.length/2));for(i=0;i<c.length;i++)c[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),d=Array(l);for(o=0;o<l;o++){for(r=Array(),a=0,i=0;i<c.length;i++)a=(a<<16)+c[i],a-=(n=Math.floor(a/s))*s,(r.length>0||n>0)&&(r[r.length]=n);d[o]=a,c=r}var u="";for(i=d.length-1;i>=0;i--)u+=e.charAt(d[i]);return u},t.prototype.str2rstr_utf8=function(t){for(var e,i,o="",n=-1;++n<t.length;)e=t.charCodeAt(n),i=n+1<t.length?t.charCodeAt(n+1):0,55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e=65536+((1023&e)<<10)+(1023&i),n++),e<=127?o+=String.fromCharCode(e):e<=2047?o+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e},t.prototype.binl2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,o=-271733879,n=-1732584194,a=271733878,r=0;r<t.length;r+=16){var s=i,c=o,l=n,d=a;i=this.md5_ff(i,o,n,a,t[r+0],7,-680876936),a=this.md5_ff(a,i,o,n,t[r+1],12,-389564586),n=this.md5_ff(n,a,i,o,t[r+2],17,606105819),o=this.md5_ff(o,n,a,i,t[r+3],22,-1044525330),i=this.md5_ff(i,o,n,a,t[r+4],7,-176418897),a=this.md5_ff(a,i,o,n,t[r+5],12,1200080426),n=this.md5_ff(n,a,i,o,t[r+6],17,-1473231341),o=this.md5_ff(o,n,a,i,t[r+7],22,-45705983),i=this.md5_ff(i,o,n,a,t[r+8],7,1770035416),a=this.md5_ff(a,i,o,n,t[r+9],12,-1958414417),n=this.md5_ff(n,a,i,o,t[r+10],17,-42063),o=this.md5_ff(o,n,a,i,t[r+11],22,-1990404162),i=this.md5_ff(i,o,n,a,t[r+12],7,1804603682),a=this.md5_ff(a,i,o,n,t[r+13],12,-40341101),n=this.md5_ff(n,a,i,o,t[r+14],17,-1502002290),o=this.md5_ff(o,n,a,i,t[r+15],22,1236535329),i=this.md5_gg(i,o,n,a,t[r+1],5,-165796510),a=this.md5_gg(a,i,o,n,t[r+6],9,-1069501632),n=this.md5_gg(n,a,i,o,t[r+11],14,643717713),o=this.md5_gg(o,n,a,i,t[r+0],20,-373897302),i=this.md5_gg(i,o,n,a,t[r+5],5,-701558691),a=this.md5_gg(a,i,o,n,t[r+10],9,38016083),n=this.md5_gg(n,a,i,o,t[r+15],14,-660478335),o=this.md5_gg(o,n,a,i,t[r+4],20,-405537848),i=this.md5_gg(i,o,n,a,t[r+9],5,568446438),a=this.md5_gg(a,i,o,n,t[r+14],9,-1019803690),n=this.md5_gg(n,a,i,o,t[r+3],14,-187363961),o=this.md5_gg(o,n,a,i,t[r+8],20,1163531501),i=this.md5_gg(i,o,n,a,t[r+13],5,-1444681467),a=this.md5_gg(a,i,o,n,t[r+2],9,-51403784),n=this.md5_gg(n,a,i,o,t[r+7],14,1735328473),o=this.md5_gg(o,n,a,i,t[r+12],20,-1926607734),i=this.md5_hh(i,o,n,a,t[r+5],4,-378558),a=this.md5_hh(a,i,o,n,t[r+8],11,-2022574463),n=this.md5_hh(n,a,i,o,t[r+11],16,1839030562),o=this.md5_hh(o,n,a,i,t[r+14],23,-35309556),i=this.md5_hh(i,o,n,a,t[r+1],4,-1530992060),a=this.md5_hh(a,i,o,n,t[r+4],11,1272893353),n=this.md5_hh(n,a,i,o,t[r+7],16,-155497632),o=this.md5_hh(o,n,a,i,t[r+10],23,-1094730640),i=this.md5_hh(i,o,n,a,t[r+13],4,681279174),a=this.md5_hh(a,i,o,n,t[r+0],11,-358537222),n=this.md5_hh(n,a,i,o,t[r+3],16,-722521979),o=this.md5_hh(o,n,a,i,t[r+6],23,76029189),i=this.md5_hh(i,o,n,a,t[r+9],4,-640364487),a=this.md5_hh(a,i,o,n,t[r+12],11,-421815835),n=this.md5_hh(n,a,i,o,t[r+15],16,530742520),o=this.md5_hh(o,n,a,i,t[r+2],23,-995338651),i=this.md5_ii(i,o,n,a,t[r+0],6,-198630844),a=this.md5_ii(a,i,o,n,t[r+7],10,1126891415),n=this.md5_ii(n,a,i,o,t[r+14],15,-1416354905),o=this.md5_ii(o,n,a,i,t[r+5],21,-57434055),i=this.md5_ii(i,o,n,a,t[r+12],6,1700485571),a=this.md5_ii(a,i,o,n,t[r+3],10,-1894986606),n=this.md5_ii(n,a,i,o,t[r+10],15,-1051523),o=this.md5_ii(o,n,a,i,t[r+1],21,-2054922799),i=this.md5_ii(i,o,n,a,t[r+8],6,1873313359),a=this.md5_ii(a,i,o,n,t[r+15],10,-30611744),n=this.md5_ii(n,a,i,o,t[r+6],15,-1560198380),o=this.md5_ii(o,n,a,i,t[r+13],21,1309151649),i=this.md5_ii(i,o,n,a,t[r+4],6,-145523070),a=this.md5_ii(a,i,o,n,t[r+11],10,-1120210379),n=this.md5_ii(n,a,i,o,t[r+2],15,718787259),o=this.md5_ii(o,n,a,i,t[r+9],21,-343485551),i=this.safe_add(i,s),o=this.safe_add(o,c),n=this.safe_add(n,l),a=this.safe_add(a,d)}return[i,o,n,a]},t.prototype.md5_cmn=function(t,e,i,o,n,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,a)),n),i)},t.prototype.md5_ff=function(t,e,i,o,n,a,r){return this.md5_cmn(e&i|~e&o,t,e,n,a,r)},t.prototype.md5_gg=function(t,e,i,o,n,a,r){return this.md5_cmn(e&o|i&~o,t,e,n,a,r)},t.prototype.md5_hh=function(t,e,i,o,n,a,r){return this.md5_cmn(e^i^o,t,e,n,a,r)},t.prototype.md5_ii=function(t,e,i,o,n,a,r){return this.md5_cmn(i^(e|~o),t,e,n,a,r)},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();t.MD5=f;var m,g=function(){function t(){}return t.New=function(){for(var t=(new Date).getTime().toString(16);t.length<32;)t+=Math.floor(16*Math.random()).toString(16);return(new f).hex_md5(t)},t}();t.Guid=g,(m=u=t.Platform||(t.Platform={}))[m.Unknown=0]="Unknown",m[m.Android=1]="Android",m[m.AppRt=2]="AppRt",m[m.Browser=3]="Browser",function(t){t[t.Unknown=0]="Unknown",t[t.android=1]="android",t[t.oppoQG=2]="oppoQG",t[t.vivoQG=3]="vivoQG",t[t.wxGame=4]="wxGame",t[t.ttGame=5]="ttGame",t[t.qqGame=6]="qqGame",t[t.ucGame=7]="ucGame"}(p=t.Channel||(t.Channel={})),function(t){var e;(function(t){t.CallbackResult=function(){};var e=function(){};t.CallbackParam=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(e);t.NavigateToMiniGameParam=i,t.NavigateToMiniGame=function(t){qg.navigateToMiniGame(t)}})((e=t.OPPO||(t.OPPO={})).QG||(e.QG={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.envVersion="release",e}return o(e,t),e}(function(){});t.NavigateToMiniProgramParam=e,t.NavigateToMiniProgram=function(t){wx.navigateToMiniProgram(t)}}(t.WX||(t.WX={}))}(t.Extern||(t.Extern={})),function(t){var e=function(){function t(t,e){var i=this;void 0===e&&(e=null),this._form=null,this._url=null,this._promise=null,this._resolve=null,this._error=null,this._text=null,this.guid=g.New(),this.logSend=!0,this.logError=!0,this.logText=!1,this._url=t,this._form=e,this._promise=new Promise(function(t){i._resolve=t})}return Object.defineProperty(t.prototype,"logTag",{get:function(){return"WWW : "+this.guid+" ->"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),t.prototype.LogError=function(){this.logError&&null!=this.error&&console.log(this.logTag,"error -> "+this.error)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),t.prototype.LogText=function(){this.logText&&null!=this.text&&console.log(this.logTag,"text -> "+this.text)},t.prototype.Send=function(t,e){var i=this;void 0===t&&(t=null),void 0===e&&(e=null),null==t&&(t="get");var o=this._url,n=null;switch(e){case"form":for(var a=Object.keys(this._form),r=0;r<a.length;r++){var s=a[r];0==r?n=s+"="+this._form[s]:n+="&"+s+"="+this._form[s]}break;case"json":n=JSON.stringify(this._form)}switch(t){case"get":null!=n&&(o+="?"+n)}this.logSend&&console.log(this.logTag,o,"<"+t+">",n),I.channel;var c=new XMLHttpRequest;switch(c.onreadystatechange=function(){4==c.readyState&&(200==c.status?i._text=c.responseText:i._error=c.status+" - "+c.responseText,i._resolve(),i.LogError(),i.LogText())},c.open(t,o,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t){case"get":c.send();break;case"post":c.send(n)}return this._promise},t}();t.WWW=e,function(t){var i="https://log.reyun.com/receive/rest/";function o(o,r){return n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return(n=new e(i+o,r)).logText=t.log,n.logSend=t.log,[4,n.Send("post","json")];case 1:return a.sent(),[2]}})})}t.log=!0,t.Install=function(t,e,i){var n={},a={};a.deviceid=e,a.channelid=i,n.appid=t,n.context=a,o("install",n)},t.Startup=function(t,e,i){var n={},a={};a.deviceid=e,a.channelid=i,n.appid=t,n.context=a,o("startup",n)},t.Register=function(t,e,i,n){var a={},r={};r.deviceid=e,r.channelid=i,a.appid=t,a.context=r,a.who=n,o("register",a)},t.Loggedin=function(t,e,i,n){var a={},r={};r.deviceid=e,r.channelid=i,a.appid=t,a.context=r,a.who=n,o("loggedin",a)},t.Payment=function(t,e,i,n,a,r,s,c,l,d,u){var p={},h={};h.deviceid=e,h.channelid=i,p.appid=t,p.context=h,p.who=n,h.currencyAmount=a,h.currencytype=r,h.iapamount=s,h.iapname=c,h.paymenttype=l,h.transactionid=d,h.virtualcoinamount=u,o("payment",p)},t.Economy=function(t,e,i,n,a,r,s){var c={},l={};l.deviceid=e,l.channelid=i,c.appid=t,c.context=l,c.who=n,l.itemamount=a,l.itemname=r,l.itemtotalprice=s,o("economy",c)},t.Quest=function(t,e,i,n,a,r,s){var c={},l={};l.deviceid=e,l.channelid=i,c.appid=t,c.context=l,c.who=n,l.questid=a,l.queststatus=r,l.questtype=s,o("quest",c)},t.Event=function(t,e,i,n,a){var r={},s={};s.deviceid=e,s.channelid=i,r.appid=t,r.context=s,r.who=n,r.what=a,o("event",r)},t.Heartbeat=function(t,e,i,n){var a={},r={};r.deviceid=e,r.channelid=i,a.appid=t,a.context=r,a.who=n,o("heartbeat",a)}}(t.ReYun||(t.ReYun={}))}(h=t.Web||(t.Web={})),function(t){(function(t){var e=function(){this.log=!0};function i(){var t=new e;return t.appid=r.default.APPID,t.channelid=s,t.who=I.deviceUniqueIdentifier,t}function o(t){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Install(t.appid,I.deviceUniqueIdentifier,t.channelid)}function n(t){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Startup(t.appid,I.deviceUniqueIdentifier,t.channelid)}function a(t,e){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Event(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who,e)}function c(t){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Heartbeat(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who)}t.Data=e,t.Install=o,t.Startup=n,t.Register=function(t){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Register(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who)},t.Loggedin=function(t){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Loggedin(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who)},t.Payment=function(t,e,o,n,a,r,s,c){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Payment(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who,e,o,n,a,r,s,c)},t.Economy=function(t,e,o,n){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Economy(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who,e,o,n)},t.Quest=function(t,e,o,n){null==t&&(t=i()),h.ReYun.log=t.log,h.ReYun.Quest(t.appid,I.deviceUniqueIdentifier,t.channelid,t.who,e,o,n)},t.Event=a,t.Heartbeat=c,setTimeout(function(){if(null!=r.default.APPID&&""!=r.default.APPID.replace(" ","")){o(null),n(null),setInterval(function(){return c(null)},3e5);for(var t=0,e=[5,10,30,60,120],i=1;i<=12;i++)e.push(300*i);setInterval(function(){t+=1,e.length>0&&t>=e[0]&&a(null,"TimeEvent-"+e.shift())},1e3)}},0)})(t.ReYun||(t.ReYun={}))}(t.DevKit||(t.DevKit={}));var _=function(){this.value=null,this.time=0},y=function(){function t(){}return t.DeleteAll=function(){v.Clear()},t.DeleteKey=function(t){for(var e=[],i=0,o=this.tags;i<o.length;i++){var n=o[i];e.push(n+t)}for(var a=0,r=e;a<r.length;a++){var s=r[a];v.Set(s,null)}},t.GetString=function(t,e){void 0===e&&(e=null);var i=this.Get(this.stringTag+t);return null==i&&(i=e),i},t.SetString=function(t,e){this.Set(this.stringTag+t,new d(e).value)},t.GetFloat=function(t,e){void 0===e&&(e=0);var i=this.Get(this.floatTag+t);return null==i&&(i=e),i},t.SetFloat=function(t,e){this.Set(this.floatTag+t,new c(e).value)},t.GetInt=function(t,e){void 0===e&&(e=0);var i=this.Get(this.intTag+t);return null==i&&(i=e),i},t.SetInt=function(t,e){this.Set(this.intTag+t,new i(e).value)},t.Set=function(t,e){if(null!=e){var i=new _;i.value=e,i.time=Date.now();var o=JSON.stringify(i);v.Set(t,o)}else v.Set(t,null)},t.Get=function(t){return this.GetRaw(t).value},t.GetRaw=function(t){var e=null,i=v.Get(t);return null==i||""==i?e=new _:"string"!=typeof i||"{"!=i.substring(0,1)?(e=new _).value=i:null==(e=JSON.parse(i))?(e=new _).value=i:null==e.value&&(e.value=i),e},t.HasKey=function(t){for(var e=0,i=this.tags;e<i.length;e++){var o=i[e];if(null!=this.Get(o+t))return!0}return!1},Object.defineProperty(t,"intTag",{get:function(){return"int:"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"floatTag",{get:function(){return"float:"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"stringTag",{get:function(){return"string:"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tags",{get:function(){var t=[];return t.push(this.intTag),t.push(this.floatTag),t.push(this.stringTag),t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"keys",{get:function(){for(var t=[],e=0,i=v.keys;e<i.length;e++)for(var o=i[e],n=0,a=this.tags;n<a.length;n++){var r=a[n];-1!=o.search(r)&&t.push(o)}return t},enumerable:!1,configurable:!0}),t}();t.PlayerPrefs=y;var v=function(){function t(){}return Object.defineProperty(t,"keys",{get:function(){return Object.keys(cc.sys.localStorage)},enumerable:!1,configurable:!0}),t.Get=function(t){if(null==t)return null;var e=cc.sys.localStorage.getItem(t);return""==e?null:e},t.Set=function(t,e){null!=t&&(null!=e?cc.sys.localStorage.setItem(t,e):cc.sys.localStorage.removeItem(t))},t.Clear=function(){cc.sys.localStorage.clear()},t}();t.LocalStorage=v;var I=function(){function t(){}return Object.defineProperty(t,"deviceUniqueIdentifier",{get:function(){var t="SystemInfo.deviceUniqueIdentifier";if(y.HasKey(t))return y.GetString(t);var e=g.New();return y.SetString(t,e),e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"windowSize",{get:function(){return cc.winSize},enumerable:!1,configurable:!0}),Object.defineProperty(t,"platform",{get:function(){switch(this.channel){case p.android:return u.Android;case p.oppoQG:case p.vivoQG:case p.ttGame:case p.qqGame:case p.wxGame:case p.ucGame:return u.AppRt}return u.Unknown},enumerable:!1,configurable:!0}),Object.defineProperty(t,"channel",{get:function(){return void 0!==typeof window.qg?p.oppoQG:void 0!==typeof window.wx?p.wxGame:p.Unknown},enumerable:!1,configurable:!0}),t}();t.SystemInfo=I})(i.TJ||(i.TJ={})),cc._RF.pop()},{YmtConstant:"YmtConstant"}],TTAd:[function(t,e,i){"use strict";cc._RF.push(e,"4eb6fs9Ch5FzYBr0NKAEA1r","TTAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("GameSys"),a=t("mTimer"),r=t("YmtUtils"),s=t("YmtAdManager"),c=t("ymt_enum"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shareRcorderLayer=null,e.recorderTime=0,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo(),this.initRecorder())},e.prototype.initBanner=function(){var t=this;0!=n.default.adInfo.adunit_banner.length&&(this.bannerAd&&this.destroyBanner(),this.bannerAd=tt.createBannerAd({adUnitId:n.default.adInfo.adunit_banner[0],adIntervals:Math.max(30,n.default.adInfo.bannerUpdateTime),style:{left:0,top:n.default.screenHeight,width:n.default.screenWidth/2}}),this.bannerAd.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210")}),this.bannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef"+JSON.stringify(t))}),this.bannerAd.onResize(function(e){t.bannerAd.style.top=n.default.screenHeight-e.height,t.bannerAd.style.left=(n.default.screenWidth-e.width)/2}))},e.prototype.showBanner=function(){var t=this;0!=n.default.canShowBanner&&(null==this.bannerAd&&this.initBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){}).catch(function(){t.initBanner(),t.bannerAd.show()}))},e.prototype.hideBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyBanner=function(){this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=null},e.prototype.initVideo=function(){var t=this;null!=n.default.adInfo.adunit_video&&(console.log("\u6fc0\u52b1\u89c6\u9891\u521d\u59cb\u5316",n.default.adInfo.adunit_video),this.destroyVideo(),this.videoAd=tt.createRewardedVideoAd({adUnitId:n.default.adInfo.adunit_video}),this.videoAd.load(),this.videoAd.onLoad(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d",t)}),this.videoAd.onError(function(t){console.log("\u6fc0\u52b1\u89c6\u9891-\u5931\u8d25",t)}),this.videoAd.onClose(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed"),t.recorderResume(),e&&e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6210"),t.videocallback&&t.videocallback(!0)):t.videocallback&&t.videocallback(!1),t.videoAd.load()}))},e.prototype.showVideo=function(t){var e=this;null==this.videoAd&&this.initVideo(),null!=this.videoAd&&(this.videocallback=t,this.videoAd.show().then(function(){e.recorderPause()}).catch(function(){e.videoAd.load().then(function(){return e.videoAd.show()}).then(function(){e.recorderPause()}).catch(function(){e.videoAd.load(),tt.showModal({title:"\u6682\u65e0\u5e7f\u544a",content:"\u5206\u4eab\u6e38\u620f\u83b7\u53d6\u5956\u52b1\uff1f",confirmText:"\u5206\u4eab",success:function(t){t.confirm&&n.default.shareGame(function(t){e.videocallback&&e.videocallback(t)})},fail:function(){tt.showToast({title:"\u6682\u65e0\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),e.videocallback&&e.videocallback(!1)}})})}))},e.prototype.destroyVideo=function(){this.videoAd&&this.videoAd.destroy(),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var i=this;if(0!=n.default.canShowInter){if(!tt.createInterstitialAd||null==n.default.adInfo.adunit_intestital)return e&&e();if(r.default.randomInt(1,100)>n.default.adInfo.showInteNormalRto)return e&&e();this.destroyNormalInter(),this.interAd=tt.createInterstitialAd({adUnitId:n.default.adInfo.adunit_intestital}),this.interAd&&this.interAd.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),t&&t()}),this.interAd&&this.interAd.onError(function(t){console.log("show inter err"+JSON.stringify(t)),i.destroyNormalInter()}),this.interAd&&this.interAd.onClose(function(){i.recorderResume(),e&&e(),i.destroyNormalInter()}),this.interAd&&this.interAd.load().then(function(){i.interAd.show().then(function(){i.recorderPause(),i.interShowTime=i.get_time()})})}},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,i){var o=this;void 0===i&&(i=0),this.get_time()-this.interShowTime<=1e3*n.default.adInfo.interTick||(this.hideNativeInterstitial(),null==this.nativeInterTimer&&(this.nativeInterTimer=new a.default),this.nativeInterTimer.once(function(){var i=o.getLocalNativeData(c.ad_native_type.inner_interstitial);if(null==i||void 0===i)o.showInterstitial(t,e);else{if(r.default.randomInt(1,100)>n.default.adInfo.showInterRto)return e&&e();var a=cc.instantiate(r.default.getRes("hs_ui/ui_interstitial",cc.Prefab));o.nativeInter=a.getComponent("hs_ui_interstitial"),o.nativeInter&&o.nativeInter.show(i,function(){o.interShowTime=o.get_time(),o.hideBanner(),t&&t()},e)}},n.default.isShenHe||n.default.isShieldArea?0:1e3*i))},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){var t=this;tt.getGameRecorderManager&&(this.gameRecorder=tt.getGameRecorderManager(),this.gameRecorder.onStart(function(e){console.log("\u5f55\u5236\u5f00\u59cb",JSON.stringify(e)),t.gameRecorderState=s.RECORDER_STATE.START,t.recorderTime=t.get_time(),t.videoPath=null}),this.gameRecorder.onError(function(e){console.log("\u5f55\u5236\u51fa\u9519",JSON.stringify(e)),t.gameRecorderState=s.RECORDER_STATE.NO}),this.gameRecorder.onStop(function(e){t.gameRecorderState=s.RECORDER_STATE.NO,t.videoPath=null,e&&e.videoPath?t.get_time()-t.recorderTime>=3e3?(t.videoPath=e.videoPath,console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u6210\u529f\u3002videoID is "+e.videoPath)):console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u5931\u8d25\u3002\u5f55\u5c4f\u65f6\u95f4<3s"):console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u5931\u8d25"),t.onRecoderStop&&t.onRecoderStop(null!=t.videoPath)}),this.gameRecorder.onPause(function(){console.log("\u6682\u505c\u5f55\u5236"),t.gameRecorderState=s.RECORDER_STATE.PAUSE}),this.gameRecorder.onResume(function(){console.log("\u7ee7\u7eed\u5f55\u5236"),t.gameRecorderState=s.RECORDER_STATE.RESUME}))},e.prototype.recorderPause=function(){this.gameRecorder&&this.gameRecorderState==s.RECORDER_STATE.START&&this.gameRecorder.pause()},e.prototype.recorderResume=function(){this.gameRecorder&&this.gameRecorderState==s.RECORDER_STATE.PAUSE&&this.gameRecorder.resume()},e.prototype.recorderStart=function(){this.gameRecorder&&this.gameRecorderState==s.RECORDER_STATE.NO&&this.gameRecorder&&this.gameRecorder.start({duration:300})},e.prototype.recorderStop=function(t){this.gameRecorder&&this.gameRecorderState!=s.RECORDER_STATE.NO&&(this.onRecoderStop=t,this.gameRecorder&&this.gameRecorder.stop())},e.prototype.shareRecorder=function(t,e){var i=this;if(null==this.gameRecorder||null==this.videoPath)return this.createToast("\u5206\u4eab\u5931\u8d25"),e&&e();tt.shareAppMessage({channel:"video",query:"",title:n.default.shareWord[0]||"",desc:n.default.shareWord[2]||n.default.shareWord[1]||"",extra:{videoPath:this.videoPath,videoTopics:[n.default.shareWord[2]],hashtag_list:[n.default.shareWord[2]]},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),t&&t(),i.onRecoderStop=null,i.videoPath=null},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",t),e&&e(),t.errMsg.search(/short/gi)>-1?i.createToast("\u5206\u4eab\u5931\u8d25"):t.errMsg.search(/cancel/gi)>-1?i.createToast("\u53d6\u6d88\u5206\u4eab"):i.createToast("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")}})},e.prototype.showGamePortal=function(){if("ios"!==tt.getSystemInfoSync().platform){for(var t=[],e=0,i=n.default.recommedList;e<i.length;e++){var o=i[e];t.push({appId:o,query:"",extraData:{}})}tt.showMoreGamesModal({appLaunchOptions:t,success:function(t){console.log("success",t.errMsg)},fail:function(t){console.log("fail",t.errMsg)}})}},e.prototype.showRecorderLayer=function(t,e){if(null==this.shareRcorderLayer||void 0===this.shareRcorderLayer||!cc.isValid(this.shareRcorderLayer.node,!0)){var i=cc.instantiate(r.default.getRes("hs_ui/ui_share_rcorder",cc.Prefab));this.shareRcorderLayer=i.getComponent("hs_ui_share_rcorder"),this.shareRcorderLayer&&this.shareRcorderLayer.show(t,e)}},e}(s.default);i.default=l,cc._RF.pop()},{GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],TakeoutItem:[function(t,e,i){"use strict";cc._RF.push(e,"6e9e66bzeRKwruNZ23nuoww","TakeoutItem");var o=__extends,n=__decorate,a=__awaiter,r=__generator;Object.defineProperty(i,"__esModule",{value:!0});var s=t("BaseComponent"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.sprStatus=null,e}return o(e,t),e.prototype.setData=function(t,e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var e;return r(this,function(i){switch(i.label){case 0:return this.goodsId=t,[4,ymtApp.gameController.getGoodsIdRes(t,!1)];case 1:return e=i.sent(),this.sprIcon.getComponent(cc.Sprite).spriteFrame=e,ymtApp.spriteMgr.adaptSpriteSize(this.sprIcon,{width:60,height:60,isAdaptMin:!0,isScale:!0}),this.sprStatus.active=!1,[2]}})})},e.prototype.isComplete=function(){return this.sprStatus.active},e.prototype.complete=function(){this.sprStatus.active=!0},e.prototype.getGoodsId=function(){return this.goodsId},n([d(cc.Node)],e.prototype,"sprIcon",void 0),n([d(cc.Node)],e.prototype,"sprStatus",void 0),n([l],e)}(s.default);i.default=u,cc._RF.pop()},{BaseComponent:"BaseComponent"}],TakeoutUI:[function(t,e,i){"use strict";cc._RF.push(e,"8e170xOv2lJkKpACYy19739","TakeoutUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("MainConfig"),s=t("SDKMgr"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeRelife=null,e.btnClose=null,e.btnRelife=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnClose,this.onClickClose,this),this.onClick(this.btnRelife,this.onClickRelife,this)},e.prototype.open=function(){t.prototype.open.call(this),this.arg=this.arg||{},this.closeFunc=this.arg.callback},e.prototype.onClickRelife=function(){var t=this;s.default.showVideo(function(){t.closeFunc&&t.closeFunc(1),ymtApp.viewMgr.hideView(r.UI.TAKEOUT)})},e.prototype.onClickClose=function(){this.closeFunc&&this.closeFunc(2),ymtApp.viewMgr.hideView(r.UI.TAKEOUT)},n([d(cc.Node)],e.prototype,"nodeRelife",void 0),n([d(cc.Node)],e.prototype,"btnClose",void 0),n([d(cc.Node)],e.prototype,"btnRelife",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseDialog:"BaseDialog",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],TaskItem:[function(t,e,i){"use strict";cc._RF.push(e,"2561cy2am9A25tc6XmG+Lcb","TaskItem");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=t("GameEnums"),s=t("MainConfig"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.labName=null,e.richDesc=null,e.progTask=null,e.labProg=null,e.itemIcon=null,e.labNum=null,e.btnGo=null,e.btnGet=null,e.sprGet=null,e.labGet=null,e.nodeGot=null,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnGo,this.onClickGo,this),this.onClick(this.btnGet,this.onClickGet,this)},e.prototype.setData=function(t){var e;this.curData=t,this.labName.string=this.curData.name.toLocalize(),ymtApp.spriteMgr.loadImg(this.sprIcon,"icons/task/task_icon_"+t.id,r.BUNDLENAME.RES);var i=t.desc;i&&""!=i||(i=ymtApp.cons.getTaskDesc(t.type).toLocalize()),i=i.replace("num",""+t.max),this.richDesc.string="<b>"+i+"<b/>",this.labNum.string="x"+(this.curData.reward.amount||1),this.labGet.string="x"+(this.curData.reward.amount||1)+" "+"\u9886\u53d6".toLocalize();var o=ymtApp.cons.getItemCfg(null===(e=t.reward)||void 0===e?void 0:e.itemId);ymtApp.spriteMgr.loadImg(this.itemIcon,"sprite/icon/"+o.icon,null,{height:36,width:36,isAdaptMin:!0,isScale:!0}),ymtApp.spriteMgr.loadImg(this.sprGet,"sprite/icon/"+o.icon,null,{height:36,width:36,isAdaptMin:!0,isScale:!0}),this.updateStatus()},e.prototype.updateStatus=function(){var t=ymtApp.gameController.getTaskData(this.curData.type),e=t.prog;e>this.curData.max&&(e=this.curData.max),this.progTask.progress=e/this.curData.max,this.labProg.string=e+"/"+this.curData.max,this.itemIcon.active=t.status!=r.TASK_STATUS_TYPE.COMPLETED,this.labNum.node.active=t.status!=r.TASK_STATUS_TYPE.COMPLETED,this.btnGo.active=t.status==r.TASK_STATUS_TYPE.NOT,this.btnGet.active=t.status==r.TASK_STATUS_TYPE.COMPLETED,this.nodeGot.active=t.status==r.TASK_STATUS_TYPE.RECEIVED},e.prototype.onClickGo=function(){this.curData.type==r.TASK_TYPE.BOX?ymtApp.viewMgr.showView(s.UI.CHEST):ymtApp.gameController.startGame(r.GAME_TYPE.COMMON),ymtApp.viewMgr.hideView(s.UI.TASK)},e.prototype.onClickGet=function(){var t=this.curData.reward;ymtApp.gameController.getTaskReward(this.curData.type)&&(this.dotTask(),ymtApp.gameController.addItem(t.itemId,t.amount||1,!0),ymtApp.viewMgr.showReward([t]),this.updateStatus())},e.prototype.dotTask=function(){this.curData.type==r.TASK_TYPE.CROSS?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_TONG):this.curData.type==r.TASK_TYPE.BOX?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_XIANG):this.curData.type==r.TASK_TYPE.RELIVE?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_HUOGIFT):this.curData.type==r.TASK_TYPE.VIDEO?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_VIDEOGIFT):this.curData.type==r.TASK_TYPE.COMBO?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_CLEAN200):this.curData.type==r.TASK_TYPE.ELIMINATE?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_DOUBLE):this.curData.type==r.TASK_TYPE.FIRELOCK?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_MOFA):this.curData.type==r.TASK_TYPE.FROZEN?ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_TIME):this.curData.type==r.TASK_TYPE.REFRESH&&ymtApp.gameController.dotGameStr(r.DOT_TYPE.GET_SHUAXIN)},n([d(cc.Node)],e.prototype,"sprIcon",void 0),n([d(cc.Label)],e.prototype,"labName",void 0),n([d(cc.RichText)],e.prototype,"richDesc",void 0),n([d(cc.ProgressBar)],e.prototype,"progTask",void 0),n([d(cc.Label)],e.prototype,"labProg",void 0),n([d(cc.Node)],e.prototype,"itemIcon",void 0),n([d(cc.Label)],e.prototype,"labNum",void 0),n([d(cc.Node)],e.prototype,"btnGo",void 0),n([d(cc.Node)],e.prototype,"btnGet",void 0),n([d(cc.Node)],e.prototype,"sprGet",void 0),n([d(cc.Label)],e.prototype,"labGet",void 0),n([d(cc.Node)],e.prototype,"nodeGot",void 0),n([l],e)}(a.default);i.default=u,cc._RF.pop()},{BaseComponent:"BaseComponent",GameEnums:"GameEnums",MainConfig:"MainConfig"}],TaskUI:[function(t,e,i){"use strict";cc._RF.push(e,"d2a3fpYy9lCx71acEjPj1pU","TaskUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("TaskItem"),s=t("GameEnums"),c=t("MainConfig"),l=t("GameServerConf"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.taskItem=null,e.btnClose=null,e.taskList=[],e}return o(e,t),e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.TASK_PROG_UPDATE,this.updateView,this),this.onClick(this.btnClose,this.onClickClose,this)},e.prototype.open=function(){t.prototype.open.call(this),ymtApp.viewMgr.showCurrency(this.name,[{itemId:s.ITEM_ID.COIN},{itemId:s.ITEM_ID.STRENGTH}]),this.updateView()},e.prototype.updateView=function(){var t,e=(l.default.I.taskList||[]).slice();(t={})[s.TASK_STATUS_TYPE.NOT]=2,t[s.TASK_STATUS_TYPE.COMPLETED]=1,t[s.TASK_STATUS_TYPE.RECEIVED]=3;var i=t;e.sort(function(t,e){var o=ymtApp.gameController.getTaskStatus(t.type),n=ymtApp.gameController.getTaskStatus(e.type);return o!=n?i[o]-i[n]:t.id-e.id}),ymtApp.nodeMgr.addListItemSelf(e.length,this.taskList,this.taskItem,this.content,function(t,i){t.getComponent(r.default).setData(e[i])})},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(c.UI.TASK)},n([p(cc.Node)],e.prototype,"content",void 0),n([p(cc.Node)],e.prototype,"taskItem",void 0),n([p(cc.Node)],e.prototype,"btnClose",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",TaskItem:"TaskItem"}],TimeMgr:[function(t,e,i){"use strict";cc._RF.push(e,"3abf3W5MI5EWoJeQYmhO2jw","TimeMgr");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateList=[],e.timerList=[],e}return o(e,t),e.prototype.scheduleOnce=function(t,e){this.timerList.push({delay:e,time:0,interval:0,callback:t,repeat:1})},e.prototype.schedule=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=0),this.timerList.push({delay:o,time:e,interval:e,callback:t,repeat:i})},e.prototype.addUpdate=function(t,e){this.updateList.push({cb:t,target:e})},e.prototype.doUpdate=function(t){for(var e=this.updateList.length-1;e>=0;e--)cc.isValid(this.updateList[e].target)?this.updateList[e].cb&&this.updateList[e].cb(t):this.updateList.splice(e,1);for(e=this.timerList.length-1;e>=0;e--){var i=this.timerList[e];i.delay>0?i.delay-=t:i.interval>0&&(i.interval-=t),i.delay+i.interval<=0&&(i.interval=i.time-(i.delay+i.interval),i.callback&&i.callback(),i.repeat>0&&(i.repeat-=1),0==i.repeat&&this.timerList.splice(e,1))}},e.prototype.clearUpdate=function(t){for(var e=this.updateList.length-1;e>=0;e--)if(cc.isValid(this.updateList[e].target)&&this.updateList[e].target.uuid==t.uuid){this.updateList.splice(e,1);break}},e}(t("Singleton").default);i.default=n,cc._RF.pop()},{Singleton:"Singleton"}],Tips:[function(t,e,i){"use strict";cc._RF.push(e,"fab1e5baiBH0oVMEtxL6QaW","Tips");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseComponent"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeTips=null,e.tipsPool=new cc.NodePool,e}return o(e,t),e.prototype.show=function(t,e){var i=this,o=this.tipsPool.get()||cc.instantiate(this.nodeTips);o.active=!0,cc.Tween.stopAllByTarget(o),o.y=0,o.opacity=255,o.parent=this.node,this.seekChild(o,"lblTips").getComponent(cc.Label).string=t;var n=e.time||2;cc.tween(o).to(.4*n,{y:150}).to(.6*n,{y:250,opacity:0}).call(function(){i.tipsPool.put(o)}).start()},n([c(cc.Node)],e.prototype,"nodeTips",void 0),n([s],e)}(a.default);i.default=l,cc._RF.pop()},{BaseComponent:"BaseComponent"}],TransitionUI:[function(t,e,i){"use strict";cc._RF.push(e,"2ea90gIOC1KTI9tPg7V0yHx","TransitionUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("MainConfig"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskOut=null,e.maskIn=null,e.sprBg=null,e.sprLogo=null,e}return o(e,t),e.prototype.init=function(){var t=this;this.scheduleOnce(function(){t.sprBg.height<t.node.height&&(t.sprBg.scale=t.node.height/t.sprBg.height)})},e.prototype.open=function(){},e.prototype.showAct=function(t){cc.Tween.stopAllByTarget(this.maskOut),cc.Tween.stopAllByTarget(this.maskIn),cc.Tween.stopAllByTarget(this.sprLogo),this.sprLogo.scale=0,this.sprLogo.opacity=0,this.maskOut.setContentSize(0,0),this.maskIn.setContentSize(0,0),cc.tween(this.maskOut).to(.4,{width:2e3,height:2e3}).start(),cc.tween(this.sprLogo).delay(.4).to(.4,{scale:1,opacity:255},cc.easeBackOut()).delay(.1).call(function(){t&&t()}).start()},e.prototype.closeAct=function(){cc.Tween.stopAllByTarget(this.maskOut),cc.Tween.stopAllByTarget(this.maskIn),cc.Tween.stopAllByTarget(this.sprLogo),this.sprLogo.scale=1,this.sprLogo.opacity=255,this.maskOut.setContentSize(2e3,2e3),this.maskIn.setContentSize(0,0),cc.tween(this.sprLogo).to(.4,{scale:0,opacity:0},cc.easeBackIn()).start(),cc.tween(this.maskIn).delay(.4).to(.4,{width:2e3,height:2e3}).call(function(){ymtApp.viewMgr.hideView(r.UI.TRANSITION)}).start()},n([l(cc.Node)],e.prototype,"maskOut",void 0),n([l(cc.Node)],e.prototype,"maskIn",void 0),n([l(cc.Node)],e.prototype,"sprBg",void 0),n([l(cc.Node)],e.prototype,"sprLogo",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseUI:"BaseUI",MainConfig:"MainConfig"}],TurntableUI:[function(t,e,i){"use strict";cc._RF.push(e,"e713fgCTGhLsaJrcARLfmUO","TurntableUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseDialog"),r=t("GameEnums"),s=t("MainConfig"),c=t("SDKMgr"),l=t("GameServerConf"),d=cc._decorator,u=d.ccclass,p=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeTable=null,e.tableItem=null,e.btnDraw=null,e.sprFree=null,e.btnVideo=null,e.sprVide=null,e.sprWord=null,e.labTime=null,e.labTimes=null,e.nodeEnable=null,e.cutTime=0,e.curTimes=0,e.itemList=[],e}return o(e,t),e.prototype.init=function(){var t=this;this.onClick(this.btnDraw,function(){t.onClickDraw(!1)}),this.onClick(this.btnVideo,function(){t.onClickDraw(!0)})},e.prototype.open=function(){t.prototype.open.call(this),this.addDialogBg({title:"word_title_xyzp",size:cc.size(638,870),pos:cc.v2(0,50),closeCb:this.onClickClose.bind(this)}),this.initView()},e.prototype.initView=function(){var t;this.nodeEnable.active=!1;var e=(null===(t=l.default.I.turntableCfg)||void 0===t?void 0:t.rewards)||[];ymtApp.nodeMgr.addListItemSelf(8,this.itemList,this.tableItem,this.nodeTable,function(t,i){var o=e[i]||{itemId:r.ITEM_ID.COIN,amount:50},n=t.getChildByName("sprIcon"),a=ymtApp.gameController.getItemIcon(o.itemId);ymtApp.spriteMgr.loadImg(n,a),t.angle=-45*i,t.getComponentInChildren(cc.Label).string=""+o.amount}),this.updateView(),this.updateCutTime()},e.prototype.updateView=function(){var t=ymtApp.gameController.getTurntableData(),e=l.default.I.turntableCfg||{};this.cutTime=Math.ceil((t.date||0)-ymtApp.gameController.getServerTime())/1e3;var i=e.times||3,o=t.times||0;this.curTimes=i-o,this.btnDraw.active=this.cutTime<=0,this.btnVideo.active=this.cutTime>0;var n=o<i;this.btnDraw.getComponent(cc.Button).interactable=n,ymtApp.spriteMgr.setChildrenGray(this.btnDraw,!n),this.btnVideo.getComponent(cc.Button).interactable=n,ymtApp.spriteMgr.setChildrenGray(this.btnVideo,!n),this.labTimes.string="\u4eca\u65e5\u5269\u4f59\u8f6c\u76d8\u6b21\u6570".toLocalize()+":"+this.curTimes},e.prototype.updateCutTime=function(){this.cutTime<=0?(this.labTime.string="\u514d\u8d39\u65cb\u8f6c 00:00".toLocalize(),this.updateView()):this.labTime.string="\u514d\u8d39\u65cb\u8f6c".toLocalize()+" "+ymtApp.utils.formatSecToStr(this.cutTime)},e.prototype.onClickClose=function(){ymtApp.viewMgr.hideView(s.UI.TURNTABLE)},e.prototype.doDraw=function(t){var e,i=this;void 0===t&&(t=!1);var o=(null===(e=l.default.I.turntableCfg)||void 0===e?void 0:e.rewards)||[],n=ymtApp.utils.getIndexByWeight(o),a=o[n]||{itemId:r.ITEM_ID.COIN,amount:50};ymtApp.gameController.addItem(a.itemId,a.amount,!0),ymtApp.gameController.draw(),this.updateView();var c=this.nodeTable.angle%360;this.nodeTable.angle=c;var d=45*n-360;d>=c&&(d-=360),d-=360*(Math.ceil(6*Math.random())+7);var u=2+Math.random();ymtApp.audioMgr.playSound(ymtApp.main.audio.turntable),this.nodeEnable.active=!0,cc.tween(this.nodeTable).to(u,{angle:d},cc.easeQuadraticActionInOut()).call(function(){i.nodeTable.angle=i.nodeTable.angle%360}).delay(.5).call(function(){i.nodeEnable.active=!1,ymtApp.viewMgr.showView(s.UI.REWARD,{type:r.REWARD_TYPE.SINGLE,isAdd:!0,rewards:[a]})}).start()},e.prototype.onClickDraw=function(t){var e=this;this.curTimes<=0?ymtApp.viewMgr.showToast("\u4eca\u65e5\u62bd\u5956\u6b21\u6570\u4e0d\u8db3\uff0c\u8bf7\u660e\u65e5\u518d\u6765".toLocalize()):t?c.default.showVideo(function(){e.doDraw(!0)}):this.doDraw()},e.prototype.updateTime=function(t){this.cutTime>0&&(this.cutTime-=t,this.updateCutTime())},n([p(cc.Node)],e.prototype,"nodeTable",void 0),n([p(cc.Node)],e.prototype,"tableItem",void 0),n([p(cc.Node)],e.prototype,"btnDraw",void 0),n([p(cc.Sprite)],e.prototype,"sprFree",void 0),n([p(cc.Node)],e.prototype,"btnVideo",void 0),n([p(cc.Sprite)],e.prototype,"sprVide",void 0),n([p(cc.Sprite)],e.prototype,"sprWord",void 0),n([p(cc.Label)],e.prototype,"labTime",void 0),n([p(cc.Label)],e.prototype,"labTimes",void 0),n([p(cc.Node)],e.prototype,"nodeEnable",void 0),n([u],e)}(a.default);i.default=h,cc._RF.pop()},{BaseDialog:"BaseDialog",GameEnums:"GameEnums",GameServerConf:"GameServerConf",MainConfig:"MainConfig",SDKMgr:"SDKMgr"}],TweenMgr:[function(t,e,i){"use strict";cc._RF.push(e,"54dcfz/uTtDi6Y0IflAwH/s","TweenMgr");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("Singleton"),s=t("GameEnums"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.tweenFloat=function(t,e,i,o,n,a){void 0===a&&(a=!0);var r={_value:t},s=Date.now(),c=t;Object.defineProperty(r,"value",{get:function(){return r._value},set:function(t){r._value=t;var e=Date.now(),i=(e-s)/1e3;s=e;var n=t-c;c=t,o&&o(r._value,i,n)}});var l=cc.tween(r).to(i,{value:e}).call(n);return a&&l.start(),l},e.prototype.getTweenByType=function(t,e,i){var o=i.time||.5,n=i.delayTime||0,a=i.doTimes||1,r=i.value||.01,c=i.pos||cc.v2(0,0),l=e.position;switch(t){case s.ACTION_TYPE.ROTATE:return cc.tween().delay(n).by(o,{angle:-360});case s.ACTION_TYPE.BREATH:var d=e.scale;return cc.tween().delay(n).to(o,{scale:d*(1+r)}).to(o,{scale:d*(1-r)});case s.ACTION_TYPE.TWINKLE:return cc.tween().delay(n).to(o,{opacity:r}).to(o,{opacity:255});case s.ACTION_TYPE.UP:return cc.tween().delay(n).to(o,{y:l.y+r}).to(o,{y:l.y});case s.ACTION_TYPE.TREMBLE:var u={x:l.x+c.x,y:l.y+c.y},p={x:l.x-c.x,y:l.y-c.y};return cc.tween().delay(n).to(o,u).to(o,p);case s.ACTION_TYPE.ROCK:var h=e.angle;return a>1?cc.tween().delay(n).to(o/2,{angle:h+r}).repeat(a-1,cc.tween().to(o,{angle:h-r}).to(o,{angle:h+r})).to(o/2,{angle:h}):cc.tween().delay(n).to(o/2,{angle:h+r}).to(o,{angle:h-r}).to(o/2,{angle:h});case s.ACTION_TYPE.MOVE:return cc.tween().delay(n).to(o,{x:l.x+c.x,y:l.y+c.y}).to(o,{x:l.x,y:l.y})}},e.prototype.shake=function(t){var e=cc.tween().to(.15,{angle:-9}).to(.15,{angle:0}).to(.15,{angle:9}).to(.15,{angle:0}).union().repeatForever(),i=cc.tween(t).to(.4,{scale:.8}).to(.4,{scale:1}).to(.4,{scale:1.2}).to(.4,{scale:1}).union().repeatForever();return cc.tween(t).parallel(e,i).start()},e.prototype.doRockAct=function(t,e){return void 0===e&&(e=.1),cc.tween(t).to(e/2,{angle:15}).to(.1,{angle:-15}).to(e,{angle:15}).to(e,{angle:-15}).to(e/2,{angle:0}).delay(.8).union().repeatForever().start()},e.prototype.doBoxAct=function(t){return cc.tween(t).to(.5,{scale:1.1}).to(.5,{scale:1}).delay(.8).union().repeatForever().start()},e.prototype.doBreathAct=function(t,e,i){void 0===e&&(e=.4),void 0===i&&(i=.05);var o=t.scale;return cc.tween(t).repeatForever(cc.tween().to(e,{scale:(1+i)*o}).to(e,{scale:(1-i)*o})).start()},e.prototype.showFinger=function(t,e,i){return void 0===i&&(i=.2),e&&(t.x=e.x,t.y=e.y),cc.tween(t).repeatForever(cc.tween().to(i,{x:t.x+10,y:t.y-10}).to(i,{x:t.x-10,y:t.y+10})).start()},e.prototype.doDiffListAct=function(t,e){var i=this;this.tweenNode||(this.tweenNode=new cc.Node,cc.game.addPersistRootNode(this.tweenNode));var o=-1;(function r(s){return n(i,void 0,void 0,function(){var i,n,c;return a(this,function(){return o>=s?[2]:(o=s,t&&t[s]?(i=t[s].call(function(){r(s+1)}).start(),(n=(null===(c=i._finalAction)||void 0===c?void 0:c._duration)||0)<.016666666666666666&&(n=0),cc.tween(this.tweenNode).delay(n).call(function(){i._target&&0==i._target.active&&r(s+1)}).start()):e&&e(),[2])})})})(0)},e.prototype.addNumAct=function(t,e,i,o,n,a){void 0===o&&(o=1),void 0===n&&(n=""),void 0===a&&(a=""),t?this.tweenFloat(e,i,o,function(e){t.string=""+n+Math.floor(e)+a}):console.error("TweenMgr addNumAct")},e.prototype.doCoinAct=function(t,e){return n(this,void 0,void 0,function(){var i,o,n;return a(this,function(a){switch(a.label){case 0:return(i=t.frame)?[3,2]:[4,ymtApp.resMgr.getSpriteFrame("sprite/icon/icon_coin")];case 1:i=a.sent(),a.label=2;case 2:for(o=function(o){var n=ymtApp.poolMgr.get(s.POOL_NAME.COIN,null,function(){var t=new cc.Node("coin");return t.setContentSize(68.8,72),t});cc.Tween.stopAllByTarget(n),n.setParent(t.parent),n.setPosition(t.start);var a=n.getComponent(cc.Sprite);a||(a=n.addComponent(cc.Sprite)),a.spriteFrame=i,n.zIndex=100,n.opacity=0;var r=cc.tween();t.isFilp?(n.scaleX=1,r=cc.tween(n).to(.2,{scaleX:0,opacity:255}).to(.2,{scaleX:1,opacity:255}).union().repeatForever().start()):(n.scale=.5,r=cc.tween(n).to(.15,{scale:1,opacity:255})),cc.tween(n).delay(.1*o).call(function(){r.start(),cc.tween(n).to(.3,{x:t.start.x+15*Math.floor(7*Math.random()-3),y:t.start.y-40*Math.floor(3*Math.random()+1)}).start()}).delay(.3).to(.35,{position:cc.v3(t.end)}).delay(.1).call(function(){n.opacity=0,ymtApp.poolMgr.put(s.POOL_NAME.COIN,n),e&&e(o)}).start()},n=0;n<10;n++)o(n);return[2]}})})},e.prototype.pointBezier=function(t,e,i,o){if(null==o||0==o.length){var n=e.x+(i.x-e.x)*t,a=e.y+(i.y-e.y)*t;return cc.v2(n,a)}return 1==o.length?(n=(1-t)*(1-t)*e.x+2*t*(1-t)*o[0].x+t*t*i.x,a=(1-t)*(1-t)*e.y+2*t*(1-t)*o[0].y+t*t*i.y,cc.v2(n,a)):2==o.length?(n=e.x*(1-t)*(1-t)*(1-t)+3*o[0].x*t*(1-t)*(1-t)+3*o[1].x*t*t*(1-t)+i.x*t*t*t,a=e.y*(1-t)*(1-t)*(1-t)+3*o[0].y*t*(1-t)*(1-t)+3*o[1].y*t*t*(1-t)+i.y*t*t*t,cc.v2(n,a)):void 0},e.prototype.getMoveTime=function(t,e,i){return void 0===i&&(i=500),Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))/i},e.prototype.rockFlower=function(t,e){cc.Tween.stopAllByTarget(t),t.scale=0,t.opacity=0,t.angle=-6,cc.tween(t).to(.4,{scale:1,opacity:255}).to(.15,{angle:0,scaleY:1.08,scaleX:.95}).to(.15,{angle:5,scaleY:.95,scaleX:1.05}).to(.15,{angle:0,scaleY:1.08,scaleX:.95}).to(.15,{angle:-3,scaleY:.95,scaleX:1.05}).to(.15,{angle:0,scaleY:1.08,scaleX:.95,opacity:155}).to(.2,{angle:0,scaleY:1.08,scaleX:.95,opacity:0}).call(function(){e&&e()}).start()},e.prototype.openFlower=function(t){cc.Tween.stopAllByTarget(t),t.scale=0,t.opacity=0,t.angle=-6,cc.tween(t).to(.4,{scale:1,opacity:255}).to(.15,{angle:0,scaleY:1.08,scaleX:.95}).call(function(){cc.tween(t).to(.2,{angle:5,scaleY:.95,scaleX:1.05}).to(.2,{angle:0,scaleY:1.08,scaleX:.95}).to(.2,{angle:-3,scaleY:.95,scaleX:1.05}).to(.2,{angle:0,scaleY:1.08,scaleX:.95}).union().repeatForever().start()}).start()},e.prototype.cubicOut=function(t){return--t*t*t+1},e.prototype.backInOut=function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},e.prototype.backOut=function(t){return--t*t*(2.5*t+1.5)+1},e.prototype.backIn=function(t){return t*t*(3*t-2)},e}(r.default);i.default=c,cc._RF.pop()},{GameEnums:"GameEnums",Singleton:"Singleton"}],UCAd:[function(t,e,i){"use strict";cc._RF.push(e,"22f4ag+tpBOL7G7ujP/JzbN","UCAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t("YmtAdManager").default);i.default=n,cc._RF.pop()},{YmtAdManager:"YmtAdManager"}],UGGameAd:[function(t,e,i){"use strict";cc._RF.push(e,"e17888JPBRAs5eP3D7IhQmQ","UGGameAd");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("YmtLog"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLogin=!1,e.isVideoAdReady=!0,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.prototype.hasPaySys=function(){return!1},e.prototype.hasRankSys=function(){return!1},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){if(!this.isInitAd){this.isInitAd=!0;var e=this,i={pay:{success:function(t){console.log("YMT pay success",t)}},role:{success:function(t){console.log("YMT role success",t)}},loadAds:{success:function(t){console.log("YMT loadAds success",t),1==t.status?this.isVideoAdReady=!0:2==t.status&&(this.isVideoAdReady=!1)}},showAds:{success:function(t){console.log("YMT showAds success",t),1==t.type?e.videocallback&&e.videocallback(!0):t.type}}};OG_H5_GAME_SDK.config(i),t.prototype.initAd.call(this),this.initBanner(),this.initVideo()}},e.prototype.initVideo=function(){this.loadVideoAd()},e.prototype.loadVideoAd=function(){OG_H5_GAME_SDK.loadAds({id:"n66d18c9431333"})},e.prototype.showVideo=function(t){this.videocallback=t,1==this.isVideoAdReady?OG_H5_GAME_SDK.showAds({}):(this.videocallback&&this.videocallback(!1),this.loadVideoAd())},e.prototype.destroyVideo=function(){},e.prototype.login=function(t,e,i){void 0===i&&(i=!1)},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.destroyBanner=function(){},e.prototype.showInterstitial=function(t,e,i,o){void 0===i&&(i="browse"),void 0===o&&(o="normal")},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,n){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,n):r.default.e("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.setRank=function(){},e.prototype.getRank=function(){return n(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e.prototype.saveRemoteData=function(){return n(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.loadRemoteData=function(){return n(this,void 0,Promise,function(){var t=this;return a(this,function(){return[2,new Promise(function(e){0!=t.isLogin||e("")})]})})},e}(t("YmtAdManager").default);i.default=s,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],UIMgr:[function(t,e,i){"use strict";cc._RF.push(e,"1ab0cRDPt9GFoyyqZ3M8blP","UIMgr"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("GameEnums"),n=t("SDKConfig"),a=t("SDKEnum"),r=t("SDKMgr"),s=t("BtnRedPacket"),c=t("GameServerConf"),l=t("WxMgr"),d=function(){function t(){}return t.loadSDK=function(t,e){var i=this;l.default.initWx(function(){r.default.initSDK(function(t){i.initData(),e&&e(t)})}),this.sdkLayer=t,l.default.setSharedCanvas()},t.setViewShow=function(t){this.viewShowCB=t},t.setViewHide=function(t){this.viewHideCB=t},t.setVideoCallback=function(t){this.videoCallback=t},t.initData=function(){this.sdkData=ymtApp.utils.getItem(o.STORAGE.SDK_DATA,{redToastLimit:0,loginDate:0,signDate:0,insertadLimit:0,appearCount:r.default.getFloatRedLimit(),startVideoLimit:r.default.getStartVideoLimit(),autoVideoLimit:r.default.getAutoVideoLimit(),curStrength:r.default.getPowerPrime(),recoveryTime:0}),this.onlineTime=ymtApp.utils.getItem(o.STORAGE.ONLINE_TIME,0)},t.saveData=function(){ymtApp.utils.setItem(o.STORAGE.SDK_DATA,this.sdkData),ymtApp.utils.setItem(o.STORAGE.ONLINE_TIME,this.onlineTime)},t.onRefreshGameData=function(){var t=ymtApp.gameController.getServerTime(),e=this.sdkData.loginDate;e<t&&new Date(e).toDateString()!=new Date(t).toDateString()&&(this.sdkData.loginDate=t,this.onlineTime=0,this.sdkData.appearCount=r.default.getFloatRedLimit(),this.sdkData.insertadLimit=0,this.sdkData.startVideoLimit=r.default.getStartVideoLimit(),this.sdkData.autoVideoLimit=r.default.getAutoVideoLimit());var i=r.default.getPowerLimit(),o=r.default.getRecoverTime();if(this.sdkData.curStrength>=i)this.sdkData.recoveryTime=0;else{var n=ymtApp.gameController.getServerTime();if(this.sdkData.recoveryTime>0){var a=Math.ceil((this.sdkData.recoveryTime-n)/o/1e3);n>=this.sdkData.recoveryTime||a>i?(this.sdkData.curStrength=i,this.sdkData.recoveryTime=0):this.sdkData.curStrength=i-a}else this.sdkData.recoveryTime=n+(i-this.sdkData.curStrength)*o*1e3}this.saveData()},t.login=function(t){var e=this;void 0===t&&(t=!1);var i=!1,o=0;if(r.default.confData.red_toast&&null==(o=r.default.confData.red_toast[r.default.scene])&&(o=r.default.confData.red_toast.default),(1==o&&this.sdkData.redToastLimit<r.default.getRedToastLimit()||0==this.sdkData.loginDate&&2==o)&&(this.showView(a.PROCESS_TYPE.FIRST_GIFT_VIEW),i=!0),r.default.confData.login_reward_switch&&!i){var n=(new Date).toDateString();(1==r.default.confData.login_reward_switch&&n!=new Date(this.sdkData.signDate).toDateString()||0!=this.sdkData.loginDate&&2==r.default.confData.login_reward_switch)&&this.showView(a.PROCESS_TYPE.SIGN_VIEW)}var s=this.sdkData.loginDate;this.onRefreshGameData(),0!=r.default.autoVideo&&this.sdkData.autoVideoLimit>0&&(this.sdkData.autoVideoLimit--,r.default.showVideo()),this.saveData(),t||0==s&&1==r.default.getFirstStartGame()&&this.isStrengthEnough(null,!0)?this.gameStart():this.nextProcess(),this.intervalId=setInterval(function(){e.updateTimer(1)},1e3)},t.setUIMap=function(t,e,i){this.uiMap[t]={view:e,arg:i}},t.setPocessIdx=function(t){this.processIdx=t},t.gameStart=function(){for(var t=0;t<r.default.globalProcess.length;t++)if(r.default.globalProcess[t]==a.PROCESS_TYPE.HOME)return this.processIdx=t,void this.nextProcess();this.nextProcess()},t.gameHome=function(){this.processIdx=-1,this.nextProcess()},t.nextProcess=function(){var t=this.getGameProcess();this.hideView(this.lastView),this.showView(t),this.lastView=t},t.getGameProcess=function(){this.processIdx=(this.processIdx+1)%r.default.globalProcess.length;var t=r.default.globalProcess[this.processIdx];if(t==a.PROCESS_TYPE.VIDEO){if(0==r.default.startVideo||this.sdkData.startVideoLimit<=0)return this.getGameProcess();this.sdkData.startVideoLimit--,this.saveData()}return console.log("game process ui=",t),t},t.getCurProcess=function(){return r.default.globalProcess[this.processIdx]},t.onClickType=function(t){switch(t){case a.CLICK_TYPE.SIGN:this.sdkData.signDate=ymtApp.gameController.getServerTime()}this.saveData(),this.videoCallback&&this.videoCallback(t)},t.setBtnRedPacket=function(t,e){var i=this;if(this.isShowFloat=t,t)0==this.btnRedList.length&&ymtApp.resMgr.loadResByBundleName(o.BUNDLENAME.SDK,ymtApp.main.prefab.BtnRed,cc.Prefab,function(t,o){for(var n=0;n<r.default.getFloatRedTotal();n++){var a=cc.instantiate(o);a.parent=e,i.btnRedList[n]=a,a.active=!1,a.getComponent(s.default).setData(n,i.onClickFloat.bind(i))}}),this.appearTime=r.default.getFloatRedAppearTime(),this.appearCount=this.sdkData.appearCount;else for(var n=0;n<this.btnRedList.length;n++)this.btnRedList[n].active=!1},t.onClickFloat=function(t){this.btnRedList[t].active=!1,this.appearCount--,this.appearTime<=0&&(this.appearTime=r.default.getFloatRedAppearTime()),this.onClickType(a.CLICK_TYPE.BTN_RED_PACKET)},t.updateTimer=function(t){if(this.onlineTime+=t,r.default.isPowerOpen()&&this.sdkData.recoveryTime>0){var e=ymtApp.gameController.getServerTime(),i=r.default.getPowerLimit(),o=r.default.getRecoverTime(),n=Math.ceil((this.sdkData.recoveryTime-e)/1e3);if(n%o==0){if(0==n)this.sdkData.curStrength=i,this.sdkData.recoveryTime=0;else{var a=Math.ceil((this.sdkData.recoveryTime-e)/o/1e3);this.sdkData.curStrength=i-a}ymtApp.eventTarget.emit(ymtApp.eventName.STRENGTH_CHANGE),this.saveData()}}if(this.isShowFloat&&r.default.getFloatRedLimit()>0&&(this.appearTime--,0==this.appearTime&&this.appearCount>0))for(var c=0;c<this.btnRedList.length;c++){var l=this.btnRedList[c];if(!l.active)return l.active=!0,l.getComponent(s.default).updateView(),this.appearTime=r.default.getFloatRedAppearTime(),void this.appearCount--}},t.addInsertadTimes=function(){this.sdkData.insertadLimit++,this.saveData()},t.showSelfBanner=function(t){var e=this;this.selfBanner?this.selfBanner.active=t:ymtApp.resMgr.loadResByBundleName(o.BUNDLENAME.SDK,ymtApp.main.prefab.AdBanner,cc.Prefab,function(i,o){e.selfBanner=cc.instantiate(o),e.selfBanner.parent=e.sdkLayer,e.selfBanner.active=t,e.selfBanner.zIndex=999})},t.setOwnInterstitial=function(t){var e=r.default.confData.self_insertad[r.default.scene];if(null==e&&(e=r.default.confData.self_insertad.default),1==e)if(t){var i=ymtApp.gameController.getServerTime();if(null!=r.default.confData.self_insertad_interval_sec&&r.default.confData.self_insertad_interval_sec>0&&i-this.lastInsertadTime<1e3*r.default.confData.self_insertad_interval_sec)return;if(r.default.confData.self_insertad_limit<=this.sdkData.insertadLimit)return;this.lastInsertadTime=i,this.showView(a.PROCESS_TYPE.AD_INTERSTITIAL_VIEW)}else this.hideView(a.PROCESS_TYPE.AD_INTERSTITIAL_VIEW)},t.addStrength=function(t,e){if(void 0===e&&(e=!1),t<0&&this.sdkData.curStrength<Math.abs(t))return!1;if(t>0&&this.sdkData.curStrength>=c.default.I.maxItemNum)return l.default.floatingHint("\u5df2\u8fbe\u6570\u91cf\u4e0a\u9650\uff0c\u8bf7\u7acb\u5373\u4f7f\u7528\uff01"),!1;var i=r.default.getPowerLimit(),o=r.default.getRecoverTime();if(this.sdkData.curStrength+=t,this.sdkData.curStrength>=i)this.sdkData.recoveryTime=0;else{var n=ymtApp.gameController.getServerTime();if(0==this.sdkData.recoveryTime)this.sdkData.recoveryTime=n+o*(i-this.sdkData.curStrength)*1e3;else{var a=this.sdkData.recoveryTime-t*o*1e3;this.sdkData.recoveryTime=a<=n?0:a}}return e||ymtApp.eventTarget.emit(ymtApp.eventName.STRENGTH_CHANGE,t,this.sdkData.curStrength),this.saveData(),!0},t.isStrengthEnough=function(t,e){return void 0===e&&(e=!1),!r.default.isPowerOpen()||(null==t&&(t=r.default.getPowerCost()),this.getStrength()>=t&&(e&&this.addStrength(-t),!0))},t.getStrength=function(){return this.sdkData.curStrength},t.getRecoveryTime=function(){return this.sdkData.recoveryTime||0},t.getOnlineTime=function(){return this.onlineTime||0},t.addMore=function(t){r.default.isExportOpen()&&this.addSDKPrefab(t,ymtApp.main.prefab.BtnMore,function(){})},t.addSDKPrefab=function(t,e,i){return null==t?(console.error("addSDKPrefab parent == null"),!1):(ymtApp.resMgr.loadResByBundleName(o.BUNDLENAME.SDK,e,cc.Prefab,function(e,o){var n=cc.instantiate(o);n.parent=t,i&&i(n)}),!0)},t.showView=function(t){if(!(this.uiMap[t]&&this.viewShowCB&&this.viewShowCB(t,this.uiMap[t]))){var e=n.default.processCfg[t];e&&ymtApp.viewMgr.showView(e)}},t.hideView=function(t){if(!(this.uiMap[t]&&this.viewHideCB&&this.viewHideCB(t,this.uiMap[t]))){var e=n.default.processCfg[t];e&&ymtApp.viewMgr.hideView(e)}},t.sdkData={},t.onlineTime=0,t.btnRedList=[],t.nodePool=new cc.NodePool,t.uiMap={},t.processIdx=-1,t.lastInsertadTime=0,t}();i.default=d,cc._RF.pop()},{BtnRedPacket:"BtnRedPacket",GameEnums:"GameEnums",GameServerConf:"GameServerConf",SDKConfig:"SDKConfig",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",WxMgr:"WxMgr"}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"5a4b7AARSdAjreUB060L8nE","Utils");var o=__awaiter,n=__generator;Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(){}return t.getItem=function(t,e){var i=cc.sys.localStorage.getItem(t);if(null===i||""===i)return e;if(null==e||"object"!=typeof e){if(null!=e){if("number"==typeof e)return Number(i);if("boolean"==typeof e)return"true"==i}return i}try{var o=JSON.parse(i);return o.constructor!==e.constructor?e:o}catch(n){return console.error("getItem JSON "+t+", error : "+n+", ",i),e}},t.setItem=function(t,e){"object"==typeof e?cc.sys.localStorage.setItem(t,JSON.stringify(e)):cc.sys.localStorage.setItem(t,e)},t.clone=function(t){var e;if(t&&t.constructor===Object){e=new t.constructor;for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];e[n]=this.clone(t[n])}}else if(t&&t.constructor===Array){e=[];for(var a=0;a<t.length;a++)e.push(this.clone(t[a]))}else e=t;return e},t.randByList=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0);var o=Math.floor(Math.random()*t.length);if(e){var n=o-i,a=2*i+1;n<0?n=0:n>t.length-a&&(n=t.length-a);var r=t.splice(n,a);return r[Math.floor((r.length-1)/2)]}return t[o]},t.randList=function(t,e){return t.sort(function(){return Math.random()-.5}),e?t.slice(0,e):t},t.randByArea=function(t,e){if(void 0===e&&(e=!1),null==t||t.length<2)return 0;var i=Math.random()*(t[1]-t[0])+t[0];return e?Math.floor(i):i},t.randIntFilters=function(t,e){void 0===e&&(e=[]);for(var i=t[1]-t[0],o=Array.from({length:i+1},function(e,i){return i+t[0]}),n=0;n<e.length;n++){var a=o.indexOf(e[n]);a>=0&&o.splice(a,1)}return o.sort(function(){return Math.random()-.5}),o[0]},t.formatSecToStr=function(t){void 0===t&&(t=0);var e=Math.floor(t%60),i=Math.floor(t%3600/60),o=Math.floor(t/60/60),n="";return o>0&&(n=o+":"),""+n+i.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")},t.formatTime=function(t,e){var i=Math.ceil(t);return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){var e,o=0;switch(t){case"yyyy":o=31536e3;break;case"MM":o=2592e3;break;case"dd":o=86400;break;case"HH":o=3600;break;case"mm":o=60;break;case"ss":o=1}if(o>0){var n=Math.floor(i/o);return i-=n*o,((e=n)<10?"0":"")+e}return t})},t.formatDateTime=function(t,e){var i=new Date(t),o=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return o(i.getFullYear());case"MM":return o(i.getMonth()+1);case"mm":return o(i.getMinutes());case"dd":return o(i.getDate());case"HH":return o(i.getHours());case"ss":return o(i.getSeconds())}})},t.getDay=function(t,e){var i=new Date,o=i.getFullYear();null==t&&(t=i.getMonth()+1),null==e&&(e=i.getDate());var n=new Date(o,t-1,e).getTime()-new Date(o,0,1).getTime();return Math.ceil(n/864e5)+1},t.getDateByDay=function(t){void 0===t&&(t=1);var e=(new Date).getFullYear(),i=new Date(e,0,1).getTime()+864e5*(t-1),o=new Date(i);return{year:e,month:o.getMonth()+1,day:o.getDate()}},t.daysBetween=function(t,e){var i=new Date(t),o=new Date(e),n=Math.abs(o.getTime()-i.getTime())/864e5;return Math.floor(n)},t.getTwoPosLen=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.checkPointInBox=function(t,e){return Math.abs(t.x-e.x)<e.width/2&&Math.abs(t.y-e.y)<+e.height/2},t.getRadianTwoPoint=function(t,e){var i=e.x-t.x,o=e.y-t.y;return Math.atan2(o,i)},t.getAngelTwoPoint=function(t,e){var i=this.getRadianTwoPoint(t,e);return this.getAngel(i)},t.getAngel=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.getCirclePos=function(t,e,i){var o=t.x+e*Math.cos(i*Math.PI/180),n=t.y+e*Math.sin(i*Math.PI/180);return cc.v2(o,n)},t.executePreFrame=function(t,e,i){return void 0===i&&(i=.016666666666666666),new Promise(function(o){var n=t;(function t(){var a=(new Date).getTime();if(e&&e())o(!1);else for(var r=n.next();;r=n.next()){if(null==r||r.done)return void o(!0);if((new Date).getTime()-a>i)return void setTimeout(function(){t()},1e3*i)}})()})},t.executeFrame=function(t,e,i,a){return void 0===a&&(a=.016666666666666666),o(this,void 0,void 0,function(){return n(this,function(o){switch(o.label){case 0:return[4,this.executePreFrame(this.getItemGenerator(t,e),i,a)];case 1:return o.sent(),[2]}})})},t.getItemGenerator=function(t,e){var i;return n(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<t?[4,e(i)]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})},t.wait=function(t){return void 0===t&&(t=1),new Promise(function(e){setTimeout(function(){e()},1e3*t)})},t.cutStr=function(t,e){void 0===t&&(t=""),void 0===e&&(e=14);var i="",o=t.length;if(t.replace(/[^\x00-\xff]/g,"**").length<=e)return t;for(var n=0,a=0;n<o;n++){var r=t.charAt(n);if(/[\x00-\xff]/.test(r)?a++:a+=2,!(a<=e))return i;i+=r}},t.getIndexByWeight=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].weight||1;var o=Math.random()*e;for(i=0;i<t.length;i++)if(o>=(e-=t[i].weight||1))return i;return 0},t.getListByWeight=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=1);for(var i=this.clone(t),o=[],n=0;n<e;n++){var a=this.getIndexByWeight(i),r=i.splice(a,1);o=o.concat(r)}return o},t.calculateOppositeSide=function(t,e){var i=t*Math.PI/180;return e*Math.sin(i)},t}();i.default=a,cc._RF.pop()},{}],VIVOAd:[function(t,e,i){"use strict";cc._RF.push(e,"dbf4bFOJDtBkqUxnW3yFnr+","VIVOAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("AudioUtil"),a=t("Enum"),r=t("GameSys"),s=t("YmtLog"),c=t("mTimer"),l=t("YmtUtils"),d=t("YmtAdManager"),u=t("ymt_enum"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.customBanner=null,e.customInter=null,e.portalAdTimer=null,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),l.default.loadRes("hs_ui/hs_ui_inter_mask",cc.Prefab),this.initBanner(),this.initNormalBanner(),this.initVideo(),this.initNativeAd(),this.initGamePortal())},e.prototype.initNormalBanner=function(){var t=this;this.platformVersion()<1031||r.default.adInfo.adunit_banner.length<=0||0!=r.default.canShowBanner&&(this.destroyNormalBanner(),this.bannerAd=qg.createBannerAd({adUnitId:r.default.adInfo.adunit_banner[0],style:{},adIntervals:Math.max(r.default.adInfo.bannerUpdateTime,30)}),this.bannerAd.onError(function(e){console.log("[YMT_GAME]normal banner error: ",JSON.stringify(e)),e&&30002==e.errCode&&t.destroyNormalBanner()}),this.bannerAd.onClose(function(){t.hideBanner()}))},e.prototype.showNormalBanner=function(){var t=this;null==this.bannerAd&&this.initNormalBanner(),null!=this.bannerAd&&(this.bannerAd.show().then(function(){console.log("%c[YMT_GAME]normal banner show success","color: #33ccff")}),this.bannerAd.onClose(function(){t.bannerDelayTimer&&(t.bannerDelayTimer.clear(),t.bannerDelayTimer=null)}))},e.prototype.hideNormalBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyNormalBanner=function(){this.bannerAd&&this.bannerAd.destroy()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;0!=r.default.canShowBanner&&(this.hideBanner(),this.bannerDelayTimer=c.default.once(function(){var e=t.getLocalNativeData(u.ad_native_type.banner);if(r.default.adInfo.bannerUpdateTime>0&&!r.default.isShenHe&&!r.default.isShieldArea&&(null==t.bannerTimer&&(t.bannerTimer=new c.default),t.bannerTimer&&t.bannerTimer.once(function(){t.showBanner()},1e3*r.default.adInfo.bannerUpdateTime)),null==e||void 0===e)t.showCustomBanner();else{var i=cc.instantiate(l.default.getRes("hs_ui/ui_banner",cc.Prefab));t.bannerNode=i.getComponent("hs_ui_banner"),t.bannerNode.show(e,function(){},function(){t.bannerTimer&&t.bannerTimer.clear()})}},1e3))},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.hideNormalBanner(),this.destroyCustomBanner()},e.prototype.initVideo=function(){var t=this;this.platformVersion()<1041||null==r.default.adInfo.adunit_video||(this.destroyVideo(),this.videoAd=qg.createRewardedVideoAd({posId:r.default.adInfo.adunit_video}),this.videoAd.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")}),this.videoAd.onError(function(){l.default.emit(a.EVENT_TYPE.AD_ERROR,0)}),this.videoAd.onClose(function(e){n.default.setMusicVolume(1),n.default.setSoundVolume(1),e&&e.isEnded?(console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),t.videocallback&&t.videocallback(!0)):t.videocallback&&t.videocallback(!1),t.videoAd.load()}),this.videoAd.load())},e.prototype.showVideo=function(t){var e=this;null==this.videoAd&&this.initVideo(),null!=this.videoAd?(this.videocallback=t,this.videoAd.show().then(function(){n.default.setMusicVolume(0),n.default.setSoundVolume(0)}).catch(function(){e.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),e.videoAd.load()})):t&&t(!0)},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var i=this;if(!(0==r.default.canShowInter||this.customInter&&this.customInter.isShow())){if(this.platformVersion()<1031||null==r.default.adInfo.adunit_intestital)return e&&e();if(l.default.randomInt(1,100)>r.default.adInfo.showInteNormalRto)return e&&e();this.hideNativeInterstitial(),this.hideBanner(),this.interAd=qg.createInterstitialAd({posId:r.default.adInfo.adunit_intestital}),this.interAd.onLoad(function(){t&&t()}),this.interAd.onClose(function(){e&&e(),i.showBanner(),i.destroyNormalInter()}),this.interAd.load().then(function(){return i.interAd.show()}).then(function(){i.interAd.isShow=!0,i.destroyCustomInter(),i.hideBanner(),i.interShowTime=i.get_time()}).catch(function(t){console.log("\u666e\u901a\u63d2\u5c4f\u5c55\u793a\u5931\u8d25"+JSON.stringify(t)),e&&e(),i.showBanner(),i.destroyNormalInter()})}},e.prototype.destroyNormalInter=function(){this.interAd&&(this.interAd.offLoad(),this.interAd.offError()),this.interAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(i){var o=r.default.adInfo.adunit_native[t];if(console.log(t,"posId = ",o),""==o||void 0===o||null==o||e.is_limit_native_length(t)||e.platformVersion()<1053)return i(null);var n=qg.createNativeAd({posId:o});n.onLoad(function i(o){if(console.log("%c[YMT_GAME]native data load:","color: #33ccff"),o&&o.adList){var a=o.adList.pop();a.ad=n,a.type=t,e.add_native_data(a),console.log("%c[YMT_GAME]native data load succ:"+JSON.stringify(a),"color: #33ccff"),n.offLoad(i)}}),n.onError(function t(e){console.log("%c[YMT_GAME]native data error: "+JSON.stringify(e),"color: red"),n.offError(t)}),n.load(),setTimeout(i,1500)})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.native_icon)}).then(function(){return t.create_ad(u.ad_native_type.inner_interstitial)}).then(function(){return t.create_ad(u.ad_native_type.interstitial)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,i,o){var n=this;this.hideInterstitialNative();var a=this.getLocalNativeData(u.ad_native_type.inner_interstitial);if(null==a||void 0===a)o&&o();else{var r=cc.instantiate(l.default.getRes("hs_ui/ui_inner_interstitial",cc.Prefab));this.innerInter=r.getComponent("hs_ui_inner_interstitial"),this.innerInter&&this.innerInter.show(t,a,e,function(){n.hideBanner(),i&&i()},o)}},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter(),this.destroyCustomInter()},e.prototype.showNativeIcon=function(t){this.hideNativeIcon();var e=u.ad_native_type.native_icon,i=r.default.adInfo.adunit_native[e];i==r.default.adInfo.adunit_native[u.ad_native_type.inner_interstitial]?e=u.ad_native_type.interstitial:i==r.default.adInfo.adunit_native[u.ad_native_type.banner]&&(e=u.ad_native_type.banner);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return console.log("%c[YMT_GAME]showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e","color: #33ccff");var n=cc.instantiate(l.default.getRes("hs_ui/ui_native_icon",cc.Prefab));this.nativeIcon=n.getComponent("hs_ui_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*l.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.initGamePortal=function(t,e,i,o,n){var a=this;if(void 0===i&&(i=!0),void 0===o&&(o=""),void 0===n&&(n=300),qg.createBoxPortalAd){if(null==r.default.adInfo.adunit_portal||""==r.default.adInfo.adunit_portal)return void console.log("adunit_portal == null");this.portalAd=qg.createBoxPortalAd({posId:r.default.adInfo.adunit_portal,image:o,marginTop:n}),this.portalAd.onShow(function(){t&&t(),a.hideBanner()}),this.portalAd.onClose(function(){e&&e(),a.portalAd.isDestroyed||a.portalAd.show()})}else console.log("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},e.prototype.showGamePortal=function(t,e,i,o,n){var a=this;if(void 0===i&&(i=!0),void 0===o&&(o=""),void 0===n&&(n=500),qg.createBoxPortalAd&&r.default.adInfo.adunit_portal){if(null==this.portalAd&&this.initGamePortal(t,e,i,o,n),null==this.portalAd)return e&&e();this.portalAd.show().then(function(){console.log("portalAd button show success"),a.portalAdTimer&&(a.portalAdTimer.clear(),a.portalAdTimer=null),a.portalAdTimer=null}).catch(function(r){a.hideGamePortal(),!r||30002!=r.code&&40218!=r.code?(e&&e(),i&&a.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")):(null==a.portalAdTimer&&(a.portalAdTimer=new c.default),a.portalAdTimer.once(function(){a.showGamePortal(t,e,!1,o,n)},1e4))})}else e&&e(),console.warn("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},e.prototype.hideGamePortal=function(){this.portalAd&&this.portalAd.hide(),this.portalAdTimer&&this.portalAdTimer.clear(),this.portalAdTimer=null},e.prototype.destroyGamePortal=function(){this.portalAd&&(this.portalAdTimer&&this.portalAdTimer.clear(),this.portalAdTimer=null,this.portalAd.destroy(),this.portalAd=null)},e.prototype.showAddDesktop=function(t,e){if(cc.winSize.width>=cc.winSize.height)this.addDesktop(t,e);else if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node,!0)){var i=cc.instantiate(l.default.getRes("hs_ui/ui_add_icon",cc.Prefab));this.addIconNode=i.getComponent("hs_ui_add_icon"),this.addIconNode&&this.addIconNode.show(t)}},e.prototype.hasAddDesktop=function(t,e,i){this.platformVersion()>=1041?qg.hasShortcutInstalled({success:function(i){i?e&&e():t&&t()},fail:function(){r.default.Ad().createToast("\u64cd\u4f5c\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5~~"),i&&i()}}):(console.log("\u4e0d\u652f\u6301\u6dfb\u52a0\u684c\u9762"),i&&i())},e.prototype.addDesktop=function(t,e){var i=this;this.get_time()-this.addDeskTime<=12e4?this.createToast("\u64cd\u4f5c\u592a\u9891\u7e41, \u8bf7\u7a0d\u540e\u518d\u8bd5~"):qg.installShortcut?(this.addDeskTime=this.get_time(),qg.installShortcut({success:function(){setTimeout(function(){i.hasAddDesktop(function(){e&&e()},function(){t&&t()})},1e3)},fail:function(){e&&e()}})):e&&e()},e.prototype.login=function(t,e){this.platformVersion()>=1040&&qg.login({success:function(e){t&&t(e)},fail:function(t){e&&e(t)}})},e.prototype.showCustomBanner=function(){var t=this,e=r.default.adInfo.adunit_custom_banner;if(null==e||void 0===e||!qg.createCustomAd)return this.showNormalBanner();this.hideBanner(),this.customBanner=qg.createCustomAd({adUnitId:e,style:{}}),this.customBanner.show().then(function(){}).catch(function(e){console.log("[YMT_GAME] custom banner show error: "+JSON.stringify(e)),t.destroyCustomBanner(),t.showNormalBanner()}),this.customBanner.onClose(function e(){t.customBanner&&t.customBanner.offClose(e),t.bannerDelayTimer&&(t.bannerDelayTimer.clear(),t.bannerDelayTimer=null),t.destroyCustomBanner(),t.hideBanner()})},e.prototype.destroyCustomBanner=function(){this.customBanner&&this.customBanner.destroy(),this.customBanner=null},e.prototype.showCustomInter=function(t,e){var i=this,o=r.default.adInfo.adunit_custom_inter;if(null==o||void 0===o)return this.showInterstitial(t,e);if(!this.interAd||!this.interAd.isShow){this.hideNativeInterstitial();var n=qg.getSystemInfoSync(),a=(r.default.screenHeight-525*n.pixelRatio/2)/2,c=0;n.screenWidth>n.screenHeight&&(a=(r.default.screenHeight-525*n.pixelRatio/2)/2,c=(r.default.screenWidth-720*n.pixelRatio/2)/2),this.customInter=qg.createCustomAd({adUnitId:o,style:{top:a,left:c}}),this.customInter.show().then(function(){l.default.loadRes("hs_ui/hs_ui_inter_mask",cc.Prefab).then(function(t){null==i.customInter||i.interMask&&cc.isValid(i.interMask,!0)||(i.interMask=cc.instantiate(t),i.interMask.zIndex=cc.macro.MAX_ZINDEX,cc.director.getScene().addChild(i.interMask),cc.game.addPersistRootNode(i.interMask))}),i.destroyNormalInter(),t&&t()});var d=function t(){s.default.i("============customInter.onClose"),e&&e(),i.customInter&&i.customInter.offClose(t),i.customInter&&i.customInter.offError(u),i.destroyCustomInter()};this.customInter.onClose(d);var u=function o(n){s.default.i("============customInter.onError"),console.log("[YMT_GAME] custom inter error: "+JSON.stringify(n)),i.customInter&&i.customInter.offClose(d),i.customInter&&i.customInter.offError(o),i.destroyCustomInter(),i.showInterstitial(t,e)};this.customInter.onError(u)}},e.prototype.destroyCustomInter=function(){s.default.i("============customInter.destroyCustomInter"),this.customInter&&this.customInter.destroy(),this.customInter=null,this.interMask&&(this.interMask.destroy(),cc.game.removePersistRootNode(this.interMask)),this.interMask=null},e}(d.default);i.default=p,cc._RF.pop()},{AudioUtil:"AudioUtil",Enum:"Enum",GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtLog:"YmtLog",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],VidMateH5Ad:[function(t,e,i){"use strict";cc._RF.push(e,"501383U6GVBm4rlkj6SFxU+","VidMateH5Ad");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){},e.prototype.showVideo=function(t,e){var i=this;this.videocallback=t,window.xSDK.showRewardedAd({type:"reward",name:e,beforeAd:function(){console.log("beforeAd"),cc.audioEngine.pauseAll(),cc.director.pause()},afterAd:function(){console.log("afterAd"),cc.audioEngine.resumeAll(),cc.director.resume()},beforeReward:function(t){console.log("beforeReward"),t()},adDismissed:function(){i.videocallback&&i.videocallback(!1)},adViewed:function(){i.videocallback&&i.videocallback(!0)},adBreakDone:function(t){setTimeout(function(){console.log("adBreakDone",t.breakStatus),cc.audioEngine.resumeAll(),cc.director.resume()},200)}})},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(t,e,i,o){var a=this;n.default.w("==\u64ad\u653e\u63d2\u5c4f==",i,o,window.vidmateGame);var r=i||"browse",s=o||"normal";window.xSDK.showInterstitialAd({type:r,name:s,beforeAd:function(){console.log("Inters beforeAd"),cc.audioEngine.pauseAll(),cc.director.pause(),setTimeout(function(){a.tmpShow=a.willShowBanner,a.hideBanner(),a.willShowBanner=a.tmpShow,console.log("\u63d2\u5c4f beforeAd",a.willShowBanner)},200)},afterAd:function(){console.log("Inters afterAd"),cc.audioEngine.resumeAll(),cc.director.resume(),setTimeout(function(){a.canShowInterstitialAd=!0},a.interstitialAdDelay),console.log("\u63d2\u5c4f afterAd",a.willShowBanner),a.willShowBanner&&a.showBanner()},adBreakDone:function(t){console.log("Inters adBreakDone",JSON.stringify(t,null,2)),setTimeout(function(){console.log("adBreakDone",t.breakStatus),cc.audioEngine.resumeAll(),cc.director.resume()},200)}})},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.e("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],VideoRecommendView:[function(t,e,i){"use strict";cc._RF.push(e,"361a6Ud04FI5ZHC3zn/1yCU","VideoRecommendView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("SDKEnum"),s=t("SDKMgr"),c=t("UIMgr"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.sprCenter=null,e.finger=null,e.btnContinue=null,e.interstitialNet=[],e.countTimes=0,e.index=0,e}return o(e,t),e.prototype.init=function(){this.onClick(this.btnContinue,this.onClickContinue,this),this.onClick(this.sprCenter,this.onClickCenter,this)},e.prototype.addEventListener=function(){this.eventOn(ymtApp.eventName.GAME_SHOW,this.onGameShow,this)},e.prototype.open=function(){var t=this;this.countTimes=0,this.bg.color=s.default.getBgColor(),this.changeCenter(),s.default.bannerVisible(!1);var e=s.default.getBottomAdShowSec();this.bannerTween=cc.tween(this.node).repeatForever(cc.tween().delay(e[0]).call(function(){s.default.bannerVisible(!0,s.default.getRecBottomAdType())}).delay(e[1]).call(function(){s.default.bannerVisible(!1,s.default.getRecBottomAdType())})).start(),this.finger.active=!1,s.default.confData.finger_guide&&1==s.default.confData.finger_guide&&this.scheduleOnce(function(){t.finger.active=!0},2)},e.prototype.changeCenter=function(){var t=this;if(s.default.confData.gridad_video_img&&s.default.confData.gridad_video_img.length>0)if(this.index=(this.index+1)%s.default.confData.gridad_video_img.length,this.interstitialNet[this.index])this.sprCenter.getComponent(cc.Sprite).spriteFrame=this.interstitialNet[this.index];else{var e=s.default.confData.gridad_video_img[this.index];cc.assetManager.loadRemote(e,function(e,i){if(!e){var o=new cc.SpriteFrame(i);t.interstitialNet[t.index]=o,t.sprCenter.getComponent(cc.Sprite).spriteFrame=o}})}},e.prototype.onClickCenter=function(){s.default.showVideo(function(){c.default.onClickType(r.CLICK_TYPE.VIDEO_RECOMMOND)})},e.prototype.onClickContinue=function(){var t=this;this.countTimes++,this.countTimes==s.default.recNextBtnClickNum&&(this.delayTween&&this.delayTween.stop(),this.delayTween=cc.tween(this.node).delay(s.default.recNextBtnDelaySec).call(function(){t.onBack()}).start())},e.prototype.onGameShow=function(){this.onBack()},e.prototype.onBack=function(){this.bannerTween&&this.bannerTween.stop(),this.delayTween&&this.delayTween.stop(),this.removeAllListener(),s.default.bannerVisible(!1,s.default.getRecBottomAdType()),c.default.nextProcess()},n([u(cc.Node)],e.prototype,"bg",void 0),n([u(cc.Node)],e.prototype,"sprCenter",void 0),n([u(cc.Node)],e.prototype,"finger",void 0),n([u(cc.Node)],e.prototype,"btnContinue",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{BaseUI:"BaseUI",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],VideoView:[function(t,e,i){"use strict";cc._RF.push(e,"a6c66xNgxBHZpQGNcz87Gsw","VideoView");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("SDKEnum"),s=t("SDKMgr"),c=t("UIMgr"),l=cc._decorator,d=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBg=null,e.btnClose=null,e.finger=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.init()},e.prototype.init=function(){this.onClick(this.btnClose,this.onBack,this),this.onClick(this.nodeBg,this.onClickBg,this)},e.prototype.open=function(){var t=this;this.finger.active=!1,s.default.confData.finger_guide&&1==s.default.confData.finger_guide&&this.scheduleOnce(function(){t.finger.active=!0},2)},e.prototype.onClickBg=function(){var t=this;s.default.showVideo(function(){c.default.onClickType(r.CLICK_TYPE.VIDEO_FORCE),t.onBack()},function(){1==s.default.startVideo&&t.onBack()})},e.prototype.onBack=function(){c.default.nextProcess()},n([u(cc.Node)],e.prototype,"nodeBg",void 0),n([u(cc.Node)],e.prototype,"btnClose",void 0),n([u(cc.Node)],e.prototype,"finger",void 0),n([d],e)}(a.default);i.default=p,cc._RF.pop()},{BaseUI:"BaseUI",SDKEnum:"SDKEnum",SDKMgr:"SDKMgr",UIMgr:"UIMgr"}],ViewMgr:[function(t,e,i){"use strict";cc._RF.push(e,"80a28CK3f1FbpeB2FMhAVam","ViewMgr");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=t("Singleton"),s=t("Tips"),c=t("GameEnums"),l=t("MainConfig"),d=t("CurrencyUI"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list={},e.tips=null,e.gameLayer=null,e.uiLayer=null,e.dialogLayer=null,e.sdkLayer=null,e.tipsLayer=null,e.videoMask=null,e.currencyUI=null,e.waitMap={count:0},e.uiZIndex=0,e}return o(e,t),e.prototype.initLayer=function(t,e,i,o,n,a,r){this.gameLayer=t,this.uiLayer=e,this.dialogLayer=i,this.sdkLayer=o,this.tipsLayer=a,this.currencyUI=n,this.videoMask=r},e.prototype.showToast=function(t,e,i){return void 0===e&&(e=1.5),n(this,void 0,void 0,function(){var o,n,r=this;return a(this,function(a){switch(a.label){case 0:return this.tips&&cc.isValid(this.tips)?(this.tips.show(t,{position:i,time:e}),[3,3]):[3,1];case 1:return o=ymtApp.main.prefab.Tips,[4,ymtApp.resMgr.getPrefab(o)];case 2:(n=a.sent())?this.createTips(n,t,i,e):ymtApp.resMgr.loadRes({url:o,type:cc.Prefab},cc.Prefab,!1,function(o,n){!o&&r.createTips(n,t,i,e)}),a.label=3;case 3:return[2]}})})},e.prototype.showReward=function(t){ymtApp.viewMgr.showView(l.UI.PROP_REWARD,t)},e.prototype.initCurrency=function(){this.currencyUI&&this.currencyUI.getComponent(d.default).initCurrency()},e.prototype.showCurrency=function(t,e){this.currencyUI&&this.currencyUI.getComponent(d.default).show(t,e)},e.prototype.hideCurrency=function(t){this.currencyUI&&this.currencyUI.getComponent(d.default).hide(t)},e.prototype.showMask=function(t){this.videoMask.active=t},e.prototype.addWait=function(t,e,i){void 0===t&&(t="wait"),this.waitMap.count++,this.waitMap[t]||(this.waitMap[t]={});var o=e||"times",n=this.waitMap[t][o]||0;this.waitMap[t][o]=n+1,this.showView(l.UI.WAIT,i)},e.prototype.delWait=function(t,e){if(void 0===t&&(t="wait"),this.waitMap.count--,this.waitMap.count<=0&&(this.waitMap.count=0,this.hideView(l.UI.WAIT)),this.waitMap[t]){var i=e||"times",o=this.waitMap[t][i]||0;this.waitMap[t][i]=o-1,this.waitMap[t][i]<=0&&delete this.waitMap[t][i]}},e.prototype.clearWait=function(){this.waitMap={count:0},this.hideView(l.UI.WAIT)},e.prototype.logWaitInfo=function(){console.log("wait info:",JSON.stringify(this.waitMap))},e.prototype.isViewShow=function(t){var e=this.list[t];return!!(e&&e.ui&&cc.isValid(e.ui))&&e.ui.active},e.prototype.getView=function(t){var e=this.list[t];if(e&&e.ui)return e.ui},e.prototype.getViewList=function(){return Object.keys(this.list)},e.prototype.isSingleView=function(t){if(!this.list[t])return!1;for(var e in this.list)if(e!=t&&e!=l.UI.WAIT&&this.isViewShow(e))return!1;return!0},e.prototype.hideView=function(t,e){void 0===e&&(e=!1);var i=this.list[t];if(i&&i.ui&&cc.isValid(i.ui)){var o=l.UI_RES[t],n=o.tsName||"BaseUI",a=i.ui.getComponent(n);a&&a.close&&a.close(),i.ui.active=!1,(e||o.isDestroy)&&(delete this.list[t],i.ui.destroy()),ymtApp.eventTarget.emit(ymtApp.eventName.VIEW_VISIBLE,{name:t,visible:!1})}},e.prototype.showView=function(t,e,i){return n(this,void 0,Promise,function(){var o,n,r;return a(this,function(a){switch(a.label){case 0:return o=l.UI_RES[t],(n=this.list[t])&&n.isLoading?(console.warn("ViewMgr showUI loading",t),[2,n.ui]):n&&n.ui&&cc.isValid(n.ui)?(this.showTop(n),n.ui.active||(n.ui.active=!0),this.postArg(t,n.ui,e),i&&i(),[2,n.ui]):[3,1];case 1:return t!=l.UI.WAIT&&this.addWait("showUI",t),this.list[t]={isLoading:!0,ui:null,viewType:null},[4,ymtApp.resMgr.getPrefab(o.url,o.bundleName)];case 2:return r=a.sent(),[2,this.createView(t,r,o,e,i)]}})})},e.prototype.showTop=function(t){var e=t.ui.zIndex,i=t.viewType;for(var o in this.list){var n=this.list[o];n&&n.ui&&cc.isValid(n.ui)&&n.ui.active&&n.viewType==i&&e<n.ui.zIndex&&(e=this.uiZIndex++)}e>t.ui.zIndex&&(t.ui.zIndex=e)},e.prototype.createView=function(t,e,i,o,n){if(null==e)return t!=l.UI.WAIT&&this.delWait("showUI",t),delete this.list[t],void console.error("show UI",t);var a=cc.instantiate(e),r=cc.director.getScene().name;return i&&i.viewType==c.VIEW_TYPE.TOP?(this.addToLayer(a,cc.find("Canvas")),a.zIndex=99):i&&i.viewType==c.VIEW_TYPE.GAME?this.addToLayer(a,this.gameLayer):i&&i.viewType==c.VIEW_TYPE.TIPS?this.addToLayer(a,this.tipsLayer):i&&i.viewType==c.VIEW_TYPE.DIALOG?this.addToLayer(a,this.dialogLayer):this.addToLayer(a,this.uiLayer),this.list[t]={ui:a,viewType:i.viewType,scene:r},a.zIndex=this.uiZIndex++,a.active=!0,this.postArg(t,a,o),n&&n(),t!=l.UI.WAIT&&this.delWait("showUI",t),ymtApp.eventTarget.emit(ymtApp.eventName.SHOW_VIEW,t),a},e.prototype.postArg=function(t,e,i){var o=l.UI_RES[t].tsName||"BaseUI",n=e.getComponent(o);n&&(n.setArg&&n.setArg(i),n.open&&n.open()),ymtApp.eventTarget.emit(ymtApp.eventName.VIEW_VISIBLE,{name:t,visible:!0})},e.prototype.createTips=function(t,e,i,o){var n=cc.instantiate(t);this.addToLayer(n,this.tipsLayer),n.zIndex=999,this.tips=n.getComponent(s.default),this.tips.show(e,{position:i,time:o})},e.prototype.addToLayer=function(t,e){return t?(e&&cc.isValid(e)?t.parent=e:t.parent=cc.find("Canvas"),!0):(console.error("addToLayer ui == null"),!1)},e}(r.default);i.default=u,cc._RF.pop()},{CurrencyUI:"CurrencyUI",GameEnums:"GameEnums",MainConfig:"MainConfig",Singleton:"Singleton",Tips:"Tips"}],WaitUI:[function(t,e,i){"use strict";cc._RF.push(e,"1c234oE5gdCoJ3eFhvfIAM4","WaitUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("GameServerConf"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprLoad=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.onClick(this.node,this.onClickWait,this,{noVibrate:!0,noSound:!0})},e.prototype.open=function(){t.prototype.open.call(this),this.arg=this.arg||{},null!=this.arg.showTime?this.showTime=this.arg.showTime:(this.showTime=r.default.I.showWaitCircleTime,null==this.showTime&&(this.showTime=3))},e.prototype.onShow=function(){this.showTime>0&&this.scheduleOnce(this.showLoad,this.showTime)},e.prototype.onHide=function(){this.unschedule(this.showLoad),this.unschedule(this.hideLoad),this.sprLoad.active=!1},e.prototype.showLoad=function(){this.sprLoad&&cc.isValid(this.sprLoad)&&(this.sprLoad.active=!0);var t=r.default.I.hideWaitCircleTime;null==t&&(t=10),this.scheduleOnce(this.hideLoad,t)},e.prototype.hideLoad=function(){ymtApp.viewMgr.clearWait()},e.prototype.onClickWait=function(){ymtApp.viewMgr.logWaitInfo()},n([l(cc.Node)],e.prototype,"sprLoad",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseUI:"BaseUI",GameServerConf:"GameServerConf"}],WinUI:[function(t,e,i){"use strict";cc._RF.push(e,"7c0f3q3TwFFbZFUyHQNGIrv","WinUI");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("BaseUI"),r=t("MainConfig"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnMask=null,e.sprWin=null,e.spWin=null,e.isWait=!1,e}return o(e,t),e.prototype.init=function(){var t=this;this.onClick(this.btnMask,function(){t.isWait||ymtApp.viewMgr.hideView(r.UI.WIN)})},e.prototype.open=function(){var e=this;t.prototype.open.call(this),ymtApp.gameController.addPause(),this.isWait=!0,ymtApp.audioMgr.playSound(ymtApp.main.audio.win),cc.Tween.stopAllByTarget(this.sprWin),this.sprWin.scale=0,cc.tween(this.sprWin).to(.5,{scale:1},cc.easeBackOut()).call(function(){e.spWin.node.active=!0,e.spWin.setAnimation(0,"animation",!1)}).delay(1).call(function(){ymtApp.viewMgr.showView(r.UI.RESULT,e.arg),e.isWait=!1}).start()},e.prototype.close=function(){t.prototype.close.call(this),ymtApp.gameController.delPause()},n([l(cc.Node)],e.prototype,"btnMask",void 0),n([l(cc.Node)],e.prototype,"sprWin",void 0),n([l(sp.Skeleton)],e.prototype,"spWin",void 0),n([c],e)}(a.default);i.default=d,cc._RF.pop()},{BaseUI:"BaseUI",MainConfig:"MainConfig"}],WxAd:[function(t,e,i){"use strict";cc._RF.push(e,"f37a5JitwhKaJC4RB/SiSkw","WxAd");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("GameSys"),a=t("mTimer"),r=t("YmtUtils"),s=t("YmtAdManager"),c=t("ymt_enum"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shareRcorderLayer=null,e.recorderTime=0,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo(),this.initRecorder())},e.prototype.initBanner=function(){var t=this;0!=n.default.adInfo.adunit_banner.length&&(this.bannerAd&&this.destroyBanner(),this.bannerAd=wx.createBannerAd({adUnitId:n.default.adInfo.adunit_banner[0],adIntervals:Math.max(30,n.default.adInfo.bannerUpdateTime),style:{left:0,top:n.default.screenHeight,width:n.default.screenWidth/2}}),this.bannerAd.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210")}),this.bannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef"+JSON.stringify(t))}),this.bannerAd.onResize(function(e){t.bannerAd.style.top=n.default.screenHeight-e.height,t.bannerAd.style.left=(n.default.screenWidth-e.width)/2}))},e.prototype.showBanner=function(){var t=this;console.log("\u662f\u5426\u53ef\u4ee5\u663e\u793aBanner:",n.default.canShowBanner),0!=n.default.canShowBanner&&(null==this.bannerAd&&this.initBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){}).catch(function(){t.initBanner(),t.bannerAd.show()}))},e.prototype.hideBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyBanner=function(){this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=null},e.prototype.initVideo=function(){var t=this;null!=n.default.adInfo.adunit_video&&(console.log("\u89c6\u9891id:",n.default.adInfo.adunit_video),this.destroyVideo(),this.videoAd=wx.createRewardedVideoAd({adUnitId:n.default.adInfo.adunit_video}),this.videoAd.load(),this.videoAd.onLoad(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d",t)}),this.videoAd.onError(function(t){console.log("\u6fc0\u52b1\u89c6\u9891-\u5931\u8d25",t)}),this.videoAd.onClose(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed"),t.recorderResume(),e&&e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6210"),t.videocallback&&t.videocallback(!0)):t.videocallback&&t.videocallback(!1),t.videoAd.load()}))},e.prototype.showVideo=function(t){var e=this;null==this.videoAd&&this.initVideo(),null!=this.videoAd&&(this.videocallback=t,this.videoAd.show().then(function(){}).catch(function(){e.videoAd.load().then(function(){return e.videoAd.show()}).then(function(){}).catch(function(){e.videoAd.load(),wx.showModal({title:"\u6682\u65e0\u5e7f\u544a",content:"\u5206\u4eab\u6e38\u620f\u83b7\u53d6\u5956\u52b1\uff1f",confirmText:"\u5206\u4eab",success:function(t){t.confirm&&n.default.shareGame(function(t){e.videocallback&&e.videocallback(t)})},fail:function(){wx.showToast({title:"\u6682\u65e0\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),e.videocallback&&e.videocallback(!1)}})})}))},e.prototype.destroyVideo=function(){this.videoAd&&this.videoAd.destroy(),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var i=this;if(!(this.get_time()-this.interShowTime<=1e3*n.default.adInfo.interTick)){if(!wx.createInterstitialAd||null==n.default.adInfo.adunit_intestital)return e&&e();if(r.default.randomInt(1,100)>n.default.adInfo.showInteNormalRto)return e&&e();this.destroyNormalInter(),this.interAd=wx.createInterstitialAd({adUnitId:n.default.adInfo.adunit_intestital}),this.interAd&&this.interAd.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),t&&t()}),this.interAd&&this.interAd.onError(function(t){console.log("show inter err"+JSON.stringify(t)),i.destroyNormalInter()}),this.interAd&&this.interAd.onClose(function(){i.recorderResume(),e&&e(),i.destroyNormalInter()}),this.interAd&&this.interAd.load().then(function(){i.interAd.show().then(function(){i.recorderPause(),i.interShowTime=i.get_time()})})}},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,i){var o=this;void 0===i&&(i=0),this.get_time()-this.interShowTime<=1e3*n.default.adInfo.interTick||0!=n.default.canShowInter&&(console.log("\u8c03\u7528\u663e\u793a\u666e\u901a\u63d2\u5c4f"),this.hideNativeInterstitial(),null==this.nativeInterTimer&&(this.nativeInterTimer=new a.default),this.nativeInterTimer.once(function(){var i=o.getLocalNativeData(c.ad_native_type.inner_interstitial);if(null==i||void 0===i)console.log("\u663e\u793a\u666e\u901a\u63d2\u5c4f"),o.showInterstitial(t,e);else{if(r.default.randomInt(1,100)>n.default.adInfo.showInterRto)return e&&e();var a=cc.instantiate(r.default.getRes("hs_ui/ui_interstitial",cc.Prefab));o.nativeInter=a.getComponent("hs_ui_interstitial"),o.nativeInter&&o.nativeInter.show(i,function(){o.interShowTime=o.get_time(),o.hideBanner(),t&&t()},e)}},n.default.isShenHe||n.default.isShieldArea?0:1e3*i))},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){if("ios"!==wx.getSystemInfoSync().platform)for(var t=[],e=0,i=n.default.recommedList;e<i.length;e++){var o=i[e];t.push({appId:o,query:"",extraData:{}})}},e.prototype.showRecorderLayer=function(t,e){if(null==this.shareRcorderLayer||void 0===this.shareRcorderLayer||!cc.isValid(this.shareRcorderLayer.node,!0)){var i=cc.instantiate(r.default.getRes("hs_ui/ui_share_rcorder",cc.Prefab));this.shareRcorderLayer=i.getComponent("hs_ui_share_rcorder"),this.shareRcorderLayer&&this.shareRcorderLayer.show(t,e)}},e}(s.default);i.default=l,cc._RF.pop()},{GameSys:"GameSys",YmtAdManager:"YmtAdManager",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],WxMgr:[function(t,e,i){"use strict";cc._RF.push(e,"5d099pUMm5B4J9kn/91MMx0","WxMgr");var o=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=t("GameEnums"),a=t("SDKConfig"),r=t("SDKMgr"),s=t("zs"),c=t("WxNetMgr"),l=cc._decorator,d=l.ccclass;l.property;var u=function(){function t(){}var e;return e=t,t.setKeepScreenOn=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.setKeepScreenOn({keepScreenOn:!0})},t.initWx=function(t){cc.sys.platform==cc.sys.WECHAT_GAME?(this.phoneInfo=wx.getSystemInfoSync(),this.launchObj=wx.getLaunchOptionsSync(),this.launchObj&&(1104!=this.launchObj.scene&&1089!=this.launchObj.scene||(a.default.isAddProgram=!0),1095==this.launchObj.scene&&(a.default.isMaiUser=!0)),this.setKeepScreenOn(),wx.updateShareMenu({withShareTicket:!0}),this.login(t)):t&&t()},t.login=function(t){var e=this;cc.sys.platform===cc.sys.WECHAT_GAME?wx.login({fail:function(){e.login(t),cc.log("lodin fail")},success:function(i){c.default.request({isLoginURL:!0,url:"user/login",data:{code:i.code,inviter_openid:e.launchObj.query.inviter_id||"",scene:e.launchObj.scene},method:"POST",success:function(i){a.default.ipArea=i.area,a.default.id=i.uid,a.default.openId=i.openid,a.default.nickname=i.nickname,a.default.diffTime=1e3*(i.now_time||0)-Date.now(),t&&t();var o=e.launchObj.query,n=(e.launchObj.referrerInfo||{}).appId,c=void 0===n?"":n,l=a.default.getVersion(),d=void 0===l?"":l;r.default.setUmaOpenid(i.openid);var u=a.default.getGameCfg();s.default.init({miniId:u.sdkId,id:i.id,openid:i.openid,reg_time:i.add_time,inviter_id:o.inviter_id,channel_id:o.channel_id,scene:e.launchObj.scene,share_id:o.share_id,appId:c,version:d})},fail:function(){e.login(t)}})}}):t&&t()},t.hasGetSettingInfo=function(t,e){cc.sys.platform===cc.sys.WECHAT_GAME?wx.getSetting({success:function(i){console.log("res.authSetting:"+i.authSetting),i.authSetting[t]?e(!0):e(!1)}}):e(!0)},t.getUserInfo=function(t){var e=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){var i=this;if(i.userInfo)return void(t&&t(i.userInfo));this.hasGetSettingInfo("scope.userInfo",function(o){o?(console.log("\u7528\u6237\u5df2\u6388\u6743"),wx.getUserInfo({success:function(e){i.userInfo=e.userInfo,t&&t(e.userInfo),console.log("getUserInfo:",e)},fail:function(e){t&&t(i.userInfo),console.log("fail:",e)}})):(console.log("\u7528\u6237\u672a\u6388\u6743"),e.createWXUserInfoBtn(null,function(e,i){t&&t(e),i&&i.destroy()}))})}else t&&t(null)},t.createWXUserInfoBtn=function(t,e){var i=this;if(cc.sys.platform==cc.sys.WECHAT_GAME){var o={left:0,top:0,width:this.phoneInfo.screenWidth,height:this.phoneInfo.screenHeight,backgroundColor:"#00000000",color:"#ffffff",textAlign:"center",fontSize:16};if(t){var n=t.convertToWorldSpaceAR(cc.Vec2.ZERO),a=ymtApp.nodeMgr.getAdaptMinScale(),r=t.width*a/cc.winSize.width,s=t.height*a/cc.winSize.height,c=n.x/cc.winSize.width,l=1-n.y/cc.winSize.height;o.left=this.phoneInfo.screenWidth*c-this.phoneInfo.screenWidth*r/2,o.top=this.phoneInfo.screenHeight*l-this.phoneInfo.screenHeight*s/2,o.width=this.phoneInfo.screenWidth*r,o.height=this.phoneInfo.screenHeight*s+5}var d=window.wx.createUserInfoButton({type:"text",text:"",style:o});return d.onTap(function(t){t.userInfo?(i.userInfo=t.userInfo,e&&e(t.userInfo,d)):e&&e(null,d)}),d}e&&e(null)},t.createClubBtn=function(t,e){var i=this;if(cc.sys.platform==cc.sys.WECHAT_GAME&&wx.createGameClubButton){var o=t.convertToWorldSpaceAR(cc.Vec2.ZERO),n=ymtApp.nodeMgr.getAdaptMinScale(),a=this.phoneInfo.screenWidth,r=this.phoneInfo.screenHeight,s=t.width*n/cc.winSize.width,c=t.height*n/cc.winSize.height,l=o.x/cc.winSize.width,d=1-o.y/cc.winSize.height;this.clubCallback=e;var u=Object.create({});u.type="text",u.text="",u.style={left:a*l-a*s/2,top:r*d-r*c/2,width:a*s,height:r*c,backgroundColor:"#FFFFFF00",borderRadius:40},this.clubButton=wx.createGameClubButton(u),this.clubButton.onTap(function(){i.clubCallback&&i.clubCallback()})}},t.showClubButton=function(t){void 0===t&&(t=!0),this.clubButton&&(t?this.clubButton.show():this.clubButton.hide())},t.postMessage=function(t){cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("\u5411\u5b50\u57df\u53d1\u9001\u6d88\u606f",t),wx.postMessage(t))},t.setUserRankCloudStorage=function(t){window.wx&&window.wx.setUserCloudStorage({KVDataList:[{key:"level",value:t+""}],success:function(t){console.log("\u63d0\u4ea4\u6258\u7ba1\u6570\u636e\u6210\u529f",t)}})},t.loginUserInfo=function(t,i){var o=this;void 0===i&&(i=0);var n=ymtApp.gameController.getRoleInfo();n.name&&n.url?t&&t():e.getUserInfo(function(e){ymtApp.gameController.setRoleInfo(null==e?void 0:e.nickName,null==e?void 0:e.avatarUrl),o.setUserInfo(null==e?void 0:e.nickName,null==e?void 0:e.avatarUrl),t&&t()})},t.setSharedCanvas=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=wx.getOpenDataContext().canvas;t&&(t.width=2*cc.game.canvas.width,t.height=2*cc.game.canvas.height)}},t.jumpToMiniProgram=function(t){null==t&&(t={}),cc.log("obj.path",t.path);try{var e={appId:t.appId,path:t.path||"",extraData:t.extraData||{key:"extraData"},success:function(){console.log("\u8df3\u8f6c\u6210\u529f",t.type,t.jumpid),s.default.boxStat({id:t.jumpid,images_id:t.images_id}),t.success&&t.success()},fail:function(){a.default.clickCanCalIcon++},complete:function(){}};wx.navigateToMiniProgram(e)}catch(i){}},t.floatingHint=function(t){cc.sys.platform===cc.sys.WECHAT_GAME?wx.showToast({title:t,icon:"none"}):ymtApp.viewMgr.showToast(t)},t.getExptInfoSync=function(){if(null==this.userType&&(this.userType=0,cc.sys.platform===cc.sys.WECHAT_GAME)){var t=wx.getExptInfoSync(["expt_1732502511"]);console.log("WxMgr getExptInfoSync",t,JSON.stringify(t));var e=t.expt_1732502511;if(void 0===e);else if("0"==e);else if("1"==e)this.userType=1;else if("2"==e)this.userType=2;else{var i=Number(e);isNaN(i)||(this.userType=i)}}return this.userType},t.vibrate=function(t){void 0===t&&(t=!0),1==ymtApp.gameController.getSettingStatus(n.SETTING_TYPE.VIBRATE)&&(t?this.vibrateShort():this.vibrateLong())},t.vibrateLong=function(){"vibrate"in window.navigator?window.navigator.vibrate(400):window.wx&&wx.vibrateLong(null)},t.vibrateShort=function(){"vibrate"in window.navigator?window.navigator.vibrate(15):window.wx&&wx.vibrateShort({type:"light",success:function(){},fail:function(){},complete:function(){}})},t.setUserInfo=function(t,i){this.reqCom({url:"user/setUserInfo",method:"POST",data:{openid:a.default.openId,nickname:t,head_img_url:i},callback:function(){ymtApp.gameController.setRecordInfo(n.RECORD_KEY.UP_ROLE_INFO,1),e.setRankList(1,ymtApp.gameController.getLevelByType(n.GAME_TYPE.COMMON))}})},t.getRankList=function(t,e){void 0===t&&(t=1),this.reqCom({url:"user/getRankLists",method:"POST",data:{limit:100,type:t},callback:function(i,o){var n=[];Array.isArray(o)&&(n=o),ymtApp.gameController.setRankList(t,n),e&&e(n)}})},t.setRankList=function(t,e,i){void 0===t&&(t=1),this.reqCom({url:"user/addRankList",method:"POST",data:{openid:a.default.openId,type:t,val:e},callback:function(t,e){i&&i(t,e)}})},t.reqCom=function(t,e,i){var o=this;if(void 0===e&&(e=!1),void 0===i&&(i=!0),"undefined"!=typeof wx){null==t.data&&(t.data={openid:a.default.openId});var n=t.url+JSON.stringify(t.data);if(!this.reqQueue[n]){this.reqQueue[n]={times:5,params:t},e&&ymtApp.viewMgr.addWait("request",n);var r=function(e,i,a){t.callback&&t.callback(i,e,a),delete o.reqQueue[n]};(function a(){c.default.request({url:t.url,data:t.data,host:"https://api.gzgame99.cn/api/",isLoginURL:t.isLoginURL,method:t.method||"POST",success:function(t,a,s){e&&ymtApp.viewMgr.delWait("request",n),a&&i&&o.floatingHint(a),r(t,a,s)},fail:function(t){o.reqQueue[n].times--,o.reqQueue[n].times<=0?(e&&ymtApp.viewMgr.delWait("request",n),r(t,null,null)):a()}})})()}}else t.callback&&t.callback(null,{})},t.reqQueue={},e=o([d("WxMgr")],t)}();i.default=u,cc._RF.pop()},{GameEnums:"GameEnums",SDKConfig:"SDKConfig",SDKMgr:"SDKMgr",WxNetMgr:"WxNetMgr",zs:"zs"}],WxNetMgr:[function(t,e,i){"use strict";cc._RF.push(e,"56f30xwmPZMhawUU8x0+yWa","WxNetMgr");var o=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=t("SDKConfig"),a=cc._decorator,r=a.ccclass;a.property;var s=function(){function t(){}return t.prototype.success=function(){},t.prototype.fail=function(){},t.prototype.complete=function(){},t}(),c=function(){function t(){}return t.request=function(t){var e=this;if(cc.sys.platform==cc.sys.WECHAT_GAME){var i=new s;if(t.host&&""!=t.host?i.url=t.host+t.url:i.url=this.host+t.url,i.method=t.method||"GET",i.header=this.getHead(),t&&t.header)for(var o in t.header)i.header[o]=t.header[o];t.isLoginURL&&(i.header={}),i.data=t.data||{};var a=n.default.getGameCfg();i.header.appid=a.gameAppId,i.header.version=n.default.getVersion(),console.log("\u6267\u884c\u4e86wxnetmgr\u7684request\u65b9\u6cd5++++",i.header.appid,i.header.version),i.success=function(i){if(200==i.statusCode){t.isLoginURL&&e.setSessionID(i);var o=i.data;if(200==o.code||100==o.code){if(t&&t.success){var n=null;100==o.code&&(n=o.msg),t.success(o.data,n,o.now_time)}}else 400==o.code?t.isLoginURL&&t&&t.fail&&t.fail():((void 0).code=o.code,(void 0).msg=o.msg,t&&t.fail&&t.fail(void 0))}},i.fail=function(e){console.log("request\u5931\u8d25\u4e86",e),t&&t.fail&&t.fail(e)},i.complete=function(e){t&&t.complete&&t.complete(e)},wx.request(i)}},t.setSessionID=function(t){if(cc.sys.platform==cc.sys.WECHAT_GAME){var e=null==t.header["Set-Cookie"]?"":t.header["Set-Cookie"],i=e.match(/PHPSESSID\=(.*)\;/);cc.log("sessionArr  ",i,e),null!=i&&(this.sessionId=i[1])}},t.getHead=function(){var t={"Content-Type":"application/json",Cookie:""};return this.sessionId&&(t.Cookie="PHPSESSID="+this.sessionId),t},t.host="https://api.gzgame99.cn/zc/",t.loginCode="",t.sessionId=null,o([r("WxNetMgr")],t)}();i.default=c,cc._RF.pop()},{SDKConfig:"SDKConfig"}],XDADpublic:[function(t,e,i){"use strict";cc._RF.push(e,"faacaE3eZ1KpJbD3XFLWM5X","XDADpublic");var o=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(a<3?n(r):a>3?n(e,i,r):n(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var n=t("./XDAD"),a=cc._decorator.ccclass,r=function(){function t(){}return t.showXDAD=function(){if(console.log("\u6253\u5f00\u5c0f\u70b9\u5f39\u7a97"),window.xdsdk){var t=window.xdsdk.getad(51);if(!t.data)return;console.log("data",t);var e=t.data[0].pic;e&&cc.resources.load("XDAD",cc.Prefab,function(t,i){if(!t){var o=cc.instantiate(i);cc.find("Canvas").addChild(o),cc.assetManager.loadRemote(e,function(t,e){if(t)console.error("err",t);else{var i=new cc.SpriteFrame(e);o.getComponent(n.default).setSpriteFrame(i)}})}})}},o([a],t)}();i.default=r,cc._RF.pop()},{"./XDAD":"XDAD"}],XDAD:[function(t,e,i){"use strict";cc._RF.push(e,"7966fm6IcNAlq79tejr16vW","XDAD");var o,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=this&&this.__decorate||function(t,e,i,o){var n,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(a<3?n(r):a>3?n(e,i,r):n(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.closeBtn=null,e}return n(e,t),e.prototype.start=function(){var t=this;this.scheduleOnce(function(){t.closeBtn.getComponent(cc.Button).interactable=!0,t.closeBtn.children[1].getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))},2.5)},e.prototype.setSpriteFrame=function(t){this.sprite.spriteFrame=t},e.prototype.close=function(){this.node.destroy()},e.prototype.downLoadAPK=function(){window.xdsdk&&window.xdsdk.downLoadXD()},a([c(cc.Sprite)],e.prototype,"sprite",void 0),a([c(cc.Node)],e.prototype,"closeBtn",void 0),a([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],XiaoMiG426Ad:[function(t,e,i){"use strict";cc._RF.push(e,"ba462KhpFhADrBecgz4TAN0","XiaoMiG426Ad");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=2e4,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){window.xmG426&&(n.default.i("game-showbanner\uff08\u663e\u793abanner\uff09"),window.android.showBanner())},e.prototype.hideBanner=function(){window.xmG426&&(n.default.i("game-closeBannerAd\uff08\u5173\u95edbanner\uff09"),window.android.hideBanner())},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){var t=this;window.showRewardVideoComplement=function(e){n.default.i("showRewardVideoComplement callback======================="),null!=t.videocallback?(1==e.ret?t.videocallback&&t.videocallback(!0):t.videocallback&&t.videocallback(!1),t.videocallback=null):n.default.e("game - showRewardVideoComplement \u8c03\u7528\u9519\u8bef\uff0c\u6ca1\u6709\u8c03\u7528\u8fc7\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a")}},e.prototype.showVideo=function(t,e){window.xmG426&&(this.videocallback=t,window.android.showRewardedVideo(e))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){window.xmG426&&window.android.showInsertAd()},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,i){void 0===i&&(i=0),this.showInterstitial(t,e)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],XiaoMiH5Ad:[function(t,e,i){"use strict";cc._RF.push(e,"0ae61ynsVZB64GJZ6O17H9s","XiaoMiH5Ad");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("YmtLog"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowRewardAd=!0,e.rewardAdDelay=5e3,e.canShowInterstitialAd=!0,e.interstitialAdDelay=3e4,e.willShowBanner=!1,e.tmpShow=!1,e}return o(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){window.mih5game&&(window.showBanner(),this.willShowBanner=!0)},e.prototype.hideBanner=function(){window.mih5game&&(window.hideBanner(),this.willShowBanner=!1)},e.prototype.destroyBanner=function(){},e.prototype.initVideo=function(){},e.prototype.showVideo=function(t,e){var i=this;window.mih5game&&(this.videocallback=t,n.default.w("==\u70b9\u51fb\u64ad\u653e\u89c6\u9891==",e),window.adBreak&&window.adBreak({type:"reward",name:e,beforeAd:function(){cc.audioEngine.pauseAll(),cc.director.pause()},afterAd:function(){n.default.l("\u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u7ed3\u675f")},beforeReward:function(t){t&&t()},adDismissed:function(){n.default.e("\u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),i.videocallback&&i.videocallback(!1)},adViewed:function(){n.default.l("\u73a9\u5bb6\u5b8c\u6574\u770b\u5b8c\u5e7f\u544a")},adBreakDone:function(t){cc.director.resume(),cc.audioEngine.resumeAll();var e=window;"viewed"==t.breakStatus?(e.Toast.show("Get reward success!",1500),i.videocallback&&i.videocallback(!0)):(e.Toast.show("Ad playback incomplete",1500),i.videocallback&&i.videocallback(!1))}}))},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(t,e,i,o){var a=this;n.default.w("==\u64ad\u653e\u63d2\u5c4f==",i,o);var r=i||"browse",s=o||"normal";window.mih5game&&window.adBreak&&window.adBreak({type:r,name:s,beforeAd:function(){a.canShowInterstitialAd=!1,cc.audioEngine.pauseAll(),cc.director.pause(),setTimeout(function(){a.tmpShow=a.willShowBanner,a.hideBanner(),a.willShowBanner=a.tmpShow,console.log("\u63d2\u5c4f beforeAd",a.willShowBanner)},200)},afterAd:function(){cc.director.resume(),setTimeout(function(){a.canShowInterstitialAd=!0},a.interstitialAdDelay),cc.audioEngine.resumeAll(),console.log("\u63d2\u5c4f afterAd",a.willShowBanner),a.willShowBanner&&a.showBanner()}})},e.prototype.destroyNormalInter=function(){},e.prototype.showNativeInterstitial=function(t,e,i,o,a){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,a):n.default.e("\u672a\u5230\u95f4\u9694\u65f6\u95f4\u64ad\u653e\u63d2\u5c4f")},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e}(t("YmtAdManager").default);i.default=a,cc._RF.pop()},{YmtAdManager:"YmtAdManager",YmtLog:"YmtLog"}],Y8GameAd:[function(t,e,i){"use strict";cc._RF.push(e,"df7c04iOz1Jh7fFrSTGg1VY","Y8GameAd");var o=__extends,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLogin=!1,e.canShowInterstitialAd=!1,e.interstitialAdDelay=180,e.interCountDownId=-1,e.isShowInterFirst=!1,e}return o(e,t),e.prototype.hasPaySys=function(){return!1},e.prototype.hasRankSys=function(){return!1},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.login=function(t,e,i){var o=this;void 0===i&&(i=!1),console.warn("YMT_Y8GameAd","login"),miniplay.login(function(e){o.isLogin=!0,t&&t(e),console.warn("YMT_Y8GameAd","login success")},i)},e.prototype.initVideo=function(){this.startInterstitialAdCountDown()},e.prototype.showVideo=function(t){this.videocallback=t,miniplay.isReady()?(cc.audioEngine.pauseAll(),cc.director.pause(),miniplay.showRewardAsync().then(function(){cc.director.resume(),console.log("showReward success"),t&&t(!0),cc.audioEngine.resumeAll()}).catch(function(e){cc.director.resume(),console.log("showReward fail: "+e),t&&t(!1),cc.audioEngine.resumeAll()})):(console.log("reward ad is not ready"),t&&t(!1))},e.prototype.destroyVideo=function(){},e.prototype.startInterstitialAdCountDown=function(){var t=this;this.canShowInterstitialAd=!1,this.interShowTime=this.interstitialAdDelay,this.interCountDownId=setInterval(function(){t.countDown()},1e3)},e.prototype.countDown=function(){this.interShowTime--,this.interShowTime<=0&&(console.warn("\u53ef\u4ee5\u663e\u793a\u63d2\u5c4f\u4e86"),this.interShowTime=0,clearInterval(this.interCountDownId),this.canShowInterstitialAd=!0)},e.prototype.showInterstitial=function(t,e,i,o){var n=this;void 0===i&&(i="browse"),void 0===o&&(o="normal"),0!=this.canShowInterstitialAd?miniplay.isReady()?(cc.audioEngine.pauseAll(),cc.director.pause(),miniplay.showInterstitialAsync(i,o).then(function(){0==n.isShowInterFirst&&(n.isShowInterFirst=!0,n.interstitialAdDelay=120),cc.director.resume(),cc.audioEngine.resumeAll(),n.startInterstitialAdCountDown()}).catch(function(){cc.director.resume(),cc.audioEngine.resumeAll()})):console.log("interstitial ad is not ready"):console.log("[YMT_AD]\u6682\u65f6\u4e0d\u80fd\u64ad\u653e\u63d2\u5c4f: \u5012\u8ba1\u65f6 ",this.interShowTime)},e.prototype.showNativeInterstitial=function(t,e,i,o,n){void 0===i&&(i=0),this.canShowInterstitialAd?this.showInterstitial(t,e,o,n):console.log("[YMT_AD]\u6682\u65f6\u4e0d\u80fd\u64ad\u653e\u63d2\u5c4f: \u5012\u8ba1\u65f6 ",this.interShowTime)},e.prototype.setRank=function(t){0!=this.isLogin&&(t.rankName=t.rankName?t.rankName:"\u4e16\u754c\u6392\u884c",console.warn("setRank:",t),miniplay.setRank(t))},e.prototype.getRank=function(t){return n(this,void 0,void 0,function(){return a(this,function(){return t.rankName=t.rankName?t.rankName:"\u4e16\u754c\u6392\u884c",console.error("get ranks:",t),miniplay.getRank(t),[2]})})},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(){},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e.prototype.initBanner=function(){},e.prototype.showBanner=function(){},e.prototype.hideBanner=function(){},e.prototype.destroyBanner=function(){},e.prototype.hideNativeInterstitial=function(){},e.prototype.destroyNormalInter=function(){},e.prototype.saveRemoteData=function(t){return n(this,void 0,void 0,function(){return a(this,function(){return 0==this.isLogin?[2]:(miniplay.save("slcs_y8",t),[2])})})},e.prototype.loadRemoteData=function(){return n(this,void 0,Promise,function(){var t=this;return a(this,function(){return[2,new Promise(function(e){0!=t.isLogin?miniplay.load("slcs_y8",function(t){e(t)}):e("")})]})})},e}(t("YmtAdManager").default);i.default=r,cc._RF.pop()},{YmtAdManager:"YmtAdManager"}],YmtAdManager:[function(t,e,i){"use strict";cc._RF.push(e,"b85ec8FUKhNur5kwYBWfO6j","YmtAdManager");var o,n=__awaiter,a=__generator;Object.defineProperty(i,"__esModule",{value:!0}),i.RECORDER_STATE=void 0;var r,s=t("YmtConstant"),c=t("GameSys"),l=t("mTimer"),d=t("YmtUtils"),u=t("ymt_enum");(r=o=i.RECORDER_STATE||(i.RECORDER_STATE={}))[r.NO=0]="NO",r[r.START=1]="START",r[r.STOP=2]="STOP",r[r.PAUSE=3]="PAUSE",r[r.RESUME=4]="RESUME";var p=function(){function t(){this.bannerAd=null,this.videoAd=null,this.interAd=null,this.bannerNode=null,this.innerInter=null,this.nativeInter=null,this.nativeIcon=null,this.portalAd=null,this._native_data_cache=[],this.isNeedShowBanner=!1,this.isGameCd=!1,this.isInitAd=!1,this.addIconNode=null,this.interShowTime=0,this.gameRecorder=null,this.videoPath=null,this.gameRecorderState=o.NO,this.bannerTimer=null,this.nativeInterTimer=null,this.bannerDelayTimer=null,this.cur_show_ad_index=0,this.gameStartTime=0,this.addDeskTime=0,this.authorizeView=null,this.gameLoadingView=null,this.privacyView=null,this.companyView=null,this.isServer=!1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initBanner=function(){this.bannerTimer=new l.default},t.prototype.initNativeAd=function(){},t.prototype.get_time=function(){return window.cc?window.cc.sys.now():window.Laya?window.Laya.timer.currTimer:(new Date).getTime()},t.prototype.check_native_data_list_is_reprot=function(t){if(t.length>0)for(var e in t)if(t[e].state==u.ad_native_state.need_show)return!1;return!0},t.prototype.get_latest_native_data=function(t){var e=[];for(var i in t)if(t[i].state==u.ad_native_state.need_show)return t[i];return e.length>0?e[d.default.randomInt(0,e.length-1)]:t.length>0?t[d.default.randomInt(0,t.length-1)]:null},t.prototype.add_native_data=function(t){for(var e in this._native_data_cache)if(this._native_data_cache[e].adId==t.adId)return;this.reportAdShow(t),t.state=u.ad_native_state.need_show,this._native_data_cache.push(t)},t.prototype.remove_native_data=function(t){for(var e in this._native_data_cache)if(this._native_data_cache[e].adId==t.adId)return console.log("remove native_data:",t),void this._native_data_cache.splice(parseInt(e),1)},t.prototype.is_limit_native_length=function(t){var e=0;for(var i in this._native_data_cache)this._native_data_cache[i].type==t&&this._native_data_cache[i].state!=u.ad_native_state.click&&++e;return e>=c.default.adInfo.nativeAdLimitCount},t.prototype._setClickNative=function(t,e,i){if(void 0===i&&(i=null),this.isGameCd||c.default.isShieldArea||c.default.isShenHe||null==i||0==i)return e&&e(),console.log("%c[YMT_GAME]\u5e7f\u544aCD\u4e2d","color: #33ccff");var o=0;t==u.ad_native_type.interstitial&&this.innerInter&&!this.innerInter.destroyed?(i=i||c.default.adInfo.nativeInnerInstitialClickWarp,d.default.randomInt(1,100)<=i&&!this.innerInter.has_click_warp&&(this.innerInter.click_adv_warp(),o=500)):t==u.ad_native_type.banner&&this.bannerNode&&!this.bannerNode.destroyed&&(i=i||c.default.adInfo.nativeBannerClickWarp,d.default.randomInt(1,100)<=i&&!this.bannerNode.has_click_warp&&(this.bannerNode.click_adv_warp(),o=500)),setTimeout(function(){e&&e()},o)},t.prototype.initAd=function(){console.log("[YMT_GAME]\u5e7f\u544a\u521d\u59cb\u5316"),this.gameStartTime=Date.now(),d.default.loadResDir("hs_ui",cc.Prefab)},t.prototype.showBanner=function(t){void 0===t&&(t=null)},t.prototype.hideBanner=function(){this.bannerTimer&&this.bannerTimer.clear(),this.bannerDelayTimer&&this.bannerDelayTimer.clear(),this.bannerNode&&void 0!==this.bannerNode&&cc.isValid(this.bannerNode.node,!0)&&this.bannerNode.node.destroy(),this.bannerNode=null},t.prototype.showVideo=function(t){t&&t(!0)},t.prototype.reportAdShow=function(t){if(t&&void 0!==t)for(var e in t.ad&&t.ad.reportAdShow({adId:t.adId}),this._native_data_cache)if(this._native_data_cache[e].adId==t.adId){this._native_data_cache[e].state=u.ad_native_state.show;break}},t.prototype.reportAdClick=function(t){t&&void 0!==t&&(t.ad&&t.ad.reportAdClick({adId:t.adId}),this.remove_native_data(t))},t.prototype.getLocalNativeData=function(t){if(c.default.adInfo.switchPool){for(var e=[],i=0,o=this._native_data_cache;i<o.length;i++){var n=o[i];n.type==t&&e.push(n)}return this.check_native_data_list_is_reprot(e)?e.length>0?e[d.default.randomInt(0,e.length-1)]:null:this.get_latest_native_data(e)}return this.cur_show_ad_index>=this._native_data_cache.length&&(this.cur_show_ad_index=0),this._native_data_cache[this.cur_show_ad_index++]},t.prototype.getAllNativeData=function(){return this._native_data_cache},t.prototype.removeNativeData=function(t){this.remove_native_data(t)},t.prototype.showInterstitialNative=function(){},t.prototype.hideInterstitialNative=function(){this.innerInter&&void 0!==this.innerInter&&cc.isValid(this.innerInter.node,!0)&&this.innerInter.node.destroy(),this.innerInter=null},t.prototype.showNativeInterstitial=function(t,e,i,o,n,a){void 0===i&&(i=1),void 0===a&&(a=!1)},t.prototype.hideNativeInterstitial=function(){this.nativeInter&&void 0!==this.nativeInter&&cc.isValid(this.nativeInter.node,!0)&&this.nativeInter.node.destroy(),this.nativeInter=null,this.nativeInterTimer&&this.nativeInterTimer.clear(),this.nativeInterTimer=null},t.prototype.showNativeIcon=function(){},t.prototype.hideNativeIcon=function(){this.nativeIcon&&void 0!==this.nativeIcon&&cc.isValid(this.nativeIcon.node,!0)&&this.nativeIcon.node.destroy(),this.nativeIcon=null},t.prototype.platformVersion=function(){return s.default.IS_OPPO_GAME?qg.getSystemInfoSync().platformVersion:s.default.IS_VIVO_GAME?qg.getSystemInfoSync().platformVersionCode:0},t.prototype.showAddDesktop=function(){},t.prototype.hasAddDesktop=function(){},t.prototype.addDesktop=function(){},t.prototype.createToast=function(t){if(null==this.toastView||!cc.isValid(this.toastView.node,!0)){var e=cc.instantiate(d.default.getRes("hs_ui/ui_toast",cc.Prefab));this.toastView=e.getComponent("ymt_ui_toast")}this.toastView&&this.toastView.show&&this.toastView.show(t)},t.prototype.supportGameBox=function(){return!!s.default.IS_OPPO_GAME&&this.platformVersion()>=1076},t.prototype.showGamePortal=function(t,e,i,o,n){void 0===i&&(i=!0),void 0===o&&(o=""),void 0===n&&(n=300)},t.prototype.hideGamePortal=function(){},t.prototype.setClickInnerInterstitialBtn=function(t,e){this._setClickNative(u.ad_native_type.interstitial,t,e)},t.prototype.setClickNativeBanner=function(t,e){this._setClickNative(u.ad_native_type.banner,t,e)},t.prototype.clickNativeInnerInterstitial=function(){if(this.isGameCd)return console.log("%c[YMT_GAME]\u5e7f\u544aCD\u4e2d","color: #33ccff");this.innerInter&&cc.isValid(this.innerInter.node,!0)&&this.innerInter.report_click()},t.prototype.getNativeData=function(){var t=this.getLocalNativeData(u.ad_native_type.inner_interstitial);return null==t&&(t=this.getLocalNativeData(u.ad_native_type.banner)),null==t&&(t=this.getLocalNativeData(u.ad_native_type.interstitial)),null==t&&(t=this.getLocalNativeData(u.ad_native_type.native_icon)),t},t.prototype.clickNative=function(t){if(void 0===t&&(t=null),this.isGameCd||c.default.isShieldArea)return console.log("%c[YMT_GAME]\u5e7f\u544aCD\u4e2d","color: #33ccff");null==t&&(t=this.getNativeData()),t&&(this.reportAdShow(t),this.reportAdClick(t))},t.prototype.isYLH=function(t){return null!=t&&(t.title.indexOf("\u4f18\u91cf\u6c47")>=0||t.iconUrlList.indexOf("mob_ad")>=0||t.imgUrlList.indexOf("mob_ad")>=0)},t.prototype.recorderStart=function(){},t.prototype.recorderStop=function(t){t&&t(!1)},t.prototype.hasRecorderPath=function(){return null!=this.videoPath},t.prototype.shareRecorder=function(t,e){e&&e()},t.prototype.showRecorderLayer=function(){},t.prototype.login=function(){},t.prototype.showClickBox=function(t,e){if(!c.default.adInfo.boxSwitch||c.default.isShenHe||c.default.isShieldArea)e&&e(null);else if(!this.boxNode){var i=cc.instantiate(d.default.getRes("hs_ui/ui_click_box",cc.Prefab));this.boxNode=i.getComponent("hs_ui_click_box"),this.boxNode.show(t,e)}},t.prototype.showAuthorize=function(t,e){var i=this;c.default.isShowAuthorize||c.default.isShenHe||c.default.isShieldArea?cc.loader.loadRes("ymtView/AuthorizeView",cc.Prefab,function(o,n){if(null==i.authorizeView||!cc.isValid(i.authorizeView.node,!0)){var a=cc.instantiate(n);i.authorizeView=a.getComponent("ymt_ui_authorize"),i.authorizeView.show(t,e)}}):t&&t()},t.prototype.showGameLoading=function(){var t=this;console.log("\u663e\u793aGameLoading"),cc.loader.loadRes("hs_ui/hs_ui_gameLoading",cc.Prefab,function(e,i){if(e)return console.log("[YMT_GAME] hs_ui_gameLoading load error: "+JSON.stringify(e));if(null==t.gameLoadingView||!cc.isValid(t.gameLoadingView.node,!0)){var o=cc.instantiate(i);t.gameLoadingView=o.getComponent("hs_ui_gameLoading"),t.gameLoadingView.show()}})},t.prototype.hideGameLoading=function(){console.log("hideGameLoading"),null!=this.gameLoadingView&&this.gameLoadingView.node.destroy()},t.prototype.showPrivacy=function(t){var e=this;cc.loader.loadRes("hs_ui/hs_ui_privacy",cc.Prefab,function(i){if(i)return console.log("[YMT_GAME] hs_ui_privacy load error: "+JSON.stringify(i));if(null==e.privacyView||!cc.isValid(e.privacyView.node,!0)){var o=cc.instantiate(d.default.getRes("hs_ui/hs_ui_privacy",cc.Prefab));e.privacyView=o.getComponent("hs_ui_privacy"),e.privacyView.show(t)}})},t.prototype.showCompany=function(t,e){var i=this;void 0===t&&(t=null),void 0===e&&(e=null),cc.loader.loadRes("hs_ui/hs_ui_company",cc.Prefab,function(o){if(o)return console.log("[YMT_GAME] hs_ui_company load error: "+JSON.stringify(o));if(null==i.companyView||!cc.isValid(i.companyView.node,!0)){var n=cc.instantiate(d.default.getRes("hs_ui/hs_ui_company",cc.Prefab));i.companyView=n.getComponent("hs_ui_company"),i.companyView.show(t,e)}})},t.prototype.hideCompany=function(){this.companyView&&void 0!==this.companyView&&cc.isValid(this.companyView.node,!0)&&this.companyView.node.destroy(),this.companyView=null},t.prototype.showInterVideo=function(t,e){e&&e()},t.prototype.destroyInterVideo=function(){},t.prototype.showFeedAd=function(t,e){e&&e()},t.prototype.destroyFeedAd=function(){},t.prototype.openUrl=function(){},t.prototype.openGameAd=function(){},t.prototype.setRank=function(){},t.prototype.getRank=function(){return n(this,void 0,Promise,function(){return a(this,function(){return[2]})})},t.prototype.getAIUser=function(t){return void 0===t&&(t=10),n(this,void 0,Promise,function(){return a(this,function(){return[2,new Promise(function(t){cc.resources.load("data/aiCfg",function(e,i){e&&(console.log("\u52a0\u8f7d\u5931\u8d25:","data/aiCfg"),t(null)),i instanceof cc.JsonAsset?t(i.json):t(null)})})]})})},t.prototype.setUserCloudStorage=function(){return n(this,void 0,void 0,function(){return a(this,function(){return[2]})})},t.prototype.getUserCloudStorage=function(){return n(this,void 0,Promise,function(){return a(this,function(){return[2]})})},t.prototype.saveRemoteData=function(){return n(this,void 0,void 0,function(){return a(this,function(){return[2]})})},t.prototype.loadRemoteData=function(){return n(this,void 0,Promise,function(){return a(this,function(){return[2]})})},t.prototype.payItem=function(){return n(this,void 0,Promise,function(){return a(this,function(){return[2]})})},t.prototype.hasPaySys=function(){return!1},t.prototype.hasRankSys=function(){return!1},t.prototype.openPrivaceUrl=function(){this.onOpenUrl("https://doc-hosting.flycricket.io/relexing-bus-trip-privacy-policy/478efbff-2663-4b78-8e6d-59064506a5ad/privacy")},t.prototype.onOpenUrl=function(t){window.GooglePlay&&window.android.OpenUrl(t)},t.instance=null,t}();i.default=p,cc._RF.pop()},{GameSys:"GameSys",YmtConstant:"YmtConstant",YmtUtils:"YmtUtils",mTimer:"mTimer",ymt_enum:"ymt_enum"}],YmtConstant:[function(t,e,i){"use strict";cc._RF.push(e,"64f93nnXnBC76IVMthOsA51","YmtConstant");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("Enum"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.GID=0,e.PROGECT_NAME="save_seafood",e.GAME_VERSION_NAME="1.0.0",e.APPID="",e.YM_APPID="",e.SDK_TYPE=n.e_sdk_type.NO,e.TOTAL_LEVEL=35,e.SOUND={},e.subpackage=[],e}(t("BaseConstant").default);i.default=a,cc._RF.pop()},{BaseConstant:"BaseConstant",Enum:"Enum"}],YmtLog:[function(t,e,i){"use strict";cc._RF.push(e,"d0e5fV/CVtBlrQocprKhlAz","YmtLog");var o=__spreadArrays;Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.setTag=function(t){this.tag=t||"YMT_GAME"},t.setDebug=function(t){this.debug=t||!0},t.i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.info.apply(console,o(["["+this.tag+"]"],t))},t.e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.error.apply(console,o(["["+this.tag+"]"],t))},t.l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.log.apply(console,o(["["+this.tag+"]"],t))},t.d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.debug.apply(console,o(["["+this.tag+"]"],t))},t.w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.warn.apply(console,o(["["+this.tag+"]"],t))},t.tag="YMT_GAME",t.debug=!0,t}();i.default=n,cc._RF.pop()},{}],YmtStringUtil:[function(t,e,i){"use strict";cc._RF.push(e,"6af9fVuFfpH3YKjp3IMF/2e","YmtStringUtil"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t.subString=function(e,i){void 0===i&&(i=10);var o=t.getLength(e),n=0,a=0,r=e.split("");for(a=0;a<r.length;a++)if(r[a].charCodeAt(0)<299){if(++n>i){n-=1;break}}else if((n+=2)>i){n-=2;break}return e.substr(0,a)+(o>i?"...":"")},t.getLength=function(t){for(var e=0,i=0,o=new String(t).length;i<o;i++){var n=t.charCodeAt(i);e+=n>=1&&n<=126||65376<=n&&n<=65439?1:2}return e},t.formatString=function(t,e,i){void 0===e&&(e=","),void 0===i&&(i=3);for(var o=(t=t.toString()).length,n=t,a=o-i;a>0;a-=i)n=t.substring(0,a)+e+t.substring(a),o=t.length,t=n;return n},t.toArray=function(t,e){void 0===e&&(e=";");var i=[];return t.replace(" ","").split(e).forEach(function(t){null!=t&&void 0!==t&&""!=t&&(isNaN(Number(t))||(t=Number(t)),i.push(t))}),i},t.trim=function(t){return"string"!=typeof t?t:t.replace(/(^\s*)|(\s*$)/g,"")},t}();i.default=o,cc._RF.pop()},{}],YmtUserData:[function(t,e,i){"use strict";cc._RF.push(e,"21b8d1H+oxFx4gsVJy5ehaP","YmtUserData");var o=__extends;Object.defineProperty(i,"__esModule",{value:!0});var n=t("BaseUserData"),a=t("YmtUtils"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"gads",{get:function(){return a.default.getItem("gads",0)},set:function(t){a.default.setItem("gads",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"deviceid",{get:function(){return a.default.getItem("deviceid",null)},set:function(t){a.default.setItem("deviceid",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"glv",{get:function(){return a.default.getItem("glv",0)},set:function(t){a.default.setItem("glv",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gtime",{get:function(){return a.default.getItem("gtime",0)},set:function(t){a.default.setItem("gtime",t)},enumerable:!1,configurable:!0}),e.selectLevel=1,e}(n.default);i.default=r,cc._RF.pop()},{BaseUserData:"BaseUserData",YmtUtils:"YmtUtils"}],YmtUtils:[function(t,e,i){"use strict";cc._RF.push(e,"5e237MaPNVMbYIDf4xmfUMI","YmtUtils"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("YmtConstant"),n=t("YmtLog"),a=function(){function t(){}return t.randomInt=function(t,e){return Math.floor(this.random(t,e))},t.random=function(t,e){return(t=Number(t))>(e=Number(e))&&(t=(e^=t^=e)^t),Math.random()*(e-t+1)+t},t.loadRemoteRes=function(t){return new Promise(function(e,i){cc.loader.load(t,function(t,o){if(t)return i(t);e(o)})})},t.loadRes=function(t,e){return new Promise(function(i,o){cc.js.isChildClassOf(e,cc.Asset)?cc.loader.loadRes(t,e,function(t,e){if(t)return o(t);i(e)}):cc.loader.loadRes(t,function(t,e){if(t)return o(t);i(e)})})},t.loadResDir=function(t,e){return new Promise(function(i,o){cc.loader.loadResDir(t,e,function(e,a){if(e)return n.default.e("\u52a0\u8f7d\u5931\u8d25",t),o(e);i(a)})})},t.getRes=function(t,e){return cc.loader.getRes(t,e)},t.formatTime=function(t){var e=t%60;return("0"+Math.floor(t/60)).slice(-2)+":"+("0"+e).slice(-2)},t.getNetworkTime=function(){return new Promise(function(t){var e=new XMLHttpRequest;e.open("get","/"),e.send(null),e.onreadystatechange=function(){if(2===e.readyState){var i=e.getResponseHeader("Date");t(i),e.abort()}}})},t.getDay=function(t){var e=new Date(t),i=e.getFullYear(),o=e.getMonth()+1,n=e.getDate();return Number(i+("0"+o).slice(-2)+("0"+n).slice(-2))},t.degreesToVectors=function(t){var e=cc.misc.degreesToRadians(t);return cc.v2(0,1).rotate(-e)},t.vectorsToDegress=function(t){if(t.equals(cc.Vec2.ZERO))return 0;var e=cc.v2(0,1),i=t.signAngle(e);return cc.misc.radiansToDegrees(i)},t.clone=function(e){var i=null;if(e instanceof Array)i=e.concat();else if(e instanceof Function)i=e;else for(var o in i=new Object,e){var n=e[o];i[o]="object"==typeof n?t.clone(n):n}return i},t.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];cc.director.getScene()&&cc.director.getScene().emit(t,e[0],e[1],e[2],e[3],e[4])},t.once=function(t,e,i){cc.director.getScene()&&cc.director.getScene().once(t,e,i)},t.on=function(t,e,i){cc.director.getScene()&&cc.director.getScene().on(t,e,i)},t.off=function(t,e,i){cc.director.getScene()&&cc.director.getScene().off(t,e,i)},t.targetOff=function(t){cc.director.getScene()&&cc.director.getScene().targetOff(t)},t.newPrefab=function(t,e,i){var o=this;t="prefab/"+t;var n=function(){var n=cc.instantiate(o.getRes(t,cc.Prefab));cc.isValid(e,!0)&&(n.parent=e),i&&i(n)};this.getRes(t,cc.Prefab)?n():this.loadRes(t,cc.Prefab).then(function(){n()})},t.isNumber=function(t){return"number"==typeof t||"string"==typeof t&&""!=(t=t.replace(/\s+/g,""))&&!isNaN(t)&&/^\d+(\.\d+)?$/.test(t)},t.setItem=function(t,e){var i=o.default.PROGECT_NAME.toString().toLocaleUpperCase();t=t.toString().toLocaleUpperCase(),cc.sys.localStorage.setItem(""+i+o.default.PLATFORM_CODE+"_"+t,JSON.stringify(e))},t.getItem=function(t,e){void 0===e&&(e=null);var i=o.default.PROGECT_NAME.toString().toLocaleUpperCase();t=t.toString().toLocaleUpperCase();var n=cc.sys.localStorage.getItem(""+i+o.default.PLATFORM_CODE+"_"+t);return null==n||""===n||void 0===n?e:JSON.parse(n)},t.findNode=function(t,e){if(!t||void 0===t||"string"!=typeof t)return e&&void 0!==e&&e instanceof cc.Node?e:null;e&&void 0!==e&&e instanceof cc.Node||(e=cc.director.getScene());for(var i=null,o=0,n=t.split("/");o<n.length;o++){var a=n[o];if(!(i=e.getChildByName(a)))return null;e=i}return i},t.callMethod=function(t,e,i){void 0===e&&(e=null);var n=null,a=t.substring(0,1).toUpperCase()+t.substring(1);if(o.default.IS_ANDROID){i&&void 0!==i&&(window["on"+a]=i);var r="("+(null==e?"":"Ljava/lang/String;")+")Ljava/lang/String;";null!=e&&"string"!=typeof e&&(e=JSON.stringify(e)),console.log("[YMT_GAME]callMethod method = "+t+" signature = "+r+" params = "+e),n=null==e||void 0===e?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/JSBridge",t,"()Ljava/lang/String;"):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/JSBridge",t,"(Ljava/lang/String;)Ljava/lang/String;",e)}return n},t.getNativePlatfom=function(){return this.callMethod("getNativePlatfom")},t.executePreFrame=function(t,e,i){return void 0===i&&(i=1),new Promise(function(o){var n=e;(function e(){for(var a=cc.sys.now(),r=n.next();;r=n.next()){if(null==r||r.done)return void o(null);if(cc.sys.now()-a>i)return void t.scheduleOnce(function(){e()})}})()})},t}();i.default=a,cc._RF.pop()},{YmtConstant:"YmtConstant",YmtLog:"YmtLog"}],configs:[function(t,e,i){"use strict";cc._RF.push(e,"767faMo165Mpbvns/vUhQSj","configs"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],mTimer:[function(t,e,i){"use strict";var o,n;cc._RF.push(e,"e6172Q/Tv1Gka1MP9+cp99O","mTimer"),Object.defineProperty(i,"__esModule",{value:!0}),(n=o||(o={}))[n.NO=0]="NO",n[n.START=1]="START",n[n.PAUSE=2]="PAUSE",n[n.RESUME=3]="RESUME",n[n.STOP=4]="STOP";var a=function(){function t(){this._state=o.NO,this.timeoutHandler=null,this.remainTime=0,this.intervalTime=0,this.repeatCount=0,this.remainCount=0,this.callback=null,this.taskStartTime=0}return t.loop=function(e,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var n=new t;return n.run(e,i,o),n},t.once=function(e,i){void 0===i&&(i=0);var o=new t;return o.run(e,i,1),o},t.prototype.loop=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.run(t,e,i)},t.prototype.once=function(t,e){void 0===e&&(e=0),this.run(t,e,1)},t.prototype.run=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e<0&&(e=0),i<0&&(i=0),this.intervalTime=e,this.remainTime=e,this.repeatCount=i,this.remainCount=i,this.callback=t,this.setTimeout()},t.prototype.setTimeout=function(t,e){var i=this;void 0===t&&(t=null),void 0===e&&(e=null),null==t&&(t=this.callback),null==e&&(e=this.intervalTime),this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null,this._state=o.START,this.taskStartTime=(new Date).getTime(),this.timeoutHandler=setTimeout(function(){t&&t(),(0==i.repeatCount||--i.remainCount>0)&&i.setTimeout()},e)},t.prototype.pause=function(){if(this._state!=o.START)return console.warn("Timer Not Start");this._state=o.PAUSE,this.remainTime=Math.max(this.intervalTime-(new Date).getTime()-this.taskStartTime,0),this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null},t.prototype.resume=function(){if(this._state!=o.PAUSE)return console.warn("Timer Not Pause");this.setTimeout(this.callback,this.remainTime)},t.prototype.stop=function(){return this._state==o.NO?console.warn("Timer Not Start"):this._state==o.STOP?console.warn("Timer Has Stop"):(this._state=o.STOP,this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null,this.remainTime=0,this.intervalTime=0,this.repeatCount=0,this.remainCount=0,this.callback=null,void(this.taskStartTime=0))},t.prototype.clear=function(){this._state=o.NO,this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null,this.remainTime=0,this.intervalTime=0,this.repeatCount=0,this.remainCount=0,this.callback=null,this.taskStartTime=0},Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t}();i.default=a,cc._RF.pop()},{}],ts:[function(t,e){"use strict";cc._RF.push(e,"aa1adBjcIlFxJ1Fm7Yqh9uQ","ts"),cc._RF.pop()},{}],ymt_enum:[function(t,e,i){"use strict";var o;cc._RF.push(e,"8a25eCjnORP76Oea0sh8YuP","ymt_enum"),Object.defineProperty(i,"__esModule",{value:!0}),i.privacy_type=i.PLATFORM=i.ad_native_state=i.ad_native_type=void 0,(o=i.ad_native_type||(i.ad_native_type={}))[o.banner=0]="banner",o[o.inner_interstitial=1]="inner_interstitial",o[o.interstitial=2]="interstitial",o[o.native_icon=3]="native_icon",function(t){t[t.none=0]="none",t[t.need_show=1]="need_show",t[t.show=2]="show",t[t.click=3]="click"}(i.ad_native_state||(i.ad_native_state={})),function(t){t[t.MI=0]="MI",t[t.OPPO=1]="OPPO",t[t.VIVO=2]="VIVO",t[t.CSJ=3]="CSJ"}(i.PLATFORM||(i.PLATFORM={})),function(t){t.user="user",t.privacy="privacy"}(i.privacy_type||(i.privacy_type={})),cc._RF.pop()},{}],ymt_local_datas:[function(t,e,i){"use strict";cc._RF.push(e,"a936axvpZhPrrFT08+5t2AD","ymt_local_datas"),Object.defineProperty(i,"__esModule",{value:!0}),i.YMT_LOCAL_DATAS=void 0,i.YMT_LOCAL_DATAS={adunit_banner:"",adunit_native_banner:"",adunit_video:"",adunit_native:"",adunit_intestital:"",showInteNormalRto:50,interTick:0,adunit_native_intestital:"",adunit_native_icon:"",adunit_portal:"",adunit_game_banner:"",adunit_custom_banner:"",adunit_custom_inter:""},cc._RF.pop()},{}],ymt_ui_add_icon:[function(t,e,i){"use strict";cc._RF.push(e,"a86b5YB2RBC76rMcJLO5jWZ","ymt_ui_add_icon");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("GameSys"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnAddIcon=null,e.btnWatchAd=null,e.innerNative=null,e.onSucc=null,e.onHide=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.node.zIndex=1e4},e.prototype.show=function(t,e){null==this.node.parent&&cc.director.getScene().addChild(this.node),this.onSucc=e,this.onHide=t},e.prototype.tapAddIcon=function(){var t=this;a.default.Ad().addDesktop(function(){t.btnAddIcon.active=!1,t.onSucc&&t.onSucc()})},e.prototype.tapClose=function(){this.node.destroy()},e.prototype.onDestroy=function(){this.onHide&&this.onHide()},e.prototype.onEnable=function(){var t=this;this.btnWatchAd.active=!1,a.default.Ad().showInterstitialNative(this.innerNative,function(){},function(){t.btnWatchAd.active=!0},function(){t.btnWatchAd.active=!1,a.default.Ad().showBanner()})},e.prototype.tapWatchAd=function(){a.default.Ad().clickNativeInnerInterstitial()},n([c(cc.Node)],e.prototype,"btnAddIcon",void 0),n([c(cc.Node)],e.prototype,"btnWatchAd",void 0),n([c(cc.Node)],e.prototype,"innerNative",void 0),n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{GameSys:"GameSys"}],ymt_ui_authorize:[function(t,e,i){"use strict";cc._RF.push(e,"d3ef3tG1TtCDoCrU/AsHRqy","ymt_ui_authorize");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("YmtUserData"),r=t("YmtConstant"),s=t("GameSys"),c=cc._decorator,l=c.ccclass;c.property;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onAgree=null,e.onRefuse=null,e}return o(e,t),e.prototype.show=function(t,e){this.node.parent||(this.onAgree=t,this.onRefuse=e,this.is_agree||!s.default.isShowAuthorize&&!s.default.isShenHe&&!s.default.isShieldArea?(this.onAgree&&this.onAgree(),this.destroy()):(cc.director.getScene().addChild(this.node),this.on_show()))},e.prototype.start=function(){this.node.zIndex=cc.macro.MAX_ZINDEX},e.prototype.on_show=function(){},e.prototype.onOpenPrivace=function(){s.default.Ad().openPrivaceUrl()},e.prototype.on_agree=function(){this.onAgree&&this.onAgree(),cc.sys.localStorage.setItem(a.default.uid+"privacy",this.get_time()),this.node.destroy()},e.prototype.on_refuse=function(){r.default.IS_GOOGLEPLAY&&(this.onRefuse&&this.onRefuse(),window.android.ExitGame()),this.node.destroy()},Object.defineProperty(e.prototype,"is_agree",{get:function(){var t=cc.sys.localStorage.getItem(a.default.uid+"privacy");return null!=t&&"null"!=t&&""!==t&&void 0!==t||(t=0),this.get_time()-t<10368e6},enumerable:!1,configurable:!0}),e.prototype.get_time=function(){return(new Date).getTime()},n([l],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",YmtConstant:"YmtConstant",YmtUserData:"YmtUserData"}],ymt_ui_banner:[function(t,e,i){"use strict";cc._RF.push(e,"ecd80tBt2dL0LO4vr67tUgW","ymt_ui_banner");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("ymt_enum"),r=t("GameSys"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.lb_title=null,e.lb_desc=null,e.ad_logo=null,e.img_icon=null,e.is_reprot_click=!1,e.onShow=null,e.onHide=null,e.has_click_warp=!1,e}return o(e,t),e.prototype.click_adv_warp=function(){this.report_click(),this.has_click_warp=!0},e.prototype.show=function(t,e,i){this.onShow=e,this.onHide=i,this.node&&cc.isValid(this.node)&&(this.node.parent=cc.director.getScene(),cc.game.addPersistRootNode(this.node),this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.active=!1),cc.isValid(this.node)&&!this.node.active&&(cc.winSize.width<=cc.winSize.height&&(this.node.scale=cc.winSize.width/this.node.width),this.set_default_pos(),this.on_show(t))},e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this)},e.prototype.update_view=function(){if(cc.isValid(this.node)&&this.node.activeInHierarchy){var t=r.default.Ad().getLocalNativeData(a.ad_native_type.banner);t?(this.native_data=t,this.refresh()):this.hide()}else this.hide()},e.prototype.on_show=function(t){this.native_data=t||r.default.Ad().getLocalNativeData(a.ad_native_type.banner),this.native_data?(this.is_reprot_click=!1,this.refresh()):this.hide()},e.prototype.refresh=function(){var t=this;this.lb_desc.string=this.native_data.desc||"",this.lb_title.string=this.native_data.title||"",this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",this.initAdIcon(this.native_data.imgUrlList[0]).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0,t.onShow&&t.onShow())},function(){return t.initAdIcon(t.native_data.iconUrlList[0])}).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0,t.onShow&&t.onShow())},function(){return t.update_view()}),this.report_show()},e.prototype.initAdIcon=function(t){var e=this;return new Promise(function(i,o){null!=t&&null!=t?cc.loader.load({url:t,type:"png"},function(t,n){if(cc.isValid(e.node,!0)){if(t)return o();e.img_icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),i()}}):o()})},e.prototype.on_click_adv2=function(){this.on_click_adv()},e.prototype.on_click_adv=function(){this.is_reprot_click||(this.is_reprot_click=!0,this.report_click())},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){this.native_data&&(r.default.Ad().reportAdClick(this.native_data),this.update_view())},e.prototype.report_show=function(){this.native_data&&r.default.Ad().reportAdShow(this.native_data)},e.prototype.hide=function(){this.node&&this.node.active&&(this.node.active=!1),this.on_hide()},e.prototype.on_hide=function(){this.onHide&&this.onHide()},e.prototype.set_default_pos=function(){this.node.x=0,this.node.y=-cc.winSize.height/2},e.prototype.onDisable=function(){this.unschedule(this.update_view)},e.prototype.onDestroy=function(){this.unschedule(this.update_view)},n([l(cc.Node)],e.prototype,"icon_close",void 0),n([l(cc.Label)],e.prototype,"lb_title",void 0),n([l(cc.Label)],e.prototype,"lb_desc",void 0),n([l(cc.Label)],e.prototype,"ad_logo",void 0),n([l(cc.Sprite)],e.prototype,"img_icon",void 0),n([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",ymt_enum:"ymt_enum"}],ymt_ui_click_box:[function(t,e,i){"use strict";cc._RF.push(e,"d3bd1nYsRJANKQa1iXgfb7y","ymt_ui_click_box");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("YmtUtils"),r=t("GameSys"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title_gxhd=null,e.title_zjd=null,e.btn_double=null,e.btn_get=null,e.btn_zbx=null,e.hand=null,e.proMask=null,e.bxAni=null,e.progress=0,e.showBanner=!1,e}return o(e,t),e.prototype.start=function(){this.btn_get.on(cc.Node.EventType.TOUCH_END,this.tapGet,this),this.btn_double.on(cc.Node.EventType.TOUCH_END,this.tapDoubleGet,this),this.btn_zbx.on(cc.Node.EventType.TOUCH_END,this.tapClickBtn,this)},e.prototype.show=function(t,e){null==this.node.parent&&(this.node.parent=cc.director.getScene(),this.node.zIndex=cc.macro.MAX_ZINDEX-1,this.onShow=t,this.onGet=e,this.on_show())},e.prototype.on_show=function(){r.default.Ad().hideBanner(),r.default.isShenHe||r.default.isShieldArea||r.default.adInfo.bannerMoveTime<=0?this.btn_zbx.y=-cc.winSize.height/2+300:this.btn_zbx.y=-cc.winSize.height/2+100,cc.winSize.width>cc.winSize.height?(this.proMask.parent.angle=-90,this.proMask.parent.x=0,this.proMask.parent.y=-150):(this.proMask.parent.angle=0,this.proMask.parent.x=-280,this.proMask.parent.y=0),this.setProgress(),this.onShow&&this.onShow()},e.prototype.tapClickBtn=function(){var t=this;this.progress>=.6?(this.progress+=.15,this.progress=Math.min(this.progress,.95),a.default.randomInt(1,10)>5&&!this.showBanner&&(r.default.isShenHe||r.default.isShieldArea||(r.default.Ad().showBanner(),this.scheduleOnce(function(){t.btn_zbx.y=-cc.winSize.height/2+300},r.default.adInfo.bannerMoveTime)),this.showBanner=!0,this.scheduleOnce(function(){t.title_gxhd.active=!0,t.btn_double.active=!0,t.btn_get.active=!0,t.title_zjd.active=!1,t.btn_zbx.active=!1,t.proMask.parent.active=!1},1))):this.progress+=.2,this.bxAni.play(),this.hand.active=!1,this.setProgress()},e.prototype.setProgress=function(){this.progress>1?this.progress=1:this.progress<0&&(this.progress=0),this.proMask.height=322*this.progress},e.prototype.onUpdate=function(){this.progress>0&&(this.progress-=.02,this.setProgress())},e.prototype.tapGet=function(){this.onGet&&this.onGet(!1),this.node.destroy()},e.prototype.tapDoubleGet=function(){var t=this;r.default.Ad().showVideo(function(e){e&&(t.onGet&&t.onGet(!0),t.node.destroy())})},n([l(cc.Node)],e.prototype,"title_gxhd",void 0),n([l(cc.Node)],e.prototype,"title_zjd",void 0),n([l(cc.Node)],e.prototype,"btn_double",void 0),n([l(cc.Node)],e.prototype,"btn_get",void 0),n([l(cc.Node)],e.prototype,"btn_zbx",void 0),n([l(cc.Node)],e.prototype,"hand",void 0),n([l(cc.Node)],e.prototype,"proMask",void 0),n([l(cc.Animation)],e.prototype,"bxAni",void 0),n([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",YmtUtils:"YmtUtils"}],ymt_ui_company:[function(t,e,i){"use strict";cc._RF.push(e,"3f761wciEVBaJhdfPtIZcKZ","ymt_ui_company");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("GameSys"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.copyright=null,e.compamy=null,e}return o(e,t),e.prototype.start=function(){this.node.zIndex=cc.macro.MAX_ZINDEX},e.prototype.show=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),cc.director.getScene().addChild(this.node),t&&(this.compamy.getComponent(cc.Label).string="\u8457\u4f5c\u6743\u4eba\uff1a"+t),e&&(this.copyright.getComponent(cc.Label).string="\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a"+e);var i=a.default.isShenHe||a.default.isShieldArea||a.default.showCompany;this.copyright.active=i&&t,this.compamy.active=i&&t},n([c(cc.Node)],e.prototype,"copyright",void 0),n([c(cc.Node)],e.prototype,"compamy",void 0),n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{GameSys:"GameSys"}],ymt_ui_gameLoading:[function(t,e,i){"use strict";cc._RF.push(e,"e6e88lrXddDb4LrJYYyA8RM","ymt_ui_gameLoading");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass;a.property;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.show=function(){cc.director.getScene().addChild(this.node)},e.prototype.start=function(){this.node.zIndex=cc.macro.MAX_ZINDEX},n([r],e)}(cc.Component);i.default=s,cc._RF.pop()},{}],ymt_ui_inner_interstitial:[function(t,e,i){"use strict";cc._RF.push(e,"ecda0RcA4hH0ZYfNLjLMeEP","ymt_ui_inner_interstitial");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("ymt_enum"),r=t("GameSys"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.lb_title=null,e.lb_desc=null,e.ad_logo=null,e.img_icon=null,e.click_back=void 0,e.has_click_warp=!1,e}return o(e,t),e.prototype.on_click_adv=function(){this.report_click()},e.prototype.click_adv_warp=function(){this.report_click(),this.has_click_warp=!0},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){this.native_data&&(this.click_back&&this.click_back(),r.default.Ad().reportAdClick(this.native_data),this.update_view())},e.prototype.report_show=function(){this.native_data&&r.default.Ad().reportAdShow(this.native_data)},e.prototype.show=function(t,e,i,o,n){this.node&&!this.node.parent&&(this.native_data=e,this.show_back=o||void 0,this.hide_back=n||void 0,this.click_back=i||void 0,this.node.active=!1,this.node.parent=t,this.set_default_pos(),this.on_show())},e.prototype.update_view=function(){var t=r.default.Ad().getLocalNativeData(a.ad_native_type.inner_interstitial);t&&cc.isValid(this.node,!0)&&this.node.activeInHierarchy&&(this.native_data=t,this.refresh())},e.prototype.report_click_update_view=function(t){this.node&&this.node.parent&&(this.native_data=t,this.refresh())},e.prototype.on_show=function(){this.icon_close.on(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.refresh()},e.prototype.refresh=function(){var t=this;this.lb_title.string=this.native_data.title||"",this.lb_desc.string=this.native_data.desc||"",this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",this.initAdIcon(this.native_data.imgUrlList[0]).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0,t.show_back&&t.show_back())},function(){return t.initAdIcon(t.native_data.iconUrlList[0])}).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0,t.show_back&&t.show_back())},function(){t.update_view()}),this.report_show()},e.prototype.initAdIcon=function(t){var e=this;return new Promise(function(i,o){null!=t&&null!=t?cc.loader.load({url:t,type:"png"},function(t,n){if(cc.isValid(e.node,!0)){if(t)return o();e.img_icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),i()}}):o()})},e.prototype.hide=function(){this.node&&this.node.parent&&(this.node.parent.removeChild(this.node),this.on_hide())},e.prototype.on_hide=function(){this.icon_close.off(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.hide_back&&this.hide_back()},e.prototype.set_default_pos=function(){var t=this.node.parent,e=t.width*(.5-t.anchorX),i=t.height*(.5-t.anchorY);this.node.position=cc.v3(e,i,0)},e.prototype.set_style_pos=function(){},e.prototype.onDisable=function(){this.hide_back&&this.hide_back(),this.hide_back=null,this.unschedule(this.update_view)},e.prototype.onDestroy=function(){this.hide_back&&this.hide_back(),this.hide_back=null,this.unschedule(this.update_view)},n([l(cc.Node)],e.prototype,"icon_close",void 0),n([l(cc.Label)],e.prototype,"lb_title",void 0),n([l(cc.Label)],e.prototype,"lb_desc",void 0),n([l(cc.Label)],e.prototype,"ad_logo",void 0),n([l(cc.Sprite)],e.prototype,"img_icon",void 0),n([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",ymt_enum:"ymt_enum"}],ymt_ui_interstitial:[function(t,e,i){"use strict";cc._RF.push(e,"17622/zunpG77E4oECrEfPa","ymt_ui_interstitial");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("ymt_enum"),r=t("GameSys"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.lb_title=null,e.lb_desc=null,e.ad_logo=null,e.img_icon=null,e.btn_check=null,e.easy_click=null,e.native_node=null,e}return o(e,t),e.prototype.start=function(){this.node.zIndex=10001},e.prototype.on_click_adv2=function(){this.easy_click.active=!1,this.has_easy_click=!0,this.report_click()},e.prototype.on_click_adv=function(){this.report_click()},e.prototype.on_click_close=function(){!r.default.isShenHe&&!r.default.isShieldArea&&r.default.adInfo.closeClickRto>=0&&100*Math.random()<=r.default.adInfo.closeClickRto&&!this.has_easy_click&&(this.easy_click.active=!1,this.report_click()),this.hide()},e.prototype.report_click=function(){if(this.native_data){r.default.Ad().reportAdClick(this.native_data);var t=r.default.Ad().getLocalNativeData(a.ad_native_type.interstitial);t&&cc.isValid(this.node,!0)?(this.native_data=t,this.refresh()):this.hide()}},e.prototype.report_show=function(){this.native_data&&r.default.Ad().reportAdShow(this.native_data)},e.prototype.show=function(t,e,i){this.node&&!this.node.parent&&(this.native_data=t,this.node.active=!1,this.node.parent=cc.director.getScene(),this.node.zIndex=1e5,this.show_back=e||void 0,this.hide_back=i||void 0,this.on_show())},e.prototype.on_show=function(){this.native_node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.icon_close.on(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.btn_check.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.easy_click.on(cc.Node.EventType.TOUCH_END,this.on_click_adv2,this),this.set_easy_click_size(),this.refresh()},e.prototype.update_view=function(){var t=r.default.Ad().getLocalNativeData(a.ad_native_type.interstitial);t&&cc.isValid(this.node,!0)&&this.node.activeInHierarchy&&(this.native_data=t,this.refresh())},e.prototype.refresh=function(){var t=this;this.lb_title.string=this.native_data.title||"",this.lb_desc.string=this.native_data.desc||"",this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",this.initAdIcon(this.native_data.imgUrlList[0]).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0,t.show_back&&t.show_back())},function(){return t.initAdIcon(t.native_data.iconUrlList[0])}).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0,t.show_back&&t.show_back())},function(){t.update_view()}),this.report_show(),this.has_easy_click=!1,this.set_easy_click_size()},e.prototype.initAdIcon=function(t){var e=this;return new Promise(function(i,o){null!=t&&null!=t?cc.loader.load({url:t,type:"png"},function(t,n){if(cc.isValid(e.node,!0)){if(t)return o();e.img_icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),i()}}):o()})},e.prototype.hide=function(){this.node&&this.node.parent&&(this.node.destroy(),this.on_hide())},e.prototype.on_hide=function(){this.native_node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.icon_close.off(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.btn_check.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.easy_click.off(cc.Node.EventType.TOUCH_END,this.on_click_adv2,this),this.hide_back&&this.hide_back()},e.prototype.set_easy_click_size=function(){this.easy_click.active=!1,!r.default.isShenHe&&!r.default.isShieldArea&&r.default.adInfo.forceClickRto>=0&&(r.default.adInfo.forceClickRto<=30?cc.winSize.width>cc.winSize.height?(this.easy_click.height=cc.winSize.height,this.easy_click.width=800):(this.easy_click.width=cc.winSize.width,this.easy_click.height=800):r.default.adInfo.forceClickRto<=60?cc.winSize.width>cc.winSize.height?(this.easy_click.height=cc.winSize.height,this.easy_click.width=800+(cc.winSize.width-800)/3):(this.easy_click.width=cc.winSize.width,this.easy_click.height=800+(cc.winSize.height-800)/3):(this.easy_click.height=cc.winSize.height,this.easy_click.width=cc.winSize.width),this.easy_click.active=!0)},e.prototype.onDisable=function(){this.hide_back&&this.hide_back(),this.hide_back=null},e.prototype.onDestroy=function(){this.hide_back=null},n([l(cc.Node)],e.prototype,"icon_close",void 0),n([l(cc.Label)],e.prototype,"lb_title",void 0),n([l(cc.Label)],e.prototype,"lb_desc",void 0),n([l(cc.Label)],e.prototype,"ad_logo",void 0),n([l(cc.Sprite)],e.prototype,"img_icon",void 0),n([l(cc.Node)],e.prototype,"btn_check",void 0),n([l(cc.Node)],e.prototype,"easy_click",void 0),n([l(cc.Node)],e.prototype,"native_node",void 0),n([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",ymt_enum:"ymt_enum"}],ymt_ui_native_icon:[function(t,e,i){"use strict";cc._RF.push(e,"95e071jN25J663u1huvfmaw","ymt_ui_native_icon");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("ymt_enum"),r=t("GameSys"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.native_node=null,e.img_icon=null,e.ad_logo=null,e.set_background_on_show(),e}return o(e,t),e.prototype.on_click_adv=function(){this.report_click()},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){this.native_data&&(r.default.Ad().reportAdClick(this.native_data),this.update_view())},e.prototype.report_show=function(){this.native_data&&r.default.Ad().reportAdShow(this.native_data)},e.prototype.show=function(t,e){this.node&&!this.node.parent&&t&&e&&(this.native_data=e,this.node.active=!1,this.node.parent=t,this.on_show())},e.prototype.update_view=function(){if(cc.isValid(this.node)&&this.node.activeInHierarchy){var t=r.default.Ad().getLocalNativeData(a.ad_native_type.native_icon);t&&(this.native_data=t,this.refresh())}},e.prototype.report_click_update_view=function(t){this.node&&this.node.parent&&(this.native_data=t,this.refresh())},e.prototype.on_show=function(){this.icon_close.on(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.refresh()},e.prototype.refresh=function(){var t=this;this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",this.initAdIcon(this.native_data.imgUrlList[0]).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0)},function(){return t.initAdIcon(t.native_data.iconUrlList[0])}).then(function(){cc.isValid(t.node,!0)&&(t.node.active=!0)},function(){t.update_view()}),this.report_show()},e.prototype.initAdIcon=function(t){var e=this;return new Promise(function(i,o){null!=t&&null!=t?cc.loader.load({url:t,type:"png"},function(t,n){if(cc.isValid(e.node,!0)){if(t)return o();e.img_icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),i()}}):o()})},e.prototype.hide=function(){this.node&&this.node.parent&&(this.node.parent.removeChild(this.node),this.on_hide())},e.prototype.on_hide=function(){this.icon_close.off(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this)},e.prototype.set_default=function(){},e.prototype.set_background_on_show=function(){},n([l(cc.Node)],e.prototype,"icon_close",void 0),n([l(cc.Node)],e.prototype,"native_node",void 0),n([l(cc.Sprite)],e.prototype,"img_icon",void 0),n([l(cc.Label)],e.prototype,"ad_logo",void 0),n([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{GameSys:"GameSys",ymt_enum:"ymt_enum"}],ymt_ui_privacy:[function(t,e,i){"use strict";cc._RF.push(e,"827f1gqTDRBaql4DPcBVJOJ","ymt_ui_privacy");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("ymt_enum"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.textArea=null,e.toggleContainer=null,e.loading=null,e.tabType=null,e.privacyCon=null,e}return o(e,t),e.prototype.show=function(t){void 0===t&&(t=a.privacy_type.user),this.node.parent||(this.tabType=t,cc.director.getScene().addChild(this.node),this.on_show())},e.prototype.hide=function(){this.node.destroy()},e.prototype.start=function(){var t=this;this.node.zIndex=cc.macro.MAX_ZINDEX,this.loading.active=!0,cc.loader.loadRes("hs_cfg/privacy",cc.JsonAsset,function(e,i){t.loading.active=!1,e||(t.privacyCon=i.json,t.change_tab(t.tabType))})},e.prototype.on_show=function(){this.set_frame_roi(),this.change_tab(this.tabType)},e.prototype.set_frame_roi=function(){if(cc.winSize.width<=cc.winSize.height)this.bg.width=521,this.bg.height=717;else{this.bg.width=.7*cc.winSize.width,this.bg.height=.7*cc.winSize.height;var t=.15*cc.winSize.height,e=this.bg.getComponent(cc.Widget);e.verticalCenter=t<=200?t-200:0,e.updateAlignment()}},e.prototype.on_change_tab=function(t,e){this.tabType!=e&&this.change_tab(e)},e.prototype.change_tab=function(t){this.tabType=t;for(var e=0,i=this.toggleContainer.toggleItems;e<i.length;e++){var o=i[e];o.name.indexOf(t)>=0&&o.check()}if(this.privacyCon){var n=this.textArea.content.getComponent(cc.Label);this.privacyCon.hasOwnProperty(this.tabType)?n.string=this.privacyCon[this.tabType]:n.string="",this.textArea.scrollTo(cc.v2(0,1),0)}},e.prototype.onDisable=function(){},n([c(cc.Node)],e.prototype,"bg",void 0),n([c(cc.ScrollView)],e.prototype,"textArea",void 0),n([c(cc.ToggleContainer)],e.prototype,"toggleContainer",void 0),n([c(cc.Node)],e.prototype,"loading",void 0),n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{ymt_enum:"ymt_enum"}],ymt_ui_toast:[function(t,e,i){"use strict";cc._RF.push(e,"db7f3ILZf5NBLTRUHpyWFeU","ymt_ui_toast");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.tips_box=null,e}return o(e,t),e.prototype.show=function(t){if(this.node&&!this.node.parent){var e=cc.macro.MAX_ZINDEX;this.node.parent=cc.director.getScene(),this.node.zIndex=e,this.on_show(t)}},e.prototype.on_hide=function(){},e.prototype.on_show=function(t){this.show_tips(t)},e.prototype.show_tips=function(t){var e=this;this.label.string=t,this.tips_tween=null,this.tips_tween=cc.moveBy(1.5,cc.v2(0,150)).easing(cc.easeSineIn());var i=cc.callFunc(function(){cc.isValid(e)&&e.hide()});this.tips_box.runAction(cc.sequence(this.tips_tween,i))},e.prototype.set_default_pos=function(){},e.prototype.set_style_pos=function(){},e.prototype.hide=function(){this.node&&this.node.parent&&(this.tips_box.y=0,this.node.parent.removeChild(this.node),this.on_hide())},n([s(cc.Label)],e.prototype,"label",void 0),n([s(cc.Node)],e.prototype,"tips_box",void 0),n([r],e)}(cc.Component);i.default=c,cc._RF.pop()},{}],ymt_ui_watch_video:[function(t,e,i){"use strict";cc._RF.push(e,"b9656gK0QNJmY/aXuVoNa98","ymt_ui_watch_video");var o=__extends,n=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var a=t("GameSys"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnWatchAd=null,e.innerNative=null,e}return o(e,t),e.prototype.start=function(){this.node.zIndex=1e4},e.prototype.show=function(t){cc.isValid(this.node,!0)&&null!=this.node.parent||(cc.director.getScene().addChild(this.node),this.onSucc=t)},e.prototype.tapWatchVideo=function(){this.onSucc&&this.onSucc(),this.node.destroy()},e.prototype.tapClose=function(){this.node.destroy()},e.prototype.onEnable=function(){var t=this;this.btnWatchAd.active=!1,this.btnWatchAd.on(cc.Node.EventType.TOUCH_END,function(){a.default.Ad().clickNativeInnerInterstitial()},this),a.default.Ad().showInterstitialNative(this.innerNative,function(){},function(){t.btnWatchAd.active=!0},function(){t.btnWatchAd.active=!1,a.default.Ad().showBanner()})},n([c(cc.Node)],e.prototype,"btnWatchAd",void 0),n([c(cc.Node)],e.prototype,"innerNative",void 0),n([s],e)}(cc.Component);i.default=l,cc._RF.pop()},{GameSys:"GameSys"}],zs:[function(t,e,i){"use strict";cc._RF.push(e,"90820TtM3dGuYuEswhO0jAq","zs");var o=__decorate;Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,a=n.ccclass;n.property;var r=function(){function t(){}return t.init=function(t){var e;this.miniprogram_id=t.miniId||0,this.openid=this.uid=t.openid||"";var i=wx.getSystemInfoSync(),o=((e=wx.getLaunchOptionsSync()).referrerInfo||{}).appId,n=void 0===o?"":o,a=i.version,r=void 0===a?"":a,s=e.query;this.client=i.brand+"-"+i.model,this.inviter_id=s.inviter_id||"",this.channel_id=s.channel_id||"",this.share_id=s.share_id||0,this.scene=e.scene||0,this.appid=n,this.version=r,this.today_first_scene="",this.reg_channel_id="",this.reg_time=0,this.sdkversion="2.0.0",this.userInit()},t.checkInitComplete=function(){return!(!this.miniprogram_id||!this.openid)||(console.error("\u521d\u59cb\u5316\u5931\u8d25,\u8bf7\u586b\u5165\u6e38\u620fID\u4ee5\u53caopenid"),!1)},t.userInit=function(){var t=this;if(this.checkInitComplete()){var e={miniprogram_id:this.miniprogram_id,uid:this.uid,openid:this.openid,scene:this.scene,share_id:this.share_id||0,channel_id:this.channel_id,appId:this.appid,version:this.version,inviter_id:this.inviter_id,client:this.client,sdk_version:this.sdkversion};this.request("/Stat/Index/init",e,function(e){t.reg_channel_id=e.data.channel_id,t.today_first_scene=e.data.scene,t.reg_time=e.data.reg_time})}},t.eventStat=function(){},t.boxClick=function(t){if(this.checkInitComplete()){var e=t.id;if(!e)return void console.error("\u7edf\u8ba1->\u8df3\u8f6cID\u4e3a\u7a7a");var i={id:e,miniprogram_id:this.miniprogram_id,openid:this.openid,channel_id:this.reg_channel_id,scene:this.today_first_scene,images_id:t.images_id||0,reg_time:this.reg_time,sdk_version:this.sdkversion};this.request("/Stat/Index/click",i,function(t){console.log(t.msg)})}},t.boxStat=function(t){if(this.checkInitComplete()){var e=t.id;if(!e)return void console.error("\u7edf\u8ba1->\u8df3\u8f6cID\u4e3a\u7a7a");var i={id:e,miniprogram_id:this.miniprogram_id,openid:this.openid,channel_id:this.reg_channel_id,scene:this.today_first_scene,images_id:t.images_id||0,reg_time:this.reg_time,sdk_version:this.sdkversion};this.request("/Stat/Index/box",i,function(t){console.log(t.msg)})}},t.formatURL=function(t){return"https://log.gzgame99.cn"+t},t.request=function(t,e,i,o){void 0===o&&(o=!1);var n=this;t=this.formatURL(t);var a=e,r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(r.status>=200&&r.status<400&&4==r.readyState){var t=r.responseText,e=n.dealWithHttpResponse(t);i&&i(e)}},r.open("POST",t,!0),o)r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(a));else{var s="";for(var c in a)"?"!=s&&""!=s&&(s+="&"),s+=c+"="+encodeURIComponent(a[c]);r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),r.send(s)}console.log("\u7edf\u8ba1\u8bf7\u6c42\u53d1\u9001Https\u6570\u636e",a)},t.dealWithHttpResponse=function(t){if("fail"!=t)return JSON.parse(t);console.error("http\u8bf7\u6c42\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8bf7\u6c42\u53c2\u6570")},t.miniprogram_id=null,t.openid=null,t.uid=null,t.client=null,t.inviter_id=null,t.channel_id=null,t.share_id=null,t.scene=null,t.appid=null,t.version=null,t.today_first_scene=null,t.reg_channel_id=null,t.reg_time=null,t.sdkversion=null,o([a("zs")],t)}();i.default=r,cc._RF.pop()},{}]},{},["ActionItem","AdBanner","AdInterstitialView","AdMgr","AndroidAd","AudioManager","AudioUtil","AutoLocalizeSprites","BackgroundFix","BackgroundFixComponent","BaseComponent","BaseConstant","BaseDialog","BaseGameSys","BasePage","BaseUI","BaseUserData","BoxUI","BoxView","BtnMore","BtnRedPacket","CYMiniplayAd","CenterLayout","ChallengeUI","ChestUI","CoinSupplyUI","ComCurrency","ComDialog","ComMood","ComScrollSele","ComTakeout","ComToggle","CurrencyUI","DailyResultUI","DailyTZUI","DateItem","DialoguePanel","Enum","ExitUI","ExportItem","FailUI","FirstLoad","FirstTipsUI","GDGameAd","GameConst","GameCtrl","GameData","GameEnums","GameEvents","GamePixAd","GameServerConf","GameSys","GameUI","GlobalExtentions","GoodsItem","GooglePlayAd","GridRecommendView","GrillItem","HgAd","HippooboxAd","HomeView","HttpManager","InitMgr","Interface","JoliboxAd","KSAd","LevelUI","List","ListItem","LoadSubpackage","LoadingUI","LocalizeImage","LocalizeLabel","LocalizeMgr","LoginRewardUI","LostUI","LuckyGiftUI","MZAd","Main","MainConfig","MainUI","MiApkAd","MoreGameView","NodeMgr","ObtainUI","OppoAd","PiggyBankUI","PlatformAdManager","PoolMgr","PropRewardUI","QRCodeUI","RankItem","RankUI","ReadyBtn","ReadyUI","RedPacketView","RedPoint","RemindMgr","ResMgr","ResultUI","RewardUI","RuStoreAndroidAd","SDKConfig","SDKEnum","SDKInterface","SDKMgr","SettingUI","ShopItem","SignView","Singleton","SkinItem","SkinRewardUI","SkinUI","SpineMgr","SpriteMgr","StrengthUI","SubContextView","TJ","TTAd","TakeoutItem","TakeoutUI","TaskItem","TaskUI","TimeMgr","Tips","TransitionUI","TurntableUI","TweenMgr","UCAd","UGGameAd","UIMgr","Utils","VIVOAd","VidMateH5Ad","VideoRecommendView","VideoView","ViewMgr","WaitUI","WinUI","WxAd","WxMgr","WxNetMgr","XDAD","XDADpublic","XiaoMiG426Ad","XiaoMiH5Ad","Y8GameAd","YmtAdManager","YmtConstant","YmtLog","YmtStringUtil","YmtUserData","YmtUtils","configs","mTimer","ymt_enum","ymt_local_datas","ymt_ui_add_icon","ymt_ui_authorize","ymt_ui_banner","ymt_ui_click_box","ymt_ui_company","ymt_ui_gameLoading","ymt_ui_inner_interstitial","ymt_ui_interstitial","ymt_ui_native_icon","ymt_ui_privacy","ymt_ui_toast","ymt_ui_watch_video","zs","ts"]);